(function(f) {
    var c = window.AmazonUIPageJS || window.P,
        g = c._namespace || c.attributeErrors,
        a = g ? g("PersonalizationSharedMobileExperimentJS") : c;
    a.guardFatal ? a.guardFatal(f)(a, window) : a.execute(function() { f(a, window) }) })(function(f, c, g) {
    f.when("jQuery", "A").register("p13n-sc-grid-four-pack", function(a, h) {
        function g(d, p) {
            var b = this;
            p ? (b.$faceouts = a(d), b.$container = a("<div></div>"), b.$container.data("reftag-prefix", b.$faceouts.eq(0).data("reftag-prefix"))) : (b.$container = a(d), b.$faceouts = b.$container.find(".p13n-sc-grid-four-pack-faceout"));
            if (b.$container.attr("p13n-sc-grid-four-pack-initialized")) return !1;
            b.$container.attr("p13n-sc-grid-four-pack-initialized", !0);
            b.$images = b.$faceouts.find(".p13n-sc-grid-four-pack-faceout-image");
            b.reftagPrefix = b.$container.data("reftag-prefix");
            b.debug = b.$container.data("debug") || "";
            b.loaded = !1;
            b.$images.load(function(d) { b.layoutImage(a(d.target)) });
            h.on.orientationchange(function() { b.layoutAllImages() });
            b.fetchData()
        }
        g.prototype = {
            fetchData: function() {
                var d = this;
                h.ajax("/gp/p13n-mobile/four-pack", { method: "get", params: d.debug ? { debug: d.debug } : {}, success: function(a) { d.handleAjaxComplete(a) }, error: function() { d.handleAjaxComplete(null) } })
            },
            handleAjaxComplete: function(d) {
                if (d && 4 === d.length) {
                    for (var a = 0; 4 > a; a++) this.applyData(d[a], this.$faceouts.eq(a));
                    this.loaded = !0 } else d = c.ue && c.ue.count || function() {}, d("p13n:sc:four-pack:network-failure", (d("p13n:sc:four-pack:network-failure") || 0) + 1) },
            applyData: function(d, a) {
                var b = a.find(".p13n-sc-grid-four-pack-faceout-link"),
                    c = a.find(".p13n-sc-grid-four-pack-faceout-title"),
                    f = a.find(".p13n-sc-grid-four-pack-faceout-image");
                b.attr("href", this.generateOverflowURL(d, a));
                c.html(d.truncatedTitle);
                f.attr("src", d.imageURL)
            },
            generateOverflowURL: function(d, c) {
                var b = a.param({ ref: this.reftagPrefix + "_l_of_" + d.type + "_" + d.reftagID, reftagPrefix: this.reftagPrefix, title: d.title, ie: "UTF8" }),
                    b = b + ("&asins=" + d.asins.join(","));
                return "/gp/p13n-mobile/overflow?" + b },
            layoutAllImages: function() {
                var d = this;
                d.loaded && d.$faceouts.each(function(c, b) { d.layoutImage(a(b).find(".p13n-sc-grid-four-pack-faceout-image")) }) },
            layoutImage: function(d) {
                var a = d.get(0).naturalWidth,
                    b = d.get(0).naturalHeight,
                    c = d.parent(),
                    f = c.width(),
                    m = c.height(),
                    e = a / b > f / m,
                    n;
                a < f || b < m ? (n = a, a = b) : (n = e ? m / b * a : c.width(), a = e ? c.height() : f / a * b);
                d.css({ width: n, height: a, left: (f - n) / 2, top: (m - a) / 2 });
                setTimeout(function() { d.closest(".p13n-sc-grid-four-pack-faceout-link").animate({ opacity: 1 }, 300, "linear") }, 500 * Math.random()) }
        };
        f.when("afterReady").execute("p13n-sc-grid-four-pack:init", function() {
            if (a(".p13n-sc-grid-four-pack-gateway-weblab").length) {
                var d = a(".p13n-sc-grid-four-pack-faceout");
                4 === d.length && new g(d, !0)
            } else a(".p13n-sc-grid-four-pack").each(function(a, d) { new g(d, !1) })
        })
    })
});
/* ******** */
(function(k) {
    var n = window.AmazonUIPageJS || window.P,
        t = n._namespace || n.attributeErrors,
        b = t ? t("P13NSharedSitewideJS") : n;
    b.guardFatal ? b.guardFatal(k)(b, window) : b.execute(function() { k(b, window) }) })(function(k, n, t) {
    (function(b) {
        k.register("p13n-sc-math", function() {
            return Math });
        k.register("p13n-sc-document", function() {
            return b });
        k.register("p13n-sc-window", function() {
            return n });
        k.register("p13n-sc-undefined", function() {});
        var f = function() {
                return "undefined" !== typeof b.hidden ? function() {
                        return b.hidden } :
                    "undefined" !== typeof b.msHidden ? function() {
                        return b.msHidden } : "undefined" !== typeof b.webkitHidden ? function() {
                        return b.webkitHidden } : function() {
                        return !1 }
            }(),
            l = function() {
                return n.P && n.P.AUI_BUILD_DATE };
        l() ? (k.when("jQuery").register("p13n-sc-jQuery", function(b) {
            return b }), k.when("ready").register("p13n-sc-ready", function() {})) : n.amznJQ && (n.amznJQ.available("jQuery", function() { k.register("p13n-sc-jQuery", function() {
                return n.amznJQ.jQuery }) }), n.amznJQ.onReady("jQuery", function() {
            k.register("p13n-sc-ready",
                function() {})
        }), n.amznJQ.available("amazonShoveler", function() { k.register("p13n-sc-amznJQ-shoveler", function() {}) }));
        k.register("p13n-sc-util", function() {
            var b = n.ueLogError;
            "function" !== typeof b && (b = function(b, f) {
                if (f && f.message) throw Error(f.message);
                if (b && b.message) throw Error(b.message); });
            var g = function(f, g) { b({ logLevel: f, attribution: "P13NSharedSitewideJS", message: "[p13n-sc] " + g }) };
            return {
                constants: { DATA_ATTR_P13N_FEATURE_NAME: "p13nFeatureName" },
                count: n.ue && n.ue.count || function() {},
                isAUI: l,
                isPageHidden: f,
                log: { warn: function(b) { g("WARN", b) }, error: function(b) { g("ERROR", b) } },
                parseInt: function(b) {
                    return parseInt(b, 10) }
            }
        })
    })(document);
    k.when("p13n-sc-jQuery", "p13n-sc-window", "p13n-sc-util", "p13n-sc-undefined").register("p13n-sc-heartbeat", function(b, f, l, h) {
        var g = f.clearInterval,
            m = {},
            k, e, c = function() {
                if (!k) {
                    var b = f.setInterval(function() {
                        if (b !== k) g(b);
                        else if (!l.isPageHidden()) {
                            var c = (new Date).getTime();
                            (!e || 200 < c - e) && a();
                            e = (new Date).getTime() } }, 200);
                    k = b } },
            a = function() { b.each(m, function(a, b) { b.call(f) }) };
        return { subscribe: function(a, b) { m[a] || (m[a] = b, c()) }, unsubscribe: function(a) { m[a] && delete m[a];
                a = !0;
                for (var b in m) m.hasOwnProperty(b) && (a = !1);
                a && (g(k), k = h) } }
    });
    k.when("p13n-sc-jQuery", "p13n-sc-heartbeat").register("p13n-sc-call-on-visible", function(b, f) {
        var l = [],
            h = b(n),
            g = function() {
                for (var b = h.scrollTop() + h.height(), g = h.scrollLeft() + h.width(), e = l.length - 1; 0 <= e; e--) {
                    var c = l[e],
                        a = c.callback,
                        d = c.$element,
                        q = c.distanceY,
                        c = c.distanceX;
                    if (0 === d.parents("body").size()) l.splice(e, 1);
                    else if (!d.is(":hidden")) {
                        var k =
                            d.offset();
                        b - q > k.top && g - c > k.left && (l.splice(e, 1), a.call(null, d[0]))
                    }
                }
                0 === l.length && f.unsubscribe("p13n-sc-call-on-visible")
            };
        return { register: function(h, k, e) {
                var c = e && "undefined" !== typeof e.distance ? e.distance : 0,
                    a = e && "undefined" !== typeof e.distanceY ? e.distanceY : c,
                    d = e && "undefined" !== typeof e.distanceX ? e.distanceX : 0;
                b(h).each(function() { l.push({ $element: b(this), callback: k, distanceY: a, distanceX: d }) });
                f.subscribe("p13n-sc-call-on-visible", g) } }
    });
    k.when("A", "jQuery", "p13n-sc-call-on-visible", "p13n-sc-util",
        "p13n-sc-math").register("p13n-sc-view-trigger", function(b, f, l, h, g) {
        var m = function(e) {
                var c = f(e);
                e = c.attr("data-params");
                var a = c.attr("data-url");
                if (e && a) { e = b.parseJSON(e);
                    var d = c.offset(),
                        c = [d.top, d.left, c.height(), f(n).width()];
                    e.elementRect = c.join(",");
                    var h = 0,
                        m = { cache: !0, crossDomain: !1, data: f.param(e, !1), error: function(a) { a = a.status || 0;
                                3 <= h || 400 <= a && 500 > a || setTimeout(l, 200 * g.pow(2, h)) }, global: !1, url: a },
                        l = function() { h += 1;
                            f.ajax(m) };
                    l() } },
            p = function(e) {
                var c = f(e);
                if (1 === c.size()) {
                    var a = c.attr("data-params"),
                        a = a ? b.parseJSON(a) : {};
                    if (!0 === a.allowEmpty || 0 !== f.trim(c.text()).length) {
                        var d = c.height();!0 !== a.allowEmpty && 5 > d || (d = 0, "number" === typeof a.distance && (d = a.distance), c.attr("data-p13n-sc-vt-initialized") || (c.attr("data-p13n-sc-vt-initialized", !0), l.register(e, function() { m(e) }, { distance: d }))) }
                }
            };
        h = function() { b.each(f(".p13n-sc-vt:not([data-p13n-sc-vt-initialized])"), function(b) { p(b) }) };
        k.execute(h);
        k.when("afterReady").execute("p13n-sc-view-trigger:init", h);
        return { initializeElement: p }
    });
    k.when("p13n-sc-jQuery",
        "p13n-sc-util", "p13n-sc-window", "p13n-sc-document", "p13n-sc-ready").register("p13n-sc-logger", function(b, f, l, h) {
        function g(a) {
            return a.join("") }

        function m(a, d) {
            var c = a.attr(d),
                e = {};
            c !== t && null !== c && (e = "undefined" !== typeof b.parseJSON ? b.parseJSON(c) : eval("(" + c + ")"));
            return e }

        function k(a, d) {
            for (var c = [a.widget, ":"], e = 0; e < a.asins.length; e++) {
                var f = a.asins[e];
                c.push(f.asin, "@");
                b.each(f, function(a, b) { "asin" !== a && c.push(a, "=", b, "|") });
                c.splice(c.length - 1, 1);
                c.push(",") }
            0 < a.asins.length && c.splice(c.length -
                1, 1);
            d && (c.push(":", "action=", a.action), b.each(a.meta, function(a, b) { c.push(",", a, "=", b) }));
            return g(c)
        }

        function e(a, c) {
            var d = m(b(c), "data-p13n-asin-metadata");
            if (d && d.asin) {
                var e = d.asin,
                    f = m(b(a), "data-p13n-asin-metadata");
                f && b.extend(!0, d, f[e]);
                return d } }

        function c(a, c) {
            var e = new Image;
            f.count("p13n:logger:attempt", 1);
            e.onerror = function() { d++;
                f.count("p13n:logger:error", 1) };
            e.src = g(["https:" === h.location.protocol ? "https://" : "http://", l.ue_furl || "fls-na.amazon.com", "/1/", "p13n-shared-components", "/1/OP/p13n/",
                c, g(["?", b.param(m(b(a.featureElement), "data-p13n-global"))])
            ])
        }

        function a() {
            return 3 < d ? (q || (f.count("p13n:logger:abort", 1), q = !0), !0) : !1 }
        var d = 0,
            q = !1,
            n = {},
            v = {},
            u = {
                logAction: function(d) {
                    if (!a())
                        if ("featureElement" in d)
                            if ("action" in d) {
                                var h = b(d.featureElement);
                                d.widgetViewport && b(d.widgetViewport);
                                d.asins = b.map(b(d.featureElement).find(".p13n-asin").filter(":visible"), function(a) {
                                    if (!(0 > b(a).offset().left || b(a).offset().left > h.width())) return e(h, a) });
                                d.meta = d.meta || {};
                                var l = m(h, "data-p13n-feature-metadata");
                                b.extend(!0, d.meta, l);
                                d.widget = h.attr("data-p13n-feature-name");
                                d.widget in n || (n[d.widget] = {});
                                if (0 !== d.asins.length) {
                                    for (var l = [], q = 0; q < d.asins.length; q++) d.asins[q].asin in n[d.widget] || (n[d.widget][d.asins[q].asin] = !0, l.push(d.asins[q]));
                                    d.logOnlyOnNew && 0 === l.length || (d.logOnlyNew && 0 < l.length && (d.asins = l), l = g(["action/", g([d.widget, "_:", d.action, "@v=", d.eventtime || 0, ",impressed@v=", d.asins.length]), "/", k(d, !0)]), d.replicateAsinImpressions && (q = g(["asin/", k(d, !1)]), l = g(["batch/", l, "$", q])), c(d,
                                        l))
                                }
                            } else f.log.warn("action missing in eventData for logAction");
                    else f.log.warn("featureElement missing in eventData for logAction")
                },
                logAsyncAction: function(a) {
                    var d = (new Date).getTime(),
                        c = "number" === typeof a.initialDelay ? a.initialDelay : 400,
                        e = "number" === typeof a.timeout ? a.timeout : 5E3,
                        f = b(a.featureElement);
                    a.widget = f.attr("data-p13n-feature-name");
                    a.widget in v && l.clearTimeout(v[a.widget]);
                    var g = function() {
                        var b = a.isEventComplete(),
                            c = (new Date).getTime();
                        c - d < e && !b ? v[a.widget] = l.setTimeout(g, 150) :
                            (b || ("meta" in a || (a.meta = {}), a.meta.err = "notfinished"), a.eventtime = c - d, delete v[a.widget], u.logAction(a))
                    };
                    v[a.widget] = l.setTimeout(g, c)
                },
                eventPending: function(a) {
                    return b(a).attr("data-p13n-feature-name") in v },
                impressAsin: function(d) {
                    if (!a())
                        if ("featureElement" in d)
                            if ("faceoutElement" in d) {
                                var h = b(d.faceoutElement),
                                    m = b(d.featureElement);
                                d.widget = m.attr("data-p13n-feature-name");
                                d.asins = [e(m, h)];
                                h = g(["asin/", k(d, !1)]);
                                c(d, h) } else f.log.warn("faceoutElement missing in eventData for logAction");
                    else f.log.warn("featureElement missing in eventData for logAction") }
            };
        return u
    });
    k.when("jQuery", "A", "p13n-sc-call-on-visible", "p13n-sc-logger", "ready").register("p13n-sc-faceout-logger", function(b, f, l, h) {
        var g = function(f, g) {
            var e = b(f),
                c = b(g);
            1 !== e.length || e.attr("data-p13n-sc-fl-initialized") || (e.attr("data-p13n-sc-fl-initialized", !0), l.register(e, function() { h.impressAsin({ featureElement: c, faceoutElement: e }) })) };
        f.on("p13n:faceoutsloaded", function(f) { b(f).find(".p13n-asin:not([data-p13n-sc-fl-initialized])").each(function(b, e) { g(e, f) }) }) });
    k.when("A", "jQuery").register("p13n-sc-lazy-image-loader",
        function(b, f) {
            return { loadImages: function(l) { b.executeDeferred();
                    l.find(".p13n-sc-lazy-loaded-img").each(function(h, g) {
                        var l = f(g),
                            k = l.find(".a-dynamic-image");
                        k.load(function() { l.removeClass("p13n-sc-lazy-loaded-img") });
                        b.loadDynamicImage(k) }) } } });
    k.when("p13n-sc-jQuery", "p13n-sc-util", "p13n-sc-math").register("p13n-sc-line-truncator", function(b, f, l) {
        function h(a) {
            this.$element = a;
            this.$experimentElement = b("<div>").addClass("p13n-sc-offscreen-truncate");
            this.maxRows = a.attr("data-rows");
            this.lineHeight =
                this.getLineHeight();
            this.maxRows ? this.lineHeight || f.log.error("Truncation element does not have a line height or it is zero") : f.log.error("Truncation element missing necessary line number data")
        }
        var g = /(?=[ \-\/])/,
            m = /(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,
            p = /[^\/\-\[\]():\s]/;
        h.prototype.truncate = function() {
            var a = this.$element.html(),
                d = "true" === this.$element.attr("data-truncate-mix-weblab"),
                c = this.$element.hasClass("p13n-sc-truncated-hyphen"),
                a = b.trim(a);
            c && (a = e(a, this.$element, d ? m : this.getTokenSeparatorRegex()));
            this.$element.append(this.$experimentElement);
            this.checkLineFit(a) ? (this.$experimentElement.remove(), c && this.$element.html(a)) : ((d = this.truncateByToken(a, d)) ? (this.$element.html(d), this.$element.attr({ title: a })) : f.log.error("Unable to successfully truncate line " + a), this.$experimentElement.remove())
        };
        h.prototype.getLineHeight = function() {
            var a = this.$element.html();
            this.$element.html("&hellip;");
            var b = this.$element.innerHeight();
            this.$element.html(a);
            return b
        };
        h.prototype.checkLineFit = function(a) { this.$experimentElement.html(a);
            a = this.$experimentElement.get(0).clientHeight / this.lineHeight;
            return l.round(a) <= this.maxRows };
        h.prototype.truncateByToken = function(a, b) {
            for (var c = a.split(b ? m : this.getTokenSeparatorRegex()), e = 1, f = c.length, g, h, k = 0; e !== f;)
                if (g = l.floor((f + e) / 2), h = c.slice(0, g).join("") + "&hellip;", this.checkLineFit(h)) {
                    if (1 >= f - g) {
                        for (k = g; 0 < k && !p.test(c[k - 1]);) k--;
                        break }
                    e = g } else f = g;
            if (0 !==
                k) return c.slice(0, k).join("") + "&hellip;"
        };
        h.prototype.getTokenSeparatorRegex = function() {
            return this.$element.attr("data-truncate-by-character") ? "" : g };
        var e = function(a, d, c) {
                a = a.split(c);
                var e = l.floor(d.width() / parseInt(d.css("font-size"), 10)),
                    f = function(a) { a = b("<div>").addClass("p13n-sc-offscreen-truncate").css("overflow", "hidden").text(a).appendTo(d);
                        var c = a[0].clientWidth >= a[0].scrollWidth;
                        a.remove();
                        return c },
                    g = function(a) {
                        var d = a.length - e;
                        b.trim(a).length > e && !f(a) && (a = b.map(a, function(a, b) {
                            return b >
                                e && b <= d && p.test(a) ? "&shy;" + a : a
                        }));
                        return a
                    };
                a = b.map(a, function(a) {
                    return g(a) });
                return a.join("")
            },
            c = function() {};
        k.when("A").execute("trigger-linestruncated", function(a) { c = function() { a.trigger("p13n:linestruncated") } });
        return {
            truncateLines: function(a) {
                a.find(".p13n-sc-truncate:visible, .p13n-sc-truncate-medium:visible").each(function() {
                    var a = new h(b(this));
                    a && (a.truncate(), b(this).addClass("p13n-sc-truncated").removeClass("p13n-sc-truncate p13n-sc-truncate-medium"), b(this).removeClass(function(a,
                        b) {
                        return (b.match(/p13n-sc-line-clamp-\d/g) || []).join(" ") }))
                });
                c()
            }
        }
    });
    k.when("A", "jQuery", "p13n-sc-logger", "p13n-sc-util").register("p13n-sc-list-logger", function(b, f, l, h) { b.on("p13n-sc-list-log", function(b, h) { l.logAction(f.extend(!0, {}, { featureElement: b, logOnlyOnNew: !1, logOnlyNew: !0, replicateAsinImpressions: !0 }, { action: h })) }) });
    k.when("jQuery", "A", "p13n-sc-call-on-visible", "p13n-sc-math", "p13n-sc-window", "p13n-sc-faceout-logger", "p13n-sc-lazy-image-loader", "p13n-sc-line-truncator").register("p13n-sc-carousel",
        function(b, f, l, h, g, m, p, e) {
            function c(a) {
                this.$container = b(a);
                this.$content = this.$container.find(".p13n-sc-carousel-content");
                if (this.$container.attr("data-p13n-sc-carousel-initialized")) return !1;
                this.$container.attr("data-p13n-sc-carousel-initialized", !0);
                this.devicePixelRatio = g.devicePixelRatio || 1;
                this.itemWidth = this.originalItemWidth = this.$content.children(":first").outerWidth();
                this.maxItemHeight = 0;
                this.asins = (a = this.$container.data("asins")) ? a.toString().split(",") : [];
                this.asinIndex = this.$container.data("asin-index");
                this.ajaxUrl = this.$container.data("ajax-url");
                this.lastPositionedCellIndex = 0;
                a = this.$container.offset();
                var d = parseInt(this.$container.css("margin-left"), 10);
                0 < h.abs(a.left) && this.$container.css("margin", "0 " + (d - a.left) + "px");
                this.hasAdditionalProducts() && this.addLoadingAnimation();
                var c = this;
                (this.useNativeScrolling = f.capabilities.touchScrolling) ? this.hasAdditionalProducts() && this.$container.bind("scroll.p13n-sc-carousel", function() { c.handleScroll() }): (this.useTranslate = f.capabilities.transition &&
                    f.capabilities.transform3d, this.offsetX = 0, this.transitionClass = "", this.$container.bind("touchstart.p13n-sc-carousel", function(a) { c.handleTouchStart(a) }));
                f.trigger("p13n:faceoutsloaded", this.$container);
                b(g).bind("resize.p13n-sc-carousel", function(a) { c.handleResize(a) });
                this.handleResize();
                p.loadImages(this.$container);
                e.truncateLines(this.$container)
            }
            b.extend(b.easing, { easeOutQuad: function(a, b, c, e, f) {
                    return -a * (a - 2) } });
            c.prototype = {
                hasAdditionalProducts: function() {
                    return this.asins.length > this.asinIndex +
                        1
                },
                handleScroll: function() {
                    if (!this.isLoadingProducts && this.hasAdditionalProducts() && this.maxScroll) {
                        var a = 5 * this.itemWidth,
                            b = this.useNativeScrolling ? this.$container.scrollLeft() : this.offsetX;
                        this.maxScroll - b <= a && this.loadAdditionalProducts() } },
                loadAdditionalProducts: function() {
                    this.isLoadingProducts = !0;
                    for (var a = [], d = this.asinIndex + 1; d <= this.asinIndex + 10 && d < this.asins.length; d++) a.push(this.asins[d]);
                    (d = this.$container.data("ajax-params")) || (d = {
                        faceoutTemplateClass: this.$container.data("faceout-template-class"),
                        widgetTemplateClass: this.$container.data("widget-template-class"),
                        reftagPrefix: this.$container.data("reftag-prefix"),
                        auiDeviceType: this.$container.data("aui-device-type"),
                        suppressCurrencyImageFormat: this.$container.data("suppress-currency-image-format")
                    });
                    d.lazyLoadImages = 1;
                    d.asins = a.join();
                    d.offset = this.asinIndex + 1;
                    var c = this;
                    b.ajax({ url: this.ajaxUrl, data: d, success: function(b) { c.handleAjaxComplete(b, a.length) }, error: function() { c.handleAjaxComplete(null, a.length) } })
                },
                handleAjaxComplete: function(a,
                    d) {
                    var c = !1;
                    a && b.isArray(a) && 0 < a.length && (c = b(a.join("")), this.$loadingAnimation.before(c), p.loadImages(c), e.truncateLines(c), c = !0);
                    this.asinIndex += d;
                    this.hasAdditionalProducts() || (this.removeLoadingAnimation(), this.$container.unbind("scroll.p13n-sc-carousel"), c = !0);
                    c && this.positionCells();
                    this.isLoadingProducts = !1 },
                addLoadingAnimation: function() {
                    this.$loadingAnimation || (this.$loadingAnimation = b('<div class="p13n-sc-carousel-item p13n-sc-carousel-loading-image a-manually-loaded" style="right: 0px;"></div>'));
                    this.$content.append(this.$loadingAnimation)
                },
                removeLoadingAnimation: function() { this.$loadingAnimation && this.$loadingAnimation.remove() },
                handleResize: function(a) {
                    this.useNativeScrolling || (this.$content.removeClass(this.transitionClass), this.$container.stop());
                    a = this.$container.innerWidth();
                    this.pageSize = h.floor(a / this.originalItemWidth);
                    this.itemWidth = this.originalItemWidth;
                    this.positionCells(0);
                    this.useNativeScrolling || (this.offsetX = h.floor(this.offsetX / this.itemWidth) * this.itemWidth, this.applyPosition());
                    this.handleScroll()
                },
                positionCells: function(a) {
                    var b = this.$content.children();
                    for (a = a === t ? this.lastPositionedCellIndex : a; a < b.length; a++) {
                        var c = b.eq(a);
                        this.maxItemHeight = h.max(this.maxItemHeight, c.height()) }
                    this.lastPositionedCellIndex = b.length - 1;
                    b = b.length * this.itemWidth;
                    this.$content.width(b);
                    this.$content.height(this.maxItemHeight);
                    this.maxScroll = b - this.$container.innerWidth();
                    f.trigger("p13n:faceoutsloaded", this.$container) },
                handleTouchStart: function(a) {
                    a = a.originalEvent.targetTouches[0];
                    this.startTouchX =
                        a.pageX;
                    this.startTouchY = a.pageY;
                    this.startContentX = this.initialOffsetX = this.offsetX;
                    this.scrollState = 0;
                    this.$content.removeClass(this.transitionClass);
                    this.$container.stop();
                    var c = this;
                    b(g).bind("touchmove.p13n-sc-carousel", function(a) { c.handleTouchMove(a) });
                    b(g).bind("touchend.p13n-sc-carousel", function(a) { c.handleTouchEnd(a) })
                },
                handleTouchMove: function(a) {
                    var c = a.originalEvent.targetTouches[0];
                    if (0 === this.scrollState) {
                        var e = h.abs(c.pageX - this.startTouchX),
                            f = h.abs(c.pageY - this.startTouchY);
                        if (5 <
                            e && e > f) this.scrollState = 2;
                        else if (5 < f && f > e) { this.scrollState = 1;
                            b(g).unbind("touchmove.p13n-sc-carousel");
                            b(g).unbind("touchend.p13n-sc-carousel");
                            return }
                    }
                    a.originalEvent.preventDefault();
                    a = this.startContentX + this.startTouchX - c.pageX;
                    if (0 > a || a > this.maxScroll) a = h.max(a, 0), a = h.min(a, this.maxScroll), this.startTouchX = c.pageX, this.startContentX = a;
                    this.offsetX = a;
                    this.applyPosition()
                },
                handleTouchEnd: function(a) {
                    b(g).unbind("touchmove.p13n-sc-carousel");
                    b(g).unbind("touchend.p13n-sc-carousel");
                    a = h.floor(this.startContentX /
                        this.itemWidth);
                    this.offsetX < this.startContentX ? this.offsetX = (a - this.pageSize) * this.itemWidth : this.offsetX > this.startContentX && (this.offsetX = (a + this.pageSize) * this.itemWidth);
                    this.offsetX = h.max(this.offsetX, 0);
                    this.offsetX = h.min(this.offsetX, this.maxScroll);
                    this.offsetX !== this.initialOffsetX && this.handleScroll();
                    this.offsetX !== this.startContentX && (a = h.abs(this.offsetX - this.startContentX) / (this.itemWidth * this.pageSize), this.useTranslate ? (this.transitionClass = "p13n-sc-carousel-transition-" + h.ceil(5 *
                        a), this.$content.addClass(this.transitionClass), this.applyPosition()) : this.$container.animate({ scrollLeft: this.offsetX }, { easing: "easeOutQuad", duration: h.ceil(250 * a) }))
                },
                applyPosition: function() { this.useTranslate ? this.$content.css("-webkit-transform", "translate3d(" + -this.offsetX + "px,0,0)") : this.$container.scrollLeft(this.offsetX) }
            };
            k.when("afterReady").execute("p13n-sc-carousel:init", function() {
                var a = { distanceY: -500, distanceX: 0 };
                b(".p13n-sc-carousel").each(function(b, e) {
                    l.register(e, function() { new c(e) },
                        a)
                })
            });
            return c
        });
    k.when("jQuery", "A", "p13n-sc-util", "p13n-sc-call-on-visible", "p13n-sc-lazy-image-loader", "p13n-sc-line-truncator", "p13n-sc-instant-experience").register("p13n-sc-static-list", function(b, f, l, h, g, m, p) {
        function e(c) {
            this.$container = b(c);
            g.loadImages(this.$container);
            m.truncateLines(this.$container);
            this.touchLink = this.$container.find(".a-touch-link");
            this.asins = this.$container.data("asins") && this.$container.data("asins").toString().split(",");
            this.filteredAmazonGlobalAsins = this.$container.data("filtered-amazon-global-asins") &&
                this.$container.data("filtered-amazon-global-asins").toString().split(",") || [];
            c = this.$container.find("[name=filterCoRCheckbox]");
            1 === c.length && (this.shouldfilterAmazonGlobalAsins = c.prop("checked") ? 1 : 0);
            p.setupInstantExperience(".p13n-sc-list-cells", ".p13n-sc-list-item a")
        }
        e.prototype = {
            loadProducts: function() {
                var c = this,
                    a = c.$container.find("[name=filterCoRCheckbox]");
                if (1 === a.length) {
                    var d = a.prop("checked") ? 1 : 0;
                    c.touchLink.html(c.touchLink.html().replace(/\d+/g, d ? c.filteredAmazonGlobalAsins.length :
                        c.asins.length));
                    c.touchLink.attr("href", c.touchLink.attr("href").replace(/shouldFilterAmazonGlobalAsins=[01]/g, "shouldFilterAmazonGlobalAsins=" + d));
                    var e = d ? c.filteredAmazonGlobalAsins.slice(0, 3) : c.asins.slice(0, 3),
                        g = c.$container.data("ajax-params"),
                        h = c.$container.data("ajax-url");
                    b.extend(g, { lazyLoadImages: 1, asins: e.join(","), offset: 0 });
                    c.$container.find(".p13n-sc-ag-filter-checkbox .a-icon-checkbox").addClass("aok-hidden");
                    c.$container.find(".p13n-sc-ag-filter-spinner").removeClass("aok-hidden");
                    a.prop("disabled", !0);
                    f.ajax(h, { method: "post", params: g, success: function(a) { c.handleAjaxComplete(a, e.length, d) }, error: function() { c.handleAjaxComplete(null, e.length) } })
                }
            },
            handleAjaxComplete: function(c, a, d) {
                a = this.$container.find("[name=filterCoRCheckbox]");
                if (1 === a.length) {
                    if (c && b.isArray(c) && 0 < c.length) {
                        c = b(c.join(""));
                        var e = this.$container.find(".p13n-sc-list-cells");
                        e.empty();
                        e.append(c);
                        g.loadImages(c);
                        m.truncateLines(c);
                        this.$container.data("should-filter-amazon-global-asins", d ? 1 : 0);
                        this.$container.attr("data-should-filter-amazon-global-asins",
                            d ? 1 : 0);
                        this.$container.find(".p13n-sc-amazon-global-error-alert").addClass("aok-hidden");
                        this.$container.find(".p13n-sc-ag-filter-spinner").addClass("aok-hidden");
                        this.$container.find(".p13n-sc-ag-filter-checkbox .a-icon-checkbox").removeClass("aok-hidden")
                    } else d = !d, a.prop("checked", d), this.$container.data("should-filter-amazon-global-asins", d ? 1 : 0), this.touchLink.html(this.touchLink.html().replace(/\d+/g, d ? this.filteredAmazonGlobalAsins.length : this.asins.length)), this.touchLink.attr("href", this.touchLink.attr("href").replace(/shouldFilterAmazonGlobalAsins=[01]/g,
                        "shouldFilterAmazonGlobalAsins=" + (d ? 1 : 0))), this.$container.find(".p13n-sc-amazon-global-error-alert").removeClass("aok-hidden"), this.$container.find(".p13n-sc-ag-filter-spinner").addClass("aok-hidden"), this.$container.find(".p13n-sc-ag-filter-checkbox .a-icon-checkbox").removeClass("aok-hidden"), l.log.error("[p13n-sc-ag] List View partial endpoint for filtered AmazonGlobal ASINs had an error or returned an empty list of cells.");
                    a.prop("disabled", !1)
                }
            }
        };
        f.declarative("filterCoRCheckbox-change", "change",
            function(c) { c.$event.preventDefault();
                var a = c.$target.prop("checked");
                if (c.$declarativeParent) {
                    var d = c.$declarativeParent.closest(".p13n-sc-static-list");
                    0 !== d.length && (n.ue && n.ue.count && (c = a ? "p13n:sc:ag:static-list:checkbox:checked" : "p13n:sc:ag:static-list:checkbox:unchecked", n.ue.count(c, (n.ue.count(c) || 0) + 1)), b(".p13n-sc-static-list").each(function(a, b) { d[0] === b && (e.lists[a].loadProducts(), f.trigger("p13n-sc-list-log", e.lists[a].$container, "view")) })) } });
        e.lists = {};
        k.when("afterReady").execute("p13n-sc-static-list:init",
            function() {
                var c = { distanceY: -500, distanceX: 0 };
                b(".p13n-sc-static-list").each(function(a, b) { h.register(b, function() {
                        var c = new e(b);
                        c.loadProducts();
                        e.lists[a] = c;
                        f.trigger("p13n-sc-list-log", c.$container, "view") }, c) }) });
        return e
    });
    k.when("A", "jQuery", "p13n-sc-util").execute("updateDpLink", function(b, f, l) {
        var h = /([?&]preST=)([^&]*)/;
        b.on("a:image:load:p13nImage", function(b) {
            var m = b.$imageElement[0];
            if ("undefined" !== typeof m && (l.count("p13n:dynImgCallback", (l.count("p13n:dynImgCallback") || 0) + 1), m = f(m).closest("a"),
                    0 < m.length)) {
                var k = f(m).attr("href"),
                    e = k.match(h);
                b = b.url.split("/").pop().split(".");
                f.isArray(b) && 3 === b.length && (b = encodeURIComponent(b[1]), null !== e && f.isArray(e) && 3 === e.length && e[2] !== b && (b = k.replace(h, "$1" + b), f(m).attr("href", b))) }
        })
    });
    k.when("A").register("p13n-sc-instant-experience", function(b) {
        return { setupInstantExperience: function() {} } });
    k.when("fresh-add-to-cart-v2", "p13n-sc-util").execute(function(b, f) {
        b.addToFreshCart({
            success: function(b, f) { b.$declarativeParent.parents(".p13n-sc-list-item").find(".s-add-to-cart-badge-position").removeClass("aok-hidden") },
            error: function(b, h, g, m) { f.log.error("Couldn't add item into FreshCart") }
        })
    });
    k.when("fresh-add-to-cart", "p13n-sc-util").execute(function(b, f) { b.attachCallbacks({ success: function(b, f) {
                var g = b.$declarativeParent.parents(".p13n-sc-list-item").find(".s-add-to-cart-badge-position");
                null !== g && g.removeClass("aok-hidden") }, error: function(b, h, g, m) { f.log.error("Couldn't add item into FreshCart") }, clientID: "p13n" }) })
});
/* ******** */
(function(k) {
    var m = window.AmazonUIPageJS || window.P,
        r = m._namespace || m.attributeErrors,
        d = r ? r("SimilaritiesDetailJS") : m;
    d.guardFatal ? d.guardFatal(k)(d, window) : d.execute(function() { k(d, window) }) })(function(k, m, r) {
    (function(d, f, t) {
        "function" !== typeof t && (t = function(d, g) {
            if (g && g.message) throw Error(g.message);
            if (d && d.message) throw Error(d.message); });
        k.when("jQuery", "A", "p13n-sc-line-truncator", "p13n-sc-logger", "p13n-sc-instant-experience").register("sims-fbt", function(d, g, f, k, n) {
            function c() {
                var b = this;
                g.declarative("fbt-expander-action", ["click"], function(a) { a = a.$declarativeParent.parents().find(".sims-fbt-container");
                    a.find("#fbt-expander-heading").addClass("a-hidden");
                    a.find("#fbt-expander-content").removeClass("a-hidden");
                    b.initializeCheckboxHandling(g, a);
                    a = { featureElement: a.find(".sims-fbt"), action: "view", replicateAsinImpressions: !0, meta: { numSims: b.numOfItems } };
                    k.logAction(a) });
                n.setupInstantExperience(".sims-fbt-images-list", "a");
                return b
            }
            c.prototype = {
                initializeCheckboxHandling: function(b,
                    a) {
                    this.detachedImages = [];
                    this.fbtRootElement = a;
                    var e = this.fbtRootElement.find(".sims-fbt");
                    this.cartDiv = e.find(".sims-fbt-add-to-cart");
                    this.totalPriceDiv = e.find("div.sims-fbt-total-price");
                    this.imageUL = e.find("ul.sims-fbt-images-list");
                    this.chooseItemsTextDiv = e.find(".sims-fbt-choose-items-to-buy");
                    this.fbtExpanderContent = e.find("#fbt-expander-content");
                    this.fbtRootElement.attr("data-fbt-initialized", "true");
                    var l = e.find(".sims-fbt-data");
                    if (0 !== l.size()) {
                        try { this.FBTData = l.data("fbt") } catch (c) {
                            t({
                                logLevel: "ERROR",
                                attribution: "SimilaritiesDetailJS",
                                message: "[sims-fbt] Unable to find Data Attribute " + c
                            });
                            return
                        }
                        this.numOfItems = e.find("div.sims-fbt-checkbox-div").length;
                        var h = this;
                        h.declarativeInitialized || b.declarative("fbt-checkbox-click", ["change"], function(a) { "input" === a.$target[0].nodeName.toLowerCase() && h.handleCheckboxChange(a) });
                        h.declarativeInitialized && h.imageUL.find(".sims-fbt-image").each(function() { b.loadDynamicImage(d(this).find("img")) });
                        h.declarativeInitialized = !0;
                        b.on("a:popover:show:sims-fbt-shipping-details",
                            function(a) { a = d(a.popover.$container[0]);
                                f.truncateLines(a);
                                a.find(".sims-fbt-details-image").each(function() { b.loadDynamicImage(d(this).find("img")) }) });
                        f.truncateLines(a)
                    }
                },
                handleCheckboxChange: function(b) {
                    var a = b.$declarativeParent;
                    b = b.data;
                    var e = a.find("input[type\x3d'checkbox']");
                    e.is(":checked") ? this.handleItemChecked(e, a, b) : this.handleItemUnchecked(e, a, b) },
                handleItemChecked: function(b, a, e) {
                    a.find("div.sims-fbt-checkbox-icon").removeClass("a-icon-touch-checkbox-inactive").addClass("a-icon-touch-checkbox-active");
                    b.attr("checked", "checked");
                    this.addItemImage(e);
                    this.unFadeFBTItem(a);
                    this.updateTotalPrice(a);
                    this.updateAddToCartButton(a);
                    this.FBTData.isAmazonApp ? this.updateItemsInAppDeclarative() : this.updateItemsInWebForm()
                },
                unFadeFBTItem: function(b) { b.closest(".sims-fbt-row").find("div.sims-fbt-checkbox-div, .sims-fbt-row-outer").removeClass("sims-fbt-item-disable") },
                addItemImage: function(b) {
                    b = parseInt(b.itemNum, 10);
                    this.imageUL.find(".sims-fbt-image-" + b);
                    for (var a = b - 1; 1 <= a; a--) {
                        var e = this.imageUL.find(".sims-fbt-image-" +
                            a);
                        if (e.length) { this.detachedImages[b].insertAfter(e);
                            this.detachedImages[b] = null;
                            return }
                    }
                    this.chooseItemsTextDiv.addClass("a-hidden");
                    this.imageUL.removeClass("a-hidden");
                    this.imageUL.prepend(this.detachedImages[b]);
                    this.detachedImages[b] = null
                },
                handleItemUnchecked: function(b, a, e) {
                    a.find("div.sims-fbt-checkbox-icon").removeClass("a-icon-touch-checkbox-active").addClass("a-icon-touch-checkbox-inactive");
                    b.removeAttr("checked");
                    this.fadeFBTItem(a);
                    this.removeItemImage(e);
                    this.updateTotalPrice(a);
                    this.updateAddToCartButton(a);
                    this.FBTData.isAmazonApp ? this.updateItemsInAppDeclarative() : this.updateItemsInWebForm()
                },
                updateItemsInWebForm: function() {
                    var b = this.getOfferListingIDsSeletected(),
                        a = this.cartDiv.find(".sims-fbt-form-input-elements"),
                        e, l;
                    0 < a.find("input[name^\x3d'clientName']").length ? (e = "offerListingID.", l = "ASIN.") : (e = "offeringID.", l = "asin.");
                    for (var c = a.find("input[name^\x3d'" + e + "']").length, h = 1; h <= c; h++) a.find("input[name\x3d'" + l + h + "']").remove(), a.find("input[name\x3d'" + e + h + "']").remove();
                    for (h = 0; h < b.length; h++) {
                        var f =
                            h + 1,
                            g = b[h],
                            c = d("\x3cinput\x3e", { type: "hidden", name: l + f, value: this.FBTData.itemDetails[g].asin }),
                            f = d("\x3cinput\x3e", { type: "hidden", name: e + f, value: g });
                        a.append(c, f)
                    }
                },
                updateItemsInAppDeclarative: function() {
                    for (var b = this.cartDiv.find("#fbt-add-to-cart-declarative").data("awMash"), a = this.getOfferListingIDsSeletected(), e = "", l = "", c = "", d = 0; d < a.length; d++) {
                        var f = a[d],
                            g = this.FBTData.itemDetails[f].asin;
                        e && (e += "|");
                        e += g;
                        l && (l += "|");
                        l += f;
                        c && (c += "|");
                        c += "1" }
                    b.inputs.a = e;
                    b.inputs.oid = l;
                    b.inputs.quantity = c },
                getOfferListingIDsSeletected: function() {
                    var b = [];
                    this.fbtExpanderContent.find("input", ".sims-fbt-checkbox").each(function() { this.checked && b.push(this.value) });
                    return b },
                fadeFBTItem: function(b) { b.closest(".sims-fbt-row").find("div.sims-fbt-checkbox-div, .sims-fbt-row-outer").addClass("sims-fbt-item-disable") },
                removeItemImage: function(b) {
                    var a = this.imageUL.find(".sims-fbt-image-" + b.itemNum);
                    b = parseInt(b.itemNum, 10);
                    a = a.detach();
                    this.detachedImages[b] || (this.detachedImages[b] = a);
                    0 === this.imageUL.find("li.sims-fbt-image").length &&
                        (this.chooseItemsTextDiv.removeClass("a-hidden"), this.imageUL.addClass("a-hidden"))
                },
                updateAddToCartButton: function(b) {
                    b = this.getOfferListingIDsSeletected();
                    for (var a = 1, e = "preOrderText", c = b.length - 1; 0 <= c; c--)
                        if (!this.FBTData.itemDetails[b[c]].isPreorder) { e = "addToCartText";
                            a = 0;
                            break }
                    c = this.cartDiv.find(".sims-fbt-add-to-cart");
                    a ? c.removeClass("a-button-primary").addClass("a-button-preorder") : c.removeClass("a-button-preorder").addClass("a-button-primary");
                    1 <= b.length ? (c.find(".a-button-text").text(this.FBTData[e][b.length]),
                        c.attr("disabled") && (this.FBTData.isAmazonApp && this.cartDiv.find("#fbt-add-to-cart-declarative").data("action", "aw-mash"), c.removeClass("a-button-disabled"), c.removeAttr("disabled"))) : (this.FBTData.isAmazonApp && this.cartDiv.find("#fbt-add-to-cart-declarative").data("action", "sims-fbt-declarative-disabled"), c.find(".a-button-text").text(this.FBTData.addToCartText[1]), c.addClass("a-button-disabled"), c.attr("disabled", "disabled"))
                },
                updateTotalPrice: function(b) {
                    var a = this.getOfferListingIDsSeletected();
                    b = /(<span class=\"sims-fbt-price-value\">)(.*)(<\/span>)/;
                    var c = 0,
                        d = 0;
                    if (0 === a.length) this.totalPriceDiv.addClass("a-hidden");
                    else {
                        for (var f = 0; f < a.length && !d; f++)
                            if (this.FBTData.itemDetails[a[f]].doesMAPPolicyApply) { d = 1;
                                break } else isFinite(this.FBTData.itemDetails[a[f]].price) && (c += this.FBTData.itemDetails[a[f]].price);
                        this.totalPriceDiv.removeClass("a-hidden");
                        a = this.totalPriceDiv.find(".fbt-total-price-value");
                        f = this.totalPriceDiv.find(".fbt-total-price-text");
                        d ? (a.html(this.FBTData.MAPText), a.removeClass("a-color-price fbt-total-price-value-currency").addClass("fbt-map-text"),
                            f.addClass("a-hidden")) : (d = this.FBTData.currencySymbol, c = this.formatPrice(c), d = d.match(b) ? d.replace(b, "$1" + c + "$3") : d + c, a.html(d), a.removeClass("fbt-map-text").addClass("a-color-price fbt-total-price-value-currency"), f.removeClass("a-hidden"))
                    }
                },
                formatPrice: function(b) {
                    for (var a = (b - parseInt(b, 10)).toFixed(2), a = a.replace("0.", "."), c = parseInt(b, 10), d = 0; 0 < c;) {
                        var f = c % 10,
                            c = parseInt(c / 10, 10),
                            a = f.toString() + a;
                        d++;
                        0 === d % 3 && 0 < c && (a = "," + a) }
                    "EUR" === this.FBTData.currencyCode ? (a = a.replace(/,/, "+"), a = a.replace(/\./,
                        ","), a = a.replace(/\+/, ".")) : "JPY" === this.FBTData.currencyCode && (a = a.replace(".00", ""));
                    1 > Math.abs(b) && (a = "0" + a);
                    return a
                }
            };
            g.on.ready(function() {
                return new c });
            return c
        })
    })(m, document, m.ueLogError);
    k.when("A", "a-carousel-framework", "p13n-sc-line-truncator", "p13n-sc-logger", "ready").execute(function(d, f, k, m) {
        var g = function(c) { c = d.$(c.dom.$carousel);
                k.truncateLines(c) },
            q = function(c, b, a, d) {
                c = c.dom.$container;
                0 < c.length && m.logAction({
                    featureElement: c,
                    action: "view",
                    replicateAsinImpressions: !0,
                    meta: {
                        previousPage: b,
                        pageNumber: a,
                        numPages: d
                    }
                })
            },
            p = function(c) {
                var b = c.carousel,
                    a = c.newValue;
                c = c.oldValue;
                if (b) {
                    var e = b.getAttr("totalPages");
                    q(b, c, a, e);
                    g(b);
                    d.$(b.dom.$container).find("ul.a-pagination.a-dots li").removeClass("a-selected").eq(a - 1).addClass("a-selected") } },
            n = function(c) {
                if (c = c.carousel) {
                    var b = c.getAttr("totalPages"),
                        a = c.getAttr("pageNumber");
                    q(c, -1, a, b) } };
        d.each(d.$(".sims-mobile-vertical-carousel"), function(c) {
            if (c = f.getCarousel(c)) {
                var b = c.getAttr("name");
                d.on("a:carousel:" + b + ":change:pageNumber", p);
                d.on("a:carousel:" + b + ":init", n);
                g(c)
            }
        })
    });
    (function(d) {
        k.when("A", "p13n-sc-line-truncator", "a-sheet").register("sims-lpo-bottom-sheet", function(f, k, m) {
            var g, q = !1;
            f.declarative("sims-lpo-open-bottom-sheet", "click", function(n) { g || (n = f.extend({}, n.data), n.height = .75 * d.innerHeight, g = m.create(n));
                g.show();
                q || (k.truncateLines(f.$(g.$container)), q = !0) });
            var p = function(d) {
                var c, b = f.$("#a-page"),
                    a = f.$("body");
                p = function(d) {
                    d ? (c = a.scrollTop(), f.requestAnimationFrame(function() {
                        b.css({
                            position: "fixed",
                            top: "-" +
                                c + "px"
                        })
                    }, b[0])) : f.requestAnimationFrame(function() { b.css({ position: "", top: "" });
                        a.scrollTop(c) }, b[0])
                };
                p(d)
            };
            f.on("a:sheet:beforeShow:sims-lpo-bottom-sheet", function(d) { p(!0) });
            f.on("a:sheet:beforeHide:sims-lpo-bottom-sheet", function(d) { p(!1) })
        })
    })(m);
    k.when("A", "jQuery", "p13n-sc-instant-experience").register("sims-vtp-hero", function(d, f, m) { k.when("afterReady").execute("sims-vtp-hero:init", function() { m.setupInstantExperience(".sims-vtph", "a") }) })
});
/* ******** */
(function(l, r, E) {
    l.execute(function() {
        l.when("A", "jQuery").register("jumpLink", function(C, d) {
            return {
                bind: function(e, k, c, a) {
                    try { k = k || 1E3, c = c || 0, d("body").delegate(e, "click", function(b) {
                            try {
                                var h = d(e);
                                if (h.get(0)) {
                                    var f = h.attr("href");
                                    f && "#" === f.charAt(0) && (f = a && 0 === d(f).length ? "[name='" + f.substring(1) + "']" : f, 0 !== d(f).length && (b.preventDefault(), d("html, body").animate({ scrollTop: d(f).offset().top - c }, k))) } } catch (m) { r.ueLogError && r.ueLogError(m, { logLevel: "FATAL", attribution: "jumpLink", message: "[JumpLink - Error in executing click handler]" }) } }) } catch (b) {
                        r.ueLogError &&
                            r.ueLogError(b, { logLevel: "FATAL", attribution: "jumpLink", message: "[JumpLink - Error in binding click handler]" })
                    }
                }
            }
        });
        l.when("A", "jQuery").execute(function(C, d) { C.declarative("mySummaryExpander_1", "click", function(d) {
                if (d = document.getElementById("summaryText")) d.style.display = "block" === d.style.display ? "none" : "block" }) });
        l.when("A").register("dp-log-utils", function(C) { C.on("dpLogFatalsEvent", function(d, e, k) { r.ueLogError && r.ueLogError({ message: d }, { logLevel: e, attribution: k }) }) });
        l.when("A").register("dp-client-counter", function(C) {
            var d = function() {};
            r.ue && r.ue.count && "function" === typeof r.ue.count && (d = r.ue.count);
            return { set: function(e, k) { "undefined" !== typeof k && d(e, k) }, get: function(e) {
                    return d(e) }, inc: function(e) { d(e, (d(e) || 0) + 1) } } });
        l.when("A").register("cache", function(C) {
            function d() { this.data = {} }

            function e(d) {
                var c = d;
                if ("object" === typeof d) {
                    var a = "",
                        c = "";
                    C.each(d, function(b, g) { c += a + g + "=" + b;
                        a = "&" }) }
                return c }
            d.prototype = {
                put: function(d, c) {
                    var a =
                        e(d);
                    this.data[a] = c
                },
                get: function(d) { d = e(d);
                    return this.data[d] },
                exists: function(d) {
                    return e(d) in this.data }
            };
            return d
        })
    })
})(function() {
    var l = window.AmazonUIPageJS || window.P,
        r = l._namespace || l.attributeErrors;
    return r ? r("DetailPageCommonScripts") : l }(), window);
/* ******** */
(function(n, p, u) {
    n.execute(function() {
        n.when("twister-variation-matrix", "twister-dim-util", "twister-state-machine", "twister-metadata", "twister-view-controller", "twister-dispatcher", "twister-actions", "twister-slots-dimsum", "twister-dimsum").register("TwisterCore", function(d, k, h, f, c, a, g, e, b) {
            function n(g, l) {
                this.tvm = new d(g);
                this.util = new k(this.tvm);
                this.tsm = new h(this.tvm, this.util, g.initDimCombination);
                this.dimSum = new b(g.config.ajaxTimeout, g.config.ajaxUrlParams, g.config.deviceType, l);
                this.slotsDimSum =
                    new e(g.config.ajaxTimeout, g.config.ajaxUrlParams, g.config.deviceType);
                var p = this;
                a.registerStore("twister-state-machine", function(a, b) { p.tsm.accept(a, b).THEN(function(b) { c.publishView(a, b) }).ELSE() });
                var q = new f;
                a.registerStore("twister-metadata", function(a, b) { q.process(a, b, function(b) { c.publishView(a, b) }) })
            }

            function l(b, c) {
                var d = b.viewAttribution + "_" + b.viewName + "_" + c;
                return function(b) {
                    try {
                        var e = g.create(c, b);
                        a.dispatch(c, e) } catch (f) {
                        p.ueLogError && p.ueLogError(f, {
                            logLevel: "ERROR",
                            attribution: "Twister_view_" +
                                d,
                            message: "This error is caused by the Twister view - " + d + " while updating the TwisterCore"
                        })
                    }
                }
            }
            n.prototype = { registerActive: function(b, a) { c.register(b.viewAttribution + "_" + b.viewName, a.updateView);
                    return { dimensionChanged: l(b, "VARIATION_CHANGE"), dimensionPeek: l(b, "VARIATION_PEEK"), metaData: l(b, "METADATA") } }, registerPassive: function(b, a) { c.register(b.viewAttribution + "_" + b.viewName, a.updateView);
                    return { metaData: l(b, "METADATA") } }, state: function() {
                    return this.tsm.currentState().selected().selectionInfo() } };
            return n
        });
        n.when("A").register("twister-actions", function(d) {
            var k = d.$,
                h = { VARIATION_CHANGE: function(d) {
                        return d = k.isArray(d) ? d : [d] }, VARIATION_PEEK: function(d) {
                        return d }, METADATA: function(d) {
                        return d } };
            return { create: function(d, c) {
                    return h[d] ? h[d](c) : !1 } } });
        n.when("A", "publisherSubscriber").register("twister-dispatcher", function(d, k) {
            function h() { h = 1;
                return this }
            var f = d.$,
                c = new k,
                h = 0,
                a = [];
            return {
                registerStore: function(a, d) { c.register(a, d);
                    return this },
                deregisterStore: function(a) {
                    c.deRegister(a);
                    return this
                },
                dispatch: function(d, e) { h ? a.push(arguments) : c.publish(d, e);
                    return this },
                hold: h,
                release: function() { f.each(a, function(a, d) { c.publish.apply(c, d) });
                    h = 0;
                    return this }
            }
        });
        n.when("A", "publisherSubscriber").register("twister-view-controller", function(d, k) {
            function h() { c ? a.push(arguments) : (c = 1, f.publish.apply(f, arguments), c = 0, a.length && h.apply(this, a.shift()));
                return this }
            var f = new k,
                c = 0,
                a = [];
            return {
                register: function(a, c) { f.register(a, c);
                    return this },
                deRegister: function(a) {
                    f.deRegister(a);
                    return this
                },
                publishView: h
            }
        });
        n.when("A").register("twister-dimsel-api", function(d) {
            function k(d) {
                var c = this;
                this.dimSelectionMap = {};
                this.selInfo = d;
                h.each(d, function(a, d) { c.dimSelectionMap[d.dimKey] = d.val }) }
            var h = d.$;
            k.prototype = { matches: function(d) { d = d.selectionInfo();
                    for (var c = 0; c < d.length; c++) {
                        var a = d[c].dimKey;
                        if (!(a in this.dimSelectionMap) || this.dimSelectionMap[a] !== d[c].val) return !1 }
                    return !0 }, selectionInfo: function() {
                    return d.copy(this.selInfo) } };
            return k });
        n.when("A",
            "twister-dimsel-api").register("twister-dim-util", function(d, k) {
            function h(c) { this.tvm = c;
                this.dimensionMetaData = {};
                var a = [];
                c = c.dimensionInfo;
                for (var d = 0; d < c.length; d++) { a.push(c[d].dimKey);
                    var e = {};
                    e.isRequired = c[d].isRequired;
                    e.dimOrder = d;
                    e.size = c[d].size;
                    this.dimensionMetaData[c[d].dimKey] = e } }
            var f = d.$;
            h.prototype = {
                createSelectionInfo: function(c) {
                    return new k(c) },
                extendSelectionInfo: function(c, a, d) {
                    var e = d || 0 === d,
                        b = {},
                        h = [];
                    f.each(a.selectionInfo(), function(a, c) { b[c.dimKey] = c.val });
                    f.each(c.selectionInfo(),
                        function(a, c) {
                            var f = c.dimKey,
                                k = e ? d : c.val;
                            f in b && (k = b[f]);
                            h.push({ dimKey: f, val: k }) });
                    return new k(h)
                },
                createNextDimSelection: function(c, a) {
                    var d = [],
                        e = a.selectionInfo(),
                        b = this;
                    f.each(c.split(":"), function(a, c) {
                        var f = e[a].dimKey,
                            h = parseInt(c, 10);
                        b.dimensionMetaData[f].isRequired && h !== e[a].val && (h = -1);
                        d.push({ dimKey: f, val: h }) });
                    return new k(d) },
                getDimScore: function(c, a) {
                    var d = 0,
                        e = c.split(":"),
                        b = this;
                    f.each(a.selectionInfo(), function(a, c) {
                        var f = c.dimKey,
                            h = c.val,
                            k = parseInt(e[a], 10),
                            n = e.length - a;
                        h === k ?
                            (d += 200 * n, b.dimensionMetaData[f].isRequired && (d += 2E4)) : (h = Math.abs(h - k), f = Math.round(h / b.dimensionMetaData[f].size * 100), d += 100 - f)
                    });
                    return d
                },
                isSingletonDim: function(c) {
                    var a = 0;
                    this.tvm.config.isSingletonWeblabEnabled ? 1 === this.tvm.dimtoValueMap[c].length && (a = 1) : a = 0;
                    return a },
                isRequiredDim: function(c) {
                    return this.dimensionMetaData[c] ? this.dimensionMetaData[c].isRequired : !1 },
                getDimensionInfo: function() {
                    return this.tvm.dimensionInfo },
                getDimAvailability: function(c, a) {
                    a = a.selectionInfo ? a : this.createSelectionInfo(a);
                    var d = [],
                        e = [],
                        b = this.tvm.dimensionList,
                        h = this.tvm.dimtoValueMap[c],
                        l = this.createSelectionInfo([{ dimKey: c, val: -1 }]),
                        l = this.tvm.fetch(this.extendSelectionInfo(a, l).selectionInfo()),
                        k = {},
                        m = this;
                    f.each(l, function(a, d) { k[d.split(":")[b.indexOf(c)]] = m.tvm.dimCombinations[d] });
                    f.each(h, function(a, b) { a in k ? d.push({ index: a, asin: k[a], label: b }) : e.push({ index: a, label: b }) });
                    return { available: d, unavailable: e }
                },
                getUnselectedDims: function(c) {
                    var a = {};
                    f.each(c, function(b, c) { a[c.dimKey] = c.val });
                    c = [];
                    var d = this.tvm.dimensionList,
                        e;
                    for (e in d)
                        if (d.hasOwnProperty(e)) {
                            var b = d[e];
                            if (a[b] === u || -1 === a[b]) this.isSingletonDim(b) ? a[b] = 0 : c.push(b) }
                    return c
                },
                showDimSum: function(c, a) {
                    var d = this.getUnselectedDims(a);
                    return !d || 0 === d.length || 1 === d.length && d[0] === c ? 1 : 0 },
                isFullySelected: function(c) {
                    var a = !0; "string" === typeof c && (c = this.getSelectionInfoFromDimComb(c));
                    c = c.selectionInfo ? c.selectionInfo() : c;
                    if (c.length != this.tvm.dimensionList.length) return !1;
                    f.each(c, function(c, d) {-1 === d.val && (a = !1) });
                    return a },
                createDimensionSelectionMap: function(c) {
                    var a = {},
                        d;
                    for (d in c)
                        if (c.hasOwnProperty(d)) {
                            var e = c[d];
                            a[e.dimKey] = e.val }
                    return a
                },
                getSelectedDimKeys: function(c) {
                    var a = this.tvm.dimensionList,
                        d = [],
                        e;
                    for (e in a)
                        if (a.hasOwnProperty(e)) {
                            var b = c[a[e]]; "undefined" === typeof b || -1 == b ? d.push("*") : d.push(b) }
                    return d },
                getValidDimCombination: function(c, a) {
                    var d, e, b = this,
                        h = 0,
                        l = 0;
                    e = this.tvm.fetch(c);
                    f.each(e, function(c, e) { l = b.getDimScore(e, a);
                        l > h && (d = c, h = l) });
                    return e[d] },
                getAsinFromSelectionInfo: function(c, a) {
                    var g, e;
                    "undefined" == typeof a || a ? g = this.createDimensionSelectionMap(c) :
                        (e = d.copy(c), g = this.getValidDimCombination(e, this.createSelectionInfo(c)), f.each(g.split(":"), function(a, c) {
                            var d = parseInt(c, 10);
                            e[a].val = d }), g = this.createDimensionSelectionMap(e));
                    g = this.getSelectedDimKeys(g).join(":");
                    return this.tvm.dimCombinations[g]
                },
                getSelectionInfoFromSelectedVariationValuesMap: function(c) {
                    var a = [],
                        d;
                    for (d in this.tvm.dimensionList) {
                        var e = {},
                            b = this.tvm.dimensionList[d];
                        e.dimKey = b;
                        e.val = c[b];
                        a.push(e) }
                    return a },
                getSelectionInfoFromDimComb: function(c) {
                    var a = [];
                    c = c.split("_");
                    for (var d in this.tvm.dimensionList) {
                        var e = {},
                            b = c[d];
                        e.dimKey = this.tvm.dimensionList[d];
                        e.val = "X" === b || "*" === b ? -1 : parseInt(b, 10);
                        a.push(e) }
                    return a
                }
            };
            return h
        });
        n.when("A", "url-builder").register("twister-dimsum", function(d, k) {
            function h(c, a, g, e) {
                this.cache;
                e && (this.cache = new e);
                this.ajaxTimeout = c;
                this.batchLimit = 10;
                this.ajaxUrl = "/gp/twister/dimension?asinList=###asinString###&vs=1" + (a || "");
                g && (this.ajaxUrl += "&deviceType=" + g);
                (c = d.state("pwState")) && c.isTryState && (this.ajaxUrl = k.addUrlParams(this.ajaxUrl, { isTryState: "true" }))
            }
            var f = d.$;
            h.prototype = {
                get: function(c, a, g) {
                    function e(a) {
                        var c = a - this.batchLimit,
                            g = "";
                        0 < c && e.call(this, c);
                        if (g = k.slice(0 > c ? 0 : c, a).join(",")) a = this.ajaxUrl.replace("###asinString###", g), d.ajax(a, { chunk: b, timeout: this.ajaxTimeout }) }

                    function b(b) {
                        if (b)
                            for (var c in b)
                                if (b.hasOwnProperty(c)) {
                                    var d = b[c];
                                    if (d && d.asin) {
                                        if (l) {
                                            var e = h(d.asin, g);
                                            l.put(e, d) }
                                        a && a(d) } } }

                    function h(a, b) {
                        var c = a;
                        d.objectIsEmpty(b) || (c = { asin: a }, f.extend(!0, c, b));
                        return c }
                    var l = this.cache,
                        k = [],
                        m = {};
                    f.each(c, function(b,
                        c) {
                        var d = h(c, g);
                        l && l.get(d) ? a ? a(l.get(d)) : m[c] = l.get(d) : k.push(c) });
                    if (!a) return m;
                    e.call(this, k.length)
                }
            };
            return h
        });
        n.when("A").register("twister-slots-dimsum", function(d) {
            function k(a, c, d) { this.cache = f;
                this.ajaxTimeout = a;
                this.batchLimit = 8;
                this.ajaxUrl = "/gp/twister/dimension?isDimensionSlotsAjax=1&asinList=###asinString###&vs=1" + (c || "");
                d && (this.ajaxUrl += "&deviceType=" + d) }
            var h = d.$,
                f = {},
                c = {};
            k.prototype = {
                get: function(a, g) {
                    function e(a) {
                        var c = a - this.batchLimit,
                            g = "",
                            h = [];
                        0 < c && e.call(this,
                            c);
                        h = k.slice(0 > c ? 0 : c, a);
                        if (g = h.join(",")) a = this.ajaxUrl.replace("###asinString###", g), d.ajax(a, { chunk: f, timeout: this.ajaxTimeout, cache: !0, error: b.apply(null, h) })
                    }

                    function b() {
                        var a = arguments;
                        return function() { d.each(a, function(a) { delete c[a] }) } }

                    function f(a) {
                        if (a && a.ASIN) {
                            var b = a.ASIN;
                            l[b] = a;
                            for (g && g(a); c[b] && c[b].length;) c[b].pop()(a);
                            delete c[b] } }
                    var l = this.cache,
                        k = [],
                        m = {};
                    h.each(a, function(a, b) { l[b] ? g ? g(l[b]) : m[b] = l[b] : c[b] && g ? c[b].push(g) : g && (k.push(b), c[b] = []) });
                    if (!g) return m;
                    k.length && e.call(this,
                        k.length)
                }
            };
            return k
        });
        n.register("twister-metadata", function() {
            function d() { this.config = {} }
            d.prototype = { process: function(d, h, f) { "METADATA" === d && f(h) } };
            return d });
        n.when("A").register("publisherSubscriber", function(d) {
            function k() { this.Subscribers = [];
                this.Names = [] }
            var h = d.$;
            k.prototype = {
                register: function(f, c) {
                    if (-1 < d.indexOfArray(this.Names, f)) return !1;
                    this.Names.push(f);
                    this.Subscribers.push({ name: f, handler: c }) },
                deRegister: function(f) {
                    var c = d.indexOfArray(this.Names, f),
                        a = this,
                        g = function(c, b) {
                            if (c.name === f) return a.Subscribers.splice(b, 1), !0 };
                    return -1 < c ? (this.Names.splice(c, 1), [].some ? this.Subscribers.some(g) : h.each(this.Subscribers, function(a, b) { g(b, a) }), !0) : !1
                },
                publish: function() {
                    var d = arguments;
                    h.each(this.Subscribers, function(c, a) { setTimeout(function() { a.handler.apply(null, d) }, 0) }) }
            };
            return k
        });
        n.when("jQuery").register("twister-state-machine", function(d) {
            return function(k, h, f) {
                function c(a, b) { this.selected = function() {
                        return a };
                    this.peek = function() {
                        return b } }

                function a(a, b) {
                    var c = h.extendSelectionInfo(a, b);
                    if (g(b) || k.exists(c.selectionInfo())) return c;
                    var d = h.extendSelectionInfo(a, b, -1),
                        d = h.getValidDimCombination(d.selectionInfo(), c);
                    return h.createNextDimSelection(d, c) }

                function g(a) {
                    var b;
                    d.each(a.selectionInfo(), function(a, c) { b = -1 === c.val });
                    return b }

                function e(a, b) {
                    return { THEN: function(c) { a && c && c(b());
                            return this }, ELSE: function(c) { a || c && c(b());
                            return this } } }
                var b, n;
                this.accept = function(d, g) {
                    var f;
                    switch (d) {
                        case "VARIATION_PEEK":
                            var k = h.createSelectionInfo(g);
                            f = b();
                            f.peek().matches(k) ? f = !1 : (-1 === g.val ? f = new c(b.selected(), b.selected()) : (k = a(f.peek(), k), f = new c(f.selected(), k)), n = f, f = !0);
                            f = e(f, this.currentState);
                            break;
                        case "VARIATION_CHANGE":
                            f = b();
                            k = h.createSelectionInfo(g);
                            f.selected().matches(k) ? f = !1 : (f = h.isFullySelected(k) ? k : a(f.selected(), k), n = new c(f, f), f = !0);
                            f = e(f, this.currentState);
                            break;
                        default:
                            f = e(!1)
                    }
                    return f
                };
                b = this.currentState = function() {
                    return n };
                (function(a) { n = a })(new c(h.createSelectionInfo(f), h.createSelectionInfo(f)))
            }
        });
        n.when("A").register("twister-variation-matrix", function(d) {
            function k(a) { a = d.copy(a);
                var f = this;
                this.dimCombinations = a.dimCombinations;
                this.validCombinatonString = " " + d.keys(a.dimCombinations).join("  ") + " ";
                this.dimensionInfo = a.dimensionInfo;
                this.dimensionList = a.dimensionList;
                this.dimensionDisplayText = a.dimensionDisplayText;
                this.config = a.config;
                this.dimInfoMap = {};
                c.each(this.dimensionInfo, function(a, b) {
                    var c = b.dimKey,
                        d = {};
                    d.size = b.size;
                    d.dimOrder = a;
                    f.dimInfoMap[c] = d });
                this.dimtoValueMap = a.dimtoValueMap }

            function h(a) { a = c.map(a, function(a) { a = a.val;
                    return -1 === a ? "\\d+" : "" + a }).join(":");
                return new RegExp("\\s" + a + "\\s", "gm") }

            function f(a) {
                return c.map(a, function(a) {
                    return "" + a.val }).join(":") }
            var c = d.$;
            k.prototype = { fetch: function(a) { a = h(a);
                    a = this.validCombinatonString.match(a);
                    return a = c.map(a, function(a) {
                        return a.trim() }) }, exists: function(a) {
                    return f(a) in this.dimCombinations } };
            return k
        });
        n.when("A", "jQuery").register("url-builder", function(d, k) {
            function h(a, c) {
                var e;
                if (a && c && "object" == typeof c) {
                    e =
                        a;
                    var b = "?";
                    d.each(c, function(a, d) { a = c[d];
                        e += b + d + "=" + a;
                        b = "&" })
                }
                return e
            }

            function f(a) {
                var c;
                a && (c = a.split("?")[0]);
                return c }

            function c(a) {
                var c = {};
                a && (a = a.split("?"), 1 < a.length && (a = a[1].split("&"), d.each(a, function(a, b) {
                    var d = a.split("=");
                    c[d[0]] = d[1] })));
                return c }
            return {
                addUrlParams: function(a, d) {
                    var e = a;
                    if (a && d && "object" == typeof d) var e = f(a),
                        b = c(a),
                        b = k.extend(b, d),
                        e = h(e, b);
                    return e },
                removeUrlParams: function(a, g) {
                    var e = a;
                    if (a && g && "object" == typeof g) {
                        var e = f(a),
                            b = c(a);
                        d.each(g, function(a, c) { delete b[a] });
                        e = h(e, b)
                    }
                    return e
                }
            }
        })
    })
})(function() {
    var n = window.AmazonUIPageJS || window.P,
        p = n._namespace || n.attributeErrors;
    return p ? p("TwisterCoreAsset") : n }(), window);
/* ******** */
(function(n, p, u) {
    n.execute(function() {
        n.when("A", "ajax-utility", "page-refresh-state", "alt-twister-ajax-measurement").register("page-refresh-handler", function(d, k, h, f) {
            var c = {},
                a = d.$,
                g = function(c, b) {
                    var g = this;
                    g.clientId = c;
                    g.persistentParams = {};
                    g.ajaxHandles = [];
                    g.pageRefreshUrlParams = "";
                    g.deviceType = "";
                    g.doPageRefresh = function(d, f, h) {
                        for (var n = 0; n < g.ajaxHandles.length; n++) g.ajaxHandles[n].abort();
                        var p;
                        g.persistentParams = a.extend(!0, g.persistentParams, f.Persistent);
                        n = {};
                        a.extend(!0, n, g.persistentParams,
                            f["Non-Persistent"]);
                        f = b;
                        f += "?asin=" + (d ? d : "") + (g.pageRefreshUrlParams ? g.pageRefreshUrlParams : "");
                        for (p in n) null != n[p] && (f += "&" + p + "=" + n[p]);
                        p = f;
                        l(d, "pagerefreshscope_" + c + "_" + d, new Date, !0);
                        d = k.sendAjax(p, h);
                        g.ajaxHandles.push(d)
                    };
                    g.addParams = function(b) { g.persistentParams = a.extend(!0, g.persistentParams, b);
                        return !0 };
                    g.removeParams = function(b) { d.each(b, function(b, a) { delete g.persistentParams[b] }) };
                    g.createCustomParamsMap = function(b, c) {
                        var e = { Persistent: {}, "Non-Persistent": {} };
                        a.each(b, function(b, a) {
                            e.Persistent[b] =
                                a
                        });
                        a.each(c, function(b, a) { e["Non-Persistent"][b] = a });
                        return e
                    };
                    var l = function(b, a, c, e) {
                        "function" === typeof ues && (g.ajaxMeasurement.isEnabled() ? g.ajaxMeasurement.start(b, c) : (ues("t0", a, c), ues("ctb", a, "1")), updateCSMReqs(function() { d.trigger("PageRefresh:ATF");
                            g.ajaxMeasurement.isEnabled() ? p.TwisterState && "asin" in p.TwisterState && g.ajaxMeasurement.markATF(p.TwisterState.asin) : uet("af", a);
                            setCSMReq("cf") }, function() {
                            d.trigger("PageRefresh:CF");
                            d.trigger("image-block-refresh");
                            g.ajaxMeasurement.isEnabled() ?
                                p.TwisterState && "asin" in p.TwisterState && g.ajaxMeasurement.markCF(p.TwisterState.asin) : (uet("cf", a), CSMReqs.cf.id && (ues("id", a, CSMReqs.cf.id), uex("ld", a)))
                        }))
                    };
                    (function() {
                        var b = h.pageRefreshData;
                        g.pageRefreshUrlParams = b.pageRefreshUrlParams;
                        g.deviceType = b.deviceType;
                        g.ajaxMeasurement = new f(g.deviceType) })()
                };
            return {
                getHandlerInstance: function(a, b) {
                    (null == a || "" === a) && p.ueLogError && p.ueLogError({ message: "Invalid ClientId" }, { logLevel: "FATAL", attribution: "PageRefreshAPI", message: "Invalid ClientId passed to getHandlerInstance of dpRefreshHandler" });
                    c[a] || (c[a] = new g(a, b));
                    return c[a]
                }
            }
        });
        n.when("A", "page-refresh-handler").register("dp-refresh-handler", function(d, k) {
            function h(f) {
                this.featureTriggeringRefresh = f.featureName;
                this.deviceTypeStateData = d.state("detail-page-device-type");
                this.deviceType = d.state("detail-page-device-type") ? d.state("detail-page-device-type").deviceType : "mobile";
                this.pageRefreshUrl = "/gp/twister/update";
                this.clientId = "PageRefresh_" + this.deviceType + "_Client";
                this.DPRefreshHandler = k.getHandlerInstance(this.clientId,
                    this.pageRefreshUrl)
            }
            h.prototype = {
                doPageRefresh: function(d, c, a, g) {
                    try { this.DPRefreshHandler.doPageRefresh(d, c, a, g) } catch (e) { p.ueLogError && p.ueLogError(e, { logLevel: "ERROR", attribution: this.featureTriggeringRefresh, message: "This error is caused by the doPageRefresh method triggered by - " + this.featureTriggeringRefresh }) } },
                createCustomParamsMap: function(d, c) {
                    var a = {};
                    try { a = this.DPRefreshHandler.createCustomParamsMap(d, c) } catch (g) {
                        p.ueLogError && p.ueLogError(g, {
                            logLevel: "ERROR",
                            attribution: this.featureTriggeringRefresh,
                            message: "This error is caused by the createCustomParamsMap method triggered by - " + this.featureTriggeringRefresh
                        })
                    }
                    return a
                },
                addParams: function(d) {
                    return d && "object" == typeof d ? this.DPRefreshHandler.addParams(d) : !1 },
                removeParams: function(d) {
                    return d && "object" == typeof d ? this.DPRefreshHandler.removeParams(d) : !1 }
            };
            return h
        });
        n.when("A", "ready").register("page-refresh-state", function(d) {
            var k = d.state("page-refresh-data");
            d = d.state("detail-page-device-type");
            var h = {};
            "undefined" !== typeof k && (h.pageRefreshUrlParams =
                k.pageRefreshUrlParams);
            "undefined" !== typeof d && (h.deviceType = d.deviceType);
            return { pageRefreshData: h }
        });
        n.when("A", "alt-twister-ajax-scope").register("alt-twister-ajax-measurement", function(d, k) {
            return d.createClass({
                isEnabled: function() {
                    return !0 },
                init: function(d) { this.scopes = {};
                    this.url = "/gp/twister/dynamic-update/mobile-ajax-measurement.html/?deviceType=" + d },
                start: function(d, f) {
                    var c = 0;
                    this.scopes[d] ? c = this.scopes[d].scopeCount + 1 : this.scopes[d] = {};
                    var a = d + "_scope_";
                    this.scopes[d].scope =
                        new k(a + c, this.url);
                    this.scopes[d].scopeCount = c;
                    this.scopes[d].scopeName = a;
                    this.scopes[d].scope.start(f)
                },
                markATF: function(d) { d in this.scopes && this.scopes[d].scope.markATF() },
                markCF: function(d) { d in this.scopes && this.scopes[d].scope.markCF() }
            })
        });
        n.when("A").register("alt-twister-ajax-scope", function(d) {
            return d.createClass({
                init: function(d, h) { this.scopeName = d;
                    this.url = h;
                    this.requestId = "";
                    this.CFmarked = !1 },
                _flushMetrics: function() {
                    "function" === typeof ues && "function" === typeof uex && this.requestId &&
                        this.CFmarked && (p.ues("id", this.scopeName, this.requestId), p.uex("ld", this.scopeName))
                },
                start: function(k) {
                    if ("function" === typeof ues) {
                        var h = this;
                        p.ues("t0", this.scopeName, k);
                        p.ues("ctb", this.scopeName, "1");
                        d.ajax(this.url, { method: "get", contentType: "text", timeout: 4E4, error: function() {}, success: function(d) { d && (h.requestId = d.trim(), h._flushMetrics()) } }) } },
                markATF: function() { "function" === typeof uet && p.uet("af", this.scopeName) },
                markCF: function() {
                    "function" === typeof uet && (p.uet("cf", this.scopeName), this.CFmarked = !0, this._flushMetrics())
                }
            })
        });
        n.when("A").register("ajax-utility", function(d) {
            var k = d.$;
            return {
                sendAjax: function(h, f) {
                    null == h && p.ueLogError && p.ueLogError({ message: "Invalid URL" }, { logLevel: "FATAL", attribution: "PageRefreshAPI", message: "Invalid Twister Update URL passed to AjaxUtility of PageRefresh" });
                    var c = {};
                    k.extend(!0, c, { method: "get", chunk: function(a) {}, success: function(a) {}, error: function(a) {}, timeout: 1E4 }, f);
                    var a = c.success,
                        g = c.error;
                    c.success = function() { a();
                        d.trigger("dp:pageUpdate:end") };
                    c.error =
                        function() { g();
                            d.trigger("dp:pageUpdate:error") };
                    d.trigger("dp:pageUpdate:start");
                    return d.ajax(h, c)
                }
            }
        })
    })
})(function() {
    var n = window.AmazonUIPageJS || window.P,
        p = n._namespace || n.attributeErrors;
    return p ? p("PageRefreshAsset") : n }(), window);
/* ******** */
(function(n, p, u) {
    n.execute(function() {
        n.when("A", "a-sheet").register("dp-sheet", function(d, k) {
            function h(b) {
                if (t) return b = b || {}, (b = b.height) && "auto" !== b || (b = x.length ? Math.max(x[0].scrollHeight, G) : G), c(), t.changeHeight({ height: b, duration: .3 }) ? delete h.pendingHeightChange : h.pendingHeightChange = b, this }

            function f() { a() }

            function c() { H.appendTo(x).show() }

            function a() { H.hide();
                h.pendingHeightChange && h({ height: h.pendingHeightChange }) }

            function g(b) {
                a();
                for (D = !0; z.length;) z.pop()();
                h();
                d.trigger("dp:sheet:afterShow:" +
                    y, m.extend({}, p, b))
            }

            function e(b) { a();
                l(0);
                d.trigger("dp:sheet:afterHide:" + y, m.extend({}, p, b)) }

            function b(b) { c();
                d.trigger("dp:sheet:beforeShow:" + y, m.extend({}, p, b)) }

            function q(b) { c();
                D = !1;
                d.trigger("dp:sheet:beforeHide:" + y, m.extend({}, p, b)) }

            function l(b, a) {
                var e, c = m("#a-page"),
                    g = m("html"),
                    q = m("body");
                l = function(b, l) {
                    if (b) {
                        var a = e = q.scrollTop() || g.scrollTop();
                        d.requestAnimationFrame(function() { c.css({ position: "fixed", top: "-" + a + "px" }) }, c[0]) } else d.requestAnimationFrame(function() {
                        c.css({
                            position: "",
                            top: ""
                        });
                        q.scrollTop(e);
                        g.scrollTop(e)
                    }, c[0]);
                    l && (m(l).length && (e = m(l).position().top || 0), d.requestAnimationFrame(function() {
                        var b = e ? "-" + e + "px" : e;
                        d.animate(c, { top: b }, 300, "ease-out", function(l) { d.requestAnimationFrame(function(l) { c.css({ transform: "", "-moz-transform": "", "-webkit-transform": "", "-o-transform": "", "-ms-transform": "", transition: "", "-moz-transition": "", "-webkit-transition": "", "-o-transition": "", "-ms-transition": "", top: b }) }, c[0]) }) }, c[0]))
                };
                l(b, a)
            }
            d.state.parse();
            var r = d.state("detail-page-mobile-bottom-sheet-data");
            r || (r = {}, n.when("ready").execute(function() { r = d.state("detail-page-mobile-bottom-sheet-data") || {} }));
            var m = d.$,
                G, t, x, N = [],
                z = [],
                p = { changeHeight: h, height: function() {
                        return t.$container.height() } },
                y, D = !1;
            d.declarative("dp-sheet", ["click"], function(a) {
                var c = a.data || {};
                a = c.preloadDomId || r.id;
                G = parseInt(c.height ? c.height : c.imageHeight, 10) || 0;
                if (a && (x = m("#" + a), x.length))
                    if (y = c.name || "", t) a = c.scrollToTop, t.show(), l(1, a);
                    else {
                        d.on("a:sheet:beforeHide:dp-sheet", q);
                        d.on("a:sheet:afterHide:dp-sheet", e);
                        d.on("a:sheet:beforeShow:dp-sheet",
                            b);
                        d.on("a:sheet:afterShow:dp-sheet", g);
                        d.on("a:sheet:changeHeight:dp-sheet", f);
                        for (x.css({ display: "block" }); N.length;) N.pop()();
                        var h = { name: "dp-sheet", height: x.length ? Math.max(x[0].scrollHeight, G) : G, preloadDomId: a, duration: .3, closeType: c.closeType || r.closeType, closeMessage: c.closeMessage || r.closeMessage, sheetType: "web" };
                        t = k.create(h);
                        c = c.scrollToTop;
                        t.show();
                        l(1, c);
                        x = m("#" + a)
                    }
            });
            var H = m("<div/>", { "class": "dp-sheet-lightbox" }).bind("click touchmove touch scroll", function(b) { b.preventDefault();
                b.stopPropagation() });
            return { changeHeight: h, beforeCreate: function(b) {
                    if ("function" == typeof b) return t ? (b(), h()) : N.push(b), this }, initDone: function() {
                    return !!t }, close: function() { t.hide() }, isOpened: function() {
                    return D }, afterShow: function(b) { "function" == typeof b && (D ? b() : z.push(b)) } }
        });
        n.when("A").register("dp-bottom-sheet-widgets-factory", function(d) {
            var k = d.$;
            String.prototype.replaceAll = function(a, e) {
                return this.replace(new RegExp(a, "g"), e) };
            var h = function() {
                    return {
                        scrollTo: function(a, e, b, c) {
                            if (a.length && e.length) {
                                var l =
                                    a.innerWidth(),
                                    r = e.outerWidth();
                                e = e.position().left;
                                var m = Math.floor(e - (l - r) / 2),
                                    f = a.scrollLeft(),
                                    l = a[0].scrollWidth - l,
                                    m = Math.max(m, 0),
                                    m = Math.min(m, l);
                                d.requestAnimationFrame(function() {
                                    if (b) {
                                        var l = a.find(".js-t-swatch-scroller");
                                        a.scrollLeft(0);
                                        l.css({ left: -1 * f + "px" });
                                        d.animate(l, { left: -1 * m + "px" }, 800, "ease-out", function() {
                                            l.css({
                                                left: "",
                                                transform: "",
                                                "-moz-transform": "",
                                                "-webkit-transform": "",
                                                "-o-transform": "",
                                                "-ms-transform": "",
                                                transition: "",
                                                "-moz-transition": "",
                                                "-webkit-transition": "",
                                                "-o-transition": "",
                                                "-ms-transition": ""
                                            });
                                            a.scrollLeft(m);
                                            c()
                                        })
                                    } else a.scrollLeft(m)
                                })
                            }
                        },
                        hideOnScroll: function(a) {
                            return function() {} }
                    }
                }(),
                f = function(a) {
                    function e(a, l) { this.templates = a;
                        this.text = l.text;
                        this.image = l.image;
                        this.hiResImage = l.hiResImage || l.image;
                        this.textVcenter = !1;
                        this.name = l.name;
                        this.id = l.id;
                        this.unavailable = !!l.unavailable;
                        this.selected = !!l.selected;
                        this.showSlot = l.showSlot;
                        this.slotHtm = l.slotHtm;
                        this.swatchImageHtm = l.swatchImageHtm;
                        this.glow = !1;
                        this.domNode = k(b.call(this)) }

                    function b() {
                        var b = this.swatchImageHtm ?
                            this.swatchImageHtm : this.image ? this.templates.swatchImageHtm.replaceAll("###hiResImgSrc", this.hiResImage).replaceAll("###imgSrc", this.image) : "",
                            l = this.showSlot ? this.templates.swatchSlotHtm.replaceAll("###SlotHtm", this.slotHtm) : "",
                            a = this.text ? this.templates.swatchTextHtm.replaceAll("###SwatchText", this.text).replaceAll("###TextVcenter", this.textVcenter ? "" : "-not") : "";
                        return this.templates[this.unavailable ? "unavailableSwatchHtm" : this.selected ? "selectedSwatchHtm" : "unselectedSwatchHtm"].replaceAll("###SwatchTextHtm",
                            a).replaceAll("###SwatchImageHtm", b).replaceAll("###SwatchId", this.id).replaceAll("###SwatchName", this.name).replaceAll("###SwatchSlotHtm", l)
                    }
                    e.prototype = {
                        refresh: function() {
                            var a = this.domNode;
                            this.image && this.image != this.hiResImage && this.domNode.find(".twister-ts-img-el").attr("src") == this.hiResImage && (this.image = this.hiResImage);
                            this.domNode = k(b.call(this));
                            this.glow && this.domNode.addClass("js-auto-select-start");
                            a.replaceWith(this.domNode);
                            delete a[0];
                            return this },
                        setState: function(b) {
                            return d.equals(b,
                                k.extend({}, this)) ? this : (k.extend(this, b), this.refresh())
                        },
                        isMultiLineText: function() {
                            var b = this.domNode.find(".twister-ts-text"),
                                l = b.height(),
                                b = b.css("line-height").replace("px", "");
                            return 1 < Math.round(l / parseInt(b, 10)) },
                        setTextVcenter: function() { this.textVcenter = !0;
                            this.refresh() },
                        getSlotNode: function() {
                            return this.domNode.find(this.templates.slotIdentifier) },
                        startGlow: function() { this.glow = !0 },
                        endGlow: function() { this.glow = !1;
                            this.domNode.removeClass("js-auto-select-start").addClass("js-auto-select") },
                        cancelGlow: function() { this.glow = !1;
                            this.domNode.removeClass("js-auto-select-start").removeClass("js-auto-select") }
                    };
                    return e
                }(h),
                c = function(a, e) {
                    function b(b, a) {
                        var g = this;
                        this.templates = b;
                        this.isTextSwatch = a.isTextSwatch;
                        this.isTextPPSwatch = a.isTextPPSwatch;
                        this.isMultiLineTextSwatch = !1;
                        this.name = a.name;
                        this.domNode = k(l.call(this));
                        this.selectedSwatch = null;
                        this.swatches = k.map(a.swatches, function(b, l) {
                            g.isTextSwatch || b.image || (b.swatchImageHtm = g.templates.notAvailableSwatchImageHtm);
                            var a = new e(g.templates,
                                b);
                            g.selectedSwatch = b.selected ? a : g.selectedSwatch;
                            return a
                        });
                        this.onChange = a.onChange;
                        this.isScrolling = this.isUserInteracting = !1;
                        this.pendingScroll = {};
                        this.deferredScroll;
                        this.glowingSwatch;
                        d.on("a:button-group:" + this.name + ":toggle", function(b) { g.isUserInteracting = !0;
                            g.onChange && g.onChange(b.selectedButton) });
                        c.call(this)
                    }

                    function c() {
                        var b = this.domNode.find("#dummySwatchHtm").parent();
                        b.html("");
                        k.each(this.swatches, function(l, a) { b.append(a.domNode) });
                        return this }

                    function l() {
                        var b = this.templates.rowHtml.replaceAll("###RowHtml",
                                '<p id="dummySwatchHtm"></p>').replaceAll("###EnableTextSwatch", this.isTextSwatch ? "" : "-not").replaceAll("###EnableImageSwatch", this.isTextSwatch ? "-not" : "").replaceAll("###EnableTextPPSwatch", this.isTextPPSwatch ? "" : "-not").replaceAll("###EnableMultiLineTextSwatch", this.isMultiLineTextSwatch ? "" : "-not").replaceAll("###RowName", this.name),
                            b = k(b);
                        b.scroll(a.hideOnScroll(b));
                        return b
                    }
                    b.prototype = {
                        setState: function(b) {
                            var l = this,
                                a, c = [];
                            k.each(b.swatches, function(b, g) {
                                l.swatches[b] ? (a = g.selected ? l.swatches[b] :
                                    a, l.isUserInteracting && (l.swatches[b].selected = g.selected), c.push({ index: b, data: g })) : (l.swatches[b] = new e(l.templates, g), l.rowContainer.append(l.swatches[b].domNode))
                            });
                            !this.isUserInteracting && this.selectedSwatch && this.selectedSwatch != a && (this.scrollTo(a || this.selectedSwatch, 1), a && (this.glowingSwatch && this.glowingSwatch.cancelGlow(), this.glowingSwatch = a, a.startGlow()));
                            this.selectedSwatch = a;
                            this.isUserInteracting = !1;
                            k.each(c, function(b, a) { l.swatches[a.index].setState(a.data) });
                            return this
                        },
                        scrollTo: function(b,
                            l) {
                            if (b) {
                                var e = this,
                                    c = arguments;
                                clearTimeout(this.deferredScroll);
                                this.deferredScroll = setTimeout(function() { e.isScrolling ? (e.pendingScroll.status = !0, e.pendingScroll.args = c) : (e.isScrolling = !0, e.disableInteraction(!0), a.scrollTo(e.domNode, b.domNode, l, function() { e.isScrolling = !1;
                                        e.disableInteraction(!1);
                                        e.pendingScroll.status && (e.pendingScroll.status = !1, e.scrollTo.apply(e, e.pendingScroll.args));
                                        b.endGlow() })) }, 300) } },
                        disableInteraction: function(b) {
                            var l = k("<div/>", { "class": "dp-sheet-lightbox" }).bind("click touchmove touch scroll",
                                function(b) { b.preventDefault();
                                    b.stopPropagation() }).prependTo(this.domNode);
                            this.disableInteraction = function(b) { l[b ? "show" : "hide"]() };
                            this.disableInteraction(b)
                        },
                        refresh: function(b) { b = this.domNode;
                            this.domNode = k(l.call(this));
                            c.call(this);
                            b.replaceWith(this.domNode);
                            delete b[0];
                            return this },
                        onAfterRender: function() {
                            var b = [],
                                l = this;
                            this.isTextSwatch && (k.each(this.swatches, function(a, e) {
                                var c = e.isMultiLineText();
                                c ? l.isMultiLineTextSwatch = c : b.push(e) }), l.isMultiLineTextSwatch && (k.each(b, function(b,
                                l) { l.setTextVcenter() }), this.refresh()));
                            return this
                        },
                        scrollToSelected: function() {
                            var b = 0;
                            if (this.selectedSwatch) {
                                var b = this.swatches.indexOf(this.selectedSwatch),
                                    l = 0,
                                    a = this,
                                    e = this.domNode.innerWidth();
                                0 === b ? l = this.partiallyVisible(1) : b === this.swatches.length - 1 ? (l = -this.partiallyVisible(0), l += this.domNode.find(".js-t-swatch-scroller")[0].scrollWidth - e) : (b = this.selectedSwatch.domNode.outerWidth(), l = this.selectedSwatch.domNode.position().left - (e - b) / 2);
                                d.requestAnimationFrame(function() { a.domNode.scrollLeft(l) });
                                return this
                            }
                        },
                        partiallyVisible: function(b) {
                            for (var l = 0, a = k(p).width(), e, c, g, q = b ? 0 : this.swatches.length - 1; b ? q < this.swatches.length : 0 <= q;) { e = this.swatches[q].domNode.outerWidth(!0);
                                c = this.swatches[q].domNode.outerWidth();
                                g = e - c;
                                l += e;
                                e = l - a - (b ? 0 : g);
                                if (0 <= e) {
                                    if (15 > e) return e + g + 15;
                                    if (e > c - 15) return e - (c - 15);
                                    break }
                                q += b ? 1 : -1 }
                            return 0 },
                        getSlotNodes: function(b) {
                            return k.map(this.swatches, function(b) {
                                return b.getSlotNode() }) }
                    };
                    return b
                }(h, f),
                a = function(a) {
                    function e(a, l) {
                        this.templates = a;
                        this.mainText = l.mainText;
                        this.subText = l.subText;
                        this.highlight = l.highlight;
                        this.domNode = k(b.call(this))
                    }

                    function b() {
                        return this.templates.titleTemplate.replaceAll("###MainText", this.mainText).replaceAll("###SubText", this.subText).replaceAll("###Highlight", this.highlight ? "" : "-not") }
                    e.prototype = { refresh: function() {
                            var a = this.domNode;
                            this.domNode = k(b.call(this));
                            a.replaceWith(this.domNode);
                            delete a[0];
                            return this }, setState: function(b) {
                            return d.equals(b, k.extend({}, this)) ? this : (k.extend(this, b), this.refresh()) }, onAfterRender: function() {} };
                    return e
                }(h),
                h = function(a, e, b) {
                    function c(l, a, m) { this.templates = l;
                        this.title = a ? new e(l, a) : null;
                        this.toggleSwatch = m ? new b(l, m) : null;
                        l = k('<div class="twister-bottom-sheet-row"></div>');
                        this.title && l.append(this.title.domNode);
                        this.toggleSwatch && l.append(this.toggleSwatch.domNode);
                        this.domNode = k(l) }
                    c.prototype = {
                        onAfterRender: function() { this.title && this.title.onAfterRender();
                            this.toggleSwatch && this.toggleSwatch.onAfterRender() },
                        setState: function(b, a) {
                            b && this.title && this.title.setState(b);
                            a && this.toggleSwatch &&
                                this.toggleSwatch.setState(a)
                        },
                        scrollToSelected: function() { this.toggleSwatch && this.toggleSwatch.scrollToSelected() },
                        refreshSwatches: function() { this.toggleSwatch && this.toggleSwatch.refreshSwatches() }
                    };
                    return c
                }(h, a, c);
            return { Swatch: f, ToggleSwatch: c, Title: a, Row: h }
        })
    })
})(function() {
    var n = window.AmazonUIPageJS || window.P,
        p = n._namespace || n.attributeErrors;
    return p ? p("BottomSheetWidgets") : n }(), window);
/* ******** */
(function(n, p, u) {
    n.execute(function() {
        n.when("A").execute(function() { "function" === typeof uet && uet("bb", "clickToTwister", { wb: 1 }) });
        n.when("a-popover-base", "a-popover-ajax").execute(function() { "function" === typeof uet && uet("af", "clickToTwister", { wb: 1 }) });
        n.when("mobile-twister-data").execute(function() { "function" === typeof uet && uet("cf", "clickToTwister", { wb: 1 }) });
        n.when("mobile-twister").execute(function() {
            "function" === typeof uex && "function" === typeof uet && (uet("be", "clickToTwister", { wb: 1 }), uex("ld", "clickToTwister", { wb: 1 }))
        });
        n.when("A", "mobile-twister-logger").execute(function(d, k) {
            function h(b) { a.logBottomSheetDoneButtonClick() }

            function f(b) { a.logBottomSheetLightboxClick() }
            var c = d.$,
                a = new k,
                g, e;
            c(p).unload(function() { c("#twister-bottom-sheet-container").is(":visible") && a.logBackButtonClickInBST() });
            d.on("dp:sheet:afterShow:twister", function(b) {
                a.logBottomSheetOpen();
                "function" === typeof uet && (uet("be", "clickToBSTwister", { wb: 1 }), uex("ld", "clickToBSTwister", { wb: 1 }));
                a.logBottomSheetToViewPortHeightRatio(b.height());
                e = e || c(".a-sheet-web.a-sheet-show .a-sheet-close");
                e.bind("click", h);
                g = g || c(".a-sheet-lightbox.a-sheet-show");
                g.bind("click", f)
            });
            d.on("dp:sheet:beforeShow:twister", function() { "function" === typeof uet && uet("bb", "clickToBSTwister", { wb: 1 });
                a.logScrollPosOnBottomSheetOpen(p.scrollY) });
            d.on("dp:sheet:beforeHide:twister", function() { e.unbind("click", h);
                g.unbind("click", f) });
            d.on("dp:sheet:afterHide:twister", function() { a.logBottomSheetClose();
                a.logBottomSheetPageUpdate("LOG") })
        });
        n.when("A").register("mobile-twister-logger",
            function(d) {
                function k(a) {
                    if (!(this instanceof k)) return new k(a);
                    f || (f = this);
                    f.twisterCore = a;
                    f.countOfPageUpdateInBottomSheet = 0;
                    return f }
                var h = d.$,
                    f, c = p.ue;
                k.prototype = {
                    logCSMDataOnLanding: function() {
                        var a = 0,
                            g = 0,
                            e = 0,
                            b = this.twisterCore.util,
                            d = b.tvm.dimensionInfo,
                            l = this.twisterCore.state().length,
                            f = Object.keys(b.tvm.dimCombinations).length;
                        h.each(d, function(c, l) {
                            var d = l.dimKey;
                            b.isRequiredDim(d) && e++;
                            b.isSingletonDim(d) ? g++ : a++ });
                        c && c.count && (c.count("dpMobileTwisterDropdownPresent", a), c.count("dpMbileTwisterSingletonDim",
                            g), c.count("dpMobileTwisterRequiredDim", e), c.count("dpMobileTwisterDimSize", l), c.count("dpMobileTwisterFamilySize", f))
                    },
                    logCounter: function(a, g) { c && c.count && (g === u ? c.count(a, (c.count(a) || 0) + 1) : c.count(a, g)) },
                    logSecondaryViewOpen: function() { this.logCounter("dpmobiletwistersecviewopen") },
                    logBottomSheetOpen: function() { this.logCounter("dpBottomSheetTwisterOpen") },
                    logBottomSheetClose: function() { this.logCounter("dpBottomSheetTwisterClose") },
                    logBottomSheetDoneButtonClick: function() { this.logCounter("dpBottomSheetTwisterDoneButtonClick") },
                    logBottomSheetLightboxClick: function() { this.logCounter("dpBottomSheetTwisterLightboxClick") },
                    logScrollPosOnBottomSheetOpen: function(a) { this.logCounter("dpBottomSheetTwisterScrollPosOnBSTOpen", a) },
                    logBottomSheetPageUpdate: function(a) { "INCREMENT" === a ? this.countOfPageUpdateInBottomSheet += 1 : "LOG" === a && (this.logCounter("dpBottomSheetTwisterPageUpdate", this.countOfPageUpdateInBottomSheet), this.countOfPageUpdateInBottomSheet = 0) },
                    logBackButtonClickInBST: function() { this.logCounter("dpBottomSheetTwisterBackInBST") },
                    logSelectedSwatchClick: function() { this.logCounter("dpBottomSheetTwisterSelectedSwatchClick") },
                    logDimensionValueClick: function() { this.logCounter("dpmobiletwisterclickOndimval") },
                    logSecondaryViewScrollToEnd: function() { this.logCounter("dpmobiletwistersecviewscrollend") },
                    logBottomSheetToViewPortHeightRatio: function(a) { p.outerHeight && this.logCounter("dpBSTToViewPortHeightRatio", parseInt(a / p.outerHeight * 100)) }
                };
                return k
            });
        n.when("A", "mobile-twister-data").register("twister-page-state", function(d,
            k) {
            d.state.parse();
            var h = {
                dimCombinations: d.state("mobile-twister-dims-to-asin-list"),
                dimtoValueMap: d.state("mobile-twister-dim-val-list"),
                initDimCombination: function(f, c) {
                    var a = c.selectedDimensions;
                    return d.$.map(f.key, function(c) {
                        return { dimKey: c, val: c in a ? a[c] : -1 } }) }(d.state("mobile-twister-dim-list"), d.state("mobile-twister")),
                dimensionInfo: function(f, c, a) {
                    return d.$.map(f.key, function(g) {
                        return { dimKey: g, isRequired: a[g] || !1, size: c[g].length } }) }(d.state("mobile-twister-dim-list"), d.state("mobile-twister-dim-val-list"),
                    d.state("mobile-twister").dimensionStatusMap || {}),
                dimensionList: d.state("mobile-twister-dim-list").key,
                dimensionDisplayText: d.state("mobile-twister").dimensionDisplayText,
                config: { isSingletonWeblabEnabled: d.state("mobile-twister-singleton-display").enable, ajaxTimeout: 2E4, ajaxUrlParams: d.state("mobile-twister").ajaxUrlParams, deviceType: d.state("detail-page-device-type") ? d.state("detail-page-device-type").deviceType : "" },
                isBottomSheetBehavior: !!d.state("mobile-twister-sheet-view-html-data"),
                sheetViewData: d.state("mobile-twister-sheet-view-html-data") || {},
                variationData: function(d) {
                    var c = {};
                    c.parentAsin = d.parentAsin;
                    return c }(d.state("mobile-twister"))
            };
            return d.copy(h)
        });
        n.when("A").register("twister-history", function(d) {
            var k = d.$;
            return {
                saveTwisterState: function(h) {
                    var f = d.state("reminisce-data");
                    if (p.history && p.history.replaceState && h && f && "reminisceEnabled" in f) {
                        for (var c = p.location.search, a = {}, c = c.substring(c.indexOf("?") + 1).split("&"), g = 0; g < c.length; g++) {
                            var e = c[g].split("=");
                            e[0] && 0 <= e[0].length && (a[decodeURIComponent(e[0])] = decodeURIComponent(e[1])) }
                        a.th =
                            1;
                        a.psc = 1;
                        a = k.param(a);
                        c = p.location.pathname.replace(new RegExp(f.asinInURL, "i"), h);
                        a && c && (p.history.replaceState(p.history.state, document.title, c + "?" + a), f.asinInURL = h, d.state("reminisce-data", f))
                    }
                }
            }
        });
        n.when("A", "dp-refresh-handler", "twister-history").register("page-refresh-view", function(d, k, h) {
            function f(b, a) {
                a ? e(b).each(function(b, a) { c(a, ".js-feature-refresh-overlay", !0) }) : e(b).each(function(b, a) {
                    "static" === e(a).css("position") && e(a).css("position", "relative");
                    0 < e(a).find(".a-carousel-container").length ?
                        e(a).append('<div class = "js-feature-refresh-overlay a-carousel-container"></div>') : e(a).append('<div class = "js-feature-refresh-overlay"></div>')
                })
            }

            function c(b, a, c) {
                (b = e(b).find(a)) && 0 < b.length && (c ? e(b[0]).remove() : e(b).remove()) }

            function a(b, a, c) {
                if (0 < c.length)
                    for (var e = 0; e < b.length; ++e)
                        if (b[e].val != a[e].val && -1 != c.indexOf(b[e].dimKey)) return !0;
                return !1 }

            function g(b) {
                var a = {};
                a.currentAsin = b;
                d.state("twister-selection-state", a) }
            var e = d.$;
            return function(b, q) {
                var l = this,
                    r = p.ue,
                    m = d.state("visualDimensionPageState"),
                    G = m && m.visualDimensionKeys ? m.visualDimensionKeys : [],
                    t = m && m.shouldUseVisualDimensionKeys ? m.shouldUseVisualDimensionKeys : !1,
                    x = b.state(),
                    n = !1,
                    z = e.map(["#dpFastTrack_feature_div", "#dynamicDeliveryMessage_feature_div", "#holidayAvailabilityMessage_feature_div"], function(b) {
                        return e(b) });
                this.twisterUtil = b.util;
                this.twisterUpdateEndpoint = "/gp/twister/update";
                this.twisterFeatureName = "Twister";
                this.deviceType = d.state("detail-page-device-type") ? d.state("detail-page-device-type").deviceType : "";
                this.mobileData =
                    d.state("mobile-twister");
                this.pageLoadRequestId = this.mobileData.pageLoadRequestId;
                var J = function(b) { r && r.count && r.count(b, (r.count(b) || 0) + 1) };
                this.twisterRefreshHandler = new k({ featureName: l.twisterFeatureName });
                e("body").click(function() { console.log("Body clicked") });
                e("body").scroll(function() { console.log("Scrolled") });
                b.registerPassive({ viewAttribution: "DetailPage", viewName: "MobileTwisterRefresh" }, {
                    updateView: function(b, m) {
                        if ("VARIATION_CHANGE" === b) {
                            var d = m.selected().selectionInfo();
                            n = t ? a(x, d,
                                G) : !0;
                            x = d;
                            var r = l.twisterUtil.getAsinFromSelectionInfo(d);
                            g(r);
                            var k = {};
                            l.deviceType && (k = { deviceType: l.deviceType });
                            var p = {};
                            l.pageLoadRequestId && (p.twsid = l.pageLoadRequestId);
                            l.twisterUtil.isFullySelected(d) && (p.vs = 1);
                            k.twisterFeatureRefreshEnabled = 1;
                            k.isNonVisualTwisterRefresh = n ? 0 : 1;
                            d = l.twisterRefreshHandler.createCustomParamsMap(k, p);
                            c("body", ".js-feature-refresh-overlay");
                            f(".t-full", !1);
                            f(".t-visual", !n);
                            f(z, !1);
                            q.logBottomSheetPageUpdate("INCREMENT");
                            l.twisterRefreshHandler.doPageRefresh(r,
                                d, { success: function() { c("body", ".js-feature-refresh-overlay");
                                        J("twisterUpdateSuccess");
                                        h.saveTwisterState(r) }, chunk: function(b) {
                                        if (b && b[1]) {
                                            var a = b[1];
                                            b = b[2];
                                            e(a).html(b);
                                            f(a, !0) } }, error: function() { c("body", ".js-feature-refresh-overlay");
                                        J("twisterUpdateFailure") }, timeout: 2E4 })
                        }
                    }
                })
            }
        });
        n.when("A").register("mobile-twister-primary-view", function(d) {
            var k = d.$;
            return function(d, f) {
                function c(a, c, b) {
                    a = k("#" + a + "-button");
                    var d = k(".dimension-label", a),
                        l = k(".dimension-thumbnail", a);
                    a.removeClass("twister-required-dim-alert");
                    d.html(c);
                    b ? (l.attr("src", b), l.show()) : l.hide();
                    k("#unselectedDimAlert").hide();
                    k("#dimsInlineError").hide()
                }
                var a = this;
                this.config = {};
                this.pageStateData = f;
                this.twisterCore = d;
                d.registerPassive({ viewAttribution: "DetailPage", viewName: "MobileTwisterPrimaryView" }, {
                    updateView: function(g, e) {
                        if ("METADATA" === g && "SECONDARY_VIEW_DATA" === e.subType) c(e.dimension, e.label, e.thumbnail);
                        else if ("VARIATION_CHANGE" === g && a.pageStateData && a.pageStateData.imageUrlMap) {
                            var b, d, l, f, m;
                            b = e.selected().selectionInfo();
                            k.each(b,
                                function(b, e) { f = e.dimKey;
                                    d = e.val;
                                    m = a.pageStateData.imageUrlMap[f + "::" + d];
                                    l = a.twisterCore.tvm.dimtoValueMap[f][d]; - 1 === d && (l = a.pageStateData.translatedSelect.replaceAll("text###", a.twisterCore.tvm.dimensionDisplayText[f]));
                                    c(f, l, m) })
                        }
                    }
                })
            }
        });
        n.when("A").register("twister-dynamic-style", function(d) {
            function k(c, a) { this.name = c;
                this.styleNode;
                this.rules = a || [];
                this.pendingRefresh }
            var h = d.$,
                f = {};
            k.prototype = {
                refresh: function() {
                    clearTimeout(this.pendingRefresh);
                    var c = this;
                    this.pendingRefresh =
                        setTimeout(function() {
                            var a = h("<div />", { html: "&shy;<style>" + c.rules.join(" ") + "</style>" });
                            c.styleNode ? (c.styleNode.replaceWith(a), delete c.styleNode, c.styleNode = a) : (c.styleNode = a, c.styleNode.appendTo("body")) }, 0)
                }
            };
            return { addCSSRules: function(c, a) { f[c] ? f[c].rules = a || [] : f[c] = new k(c, a);
                    f[c].refresh() } }
        });
        n.when("A").register("twister-slot-manager", function(d) {
            function k(a, b, c) {
                var l = this;
                this.twisterCore = a;
                this.hasBadge = this.hasPPU = 0;
                this.prop = "Value";
                this.batch = {};
                this.currentBatch;
                this.subscribers = [];
                this.onAfterRender = c;
                this.pendingRenderCb;
                this.prefetchComplete = !1;
                this.prefetchSlotNodes = [];
                d.delay(function() {
                    var c = b.length;
                    a.slotsDimSum.get(b, function() {--c;
                        l.prefetchComplete = 0 === c;
                        l.prefetchComplete && d.delay(function() {
                            for (; l.prefetchSlotNodes.length;) l.setState(l.prefetchSlotNodes.pop()) }, 10) }) }, 0)
            }

            function h(c, b) {
                var g = this.batch,
                    l = this;
                g[c] = g[c] || [];
                g[c].push(b);
                clearTimeout(this.currentBatch);
                this.currentBatch = setTimeout(function() {
                    var b = d.map(l.batch, function(b, a) {
                        return a });
                    l.twisterCore.slotsDimSum.get(b, function(b) {
                        var c = l.batch[b.ASIN];
                        c && (a.each(c, function(a, c) { c(b) }), delete l.batch[b.ASIN]) })
                }, 0)
            }

            function f(c, b) { f.uniqueCount = f.uniqueCount || 0;
                var g = "bottomsheet-twister-dimsum-loading-" + (f.uniqueCount += 1),
                    l = '<div id="' + g + '" class="' + (b ? "loading-indicator" : "") + '"><div/></div>';
                for (b = b || 1; b - 1;) l += '<div class="loading-indicator"><div/></div>', --b;
                return { loadingHtm: l, promise: function(b) {
                        var l = a("#" + g).parent();
                        l.length && (l.html(b), c && c(l)) } } }

            function c(a) {
                return a.replace(/\n/g,
                    "").replace(/[\t ]+\</g, "<").replace(/\>[\t ]+\</g, "><").replace(/\>[\t ]+$/g, ">")
            }
            var a = d.$,
                g = {
                    default: function(c) { c = a("<div>" + c + "</div>");
                        var b = c.find("#ms3slot"),
                            g = c.find(".twister_swatch_price .minor-price")[0],
                            l = c.find("#twisterAvailability"),
                            b = b.length ? b : c.find(".a-icon");
                        g ? a(c.find(".twister_swatch_price .minor-price")[0]).after(b) : a(c.find(".twister_swatch_price .a-size-mini")[0]).append(b);
                        l.length && l.parent().append("<div class='js-dummy-twister-availability'/>");
                        return c.html() },
                    availability: function(a,
                        b) {
                        return this.common(a, "#twisterAvailability", b) },
                    common: function(c, b, g) {
                        var l = "";
                        g ? (l = a("<div>" + c + "</div>"), l.find(b).remove(), l = l.html()) : l = (l = a("<div>" + c + "</div>").find(b)[0]) && l.outerHTML;
                        return l || "" }
                };
            k.prototype = {
                get: function(a, b) {
                    var d = this,
                        l = this.twisterCore.slotsDimSum.get([a]);
                    if (l[a]) return c(g.default(l[a][this.prop].content.twisterSlotDiv));
                    var r = f(function(b) { d.setState(b, !0) }, b);
                    h.call(this, a, function(b) { r.promise(c(g.default(b[d.prop].content.twisterSlotDiv))) });
                    return r.loadingHtm },
                setState: function(a, b) { b || this.prefetchComplete ? (this.hasPPU = this.hasPPU || !!a.find(".price_slot_ppu").length, this.hasBadge = this.hasBadge || !!a.find(".a-icon").length, this.onAfterRender(a)) : this.prefetchSlotNodes.push(a) }
            };
            return k
        });
        n.register("twister-dim-secondary-view-close", function() {
            return function(d) { n.now("a-popover-base").execute(function(k) { k ? k.hide(d.id) : d.hide() }) } });
        n.when("A", "twister-dim-secondary-view-close", "url-builder").register("twister-dim-secondary-view", function(d, k, h) {
            function f(b) {
                this.dimName =
                    b.dimName;
                this.dimUtils = b.dimUtils;
                this.tvm = b.tvm;
                this.getState = b.getState;
                this.dimSum = b.dimSum;
                this.closeNotify = [];
                this.openNotify = [];
                this.openNotify.always = b.alwaysOpenNotify;
                this.popover;
                this.config;
                this.state;
                this.loadingDimString = {};
                this.logger = b.logger;
                this.dimSumIsDisabled = b.dimSumIsDisabled;
                var e = this;
                this.config = c();
                this.beforeShow = function(b) { e.setPopover(b);
                    e.open() };
                this.afterHide = function(b) { e.setPopover(b);
                    e.clearPopover();
                    e.close(!0) };
                d.on("a:popover:beforeShow:" + b.secViewName + b.dimName,
                    function(b) { e.beforeShow(b.popover) });
                d.on("a:popover:afterHide:" + b.secViewName + b.dimName, function(b) { e.afterHide(b.popover) });
                b.dimSumIsDisabled || a(b.dimUtils, b.dimSum, b.dimName, b.prefetchCount, b.getState(), e.config);
                d.state.bind("pwState", function(c, g) { g.isTryState && (b.dimSum.ajaxUrl = c.isTryState ? h.addUrlParams(b.dimSum.ajaxUrl, { isTryState: "true" }) : h.removeUrlParams(b.dimSum.ajaxUrl, ["isTryState"]), a(b.dimUtils, b.dimSum, b.dimName, b.prefetchCount, b.getState(), e.config)) })
            }

            function c() {
                var b = d.state("mobile-twister-loading-dims-html-data"),
                    a = d.state("other-avail-strings") || {},
                    c = d.state("mobile-twister-secondary-view-html-data"),
                    e = d.state("mobile-twister"),
                    g = d.state("mobile-twister-dim-html-data");
                return {
                    ITEM_CLASS: ".aw-twister-row",
                    initLoadNums: parseInt(b.secViewDimsInitLoadCount, 10),
                    dimLoadingHTML: b.secViewDimsHTML,
                    moreLoadCount: parseInt(b.secViewDimsMoreLoadCount, 10),
                    dimsHTML: g,
                    secViewHTML: c.secView,
                    notAvailableInText: e.notAvailableInText,
                    useAlternateUnavailableMessaging: a.multiple && a.single,
                    multipleAvailString: a.multiple,
                    singleAvailString: a.single,
                    primeBadgeHtml: e.primeBadgeHtml,
                    freshBadgeHtml: e.freshBadgeHtml,
                    loadingDetailsText: e.loadingDetailsText,
                    addOnItemBadgeHtml: e.addOnItemBadgeHtml,
                    notAvailableGenericText: e.notAvailableGenericText,
                    pwBadgeHtml: e.pwBadgeHtml,
                    asinNotPWAvailableMessageHtml: e.asinNotPWAvailableMessageHtml,
                    asinPWEligibleMessageHtml: e.asinPWEligibleMessageHtml,
                    tryPWFreeMessageHtml: e.tryPWFreeMessageHtml
                }
            }

            function a(b, a, c, e, d, f) {
                c = b.getDimAvailability(c, d).available;
                b = [];
                e = c.length < e ? c.length : e;
                for (d = 0; d < e; d += 1) b.push(c[d].asin);
                e = g();
                a.get(b, function() {}, e)
            }

            function g() {
                var b = {},
                    a = !1,
                    c = d.state("pwState");
                c && (a = c.isTryState) && (a = !0);
                a && (b.isTryState = "true");
                return b }
            var e = d.$;
            f.prototype = {
                registerClose: function(b) { this.closeNotify.push(b) },
                registerOpen: function(b) { this.openNotify.push(b) },
                setPopover: function(b) { this.clearPopover();
                    this.popover = b },
                open: function(b) { this.state = b || this.getState();
                    this.renderSecondaryView();
                    for (this.openNotify.always && this.openNotify.always(d.copy(this.state)); 0 < this.openNotify.length;) this.openNotify.pop()() },
                close: function(b) {
                    for (!b && this.popover && k(this.popover); 0 < this.closeNotify.length;) this.closeNotify.pop()() },
                clearPopover: function(b) { this.popover && this.popover.update(" ") },
                select: function(b) { b = b.closest(".a-touch-link");
                    e("a.a-active", b.closest("ul")).removeClass("a-active");
                    b.addClass("a-active") },
                validateDimSum: function(b) {
                    if (b) {
                        b.addOnItemBadge = b.isAddOnItem ? this.config.addOnItemBadgeHtml : "";
                        b.primeBadge = b.hasPrimeBadge ? this.config.primeBadgeHtml : "";
                        b.pwBadge = b.hasPWBadge ? this.config.pwBadgeHtml :
                            "";
                        b.badge = !0 === b.hasPWBadge ? b.pwBadge : b.primeBadge;
                        b.selectedBadge = !0 === b.hasFreshBadge ? this.config.freshBadgeHtml : b.badge;
                        var a = this.config,
                            c;
                        "ASIN_NOT_PW_AVAILABLE" === b.pwMessageType ? c = a.asinNotPWAvailableMessageHtml : "ASIN_PW_ELIGIBLE" === b.pwMessageType && (c = a.asinPWEligibleMessageHtml);
                        b.secondaryViewRowMessage = c;
                        return b
                    }
                },
                updateDimSumInHtml: function(b, a) {
                    a = a || {};
                    b = b.replace("price###", a.price || "");
                    b = b.replace("addOnItemBadge###", a.addOnItemBadge || "");
                    b = b.replace("primeBadge###", a.primeBadge ||
                        "");
                    b = b.replace("selectedBadge###", a.selectedBadge || "");
                    b = b.replace("badge###", a.badge || "");
                    b = b.replace("br###", a.price ? "<br>" : "");
                    b = b.replace("swaPrices###", a.swaPrices || "");
                    b = b.replace("secondaryViewRowMessage###", a.secondaryViewRowMessage || "");
                    return b = b.replace("messageBr###", a.secondaryViewRowMessage ? "<br>" : "")
                },
                renderSecondaryView: function() {
                    function b(b) {
                        function a() {
                            function f() { e(p).unbind("scroll.twisterSecondaryViewDimScope") }
                            var q = c.config.moreLoadCount;
                            e("#" + b.listDivId + " ul").append(c.config.dimLoadingHTML);
                            e(p).bind("scroll.twisterSecondaryViewDimScope", function(a) { d.onScreen(e("#big-fat-twister-loading-div")) && (e("#" + b.listDivId + " ul li").filter(":visible").slice(-1).remove(), g(b.listDivId, b, q), b.totalDims > b.numInserted ? e("#" + b.listDivId + " ul").filter(":visible").append(c.config.dimLoadingHTML) : f()) });
                            c.registerClose(f)
                        }

                        function g(b, a, c) {
                            var l = a.numInserted,
                                d = a.totalDims - l;
                            if (0 >= d) return 0;
                            c > d && (c = d);
                            for (var d = a.listHtmlArray, m = 0; m < c; m++) {
                                var f = d[m + l];
                                e("#" + b + " ul").append(f) }
                            a.numInserted += c }
                        c.popover.update(b.dimContainerHtml);
                        (function(b, a, c) {
                            var e = new Date;
                            b();
                            setTimeout(function() { c(new Date - e < a) }, 10) })(function() {
                            var a = c.config.initLoadNums;
                            b.numInserted = 0;
                            g(b.listDivId, b, a) }, 1E3, function(e) { b.totalDims > b.numInserted && (e ? (g(b.listDivId, b, c.config.initLoadNums), b.totalDims > b.numInserted && a()) : a()) })
                    }

                    function a() {
                        function b(a) {
                            function d(b) {
                                b = c.validateDimSum(b);
                                var a = b.secondaryViewRowMessage ? "<br>" + b.secondaryViewRowMessage : "",
                                    g = e("#dimSum_" + b.asin);
                                g.attr("updated", "updated");
                                g.html("<span class='a-color-price'>" +
                                    (b.price || "") + "</span> " + (b.addOnItemBadge || "") + " " + (b.selectedBadge || "") + "<br><span class='a-color-secondary'>" + (b.availability || "") + "</span>" + (b.swaPrices || "") + a)
                            }
                            a = function(b) {
                                var a = e(p),
                                    g = a.scrollTop(),
                                    d = a.height(),
                                    m = g + d,
                                    f = 0,
                                    q = -1,
                                    h = -1;
                                a.scrollTop();
                                a = e("#" + b + "-list " + c.config.ITEM_CLASS).filter(":visible");
                                d = [];
                                a.each(function() {
                                    var b = e(this).offset().top;
                                    b >= g && 0 > q && (q = f);
                                    b >= m && 0 > h && (h = f - 1);
                                    f++ });
                                q = 0 > q ? 0 : q;
                                h = 0 > h ? 0 < f ? f - 1 : 0 : h;
                                h == c.tvm.dimInfoMap[b].size - 1 && c.logger.logSecondaryViewScrollToEnd();
                                for (b = q; b <= h; b += 1) {
                                    var r = e(a[b]).find(".twister-dimsum"); "updated" != r.attr("updated") && r.attr("asin") && d.push(r.attr("asin")) }
                                return d
                            }(a);
                            if (0 < a.length) {
                                var m = g();
                                c.dimSum.get(a, d, m) }
                        }
                        var d = c.dimName;
                        !c.dimSumIsDisabled && c.dimUtils.showDimSum(d, c.state) && (setTimeout(function() { b(d) }, 250), e(p).bind("scroll.twisterSecondaryViewDimSumScope", function(a) { clearTimeout(b.timeout);
                            b.timeout = setTimeout(function() { b(d) }, 500) }), c.registerClose(function() { e(p).unbind("scroll.twisterSecondaryViewDimSumScope") }))
                    }
                    var c = this;
                    this.clearPopover();
                    this.popover.update("<div class='twister-white-bgcolor' id='wow-twister-spinner'></div>");
                    var f = function() {
                        function b(a) {
                            var c = {};
                            e.each(a, function(b, a) { c[a.dimKey] = a.val });
                            return c }

                        function a(b, g, m) {
                            if (g) return { availabilityText: (m || {}).availability || "", isAvailable: 1 };
                            var f = [],
                                q;
                            e.each(c.state, function(b, a) { a.dimKey != c.dimName && -1 < a.val && (q = q || a.dimKey, f.push(c.tvm.dimtoValueMap[a.dimKey][a.val])) });
                            return c.config.useAlternateUnavailableMessaging && (g = d.copy(c.state),
                                e.each(g, function(a, e) { e.dimKey === c.dimName && (e.val = b.index) }), (g = c.dimUtils.getDimAvailability(q, g).available) && g.length) ? { availabilityText: (1 < g.length ? c.config.multipleAvailString : c.config.singleAvailString).replace("otherVal###", g[0].label), isAvailable: 0 } : { availabilityText: 1 === f.length ? c.config.notAvailableInText.replace("otherVal###", f[0]) : c.config.notAvailableGenericText, isAvailable: 0 }
                        }

                        function f(d, q, h) {
                            function r(b, e, d) {
                                if (e.label) {
                                    var m = q + "_" + e.label,
                                        f;
                                    x && (b = g(), f = c.validateDimSum(c.dimSum.get([e.asin],
                                        u, b)[e.asin]));
                                    b = n === e.index;
                                    d = a(e, d, f);
                                    var t = h[m],
                                        m = e.asin,
                                        p = x,
                                        z = c.config.loadingDetailsText;
                                    e = t.replace("label###", e.label);
                                    e = e.replace("available###", d.isAvailable);
                                    e = e.replace("availability###", d.availabilityText);
                                    e = e.replace("active###", b ? "a-active" : "");
                                    b = e = e.replace("dimSum", "dimSum_" + (m || ""));
                                    e = c.updateDimSumInHtml(e, f);
                                    p && !f && d.isAvailable ? (e = e.replace("loadingHTML###", '<span class="a-color-secondary">' + z + '</span><br /><span class="a-price-color">&nbsp;</span></span>'), c.loadingDimString[m] =
                                        b.replace("loadingHTML###", ""), e = e.replace("asinvalue", m)) : (e = e.replace("loadingHTML###", ""), e = e.replace("asinvalue", ""));
                                    t = e;
                                    k.push(t)
                                }
                            }
                            var k = [],
                                t = c.state,
                                x = !c.dimSumIsDisabled && c.dimUtils.showDimSum(q, t),
                                n = b(t)[q];
                            e.each(d.available, function(b, a) { r(b, a, 1) });
                            e.each(d.unavailable, function(b, a) { r(b, a, 0) });
                            return k
                        }
                        var q = c.dimName,
                            h = c.dimUtils.getDimAvailability(q, c.state),
                            r = c.config.dimsHTML,
                            h = h ? f(h, q, r) : [],
                            r = c.config.secViewHTML.replace("dimKey###", c.tvm.dimensionDisplayText[q]),
                            r = r.replace("dimensionID###",
                                q),
                            k = function() {
                                var b = "",
                                    a = d.state("pwState");
                                a && a.isTryState && (b = c.config.tryPWFreeMessageHtml);
                                return b }(),
                            r = r.replace("secondaryViewMessage###", k);
                        return { dimContainerHtml: r, listHtmlArray: h, totalDims: h.length, listDivId: q + "-list" }
                    }();
                    d.delay(function() { b(f);
                        a() }, 150)
                }
            };
            return f
        });
        n.when("A", "twister-dim-secondary-view").register("mobile-twister-dimselection-workflow", function(d, k) {
            function h(a, g) {
                function e() {
                    return a.state() }
                this.secondaryViews = {};
                this.twister;
                this.metaData = {};
                this.dimUtils =
                    a.util;
                this.tvm = a.tvm;
                this.dimSum = a.dimSum;
                this.state = a.state();
                this.config = f();
                this.logger = g;
                var b = this;
                c.each(this.state, function(a, c) {
                    b.secondaryViews[c.dimKey] = new k({
                        secViewName: "mobile-twister_",
                        dimName: c.dimKey,
                        dimUtils: b.dimUtils,
                        tvm: b.tvm,
                        getState: e,
                        dimSum: b.dimSum,
                        dimSumIsDisabled: b.config.twisterDimSumIsDisabled,
                        prefetchCount: b.config.prefetchDimCount > a ? b.config.prefetchCount : 0,
                        alwaysOpenNotify: function(a) { b.logger.logSecondaryViewOpen();
                            b.state = a;
                            b.metaData = a.metaData || {};
                            delete a.metaData },
                        logger: b.logger
                    })
                });
                this.twister = a.registerActive({ viewAttribution: "DetailPage", viewName: "MobileTwisterDimSelectionWorkflow" }, { updateView: function(a, c) { "VARIATION_CHANGE" === a && (b.state = c.selected().selectionInfo()) } });
                d.declarative("mobile-twister", ["click"], function(a) {
                    function e(a, l) {
                        a.metaData = l;
                        var m = [];
                        c.each(a, function(b, a) {-1 === a.val && m.push(a) });
                        d.delay(function() { b.secondaryViews[g].close(!0);
                                b.secondaryViews[m[0].dimKey].setPopover(b.secondaryViews[g].popover);
                                b.secondaryViews[m[0].dimKey].open(a) },
                            b.config.secondaryViewCloseDelay)
                    }
                    b.logger.logDimensionValueClick();
                    var g = a.data.dimension,
                        m = parseInt(a.data.value, 10);
                    b.metaData[g] = a.data;
                    c.each(b.state, function(b, a) { a.val = a.dimKey === g ? m : a.val });
                    var f = b.secondaryViews[a.data.dimension];
                    f.select(a.$target);
                    if ("0" === a.data.available || 0 === a.data.available) return c.each(b.state, function(a, c) { b.dimUtils.isSingletonDim(c.dimKey) || (c.val = c.dimKey === g ? m : -1) }), e(b.state, b.metaData);
                    if (function() {
                            var a = !1;
                            c.each(b.state, function(b, c) { a = a || -1 === c.val });
                            return a }()) return e(b.state,
                        b.metaData);
                    d.delay(function() { f.close() }, b.config.secondaryViewCloseDelay);
                    b.twister.dimensionChanged(b.state);
                    c.each(b.state, function(a, c) {
                        var e = b.metaData[c.dimKey];
                        e && (e.subType = "SECONDARY_VIEW_DATA", b.twister.metaData(e)) });
                    b.metaData = {}
                });
                n.now("a-popover-base").execute("Twister-update-trigget-popover-already-available", function(a) { a && c.each(b.state, function(c, e) {
                        var g = a.get("mobile-twister_" + e.dimKey);
                        g && g.isActive() && b.secondaryViews[e.dimKey] && b.secondaryViews[e.dimKey].beforeShow(g) }) })
            }

            function f() {
                var a = d.state("prefetch-dimsum-config") || {},
                    g = d.state("twister-dimsum-config") || {},
                    e = c(p).height(),
                    b = parseInt(a.secondaryViewRowHeight, 10) || 0,
                    e = parseInt(e / b, 10);
                return { prefetchCount: 0 <= e ? e : 0, prefetchDimCount: a.maxDimension || 0, secondaryViewCloseDelay: 150, twisterDimSumIsDisabled: g.twisterDimSumIsDisabled } }
            var c = d.$;
            h.prototype = {};
            return h
        });
        n.when("A").register("mobile-twister-bottomsheet-view", function(d) {
            var k = d.$;
            return function(h, f, c, a, g, e, b) {
                function q() {
                    e.addCSSRules("slot-height", [".twister-ts-pp {height:" + m.slotHeight + "px;}"]);
                    m.noOfLoadingIndicator = Math.round(m.slotHeight / m.slotLineHeight)
                }

                function l() { e.addCSSRules("price-height", [".twister-ts-pp .twister_swatch_price {height:" + 2 * m.slotLineHeight + "px;}"]) }

                function r(a) {
                    function e(b) {
                        var a = h.state();
                        return h.util.getAsinFromSelectionInfo(a) ? !0 : d.reduce(a, function(a, c) {
                            return c.dimKey != b ? a && -1 != c.val : a }, !0) }

                    function l(b, a) {
                        return {
                            mainText: -1 != a ? h.tvm.dimensionDisplayText[b] + ":" : "",
                            highlight: -1 === a,
                            subText: -1 != a ? h.tvm.dimtoValueMap[b][a] : m.data.translatedSelect.replaceAll("text###", (h.tvm.dimensionDisplayText[b] || "").toLowerCase())
                        }
                    }

                    function q() {
                        var b = [];
                        k.each(h.state(), function(a, c) {-1 === c.val && b.push((h.tvm.dimensionDisplayText[c.dimKey] || "").toLowerCase()) });
                        return 1 < b.length ? m.data.defaultSlotUnselected : m.data.slotUnselectedDimension ? m.data.slotUnselectedDimension.replaceAll("###RequiredDim", b.join()) : (m.data.defaultSlotUnselected || "").replaceAll("###RequiredDim", b.join()) }
                    var r = h.state(),
                        n = 0;
                    k.each(r, function(b, e) {
                        if (h.util.isSingletonDim(e.dimKey)) {
                            n +=
                                1;
                            var g = l(e.dimKey, e.val),
                                g = new c(f, g);
                            a.append(g.domNode)
                        }
                    });
                    k.each(r, function(p, D) {
                        function H(a) {
                            if (a) {
                                var c = parseInt(a.buttonName, 10);
                                a = a.buttonGroupName;
                                this.swatches[c] && this.swatches[c].selected && (b.logSelectedSwatchClick(), g.close());
                                M.dimensionChanged({ dimKey: a, val: c }) } }

                        function F() { A.scrollToSelected();
                            d.off("dp:sheet:afterShow:twister", F) }
                        if (!h.util.isSingletonDim(D.dimKey)) {
                            n += 1;
                            var v = D.dimKey,
                                B = D.val,
                                w = r.length === n,
                                u = !0,
                                C = h.util.getDimAvailability(v, r),
                                E = k.map(h.tvm.dimtoValueMap[v], function(b,
                                    a) {
                                    var c = m.data.imageUrlMap[v + "::" + a],
                                        e = c ? m.data.hiResImageUrlMap[v + "::" + a] : "";
                                    u = u && !c;
                                    return { text: b, image: c, hiResImage: e, name: a, id: v + "_" + a, selected: B === a, slotHtm: w ? q() : "", showSlot: w, unavailable: !1 } }),
                                K = !(!w || !e(v));
                            k.each(C.available, function(b, a) {
                                var c = E[a.index];
                                c.unavailable = !1;
                                c.slotHtm = K ? m.slotManager.get(a.asin, m.noOfLoadingIndicator) : c.slotHtm });
                            k.each(C.unavailable, function(b, a) {
                                var c = E[a.index];
                                c.unavailable = !0;
                                c.slotHtm = w ? m.data.defaultSlotUnavailable : "" });
                            var C = {
                                    name: v,
                                    swatches: E,
                                    isTextSwatch: u,
                                    isTextPPSwatch: u && w,
                                    onChange: H
                                },
                                L = l(v, B),
                                A = new c(f, L, C);
                            a.append(A.domNode);
                            A.onAfterRender();
                            w && (C = A.toggleSwatch.getSlotNodes(), k.each(C, function(b, a) { m.slotManager.setState(a) }));
                            var M = h.registerActive({ viewAttribution: "DetailPage", viewName: "MobileTwisterBottomSheetRowView_" + v }, {
                                updateView: function(b, a) {
                                    if ("VARIATION_CHANGE" === b) {
                                        var c = a.selected().selectionInfo(),
                                            g = h.util.getDimAvailability(v, c),
                                            c = c[p].val,
                                            d = [],
                                            f = !(!w || !e(v));
                                        k.each(g.available, function(b, a) {
                                            d[a.index] = {
                                                unavailable: !1,
                                                slotHtm: f ?
                                                    m.slotManager.get(a.asin, m.noOfLoadingIndicator) : w ? q() : ""
                                            }
                                        });
                                        k.each(g.unavailable, function(b, a) { d[a.index] = { unavailable: !0, slotHtm: w ? m.data.defaultSlotUnavailable : "" } });
                                        d[c] = d[c] || {};
                                        d[B] = d[B] || {};
                                        d[B].selected = !1;
                                        d[c].selected = !0;
                                        B = c;
                                        g = l(v, c);
                                        A.setState(g, { swatches: d });
                                        w && (g = A.toggleSwatch.getSlotNodes(), k.each(g, function(b, a) { m.slotManager.setState(a) }))
                                    }
                                }
                            });
                            d.on("dp:sheet:beforeShow:twister", function() { A.scrollToSelected() });
                            d.on("dp:sheet:afterShow:twister", F)
                        }
                    })
                }
                var m = this;
                this.data = f;
                this.slotLineHeight =
                    this.slotHeight = 0;
                this.noOfLoadingIndicator = 1;
                this.pendingDeferedTask;
                this.deferedTasks = {};
                this.slotManager = new a(h, function() {
                    for (var b = h.state(), a = [], c = b.length - 1; 0 <= c; c--) {
                        var e = b[c].dimKey;
                        if (!h.util.isSingletonDim(e)) { b = h.util.getDimAvailability(e, b);
                            k.each(b.available, function(b, c) { a.push(c.asin) });
                            break } }
                    return a }(), function(b) {
                    g.afterShow(function() {
                        m.slotLineHeight || (m.slotLineHeight = parseInt(k(".twister-scroller .twister-ts-pp").css("line-height").replace("px", ""), 10));
                        m.slotManager.hasPPU &&
                            (m.deferedTasks.updatePriceHeight = l);
                        var a = b[0].scrollHeight;
                        a > m.slotHeight && (m.slotHeight = a, m.deferedTasks.updateSlotHeight = q);
                        clearTimeout(m.pendingDeferedTask);
                        m.pendingDeferedTask = setTimeout(function() { d.each(["updatePriceHeight", "updateSlotHeight"], function(b) { m.deferedTasks[b] && m.deferedTasks[b]();
                                delete m.deferedTasks[b] });
                            g.changeHeight() }, 0)
                    })
                });
                g.beforeCreate(function() {
                    var b = k("#" + m.data.twisterContainerId);
                    b.html("");
                    r(b) })
            }
        });
        n.when("A", "TwisterCore", "twister-page-state",
            "mobile-twister-primary-view", "page-refresh-view", "mobile-twister-logger", "cache").register("mobile-twister", function(d, k, h, f, c, a, g) {
            var e = h.sheetViewData,
                b = new k(h, g),
                q = new a(b);
            new f(b, e, q);
            h.isBottomSheetBehavior ? n.when("mobile-twister-bottomsheet-view", "dp-bottom-sheet-widgets-factory", "twister-slot-manager", "twister-dynamic-style", "dp-sheet").execute("twister_sheet_view_creation", function(a, c, g, d, f) { new a(b, e, c.Row, g, f, d, q) }) : n.when("mobile-twister-dimselection-workflow").execute("twister_secondary_view_creation",
                function(a) { new a(b, q) });
            new c(b, q, !h.isBottomSheetBehavior, h);
            q.logCSMDataOnLanding();
            return b
        })
    })
})(function() {
    var n = window.AmazonUIPageJS || window.P,
        p = n._namespace || n.attributeErrors;
    return p ? p("DetailPageTwisterViewAsset") : n }(), window);
/* ******** */
(function(v, t, aa) {
    v.execute(function() {
        v.when("A").execute(function(c) {
            v.now().register("postMetric", function() {
                return {
                    startLatencyMetric: function(a) {},
                    postLatencyMetric: function(a) {},
                    postCountMetric: function(a, c) {
                        if ("undefined" !== typeof a) {
                            var f = t.ue;
                            if (f)
                                if ("undefined" !== typeof c) f.count(a, c);
                                else {
                                    var l = f.count(a) || 0;
                                    f.count(a, l + 1) } } },
                    postLatencyCounter: function(a) { t.ue && "undefined" !== typeof t.ue_t0 && t.ue.count(a, c.now() - t.ue_t0) },
                    postCSMTags: function(a) { "undefined" !== a && t.ue && t.ue.tag && t.ue.tag(a) },
                    flushWidgetScopedMetrics: function(a) {
                        if ("undefined" !== typeof a) {
                            var c = t.uex;
                            c && c("ld", a, { wb: 1 }) } },
                    postResourceMetric: function(a, c) {
                        function f(a) {
                            return "undefined" !== typeof a && null !== a }
                        if (t.performance && "function" === typeof t.performance.getEntriesByName) {
                            var l = t.performance.getEntriesByName(c); "[object Array]" === Object.prototype.toString.call(l) && 0 < l.length && (l = l[0], f(l) && (f(l.startTime) && this.postCountMetric(a + ":startTime", l.startTime), f(l.duration) && this.postCountMetric(a + ":duration", l.duration))) } }
                }
            })
        });
        v.when("A", "jQuery", "a-touch-base", "a-touch-recognize", "a-util").register("image-block-touch", function(c, a, n, f, l) {
            function g() {
                if (z && !d.multi) {
                    var a = f(d, q);
                    d.finished || (n.trigger(a, d, r.target, r.currentTarget), d.finished = a.touchFinished) }
                z = !1;
                e && (F = c.requestAnimationFrame(g)) }

            function h(a) { a.preventDefault() }

            function k(c, b) {
                if ("touchstart" === c.type) A[c.type](c, c.originalEvent.targetTouches[0], a(b), a(c.target));
                else A[c.type](c, c.originalEvent.targetTouches[0], b) }
            var d = n.touch,
                q = n.lastTouch,
                r = {},
                z = !1,
                e = !1,
                F = 0,
                A = {
                    touchstart: function(a, b, f, m) {
                        var y = null;
                        f.hasClass("a-gesture-horizontal") ? y = "horizontal" : f.hasClass("a-gesture-vertical") && (y = "vertical");
                        var p = c.now();
                        d = { id: a.timeStamp, startTime: p, startX: b.pageX, startY: b.pageY, deltaX: 0, deltaY: 0, velocityX: 0, velocityY: 0, duration: 0, ended: !1, $target: f, $triggerTarget: m, targetOffset: f.offset(), multi: 1 < a.originalEvent.targetTouches.length, direction: y, capture: void 0, samples: [{ x: b.pageX, y: b.pageY, deltaX: 0, deltaY: 0, elapsed: 0, time: p }] };
                        e = !0;
                        F = c.requestAnimationFrame(g) },
                    touchmove: function(a, b, f) {
                        if (d.samples && d.samples.length) {
                            z = !0;
                            var m = c.now(),
                                e = d.samples[d.samples.length - 1],
                                m = { x: b.pageX, y: b.pageY, deltaX: b.pageX - e.x, deltaY: b.pageY - e.y, direction: n.touchDirection(b, e), elapsed: m - d.startTime, time: m };
                            if (void 0 === d.capture) {
                                var e = Math.abs(m.deltaX),
                                    p = Math.abs(m.deltaY);
                                d.capture = !d.direction || "horizontal" === d.direction && e >= p / 1.15 || "vertical" === d.direction && p >= e / 1.15 }
                            d.capture && (h(a), d.samples.push(m), d.deltaX = b.pageX - d.startX, d.deltaY = b.pageY - d.startY, d.duration = m.elapsed,
                                d.multi = d.multi || 1 < a.originalEvent.targetTouches.length, b = n.computeVelocity(d.samples), d.velocityX = b.x, d.velocityY = b.y, r = { target: a.target, currentTarget: f })
                        }
                    },
                    touchend: function(a, b, f) {
                        if (d.samples && d.samples.length) {
                            z = !0;
                            f = c.now();
                            var m = d.samples[d.samples.length - 1];
                            b = { x: m.x, y: m.y, deltaX: b && b.pageX ? b.pageX - m.deltaX : m.deltaX, deltaY: b && b.pageY ? b.pageY - m.deltaY : m.deltaY, direction: 1 < d.samples.length ? n.touchDirection(m, d.samples[d.samples.length - 2]) : m.direction, elapsed: f - d.startTime, time: f };
                            d.samples.push(b);
                            d.capture && h(a);
                            d.multi = d.multi || 1 < a.originalEvent.targetTouches.length;
                            d.duration = f - d.startTime;
                            d.ended = !0;
                            b = n.computeVelocity(d.samples);
                            d.velocityX = b.x;
                            d.velocityY = b.y;
                            r = { target: a.target, currentTarget: a.currentTarget };
                            e = !1;
                            c.cancelAnimationFrame(F);
                            g();
                            q = d
                        }
                    }
                };
            A.touchcancel = A.touchend;
            a("#image-block").find(".a-carousel-viewport").bind("mouseenter mouseleave", h).bind("touchstart touchend touchmove touchcancel", function(c) {
                var b = a(this);
                b.data("a-touch-bound") || (b.data("a-touch-bound", !0).bind("touchstart touchend touchmove touchcancel",
                    function(b) { k(b, this) }), k(c, this))
            })
        });
        v.when("A", "jQuery", "airy-image-block", "image-block-exp-weblab", "postMetric", "peek-view-helper", "atf").execute(function(c, a, n, f, l, g) {
            function h(b, a) { l.postCountMetric(b, a) }

            function k() { E = a("#image-block");
                (G = E.length ? !1 : !0) && (E = a("#single-image-block"));
                w = E.find("img");
                I = E.height() }

            function d(b) {
                if (f.isSlowPage && !0 === f.isSlowPage()) {
                    var d = a("#image-block .carousel-img-manual-load").length;
                    if (0 < d) {
                        var m = b > d ? 0 : 0 > b - 1 ? 0 : b - 1,
                            e = b + 1 > d ? 0 : b;
                        b = 0 > b - 2 ? d - 1 : b -
                            2;
                        m = a("#image-block .carousel-img-manual-load")[m];
                        e = a("#image-block .carousel-img-manual-load")[e];
                        b = a("#image-block .carousel-img-manual-load")[b];
                        e = [m, e, b];
                        q(e);
                        c.loadImageManually(e)
                    }
                }
            }

            function q(b) {
                if (f.isCarouselFastInitEnabled) {
                    var c = b || a("#image-block .carousel-img-manual-load");
                    for (b = 0; b < c.length; b++) {
                        var d = c[b].src || a(c[b]).data("a-image-source");
                        (function(b, d) {
                            if (d) {
                                var m = new Image,
                                    e = a(c[b]).parent();
                                m.onload = function(b) {
                                    e.find(".carousel-loader").remove();
                                    b = "dpmob_alt_image_" + e.closest("li").index() +
                                        "_ready";
                                    O || l.postLatencyCounter(b)
                                };
                                m.src = d
                            }
                        })(b, d)
                    }
                }
            }

            function r() {
                function b() {
                    if (f.isSlowPage && !0 === f.isSlowPage()) d(0);
                    else { D();
                        var e = a("#image-block .carousel-img-manual-load");
                        q(e);
                        c.loadImageManually(e) } }

                function m() { c.loadDynamicImage(a("#main-image"));
                    c.executeDeferred();
                    b() }
                if (f.isCarouselFastInitEnabled && (c.on("a:image:load:altImage", function(b) { b.$imageElement.parent().find(".carousel-loader").remove();
                        b = "dpmob_alt_image_" + b.$imageElement.closest("li").index() + "_hires_ready_";
                        O || l.postLatencyCounter(b) }), !J)) { J = !0;
                    var e = a(".carousel-loader-img").attr("src");
                    l.postResourceMetric("fastInitLoader", e);
                    e = a(".white-bg").attr("src");
                    l.postResourceMetric("transparentPixel", e) }
                "T1" === x || "T2" === x ? (c.capabilities.hires ? h("dpmob_retinaConditionalHiRes") : (h("dpmob_nonRetinaConditionalHiRes"), e = a("#main-image").attr("data-midres-replacement"), e !== aa && null !== e && a("#main-image").attr("data-a-hires", e)), c.loadHiResImage(a("#main-image")), b(), c.executeDeferred()) : "T1" === p ? (c.loadDynamicImage(a("#main-image")), b(),
                    c.executeDeferred()) : "T2" === p ? (c.loadHiResImage(a("#main-image")), b(), c.executeDeferred()) : (c.delay(m, 600), c.delay(m, 1500), c.delay(m, 3E3));
                e = a("#image-block.a-carousel-display-single-display-with-peek");
                e.length && (e.find("img.carousel-img-manual-load").each(function() { this.complete || a(this).css({ opacity: 0 }) }), e.find("div.carousel-loader").css({ opacity: 0 }));
                e = document.getElementsByClassName("fp-video-wrapper");
                null !== e && 0 < e.length && h("dpmob_videoAvailable", e.length)
            }

            function z() {
                function b(a, c) {
                    var e =
                        a[0].pageX - c.left,
                        d = a[0].pageY - c.top,
                        m = a[1].pageX - c.left,
                        f = a[1].pageY - c.top;
                    return { midX: (e + m) / 2, midY: (d + f) / 2, distance: Math.sqrt(Math.pow(e - m, 2) + Math.pow(d - f, 2)) }
                }
                var c, e = 0,
                    d = !1,
                    m = !0;
                w.bind("touchstart", function(e) {
                    var d = e.originalEvent.targetTouches;
                    2 === d.length && (c = b(d, a(e.target).offset())) });
                w.bind("touchmove", function(f) {
                    var p = f.originalEvent.targetTouches;
                    2 === p.length && (f = b(p, a(f.target).offset()), c && (d = !0, f = f.distance - c.distance, e += Math.abs(f), 4 < e && !m && 0 < f && (m = !0, h("dpmob_pinchZoomInPV")))) });
                w.bind("touchend touchleave touchcancel", function(b) { d && 0 === b.originalEvent.targetTouches.length && (e = 0, m = d = !1) })
            }

            function e(b) {
                var c = a("#image-block-pagination-dots li");
                0 < c.length && (c.removeClass("a-selected"), c.eq(b - 1).addClass("a-selected"));
                n.updateStateForAction(a("#image-block"), b, { embeddedCallback: F, instance: m }) }

            function F(b) { m = b }

            function A() {
                var b = t,
                    a = "inner"; "innerWidth" in t || (a = "client", b = document.documentElement || document.body);
                return { width: b[a + "Width"], height: b[a + "Height"] } }

            function H() {
                a("#loadingImages").hide();
                a("#image-block-pagination-dots").show();
                a("#pagination-badge-wrapper").show();
                var b = a("#image-block-pagination-dots li.a-selected").index();
                e(0 > b ? 1 : b + 1);
                var c = f.atfRedesignEnabled && !0 === f.atfRedesignEnabled(),
                    b = a("#landing-image-wrapper").data("imageSizes");
                if (c && b) {
                    var d = a("#image-block");
                    if (d.length)
                        for (var c = A().width - 20, m = d.css("max-height").replace("px", ""), d = d.find(".image-size-wrapper"), p = 1; p < b.length; p++) {
                            var g = b[p][1],
                                y = b[p][0],
                                g = m / g * y >= c ? y < c ? g : c / y * g : g < m ? g : m;
                            d[p] && d[p].classList.contains("fp-image-wrapper") &&
                                (a(d[p]).css("height", g + "px"), a(d[p]).find("img").css("max-height", m + "px"), a(d[p]).find("img").css("height", g + "px"))
                        }
                }
            }

            function b(b) {
                var a = b.dom.$viewport;
                (c.capabilities.touch || c.capabilities.pointerPrefix) && v.when("image-block-touch").execute(function(d) {
                    a.addClass("a-gesture a-gesture-horizontal").bind("pan-horizontal swipe-horizontal", function() {
                        return !1 });
                    var e = function(a) {
                            if (!b.getAttr("transitionPaused") && b.strategies.transition.onSwipe) b.strategies.transition.onSwipe(b, a) },
                        m = function(a) {
                            if (!b.getAttr("transitionPaused") &&
                                b.strategies.transition.onPan) b.strategies.transition.onPan(b, a)
                        },
                        f = "a:swipe-horizontal:" + a[0].id,
                        p = "a:pan-horizontal:" + a[0].id;
                    c.on(f, e);
                    if (!b.getAttr("disable_panning")) c.on(p, m);
                    v.when("a-touch").execute(function(a) { c.off(f, e);
                        b.getAttr("disable_panning") || c.off(p, m) });
                    T()
                })
            }

            function B() {
                var b = a("#imageBlock_feature_div").offset() ? a("#imageBlock_feature_div").offset().top : 0,
                    c = A().height,
                    d = A().width,
                    e = "IE_dpImageBlockPosFromTop:";
                a(".a-container").find(a("[id$='_feature_div']")).each(function() {
                    if ("imageBlock_feature_div" ===
                        this.id) return !1;
                    0 < a(this).height() && (e += a(this).attr("id") ? a(this).attr("id").replace("_feature_div", ":") : "")
                });
                e = e.substr(0, e.length - 1);
                h(e, b);
                h("dpViewPortHeight", c);
                h("dpViewPortWidth", d);
                l.postCSMTags(e);
                l.flushWidgetScopedMetrics("imageBlockBannerMetrics")
            }
            var m, y = !1,
                p = f.getTreatment(),
                x = f.getConditionalHiresTreatment ? f.getConditionalHiresTreatment() : "C",
                E, w = [],
                G, I, C = f.isLimbAnimationEnabled ? f.isLimbAnimationEnabled() : !1,
                K = !0,
                L = {},
                P = 0,
                O = !1,
                M, N, J = !1,
                U = c.once(function() { l.postLatencyCounter("dpmob_carouselInitialized") }),
                T = c.once(function() { l.postLatencyCounter("dpmob_carouselSwipeable") }),
                R = c.once(function() { t.setDPTimestamp("mainImgRepl", "externalScript") }),
                D = c.once(function() { l.postLatencyCounter("dpmob_alt_images_download_start") });
            l.postLatencyCounter("dpmob_primary_view_js_start");
            if (C) {
                t.requestAnimFrame = function() {
                    return t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || function(b) { t.setTimeout(b, 1E3 / 60) } }();
                var Y = function() {
                    if (E && K)
                        for (var b = E[0].getBoundingClientRect().top -
                                10, c = Math.min(Math.max(E.height() + b, 150), I), b = c / I, c = (I - c) / 2, e = 0; e < w.length; e++) {
                            var d = "translate3d(0, " + c + "px, 0)",
                                m = a(w[e]);
                            m && m.css("height") && (150 <= parseInt(m.css("height").replace("px", ""), 10) && (d = d + " scale(" + b + ")"), m.css("transform", d), m.css("-webkit-transform", d)) }
                    t.requestAnimFrame(Y)
                };
                t.requestAnimFrame(Y)
            }
            c.on("a:image:load:mainImage", function() { R() });
            r();
            a("#image-block .image-size-wrapper img").bind("doubleTap", function() { h("dpmob_doubleTapInPV") });
            k();
            G && z();
            c.on("a:popover:afterHide:immersive-view",
                function(b) { y = !1 });
            c.on("a:popover:beforeShow:immersive-view", function(b) { y = !0;
                h("dpmob_IVOpened") });
            var V = function() { "none" === a("#image-block-pagination-dots").css("display") && (H(), h("missedFrameWorkCarouselInit")) };
            c.on.load(function() { c.delay(V, 2E3) });
            c.on("image-block-refresh", function() {
                O = !0;
                r();
                k();
                n.imageBlockRefresh && n.imageBlockRefresh();
                G && z();
                var b = document,
                    a = b.getElementsByClassName("carousel-loader");
                if (a && f.carouselLoaderImage && f.carouselWhiteBackground)
                    for (var c = 0; c < a.length; c++) {
                        var e =
                            b.createElement("img");
                        e.setAttribute("src", f.carouselLoaderImage);
                        e.setAttribute("class", "carousel-loader-img");
                        var d = b.createElement("img");
                        d.setAttribute("src", f.carouselWhiteBackground);
                        d.setAttribute("class", "white-bg");
                        a[c] && (a[c].appendChild(e), a[c].appendChild(d))
                    }
            });
            v.when("a-carousel-framework", "image-block-exp-weblab", "share-icon").execute(function(f, p, q) {
                function x() {
                    v.when("a-immersive-image").execute(function(b) {
                        var e = C.dom.$carousel.find("li");
                        c.delay(function() { e.find(".a-immersive-image img").each(function() { b.zoomOut(a(this)) }) },
                            200)
                    })
                }

                function l() {
                    var b = w.getBoundingClientRect().top;
                    0 > b && Math.abs(b) > A && v.when("a-immersive-image").execute(function(b) { C.dom.$carousel.find("li").find(".a-immersive-image img").each(function() { b.zoomOut(a(this)) }) }) }
                var C;
                f.onInit("image-block-carousel", function(e) {
                    h("calledFrameWorkCarouselInit");
                    "undefined" !== typeof e && (C = e);
                    P++;
                    p.isCarouselFastInitEnabled ? b(C) : (U(), v.when("a-touch").execute(function() { T() }));
                    H();
                    k();
                    z();
                    v.when("a-popover-base").execute(function(b) {
                        c.on("a:popover:afterSlideOut",
                            function(b) { C.resize() })
                    });
                    a("#image-block-pagination").delegate("li", "click", function(b) { h("dp-mob-clickOnImageBlockPaginationElement") });
                    c.on.afterLoad(B)
                });
                var r = a("#imageBlock_feature_div"),
                    w = r[0],
                    A = w.clientHeight;
                c.on("a:immersiveImage:zoomIn", function(b) { b = b.$image; "undefined" !== typeof C && a.contains(r[0], b[0]) && (a(t).bind("scroll", l), C.pause(), K = !1) });
                c.on("a:immersiveImage:zoomOut", function(b) {
                    b = b.$image;
                    "undefined" !== typeof C && a.contains(r[0], b[0]) && (a(t).unbind("scroll", l), K = !0, c.delay(function() {
                        K &&
                            C.resume()
                    }, 700))
                });
                a(t).bind("orientationchange", function() { "undefined" !== typeof C && (C.resume(), x()) });
                p.isImmersiveShareIconEnabledApp && !0 === p.isImmersiveShareIconEnabledApp() && q.hideFirstVideoGlanceShareIconApp();
                p.isImmersiveShareIconEnabled && !0 === p.isImmersiveShareIconEnabled() && (q.hideFirstVideoGlanceShareIconWeb(), q.hideFirstVideoImmersiveShareIconWeb());
                c.on("a:carousel:image-block-carousel:change:pageNumber", function(b) {
                    V();
                    p.isSlowPage && !0 === p.isSlowPage() && d(b.newValue - 1);
                    p.isImmersiveShareIconEnabledApp &&
                        !0 === p.isImmersiveShareIconEnabledApp() && q.toggleShareIcon("swf-share-icon", q.getCurrentCarouselElement(b));
                    p.isImmersiveShareIconEnabled && !0 === p.isImmersiveShareIconEnabled() && q.toggleShareIcon("swf-share-icon", q.getCurrentCarouselElement(b));
                    if (!y) {
                        h("dpmob_primaryViewImageChanged");
                        var c = b.newValue - 1;
                        M = M || E.find(".carousel-img-manual-load").length;
                        N = N || E.find(".carousel-img-manual-load.video-slate-img").length;
                        var f = M - N;
                        1 === P && 0 < c && c <= f && !L[c + ""] && (L[c + ""] = !0, (f = r.find(".carousel-img-manual-load")[c -
                            1]) && h("dpmob_loadedAltImage" + c, "img" === f.tagName.toLowerCase() && f.complete ? 1 : 0))
                    }
                    if (m && m.isFullScreen()) n.setShouldDetachOnExitFullScreen(!0);
                    else {
                        var B, C, k, x, c = b.carousel.dom.$carousel.closest(".a-carousel-display-single-display-with-peek");
                        if (c.length && (x = b.carousel.getAttr("set_size"), k = g.getcardIndex(b.carousel, b.oldValue), B = a(b.carousel.dom.$carousel.children("li")[k]), B = B.find(".airy-player-container"), 2 === x && 0 === B.length && (k = 2, B = a(b.carousel.dom.$carousel.children("li")[k]), B = B.find(".airy-player-container")),
                                B.length && (C = B.find(".image-size-wrapper").clone(), !C.length))) {
                            var l = B.data("slate-url");
                            C = a("<div>", { class: "image-size-wrapper" });
                            var f = a("<div>", { class: "slate-image-table" }),
                                w = a("<div>", { class: "slate-image-table-cell" }),
                                l = a("<img>", { class: "a-image-wrapper a-lazy-loaded carousel-img-manual-load video-slate-img", src: l });
                            w.append(l);
                            f.append(w);
                            C.append(f) }
                        n._detachAiryInstance(m);
                        b.oldValue !== b.newValue && e(b.newValue);
                        c.length && B.length && C && C.length && (B.append(C), 2 === x && g.cloneCards(b.carousel, k))
                    }
                });
                v.when("a-popover-base").execute(function(b) { c.on("a:popover:afterSlideOut", function(b) { b = a("#a-page");
                        0 < b.length && (b.css("-webkit-transition", ""), b.css("-webkit-transform", "")) }) })
            });
            v.when("load-airy-assets").execute(function(b) { v.load.css(b.cssUrl);
                v.load.js(b.jsUrl) })
        });
        v.when("A", "postMetric").register("immersive-view-util", function(c, a) {
            function n(a, c, g, h) {
                var k = a / c;
                (a = k > g / h) ? (c = g, g /= k) : (c = h * k, g = h);
                return { height: c, width: g, heightBound: a } }
            return {
                getDynamicHiresImages: function(c) {
                    for (var l =
                            $("#image-block").find(".altImage"), g = [], h = 0; h < l.length; h++) {
                        var k, d = l[h],
                            q = h,
                            r = 1500;
                        if (0 < d.height && 0 < d.width) {
                            k = n(d.height, d.width, t.screen.height - 46, t.screen.width);
                            var d = n(d.height, d.width, t.screen.width - 46, t.screen.height),
                                r = Math.min(Math.max(2 * k.height, 2 * d.height), 1500),
                                z = Math.min(Math.max(2 * k.width, 2 * d.width), 1500),
                                z = r = Math.floor(Math.max(r, z)),
                                e = "Squarish";
                            k.heightBound ? e = "Tall" : d.heightBound || (e = "Wide");
                            a.postCountMetric(0 === q ? "dpmob_mainImage" + e : "dpmob_altImage" + e, void 0);
                            a.postCountMetric("dpmob_heightOfHires",
                                z);
                            a.postCountMetric("dpmob_IVOpenedBeforePVAltImageLoads" + q, 0)
                        } else a.postCountMetric("dpmob_IVOpenedBeforePVAltImageLoads" + q, 1);
                        k = r;
                        if (d = c[h]) d = d.replace(/(_SL)\d+/, "$1" + k).replace(/(_UL)\d+/, "$1" + k), g[h] = d
                    }
                    return g
                }
            }
        });
        v.when("A", "jQuery", "a-carousel-framework", "airy-image-block", "postMetric", "image-block-exp-weblab", "immersive-view-util", "share-icon", "atf").execute(function(c, a, n, f, l, g, h, k) {
            function d() {
                var b = t,
                    a = "inner";
                "innerWidth" in t || (a = "client", b = document.documentElement || document.body);
                return b[a + "Height"] - 50
            }

            function q() {
                var b = d();
                a("#immersive-main").css("height", b + "px") }

            function r(a) { b = a }

            function z(b) {
                var a = n.getCarouselByName(b);
                if ("undefined" === typeof a)
                    for (var c = n.getAllCarousels(), e = 0; e < c.length; e++) {
                        var d = c[e];
                        if (d.getAttr("name") === b) { a = d;
                            break } }
                return a }

            function e(b) {
                if (m && y) {
                    var e = z("image-block-immersive-main-carousel");
                    "undefined" !== typeof e && (e.resume(), e.gotoPage(b, { animationDuration: 600 }));
                    if (g.isSlowPage && !0 === g.isSlowPage()) {
                        var d = a("#immersive-main .immersive-carousel-img-manual-load").length,
                            f = b > d ? 0 : b - 1,
                            e = b + 1 > d ? 0 : b,
                            d = 0 > b - 2 ? d - 1 : b - 2,
                            f = a("#immersive-main .immersive-carousel-img-manual-load")[f],
                            e = a("#immersive-main .immersive-carousel-img-manual-load")[e],
                            d = a("#immersive-main .immersive-carousel-img-manual-load")[d];
                        c.loadImageManually(f);
                        c.loadImageManually(e);
                        c.loadImageManually(d);
                        g.immersiveViewExpEnabled && c.capabilities.hires && (c.loadHiResImage(f), c.loadHiResImage(e), c.loadHiResImage(d))
                    } else c.loadImageManually(a("#immersive-main .immersive-carousel-img-manual-load")), g.immersiveViewExpEnabled &&
                        c.capabilities.hires && c.loadHiResImage(a("#immersive-main .immersive-carousel-img-manual-load"));
                    m && y && (e = a("#immersive-mini li.a-carousel-card"), 0 < e.length && (e.removeClass("selected"), e.eq(b - 1).addClass("selected")))
                }
            }

            function F() {
                var b = a(".immersive-view-gallery").get(0); "undefined" !== typeof b && (b.ontouchmove = function(b) { b.preventDefault() }) }

            function A() {
                if (G)
                    if (0 < a("#immersive-main img").length) {
                        I = 0;
                        var b = d();
                        a("#immersive-main").css("height", b + "px");
                        a("#immersive-main ol").css("height", b + "px");
                        a("#immersive-main div.a-carousel-viewport").each(function() { a(this).css("height", b + "px") });
                        a("#immersive-main li.a-carousel-card").each(function() { a(this).css("height", b + "px") });
                        a("#immersive-main img").each(function() { a(this).css("max-height", b + "px") });
                        a("#immersive-main .slate-image-table img").each(function() { a(this).css("max-height", b - 65 + "px") })
                    } else 20 > I ? (setTimeout(A, 50), I++) : I = 0
            }

            function H() {
                for (var b = a(".immersive-carousel-img-manual-load"), c = {}, e = 0; e < b.length; e++) c[e] = a(b[e]).data("hires-source");
                c = h.getDynamicHiresImages(c);
                for (e = 0; e < c.length; e++) c[e] && a(b[e]).attr("data-a-hires", c[e])
            }
            var b, B = !0,
                m = !1,
                y = !1,
                p = !1,
                x = a("#landing-image-wrapper").data("includeInGallery") ? 1 : 0,
                E = g.enableDuplicateAiryPlayerFix,
                w = 1 + x,
                G = !1;
            q();
            a(t).bind("orientationchange", function() { c.delay(function() { q();
                    G ? (t.scroll(0, 0), l.postCountMetric("dpmob_orientationchangeIV", void 0)) : l.postCountMetric("dpmob_orientationchangePV", void 0) }, 200) });
            c.on("image-block-immersive-view-refresh", function() {
                x = a("#landing-image-wrapper").data("includeInGallery") ?
                    1 : 0;
                w = 1 + x;
                p = y = m = G = !1;
                q()
            });
            var I = 0;
            c.on("a:carousel:image-block-immersive-main-carousel:init", function(d) {
                function m() { v.when("a-immersive-image").execute(function(b) {
                        var e = p.dom.$carousel.find("li");
                        c.delay(function() { e.find(".a-immersive-image img").each(function() { b.zoomOut(a(this)) }) }, 200) });
                    p.resume() }
                y = !0;
                E || f.updateStateForAction(a("#immersive-main"), w - x, { contextName: "ImmersiveView", embeddedCallback: r, instance: b });
                e(w - x);
                var p = d.carousel;
                c.on("a:popover:afterSlide:immersive-view", function(b) {
                    b.popover.getContent().css("display",
                        "");
                    p.resize()
                });
                A();
                a(t).bind("orientationchange", function() { m();
                    c.delay(function() { A() }, 200) });
                c.on("a:popover:beforeSlideOut:immersive-view", function(b) { m() });
                v.when("a-immersive-image").execute(function(b) { c.on("a:immersiveImage:zoomIn", function(b) { G && l.postCountMetric("dpmob_zoomInvokedIV", void 0);
                        p.pause() });
                    c.on("a:immersiveImage:zoomOut", function(b) { p.resume() }) })
            });
            c.on("a:carousel:image-block-immersive-mini-carousel:init", function(b) {
                m = !0;
                e(w - x);
                a(".mini_carousel").delegate("li", "click",
                    function(b) { l.postCountMetric("dpmob_thumbnailClicked", void 0);
                        w = a(this).index() + 1 + x;
                        e(w - x) });
                var d = b.carousel;
                c.on("a:popover:afterSlide:immersive-view", function(b) { b.popover.getContent().css("display", "");
                    d.resize() })
            });
            c.on("a:carousel:image-block-immersive-main-carousel:change:pageNumber", function(d) {
                b && b.isFullScreen() ? f.setShouldDetachOnExitFullScreen(!0) : (g.isImmersiveShareIconEnabled && !0 === g.isImmersiveShareIconEnabled() && k.toggleShareIcon("immersive-image-share", k.getCurrentCarouselElement(d)),
                    l.postCountMetric("dpmob_secondaryViewImageChanged", void 0), f._detachAiryInstance(b), d.oldValue !== d.newValue && (w = d.newValue + x, e(w - x), E && !B || f.updateStateForAction(a("#immersive-main"), w - x, { contextName: "ImmersiveView", embeddedCallback: r, instance: b }), v.when("a-immersive-image").execute(function(b) {
                        var a = d.carousel.dom.$carousel.find("li").eq(d.oldValue - 1).find(".a-immersive-image img");
                        c.delay(function() { b.zoomOut(a) }, 200) })))
            });
            c.on("a:popover:beforeSlideOut:immersive-view", function(b) {
                G = !1;
                b = z("image-block-carousel");
                "undefined" !== typeof b && b.gotoPage(w)
            });
            c.on("a:popover:afterSlideOut:immersive-view", function(a) { f._detachAiryInstance(b);
                a.popover.getContent().css("display", "none") });
            c.on("a:popover:beforeSlide:immersive-view", function(b) { b.popover.$popover.addClass("immersive-view-gallery");
                G = !0;
                b = z("image-block-carousel");
                c.delay(function() { A() }, 200); "undefined" !== typeof b && (w = Math.max(1 + x, b.getAttr("pageNumber")));
                e(w - x) });
            c.on("a:popover:afterSlide:immersive-view", function(e) {
                n.initializeAll();
                F();
                p || (g.immersiveViewExpEnabled ?
                    (H(), c.loadImageManually(a("#immersive-mini .immersive-carousel-img-manual-load")), c.capabilities.hires && c.loadHiResImage(a("#immersive-mini .immersive-carousel-img-manual-load"))) : c.loadImageManually(a("#immersive-mini .immersive-carousel-img-manual-load")), p = !0);
                E && (B = !1, f.updateStateForAction(a("#immersive-main"), w - x, { contextName: "ImmersiveView", embeddedCallback: r, cleanupCallback: function() { B = !0 }, instance: b }))
            })
        });
        v.when("A", "jQuery", "a-immersive-image").execute(function(c, a) {
            c.on("a:immersiveImage:zoomIn",
                function(a) { a.$image.closest(".a-gesture-horizontal").removeClass("a-gesture-horizontal") });
            c.on("a:immersiveImage:zoomOut", function(a) { a.$image.closest(".a-carousel-viewport").addClass("a-gesture-horizontal") })
        });
        v.when("A", "jQuery", "postMetric", "atf").register("ImageBlock360", function(c, a, n) {
            function f(b, a, e, c) { e = e || .5;
                c = c || "ease-out";
                a = a ? ("transform" !== X("transform") ? "-webkit-" : "") + "transform " + e + "s " + c : "none";
                b.css(X("transition"), a);
                b.parent().css(X("transition"), a) }

            function l(b,
                a, e, c) { a = "translate(" + a + "px, " + e + "px)";
                c = "scale(" + c + ")";
                b.css(X("transform"), c);
                b.parent().css(X("transform"), a) }

            function g(b, a, e, c) {
                var d = b.innerWidth() / 2,
                    m = b.innerHeight() / 2;
                a = h(b, (d - a) * c, (m - e) * c, c);
                u.offsetX = a.x;
                u.offsetY = a.y;
                u.scale = c;
                l(b, u.offsetX, u.offsetY, c) }

            function h(b, a, c, e) {
                var d = b.innerWidth() * (e - 1) / 2;
                b = b.innerHeight() * (e - 1) / 2;
                e = a && a / Math.abs(a);
                var m = c && c / Math.abs(c),
                    f = Math.abs(a) > d ? d * e : a,
                    p = Math.abs(c) > b ? b * m : c;
                return { x: f, y: p, boundX: Math.abs(a) > d, boundY: Math.abs(c) > b, signX: e, signY: m } }

            function k(b, a, e) { u.zoomed && (l(b, 0, 0, 1), f(b, a, .3), u.atBounds = !1, u.zooming = !0, u.scale = 1, c.delay(function() { b.css("-webkit-backface-visibility", "hidden");
                    Q.addClass("a-hidden");
                    e && (u.zooming = !1, u.zoomed = !1) }, 600)) }

            function d(b, a, e, d) {
                if (!u.zoomed) {
                    var m = B["" + U / 5 + ",0"];
                    Q.attr("onload", la);
                    Q.attr("src", m);
                    b.css("-webkit-backface-visibility", "visible");
                    f(b, !0, .6);
                    g(b, a, e, 3);
                    u.atBounds = !1;
                    u.zooming = !0;
                    c.delay(function() { d && (u.zooming = !1, u.zoomed = !0) }, 600) } }

            function q() {
                var b = t,
                    a = "inner";
                "innerWidth" in t ||
                    (a = "client", b = document.documentElement || document.body);
                return b[a + "Height"] - 72
            }

            function r() {
                var b = q();
                Y.css("height", b + "px") }

            function z(b, a) {
                var e = b[0].pageX - a.left,
                    c = b[0].pageY - a.top,
                    d = b[1].pageX - a.left,
                    m = b[1].pageY - a.top;
                return { midX: (e + d) / 2, midY: (c + m) / 2, distance: Math.sqrt(Math.pow(e - d, 2) + Math.pow(c - m, 2)) } }
            var e, F, A, H, b, B, m, y, p, x, E, w, G, v, C, K, L, P, O, M, N, J, U, T, R = [],
                D, Y, V, Q, ba, ca, S, u = { zoomed: !1, atBounds: !1, offsetX: 0, offsetY: 0, scale: 1, totalDelta: 0, pinching: !1, lastSample: aa },
                ia = !1,
                ja = !1,
                X = c.prefixes.getStyle,
                ka, fa = function() { w = 0;
                    da();
                    ba.animate({ top: "0px" }, 200, "easeInBack");
                    ca.animate({ top: "0px" }, 200, "easeInBack");
                    f(D, !0, .2, "ease-in");
                    l(D, 0, 0, 1);
                    D.animate({ opacity: "1" }, 200, "easeInBack") },
                sa = function() { V.addClass("a-hidden");
                    D.removeClass("a-hidden");
                    ia = !0;
                    ja && fa() },
                la = function() { Q.css({ width: y + "px", height: p + "px" });
                    var b = ha(T);
                    Q.css({ top: -1 * b.top + "px", left: -1 * b.left + "px" });
                    Q.removeClass("a-hidden") },
                ma = function() {
                    var a = q(),
                        e;
                    e = t;
                    var c = "inner";
                    "innerWidth" in t || (c = "client", e = document.documentElement || document.body);
                    e = e[c + "Width"] - 28;
                    1 <= A / H / (e / a) ? (y = e, p = Math.round(H / A * y)) : (p = a, y = Math.round(A / H * p));
                    D.css({ width: y + "px", height: p + "px" });
                    S.css("width", y * b + "px")
                },
                ta = function() { a.extend(a.easing, { easeInBack: function(b, a, e, c, d, m) { m === aa && (m = 1.70158);
                            return c * (a /= d) * a * ((m + 1) * a - m) + e } }) },
                ua = function(b, e) {
                    var c = a("<img />");
                    S.append(c);
                    c.get(0).onload = e;
                    c.attr("src", x[b]) },
                ga = function(b, a) { 0 < b && J < x.length ? ua(J, function() { R = R.concat(E[J]);
                        J++;
                        ga(b - 1, a) }) : null !== a && a !== aa && "function" === typeof a && a() },
                ha = function(b) {
                    for (var a =
                            0, e = 0, c = 0; c < E.length; c++) {
                        if (b < E[c].length) { e = b;
                            break }
                        b -= E[c].length;
                        a++ }
                    return { left: -1 * e * y, top: -1 * a * p }
                },
                na = function(b, a) { S.css("-webkit-transform", "translate3d(" + a + "px, " + b + "px,0)");
                    S.css("transform", "translate3d(" + a + "px, " + b + "px,0)") },
                da = function() {
                    for (; 0 > w;) w += 360;
                    for (; 360 < w;) w -= 360;
                    for (var b, a = 360, e = 0; e < R.length; e++) {
                        var c = Math.abs(w - R[e]);
                        c < a && (a = c, b = e) }
                    U = R[b];
                    T = b;
                    b = ha(b);
                    na(b.top, b.left) },
                ea = function() { Q.attr("src", B["" + U / 5 + ",0"]) },
                pa = function(b, a, e) {
                    Z() ? oa(b, a) : (W(b, a), w -= a.deltaX / y * 180, da(),
                        a.ended && !e && ea())
                },
                va = function(b, a) { Z() ? oa(b, a) : (W(b, a), pa(b, a, !0), G = a.touchDeltaX / a.touchDuration, v = 700 * Math.abs(G), C = .8 * G, v = Math.min(v, 2E3), C = 0 < G ? Math.min(C, .8) : Math.max(C, -.8), N = 0, P = L = Date.now(), O = t.setTimeout(qa, 20)) },
                qa = function() {
                    var b = Date.now(),
                        a = b - L;
                    N += a;
                    L = b;
                    b = N / v;
                    b = Math.min(b, 1);
                    G = (1 - (1 - Math.pow(1 - b, 2))) * C;
                    w -= G * a / y * 180;
                    da();
                    1 > b ? O = t.setTimeout(qa, 20) : ea() },
                W = function(b, a) { 100 < Date.now() - P && (C = 0, t.clearTimeout(O), "tap" === b.type && ea());
                    clearTimeout(M) },
                Z = function() {
                    return u.zoomed || u.zooming ||
                        u.pinching
                },
                wa = function(b, a) { W(b, a);
                    u.zooming || (u.zoomed || (ea(), n.postCountMetric("dpmob_zoomInvoked360")), u.zoomed ? k(D, !0, !0) : d(D, a.targetX, a.targetY, !0)) },
                oa = function(b, a) {
                    if (u.zoomed && !u.zooming) {
                        var e = a.deltaX,
                            c = a.deltaY,
                            d = a.ended;
                        a.ended && (u.atBounds = !1);
                        var m = D,
                            p = a.ended,
                            e = h(m, u.offsetX + e, u.offsetY + c, u.scale);
                        u.offsetX = e.x;
                        u.offsetY = e.y;
                        u.endedAtBounds && e.boundX && e.signX === u.signX && (u.atBounds = !0);
                        u.endedAtBounds = e.boundX && p;
                        u.signX = e.signX;
                        f(m, d);
                        l(m, u.offsetX, u.offsetY, u.scale) } },
                xa = function(b) {
                    W(b);
                    var a = b.originalEvent.targetTouches;
                    2 === a.length && (u.lastSample = z(a, D.offset()), b.stopImmediatePropagation(), b.preventDefault())
                },
                ya = function(b) {
                    var a = b.originalEvent.targetTouches;
                    if (2 === a.length && (a = z(a, D.offset()), u.lastSample)) { u.pinching = !0;
                        var e = a.distance - u.lastSample.distance;
                        u.totalDelta += Math.abs(e);
                        4 < u.totalDelta && !u.zooming && (0 > e ? k(D, !0, !1) : d(D, a.midX, a.midY, !1));
                        b.stopImmediatePropagation();
                        b.preventDefault() } },
                za = function(b) {
                    u.pinching && 0 === b.originalEvent.targetTouches.length && (u.totalDelta =
                        0, u.pinching = !1, u.zoomed = 1 < u.scale, u.zooming = !1);
                    u.atBounds = !1;
                    b.preventDefault()
                },
                ra = function() { K += 7.5;
                    w -= 7.5;
                    da();
                    360 > K && (M = setTimeout(ra, 20)) },
                Aa = function(b, a) { Z() || (n.postCountMetric("dpmob_autoSpinInvoked"), W(b, a), K = 0, M = setTimeout(ra, 20)) },
                Ba = function() {
                    c.on("a:popover:beforeShow:view-360", function() { Z() && k(D, !1, !0);
                        ga(x.length - J);
                        n.postCountMetric("dpmob_clickOn360Button") });
                    a(t).bind("orientationchange", function() {
                        c.delay(function() {
                            r();
                            ma();
                            var b = ha(T);
                            na(b.top, b.left);
                            Z() && la();
                            t.scroll(0,
                                0)
                        }, 400)
                    });
                    c.on("a:popover:afterSlide:view-360", function() { ja = !0;
                        ia ? m ? c.delay(fa, 500) : fa() : V.removeClass("a-hidden") });
                    c.on("a:popover:beforeHide:view-360", function() { ba.animate({ top: "-60px" }, 200, "easeInBack");
                        ca.animate({ top: "-60px" }, 200, "easeInBack");
                        f(D, !0, .2, "ease-in");
                        l(D, 0, 0, .8);
                        D.animate({ opacity: "0" }, 200, "easeInBack") })
                };
            return {
                init: function(c) {
                    e = c.spriteURLsFor360;
                    F = c.dynamicImageLocationsFor360;
                    A = c.image360Width;
                    H = c.image360Height;
                    b = c.imagesInSprite;
                    B = c.fullImageURLs;
                    D = a("#image-360");
                    a("#image-block-360-button");
                    Y = a("#main-360");
                    S = a("#image-sprites");
                    V = a("#view-360-loader");
                    ba = a("#view-360-back");
                    ca = a("#view-360-icon-wrapper");
                    m = 0 < ba.length ? !1 : !0;
                    w = T = U = J = 0;
                    R = [];
                    S.empty();
                    S.append("<img id='zoom-360' class='a-hidden' />");
                    Q = a("#zoom-360");
                    ta();
                    ma();
                    x = [];
                    for (c = 0; c < e.length; c++) {
                        var d = e[c],
                            f = Math.round(1.5 * y),
                            g = Math.round(1.5 * p),
                            d = d.replace(/(\._SP)\d+(,)\d+/, "$1" + f + "$2" + g);
                        x.push(d) }
                    E = [];
                    for (c = 0; c < F.length; c++) { d = F[c];
                        f = [];
                        for (g = 0; g < d.length; g++) {
                            var q = 5 * parseInt(d[g].split(",")[0], 10);
                            f.push(q) }
                        E.push(f) }
                    r();
                    D.bind("swipe", va);
                    D.bind("pan", pa);
                    D.bind("tap", W);
                    D.bind("doubleTap", wa);
                    D.bind("touchstart", xa);
                    D.bind("touchmove", ya);
                    D.bind("touchend touchleave touchcancel", za);
                    ca.bind("touchstart", Aa);
                    ka || (ka = !0, Ba());
                    ga(1, sa)
                }
            }
        });
        v.when("A", "jQuery", "a-carousel-framework", "atf").register("ImageBlock360Peek", function(c, a, n) {
            var f, l, g, h, k, d, q, r, z, e, F, A, H, b, B, m, y, p, x, E, w, G = function() {
                    var b = Math.round(1.5 * p),
                        a = Math.round(1.5 * x);
                    l = f.replace(/(\._SP)\d+(,)\d+/, "$1" + b + "$2" + a) },
                I = function() {
                    if (E) {
                        var b =
                            document.documentElement.clientWidth,
                            a = Math.max(Math.min(h, .8 * document.documentElement.clientHeight, k), d);
                        p = Math.min(g, g * a / h, b - 24);
                        x = Math.round(h * p / g);
                        e.css("height", a + "px")
                    } else { a = t;
                        b = "inner"; "innerWidth" in t || (b = "client", a = document.documentElement || document.body);
                        var b = a[b + "Width"] - 20,
                            a = k,
                            c = /^([0-9]+)px$/.exec(m.css("max-height"));
                        null !== c && c[1] < a && (a = c[1]);
                        1 <= g / h / (b / a) ? (p = b, x = Math.round(h / g * p)) : (x = a, p = Math.round(g / h * x)) }
                    F.css("width", p + "px");
                    A.css("width", p * q + "px")
                },
                C = function(b) {
                    var c = a("<img />");
                    c.get(0).onload = function() { H.remove();
                        A.append(c);
                        b && "function" === typeof b && b() };
                    c.attr("src", l)
                },
                K = function(b) {
                    var a = 0,
                        c = 1;
                    return function() {
                        var e = a;
                        return 0 <= e ? (a === b && (c = -1), a += c, e) : null } },
                L = function(b) { null === r ? (r = b, c.requestAnimationFrame(L)) : 70 < b - r ? (r = b, b = z(), null !== b && (A.css("-webkit-transform", "translate3d(" + -1 * b * p + "px,0,0)"), A.css("transform", "translate3d(" + -1 * b * p + "px,0,0)"), c.requestAnimationFrame(L))) : c.requestAnimationFrame(L) },
                P = function() { I();
                    c.objectIsEmpty(y) || y.resize() },
                O = function() {
                    a(t).bind("orientationchange",
                        function() { setTimeout(P, 400) });
                    c.on("a:popover:afterHide:view-360", P);
                    c.on("a:popover:afterHide:immersive-view", P)
                },
                M = function(b) { v.when("postMetric").execute(function(a) { a.postCountMetric(b) }) },
                N = function() { M("dpmob_touchEndOn360Badge") },
                J = function() { M("dpmob_touchEndOnViewGalleryButton") };
            return {
                init: function(l) {
                    f = l.spriteURLForPeek360;
                    g = l.image360Width;
                    h = l.image360Height;
                    q = l.imagesInPeekSprite;
                    E = 1 === l.increaseImageSize;
                    m = a("#image-block");
                    H = a("#main-image");
                    e = a("#landing-image-wrapper");
                    F = a("#carousel-main-image-360");
                    A = a("#carousel-main-image-sprites");
                    b = a("#badge360");
                    B = a("#image-block-360-button");
                    n.onInit("image-block-carousel", function(b) { y = b });
                    k = e.attr("data-max-height");
                    d = e.attr("data-min-height");
                    p = H.width();
                    x = H.height();
                    E && e.css("width", "");
                    0 === p || 0 === x ? I() : (F.css("width", p + "px"), A.css("width", p * q + "px"));
                    G();
                    w || (w = !0, O());
                    b.bind("touchend", N);
                    B.bind("touchend", J);
                    C(function() { r = null;
                        z = K(q - 1);
                        setTimeout(function() { c.requestAnimationFrame(L) }, 300) })
                }
            }
        });
        v.when("A", "a-carousel-framework", "postMetric",
            "image-block-exp-weblab").execute(function(c, a, n, f) {
            c.on("a:carousel:image-block-carousel:init", function(a) {
                var g = a.carousel,
                    h = c.$("#image-arrow-left"),
                    k = c.$("#image-arrow-right");
                a = c.$("#video-play-circle");
                1 < g.getAttr("set_size") && k.removeClass("image-arrow-invisible");
                var d = function(a) {
                        return "undefined" !== typeof a },
                    q = d(f.isEnhancedAltImageDiscoveryTreatmentTwo) && f.isEnhancedAltImageDiscoveryTreatmentTwo(),
                    r = function(a) {
                        a = a.newValue;
                        var c = g.getAttr("set_size");
                        !0 === q && (1 === a ? (h.addClass("image-arrow-invisible"),
                            k.removeClass("image-arrow-invisible")) : a === c ? (h.removeClass("image-arrow-invisible"), k.addClass("image-arrow-invisible")) : (h.removeClass("image-arrow-invisible"), k.removeClass("image-arrow-invisible")))
                    },
                    z = function(a) { g.gotoNextPage();
                        a.$event.preventDefault();
                        n.postCountMetric("AltImageRightArrowClick") },
                    e = function(a) { g.gotoPrevPage();
                        a.$event.preventDefault();
                        n.postCountMetric("AltImageLeftArrowClick") },
                    F = function(a) {
                        var c = a.data.firstVideoIndex;
                        d(c) && g.gotoIndex(c);
                        a.$event.preventDefault();
                        n.postCountMetric("AltImageVideoIndicatorClick") };
                d(a) && a.removeClass("image-arrow-invisible");
                !0 === q && (c.declarative("image-block-arrow-left-touch", ["touchstart"], e), c.declarative("image-block-arrow-right-touch", ["touchstart"], z), c.declarative("image-block-video-indicator-touch", ["touchstart"], F), c.on("a:carousel:image-block-carousel:change:pageNumber", r))
            })
        });
        v.when("A", "a-carousel-framework", "peek-view-helper", "postMetric", "atf", "airy-image-block").execute(function(c, a, n, f) {
            function l(a) {
                if (a.getAttr("auto_adjust_height"))
                    if (a.getAttr("animating")) a.once("animating",
                        function() { l(a) });
                    else a.dom.$viewport.css("height", "auto"), c.delay(function() { a.dom.$viewport.height(a.dom.$viewport.height()) }, 0);
                else a.dom.$viewport.css("height", "")
            }

            function g(a, c) {
                var d = a.dom.$carousel.children("li"),
                    f = a.getAttr("firstVisibleItem") - 1,
                    f = d.slice(f, f + 3);
                d.not(f).css("visibility", "hidden");
                c && f.css("visibility", "") }

            function h(a) {
                a.getAttr("fixed_height") || (a.dom.$viewport.delegate("img", "load", function() { l(a) }), a.onChange("loading", function(c) { c || l(a) }), a.onChange("pageNumber",
                    function() { a.getAttr("hide_off_screen") && a.dom.$carousel.children("li").css("visibility", "") }), a.onChange("animating", function(c) {!c && a.getAttr("hide_off_screen") && g(a) }), a.onChange("minimum_gutter_width", function() { z.repaint(a) }))
            }

            function k(a, c) {
                var d = -1,
                    g = -1;
                a.bind("touchstart", function(b) { b = b.originalEvent.changedTouches[0];
                    d = b.clientX;
                    g = b.clientY });
                a.bind("touchend", function(b) {
                    var B = "next";
                    a.hasClass("a-carousel-goto-prevpage") && (B = "prev");
                    b = b.originalEvent.changedTouches[0];
                    var m = b.clientY;
                    b.clientX === d && m === g && ("next" === B ? (f.postCountMetric("nextPeekedImageClicked"), c.gotoNextPage({ accessibleSafe: !0, animationDuration: 100 })) : (f.postCountMetric("prevPeekedImageClicked"), c.gotoPrevPage({ accessibleSafe: !0, animationDuration: 100 })));
                    g = d = -1
                })
            }

            function d(a) {
                var c = a.dom.$carousel.closest(".a-carousel-viewport"),
                    d = r("<div class='a-carousel-goto-nextpage peek-navigation'></div>"),
                    f = r("<div class='a-carousel-goto-prevpage peek-navigation'></div>");
                c.append(d);
                c.append(f);
                k(d, a);
                k(f, a) }

            function q(a,
                c, d) { 0 < c && d < c - 1 && (f.postCountMetric("PeekScaledDownMainImage"), c = Math.round((c - d) / c * 100), f.postCountMetric(a, c)) }
            var r = c.$,
                z = {
                    repaint: function(a) {
                        a.dom.$carousel.children("li");
                        var f = .6;
                        n.isLandscapeOrientation() && (f = .6);
                        var k = a.getDimensions().viewport.width,
                            h = a.dom.$carousel,
                            b = h.children("li"),
                            B = .64 * k,
                            k = a.getAttr("pageNumber"),
                            m = n.getcardIndex(a, k),
                            y = 0,
                            p = a.getAttr("carousel_height"),
                            x = { carousel: { width: 0 }, items: [] };
                        d(a);
                        b.each(function(b) {
                            var a = r(this).height(),
                                d = B,
                                e = 1,
                                g = r(this).find("img").not("div.carousel-loader img"),
                                k = d - 10,
                                h = n.getImageAspectRatio(g),
                                l = n.getImageHeight(h, k),
                                z = "current-card-in-carousel";
                            if (0 !== h) var t = n.getImageWidthHeightInMainCard(g, k, a),
                                k = t.width,
                                l = t.height;
                            if (m !== b) {
                                d *= f;
                                if (0 === h) g.one("load", function() {
                                    var b = n.getImageWidthHeightInMainCard(g, k, a);
                                    k = b.width * f;
                                    d < k + 10 && (k = d - 10);
                                    b = n.getImageHeight(b.aspectRatio, k);
                                    g.css({ width: k, height: b, "max-height": p });
                                    r(this).parent().find("div.carousel-loader").css({ opacity: 0 });
                                    c.animate(g, { opacity: 1 }, 400) });
                                else k *= f, d < k + 10 && (k = d - 10), l = n.getImageHeight(h,
                                    k), c.animate(g, { opacity: 1 }, 400);
                                z = "";
                                e = .4
                            } else {
                                if (0 === h) g.one("load", function() {
                                    var b = n.getImageWidthHeightInMainCard(g, k, a);
                                    g.css({ width: b.width, height: b.height, "max-height": p });
                                    l = b.height });
                                t = r(this).find(".image-size-wrapper").data("image-height") || 0;
                                q("peek:imageshrink:percent", t, l) }
                            0 !== h && g.css({ width: k, height: l, "max-height": p });
                            r(this).css({ width: d + "px", opacity: e, margin: "0px" });
                            r(this).addClass(z);
                            y += d;
                            x.items[b + 1] = { width: d, outerWidth: d }
                        });
                        h.width(y);
                        x.carousel.width = y;
                        a.dom.$container.removeClass("smaller-card-peek");
                        a.updateDimensionsCache(x);
                        a.getAttr("hide_off_screen") && g(a, !0);
                        a.gotoPage(a.getAttr("firstVisibleItem"), { animationDuration: 0, ignorePause: !0 });
                        a.triggerEvent("repaint")
                    },
                    resize: function(a, c) { c.viewport && void 0 !== c.viewport.width && (this.repaint(a), a.getAttr("fixed_height") || l(a)) },
                    init: function(a) {
                        a.setAttr("visible_peeked_dimension", .18);
                        a.setAttr("current_image_width", .64);
                        a.setAttr("peeked_scale_down_potrait", .6);
                        a.setAttr("peeked_scale_down_landscape", .6);
                        a.setAttr("peek_opacity", .4);
                        a.setAttr("current_card_class",
                            "current-card-in-carousel");
                        a.setAttr("carousel_height", a.dom.$carousel.height());
                        a.setAttr("pageSize", 1);
                        c.loadDescendantImagesManually(a.dom.$carousel);
                        var d = a.getAttr("fixed_height");
                        c.isFiniteNumber(d) ? a.dom.$viewport.height(d) : a.setAttr("fixed_height", !1);
                        a.dom.$carousel.children("li").css("visibility", "visible");
                        var d = a.dom.$carousel.children("li").length,
                            f = a.dom.$carousel,
                            g = f.children("li").last();
                        2 < d || (g = g.clone());
                        f.prepend(g);
                        a.setAttr("page_no_of_first_item", d);
                        a.dom.$container.removeClass("left-margin-peek");
                        h(a);
                        this.repaint(a);
                        l(a)
                    }
                };
            a.registerStrategy("display", "single-display-with-peek", z)
        });
        v.when("A", "jQuery", "a-carousel-utils", "a-carousel-constants", "a-carousel-framework", "peek-view-helper", "airy-image-block").execute(function(c, a, n, f, l, g) {
            function h(b) {
                var a = b.dom.$carousel.children("li").length,
                    c = a + 1,
                    d = b.getAttr(f.SET_SIZE),
                    e = d - a;
                if (0 < e) {
                    for (var e = c + e - 1, g = []; c <= e; c++) g.push(b.getEmptyCard(c, d));
                    b.dom.$carousel.append(g.join(""));
                    b.setAttr(f.LOADING, !0);
                    for (var e = b.getAttr(f.FETCHED_ITEMS),
                            g = b.dom.$carousel.children("li"), k, c = a; c < d; c++)
                        if (k = e[c]) {
                            var q = n.getElementFromItem(k),
                                a = g.eq(c);
                            n.addElementToDom(a, q);
                            e[c] = n.clearElementFromItem(k) }
                    b.strategies.display.repaint && b.strategies.display.repaint(b);
                    b.setAttr(f.FETCHED_ITEMS, e, !0);
                    b.setAttr(f.LOADING, !1)
                }
            }

            function k(b, a, d) {
                if (b.getAttr(f.ANIMATING)) b.once(f.ANIMATING, function() { k(b, a, d) });
                else {
                    var e = b.getDimensions().items;
                    if (!d || a.length >= d.length) {
                        b.setAttr(f.LOADING, !0);
                        for (var g = b.dom.$carousel.children("li"), q = a.length, h, l; q--;)
                            if ((l =
                                    a[q]) && !c.equals(l, d[q]) && !0 !== l && !0 !== l.content) {
                                var r = n.getElementFromItem(l);
                                h = g.eq(q);
                                h.length && (n.addElementToDom(h, r), e[q] = { width: h.outerWidth(), outerWidth: h.outerWidth(!0), height: h.outerHeight(), outerHeight: h.outerHeight(!0) }, a[q] = n.clearElementFromItem(l)) }
                    }
                    b.setAttr(f.FETCHED_ITEMS, a);
                    b.updateDimensionsCache({ items: e });
                    b.setAttr(f.LOADING, !1)
                }
            }

            function d(b, a) {
                var c = b.getAttr("peeked_scale_down_potrait");
                g.isLandscapeOrientation() && (c = b.getAttr("peeked_scale_down_landscape"));
                var d = b.getDimensions().viewport.width,
                    c = d * b.getAttr("current_image_width") * c,
                    e = b.getAttr("visible_peeked_dimension");
                return d = a * c - d * e
            }

            function q(b) {
                var a = 0;
                if (b.length)
                    if (a = g.getImageAspectRatio(b), 0 < a) {
                        var c = g.getImageHeight(a, b.width());
                        b.height(c) } else b.height("auto");
                return a }

            function r(b, a, c) { b.css({ width: a, opacity: c }) }

            function z(b, a, d, e) {
                var f = b.getDimensions().viewport.width,
                    k = b.getAttr("peeked_scale_down_potrait"),
                    h = b.getAttr("carousel_height");
                g.isLandscapeOrientation() && (k = b.getAttr("peeked_scale_down_landscape"));
                var l = f *
                    b.getAttr("current_image_width"),
                    f = l * k;
                a.removeClass(b.getAttr("current_card_class"));
                b = a.find("img").not("div.carousel-loader img");
                0 < b.length ? (l = g.getImageWidthHeightInMainCard(b, l - 10, h), h = l.aspectRatio, l = l.width, k *= l, f < k + 10 && (k = f - 10), "auto" === b[0].style.height && (h = q(b)), h = g.getImageHeight(h, k), 0 === h && (h = "auto"), r(a, f, d), c.animate(b, { width: k, height: h }, e)) : r(a, f, d);
                return f
            }

            function e(b, e, m) {
                var k = b.dom.$carousel.children("li"),
                    p = b.getAttr(f.SET_SIZE),
                    h = a(k[m]),
                    l = b.getDimensions().viewport.width *
                    b.getAttr("current_image_width"),
                    t = b.getAttr("carousel_height");
                h.addClass(b.getAttr("current_card_class"));
                var n = h.find("img").not("div.carousel-loader img");
                if (0 < n.length) {
                    var v = g.getImageAspectRatio(n),
                        A = l - 10; "auto" === n[0].style.height && (v = q(n));
                    var F = g.getImageHeight(v, A);
                    F > t ? (F = t, A = g.getImageWidth(v, F)) : 0 === F && (F = "auto");
                    r(h, l, 1);
                    c.animate(n, { width: A, height: F }, 100) } else r(h, l, 1);
                h = b.getAttr("peek_opacity");
                2 !== p || a(k[e]).find(".airy-player-container").length || (p = g.cloneCards(b, e), z(b, p, h, 0));
                z(b, a(k[e]), h, 100);
                return d(b, m)
            }

            function t(b, a) {
                var d = b.dom.$carousel,
                    e = d.offset().left,
                    g = 0,
                    k = b.getAttr("page_no_of_first_item"),
                    h, l = b.getAttr(f.SET_SIZE);
                if ("left" === a) { g = d.children("li").last();
                    h = g.find("img#main-image");
                    var q = h.clone();
                    d.prepend(g);
                    0 < q.length && h.replaceWith(q);
                    g = -1 * g.width();
                    h = k - 1;
                    0 === h && (h = l) } else "right" === a && (g = d.children("li").first(), h = g.find("img#main-image"), q = h.clone(), d.append(g), 0 < q.length && h.replaceWith(q), g = g.width(), h = k + 1, h > l && (h = 1));
                b.setAttr("page_no_of_first_item",
                    h);
                c.animate(b.dom.$carousel, { left: e + g }, 0, null, null)
            }
            var A = c.capabilities.touch ? 2E3 : 3E3,
                H = /iPhone|iPad|iPod/.test(navigator.platform);
            l.registerStrategy("transition", "single-transition-with-peek", {
                gotoPage: function(b, c, d) {
                    d = d || {};
                    (void 0 === d.animationDuration || 0 < d.animationDuration) && !d.silent && b.setAttr(f.ANIMATING, !0);
                    var e = b.getAttr(f.TOTAL_PAGES),
                        h = b.getAttr(f.PAGE_NUMBER);
                    if (c !== h) {
                        var k = "left";
                        c > h && (k = "right");
                        c > e ? c = 1 : 1 > c && (c = e);
                        d.isPageChanging = !0;
                        var h = b.dom.$carousel,
                            q = h.children("li"),
                            l =
                            h.children("li.current-card-in-carousel").index(),
                            r = g.getcardIndex(b, c),
                            n = b.getAttr("current_card_class");
                        2 < e ? (d.destinationCardIndex = r, d.currentCardIndex = l, 0 === r ? (t(b, "left"), d.currentCardIndex = h.children("li.current-card-in-carousel").index(), d.destinationCardIndex += 1) : r === e - 1 && (t(b, "right"), d.currentCardIndex = h.children("li.current-card-in-carousel").index(), --d.destinationCardIndex)) : (d.destinationCardIndex = 1, t(b, k), d.currentCardIndex = h.children("li.current-card-in-carousel").index());
                        a(q[l]).removeClass(n);
                        a(q[r]).addClass(n)
                    }
                    0 < c && c <= e && b.setAttr(f.PAGE_NUMBER, c);
                    this.gotoIndex(b, b.getAttr(f.PAGE_SIZE) * (c - 1) + 1, d)
                },
                gotoIndex: function(b, c, e) {
                    e = e || {};
                    (void 0 === e.animationDuration || 0 < e.animationDuration) && !e.silent && b.setAttr(f.ANIMATING, !0);
                    var g = !1,
                        h = Math.ceil(c / b.getAttr(f.PAGE_SIZE));
                    h !== b.getAttr(f.PAGE_NUMBER) && 0 < h && h <= b.getAttr(f.TOTAL_PAGES) && b.setAttr(f.PAGE_NUMBER, h);
                    b.setAttr(f.FIRST_VISIBLE_ITEM, c);
                    c = b.dom.$carousel;
                    e.isPageChanging ? g = d(b, e.destinationCardIndex) : (g = c.children("li.current-card-in-carousel").index(),
                        g = d(b, g));
                    c.find("div.carousel-loader").css({ opacity: 0 });
                    a(c.children("li")[e.destinationCardIndex]).find("div.carousel-loader").css({ opacity: 1 });
                    !1 !== g && (e.goToIndex = !0, e.currentPage = h, this.gotoPixel(b, g, e))
                },
                gotoPixel: function(b, a, d) {
                    var g = b.getAttr(f.CURRENT_PIXEL);
                    d = d || {};
                    var h = d.easingFunction || "ease-out",
                        k = d.callback,
                        q;
                    void 0 !== d.animationDuration ? q = d.animationDuration : (q = c.isFiniteNumber(d.animationSpeed) ? d.animationSpeed : b.getAttr(f.ANIMATION_SPEED), g = Math.abs(a - g), q = 0 === q ? 0 : Math.floor(g /
                        q * 1E3));
                    0 < q && !d.silent && b.setAttr(f.ANIMATING, !0);
                    c.isFiniteNumber(a) ? (d.goToIndex && d.isPageChanging && (a = e(b, d.currentCardIndex, d.destinationCardIndex), H && (q = 0)), g = 0 < q ? function() { k && k();
                        b.getAttr(f.CURRENTLY_WRAPPING) || b.setAttr(f.ANIMATING, c.isAnimated(b.dom.$carousel), d.silent) } : k, b.setAttr(f.CURRENT_PIXEL, a), c.animate(b.dom.$carousel, { left: -1 * a }, q, h, g)) : v.error("Target pixel is not a finite number", "a-carousel-transition-slide", "gotoPixel")
                },
                gotoNextPage: function(b, a) {
                    var c = b.getAttr(f.PAGE_NUMBER);
                    this.gotoPage(b, ++c, a)
                },
                gotoPrevPage: function(b, a) {
                    var c = b.getAttr(f.PAGE_NUMBER);
                    this.gotoPage(b, --c, a) },
                onSwipe: function(b, a) {
                    if (!b.getAttr(f.CURRENTLY_WRAPPING)) {
                        var e = b.getAttr(f.FIRST_VISIBLE_ITEM),
                            g = b.getAttr(f.PAGE_SIZE),
                            h = b.getAttr(f.PAGE_NUMBER),
                            k = 0 > a.velocityX,
                            q = e;
                        k && h < b.getAttr(f.TOTAL_PAGES) ? q = e + g : !k && 1 < h && (q = e - g);
                        g = b.getAttr(f.CURRENT_PIXEL);
                        h = d(b, q);
                        g = Math.abs(1E3 * (k ? g - h : g + h) / a.velocityX);
                        g = Math.max(g, 300);
                        g = Math.min(g, 1.2 * c.viewport().width);
                        g = { animationDuration: g, easingFunction: b.getAttr(f.TOUCH_EASING) };
                        q !== e || b.getAttr("circular") ? k ? b.gotoNextPage(g) : b.gotoPrevPage(g) : (g.animationSpeed = .95 * c.viewport().width, delete g.animationDuration, b.gotoPage(q, g))
                    }
                },
                onPan: function(b, a) {
                    if (!b.getAttr(f.CURRENTLY_WRAPPING)) {
                        b.setAttr(f.ANIMATING, !0);
                        var e = b.dom.$carousel.children("li.current-card-in-carousel").index(),
                            g = d(b, e),
                            h = g - a.touchDeltaX,
                            k = b.getAttr(f.CIRCULAR),
                            e = b.getAttr(f.PAGE_NUMBER),
                            q = b.getAttr(f.TOTAL_PAGES);
                        if (a.ended) {
                            var g = {
                                    easingFunction: b.getAttr(f.TOUCH_EASING),
                                    animationSpeed: .95 * c.viewport().width,
                                    silent: !0
                                },
                                h = a.touchDeltaX,
                                l = Math.abs(h) < .4 * b.getViewportWidth();
                            !k && (0 > h && q === e || 0 < h && 1 === e) || l ? b.gotoPage(e, g) : 0 > h ? b.gotoNextPage(g) : b.gotoPrevPage(g)
                        } else !k && (k = b.getAttr(f.SPRINGINESS), 0 > h && 0 < a.touchDeltaX || e === q && 0 > a.touchDeltaX) && (e = Math.pow(Math.abs(a.touchDeltaX), k), h = 0 >= h ? -1 * e : g + e), b.gotoPixel(h, { easingFunction: b.getAttr(f.TOUCH_EASING), animationDuration: 0, silent: !0 })
                    }
                },
                init: function(b) {
                    var a = b.getAttr(f.ANIMATION_SPEED);
                    c.isFiniteNumber(a) || b.setAttr(f.ANIMATION_SPEED, A);
                    void 0 === b.getAttr(f.WRAP_EASING) &&
                        b.setAttr(f.WRAP_EASING, "linear");
                    h(b);
                    b.onChange(f.FETCHED_ITEMS, function(a, c) { k(b, a, c) });
                    b.onChange(f.SET_SIZE, function(a, c) { a > c && h(b) });
                    a = b.getAttr(f.SET_SIZE);
                    b.setAttr("page_no_of_first_item", a)
                }
            })
        });
        v.when("A", "a-carousel-constants").register("peek-view-helper", function(c, a) {
            function n(a) {
                var c = a.width();
                a = a.height();
                var f = 0;
                0 < a && (f = c / a);
                return f }

            function f(a, c) {
                var f = 0;
                0 !== a && (f = c / a);
                return f }
            var l = c.$;
            return {
                isLandscapeOrientation: function() {
                    var a = !1;
                    t.innerHeight < t.innerWidth &&
                        (a = !0);
                    return a
                },
                getImageAspectRatio: function(a) {
                    return n(a) },
                getImageHeight: function(a, c) {
                    return f(a, c) },
                getImageWidth: function(a, c) {
                    return a * c },
                getcardIndex: function(c, f) {
                    var k = c.getAttr("page_no_of_first_item"),
                        d = c.getAttr(a.SET_SIZE);
                    return f >= k ? f - k : d - k + f },
                getImageWidthHeightInMainCard: function(a, c, k) { a = n(a);
                    var d = f(a, c);
                    d > k && (d = k, c = a * d);
                    return { height: d, width: c, aspectRatio: a } },
                cloneCards: function(a, c) {
                    var f = a.dom.$carousel,
                        d = f.children("li"),
                        q = l(d[c]).clone();
                    0 === c ? (d.last().remove(), f.append(q)) :
                        (d.first().remove(), f.prepend(q));
                    return q
                }
            }
        });
        v.when("A", "jQuery", "a-carousel-framework").register("share-icon", function(c, a, n) {
            var f = function(c, f) {
                    var k;
                    0 < a("#" + c).length && (k = a("#" + c)[0]);
                    l(f, k) },
                l = function(c, f) { f && (0 < a(f).find(".video-table").length ? a("#" + c).css("visibility", "hidden") : a("#" + c).css("visibility", "visible")) };
            return {
                hideFirstVideoShareIcon: f,
                toggleShareIcon: l,
                getCurrentCarouselElement: function(a) {
                    return 0 < a.carousel.dom.$carousel.find("li").length ? a.carousel.dom.$carousel.find("li")[a.newValue -
                        1] : !1
                },
                hideFirstVideoGlanceShareIconApp: function() { f("image-block ol li", "swf-share-immersive-view") },
                hideFirstVideoGlanceShareIconWeb: function() { f("image-block ol li", "share-product") },
                hideFirstVideoImmersiveShareIconWeb: function() { f("immersive-main ol li", "immersive-image-share") }
            }
        });
        v.when("A").register("video-ads-image-block", function(c) {
            var a = c.$,
                n;
            c.on("a:carousel:image-block-immersive-main-carousel:init", function() { n = !0 });
            c.on("a:popover:afterSlideOut:immersive-view", function() {
                n = !1;
                f()
            });
            c.on("a:popover:afterSlide:immersive-view", function() { n = !0 });
            a(t).bind("orientationchange", function() { f(null, 500) });
            var f = function(c, f) {
                if (n) {
                    var h = c ? c.find(".immersive-carousel-video-ads-banner-container") : a(".immersive-carousel-video-ads-banner-container:visible");
                    c = c || h.closest("li.a-carousel-card");
                    0 < h.length && (c.find(".slate-image-table-cell"), c.find(".slate-image-table-cell img"), h.hide(), setTimeout(function() {
                        var f = h,
                            d = c.find(".image-size-wrapper"),
                            g = a("#airy-slate-preload");
                        if (0 <
                            d.length) g = d.find(".slate-image-table-cell"), d = d.find(".slate-image-table-cell img"), 0 !== g.length && 0 !== d.length && (g = d.offset().top + d.height() - (g.offset().top + g.height()), g > -f.height() && (g = -f.height()), f.css("top", g + "px"), f.css("width", d.css("width")), f.css("margin", "auto"));
                        else if (0 < g.length) {
                            var d = g.height(),
                                r = g.width(),
                                n = new Image;
                            n.src = g.css("background-image").replace("url(", "").replace(")", "").replace(/\"/gi, "");
                            var e = n.height / n.width;
                            d / r >= e ? (n = r * e, d = r) : (n = d, d /= e);
                            g = -(g.height() - n) / 2;
                            g > -f.height() &&
                                (g = -f.height());
                            f.css("top", g + "px");
                            f.css("width", d);
                            f.css("margin", "auto")
                        }
                        h.show()
                    }, f || 0))
                } else h = c ? c.find(".carousel-video-ads-banner-container") : a(".carousel-video-ads-banner-container:visible"), c = c || h.closest("li.a-carousel-card"), 0 < h.length && (c.find(".slate-image-table-cell"), c.find(".slate-image-table-cell img"), h.hide(), setTimeout(function() {
                    var f = h,
                        d = c.find(".image-size-wrapper"),
                        g = a("#airy-slate-preload");
                    if (0 < d.length) {
                        if (g = d.find(".slate-image-table-cell"), d = d.find(".slate-image-table-cell img"),
                            0 !== g.length && 0 !== d.length) {
                            var r = g.offset().top + g.height() - (d.offset().top + d.height());
                            0 > r && (r = 0);
                            f.css("bottom", r + "px");
                            f.css("width", d.css("width"));
                            f.css("left", "50%");
                            f.css("margin-left", -d.width() / 2 + "px") }
                    } else if (0 < g.length) {
                        var r = g.height(),
                            d = g.width(),
                            n = new Image;
                        n.src = g.css("background-image").replace("url(", "").replace(")", "").replace(/\"/gi, "");
                        var e = n.height / n.width;
                        r / d >= e ? (n = d * e, e = d) : (n = r, e = r / e);
                        r = (g.height() - n) / 2 - f.height();
                        0 > r && (r = 0);
                        f.css("bottom", r + "px");
                        f.css("width", e + "px");
                        f.css("left",
                            "50%");
                        f.css("margin-left", -(g.width() / 2 - (d - e) / 2) + "px")
                    }
                    h.show()
                }, f || 0))
            };
            return { update: f }
        });
        v.when("A", "jQuery", "atf").register("ProductXRayMobileView", function(c, a) {
            function n(a, c, f) {
                var g = a.data("height"),
                    e = a.data("width"),
                    h = parseInt(a.data("top"), 10),
                    k = parseInt(a.data("left"), 10);
                a.css({ top: c / g * h + "px", left: f / e * k + "px" }) }

            function f(a, c, f) {
                var g = a.parent(),
                    e = g.height(),
                    g = g.width();
                a.css({ marginLeft: (g - f) / 2 + "px", marginTop: (e - c) / 2 + "px" }) }

            function l(c, g) {
                var h = g.height(),
                    k = g.width(),
                    e =
                    g.parent();
                c.children(".product-xray-hotspot").each(function() {
                    var c = a(this),
                        d = c.data("desc"),
                        d = a("#" + d);
                    n(c, h, k);
                    e.append(c);
                    e.parent().append(d);
                    f(c, h, k) })
            }

            function g() { a(".product-xray-hotspot").each(function() {
                    var c = a(this),
                        g = c.siblings("img"),
                        h = c.parent(),
                        k = g.height(),
                        g = g.width(),
                        e = h.height(),
                        h = h.width();
                    0 !== e && 0 !== h && (n(c, k, g), f(c, k, g)) }) }
            var h = a(".product-xray-desc-container"),
                k = {};
            a("#product-xray-placeholder").children(".product-xray-hotspots-container").each(function() {
                var c = a(this).data("pid");
                k[c] = a(this);
                k.hasHotspots = !0
            });
            k.hasHotspots && a("#image-block").append("<span id='product-xray-icon'>i</span>");
            a("#immersive-main").delegate(".product-xray-hotspot", "click", function(c) {
                var f = a(this).data("desc");
                h.hide();
                a("#" + f).show();
                c.stopPropagation() });
            a("#immersive-main").delegate(".image-wrapper", "click", function() { h.hide() });
            c.on("a:image:load:immersiveViewMainImage", function(a) {
                var c;
                c = a.url;
                var f = c.lastIndexOf("/");
                c = c.substring(f + 1, c.length);
                f = c.indexOf(".");
                c = -1 !== f ? c.substring(0, f) :
                    c;
                (c = k[c]) && l(c, a.$imageElement)
            });
            c.on("a:immersiveImage:zoomIn", function() { a(".product-xray-hotspot").hide() });
            c.on("a:immersiveImage:zoomOut", function() { a(".product-xray-hotspot").show() });
            a(t).bind("orientationchange", function(a) { setTimeout(g, 350) })
        })
    })
})(function() {
    var v = window.AmazonUIPageJS || window.P,
        t = v._namespace || v.attributeErrors;
    return t ? t("DetailPagePhoneImageBlockAssets") : v }(), window);
/* ******** */
(function(g, e, t) {
    g.execute(function() {
        g.when("jQuery", "A").execute(function(c, d) {
            function e() {
                var d = c("#aboutThisItem_boxGroup > div"),
                    a, b;
                c.each(d, function(c, d) {
                    var e;
                    e = (e = d.firstChild.firstChild) && e.innerHTML && !/^\s*$/.test(e.innerHTML) ? !1 : !0;
                    d.className = "a-box a-spacing-none a-feature a-hidden";
                    e || (d.className = "a-box a-spacing-none a-feature", a || (a = d), b = d) });
                a && b && (a === b ? b.className = "a-box a-spacing-none a-feature a-first a-last" : (a.className = "a-box a-spacing-none a-feature a-first", b.className =
                    "a-box a-spacing-none a-feature a-last"))
            }
            g.register("aboutThisItemDecorator", function() {
                return { decorate: function() { e() } } })
        });
        g.when("atf").execute(function() {
            var c = e.document,
                d = c.getElementById("main-image"),
                c = c.getElementById("aplus-glance-img");
            d && c && c.setAttribute("src", d.getAttribute("src")) });
        g.when("jQuery", "A", "a-popover-base", "a-popover-ajax").execute(function(c, d, e, n) {
            function a(a, c) {
                a && c && c.find("a").each(function(c, d) {
                    var f = d.href;
                    if (f && f.match(/.*\/[A-Z0-9]{10}\/.*/)) {
                        f =
                            f.split(/\/[A-Z0-9]{10}\//);
                        f = f[0] + "/" + a + "/" + f[1];
                        var e = /([?|&])vs=.*?(&|$)/i,
                            g = -1 !== f.indexOf("?") ? "&" : "?",
                            f = f.match(e) ? f.replace(e, "$1vs=1$2") : f + g + "vs=1";
                        d.href = f
                    }
                })
            }
            d.on("a:popover:beforeShow:dpSecondaryViewAction", function(a) { a = a.popover;
                var f = a.data,
                    e = f.secViewId,
                    f = f.useStateData ? d.state(e).data : c("#" + e).html();
                a.update(f) });
            g.register("updateSecondaryViewLinks", function() {
                return {
                    updateLinks: function() {
                        var b = d.state("twister-selection-state").currentAsin;
                        a(b, c("#tellAFriendBox_feature_div"));
                        a(b, c("#customerReviews_feature_Div"))
                    }
                }
            })
        });
        g.when("jQuery", "jumpLink").execute(function(c, d) { 1 === e.isACRJumpLinkEnabled ? d.bind("#acrCustomerReviewLink", 10, 0) : 2 === e.isACRJumpLinkEnabled ? d.bind("#acrCustomerReviewLink", 600, 0) : 3 === e.isACRJumpLinkEnabled ? d.bind("#acrCustomerReviewLink", 850, 0) : 4 === e.isACRJumpLinkEnabled && d.bind("#acrCustomerReviewLink", 1100, 0) });
        g.when("A", "jQuery").register("dpmob-sec-view-instrumentation", function(c, d) {
            var g = {},
                n = function(a) {
                    var b;
                    a in g &&
                        (b = "dpmob-sec-" + a + g[a]);
                    return b
                };
            return {
                recordClickTime: function(a) {
                    if ("undefined" !== typeof a) {
                        var b = 1;
                        a in g && (b = g[a] + 1);
                        g[a] = b; "function" === typeof e.uet && e.uet("tc", "dpmob-sec-" + a + b) } },
                recordEndTime: function(a) { "undefined" !== typeof a && (a = n(a), "undefined" !== typeof a && "function" === typeof e.ues && (e.ues("t0", a, new Date), e.ues("ctb", a, "1"))) },
                postMetrics: function(a) {
                    if ("undefined" !== typeof a) {
                        var b = n(a);
                        "undefined" !== typeof b && (d.ajax({
                            url: "/gp/product/mobile/secondary-view/ajax-measurement.html?featureName=" +
                                a,
                            dataType: "text",
                            timeout: 4E4,
                            error: function() {},
                            success: function(a, c, d) { "function" === typeof e.ues && "function" === typeof e.uet && "function" === typeof e.uex && (e.ues("id", b, a), e.uet("be", b), e.uex("ld", b)) }
                        }), this.addCount("dpmob-sec-" + a, 1), this.addCount(b, 1))
                    }
                },
                addCount: function(a, b) {
                    var c = e.ue,
                        d = c.count(a) || 0;
                    c.count(a, d + b) }
            }
        });
        g.register("device-information", function() {
            return {
                isAndroid: function() {
                    return /Android/i.test(navigator.userAgent) },
                isIOs: function() {
                    return /iPhone|iPad|iPod/i.test(navigator.userAgent) },
                isWindows: function() {
                    return /IEMobile/i.test(navigator.userAgent) },
                isBlackberry: function() {
                    return /BlackBerry/i.test(navigator.userAgent) }
            }
        });
        g.when("A", "postMetric", "ready").execute(function(c, d) {
            function l() { g.when("a-expander").execute(function(a) { a.initializeExpanders() }) }

            function n() {
                h = a("#productDescription_feature_div");
                m = a("#featureBulletsAndDetailBullets_feature_div");
                k = a("#fixed-description-header");
                p = a("#fixed-feature-header");
                A = a("#descriptionInlineExpansionSecondaryContent");
                t = a("#descriptionSeeMore");
                C = a("#descriptionSeeLessContainer");
                z = a("#descriptionSeeLessContainerSticky");
                r = a("#featureInlineExpansionSecondaryContent");
                q = a("#featureSeeMore");
                y = a("#featureSeeLessContainer");
                x = a("#featureSeeLessContainerSticky");
                u = 2 < h.parents().length ? h.parents().eq(1) : "";
                v = 2 <= m.parents().length ? m.parents().eq(1) : "";
                a("#title").length && (w = a("#title").html());
                a("#ebooksTitle").length && (w = a("#ebooksTitle").html());
                a("#persistent-description-title").html(w);
                a("#persistent-feature-title").html(w)
            }
            var a = c.$,
                b = 0,
                f = 0,
                h, k, m, p, A, t, C, z, y, r, q, u, v, x, w, B = function(a, b, d, f) { a = d.offset().top;
                    d = a + d.outerHeight(!0);
                    var e = b.offset().top,
                        g = e + b.outerHeight(!0);!f.is(":hidden") && b.is(":hidden") && e > a && g < d ? (b.hide().removeClass("a-hidden"), c.slideDown(b, 200)) : !b.is(":hidden") && (e <= a || g >= d) && c.slideUp(b, 200) },
                D = function(a, b, c, d, f) {
                    var g, h;
                    a.length && (g = a.offset().top, h = g + a.outerHeight(!0));
                    c.addClass("a-hidden");
                    d.removeClass("a-hidden");
                    f.removeClass("a-hidden");
                    b.length && (c = b.offset().top, b = c + b.outerHeight(!0),
                        a.length && a.is(":hidden") && g >= c && h <= b && e.scrollTo(0, c))
                },
                E = function(b, f, g, h, l) {
                    g.removeClass("a-hidden");
                    h.addClass("a-hidden");
                    l.addClass("a-hidden");
                    f.length && (f = f.offset().top, b.length && !b.is(":hidden") ? (c.slideUp(b, 200), e.scrollTo(0, f), a("#fixed-description-header").length && b.get(0) === a("#fixed-description-header").get(0) ? d.postCountMetric("descriptionDockedSeeLess") : d.postCountMetric("featureDockedSeeLess")) : g.length && a("#featureSeeMore").length && g.get(0) === a("#featureSeeMore").get(0) ? d.postCountMetric("featureUndockedSeeLess") :
                        d.postCountMetric("descriptionUndockedSeeLess"))
                };
            n();
            c.on.scroll(function() { h.length && k.length && u.length && B(h, k, u, A);
                m.length && p.length && v.length && B(m, p, v, r) });
            c.on("a:expander:descriptionInlineExpansionContainer:toggle:expand", function(a) { b || (l(), b = 1);
                n();
                d.postCountMetric("descriptionUndockedSeeMore");
                D(k, u, t, z, C) });
            c.on("a:expander:featureInlineExpansionContainer:toggle:expand", function(a) { f || (l(), f = 1);
                n();
                d.postCountMetric("featureUndockedSeeMore");
                D(p, v, q, x, y) });
            c.on("a:expander:descriptionInlineExpansionContainer:toggle:collapse",
                function(a) { n();
                    E(k, u, t, z, C) });
            c.on("a:expander:featureInlineExpansionContainer:toggle:collapse", function(a) { n();
                E(p, v, q, x, y) })
        });
        g.when("A", "jQuery", "postMetric", "atf").execute(function(c, d, g) {
            c.once(function() {
                var c = "title acrCustomerReviewLink twister_feature_div unifiedPrice_feature_div price_feature_div newPitchPriceWrapper_feature_div newOfferShippingMessage_feature_div vatMessageLabel_feature_div preorderPriceGuarantee_feature_div dealOnChildItems_feature_div points_feature_div priceTax_feature_div".split(" "),
                    a = "Title CustomerReviewStars Twister Price Price NewPitchPrice NewOfferShipping VatMessage PreorderPriceGuarantee DealOnChildItems Points PriceTax".split(" "),
                    b = e,
                    f = "inner";
                "innerWidth" in e || (f = "client", b = document.documentElement || document.body);
                b = b[f + "Height"];
                if (0 < b)
                    for (f = 0; f < c.length; f++) {
                        var h = d("#" + c[f]);
                        if (0 !== h.length) {
                            var k = h.height(),
                                h = h.offset() ? h.offset().top : 0,
                                m = h + k;
                            if (0 < m) {
                                var p = h < b && m > b;
                                m < b ? g.postCountMetric("dpmob_" + a[f] + "_FullyVisible", 1) : p ? g.postCountMetric("dpmob_" + a[f] + "_PartiallyVisible",
                                    1) : g.postCountMetric("dpmob_" + a[f] + "_NotVisible", 1);
                                p && (k = Math.round((b - h) / k * 100), g.postCountMetric("dpmob_" + a[f] + "_PartiallyVisiblePercentage", k))
                            }
                        }
                    }
            })()
        })
    })
})(function() {
    var g = window.AmazonUIPageJS || window.P,
        e = g._namespace || g.attributeErrors;
    return e ? e("DetailPagePhoneProductInfoAssets") : g }(), window);
/* ******** */
(function(f) {
    var d = window.AmazonUIPageJS || window.P,
        g = d._namespace || d.attributeErrors,
        a = g ? g("HLCXDetailPageAssets") : d;
    a.guardFatal ? a.guardFatal(f)(a, window) : a.execute(function() { f(a, window) }) })(function(f, d, g) {
    f.when("A", "a-secondary-view", "a-checkbox").register("aw-mbb", function(a, c, d) {
        function b(a) { l && g.get("/gp/product/ajax-handlers/reftag.html/ref=psd_mb_" + a + ("_" + x + "_" + k)) }
        var g = a.$,
            x = "",
            k = "",
            l = !1,
            t = !1,
            q = function() {
                var a = c.get("MBBPopover");
                a && a.hide() };
        f.when("mash").execute(function(a) { q = function() { a.navstack.begin().back().end() } });
        return {
            isShouldFeatureShow: function() {
                var a;
                a = (a = g("#PSDMBB").find("script").html()) ? g.parseJSON(a) : null;
                null !== a && "undefined" !== typeof a && (l = "true" === (a.shouldFeatureShow || ""), !1 !== l && (null === (a.baseAsin || "") || null === (a.serviceAsin || "") ? l = !1 : (t = x !== (a.baseAsin || ""), x = a.baseAsin || "", k = a.serviceAsin || "")));
                return l },
            isBaseAsinChanged: function() {
                return t },
            isCheckboxChecked: function() {
                return d(".mbb-checkbox").isChecked() },
            secondaryViewNo: function() {
                b("n");
                g("#atc-mbb-asin").val("");
                g("#buynow-mbb-asin").val("");
                d(".mbb-checkbox").uncheck();
                q()
            },
            secondaryViewAdd: function() { b("y");
                g("#atc-mbb-asin").val(g("#mbb-checkbox-input").val());
                g("#buynow-mbb-asin").val(g("#mbb-checkbox-input").val());
                d(".mbb-checkbox").check();
                q() },
            logRefTagAction: b
        }
    });
    f.when("A", "aw-mbb").execute(function(a, c) {
        function d() {!1 !== c.isShouldFeatureShow() && (b("#mbb-touch-link-id").unbind("click").bind("click", function() { c.logRefTagAction("pu") }), c.isBaseAsinChanged() && a.delay(function() { c.logRefTagAction("i") }, 1E3)) }
        var b = a.$;
        a.declarative("mbb-mobile-checkbox-toggle",
            "change",
            function() { c.isCheckboxChecked() ? (c.logRefTagAction("cy"), b("#atc-mbb-asin").val(b("#mbb-checkbox-input").val()), b("#buynow-mbb-asin").val(b("#mbb-checkbox-input").val())) : (c.logRefTagAction("cn"), b("#atc-mbb-asin").val(""), b("#buynow-mbb-asin").val("")) });
        a.declarative("mbb-secondary-view-no", "click", c.secondaryViewNo);
        a.declarative("mbb-secondary-view-add", "click", c.secondaryViewAdd);
        a.on("a:dropdown:mobileQuantityDropDown:select", function(a) {
            a = a.value;
            b("#mbb-quantity").val(a);
            b("#atc-mbb-quantity").val(a);
            b("#buynow-mbb-quantity").val(a)
        });
        d();
        a.on("a:pageUpdate ready", function() { d() })
    })
});
/* ******** */
(function(l) {
    var m = window.AmazonUIPageJS || window.P,
        n = m._namespace || m.attributeErrors,
        b = n ? n("DetailPageWarrantyAssets") : m;
    b.guardFatal ? b.guardFatal(l)(b, window) : b.execute(function() { l(b, window) }) })(function(l, m, n) {});
/* ******** */
(function(l, r, E) {
    l.execute(function() {
        l.when("A", "preventMulticlick:forceFormSubmit", "ready").execute(function(l, d) {
            var e = function(e) {
                var c = l.$(document),
                    a = !1;
                c && c.delegate(e, "click", function() {
                    var b = l.$(e);
                    if (!b) return !0;
                    if (a) return b.attr("disabled", !0), !1;
                    d(b);
                    a = !0;
                    setTimeout(function() { a = !1;
                        b.attr("disabled", !1) }, 3E4);
                    return !0 }) };
            e("#one-click-button");
            e("#oneClickBuyButton");
            e("#prime-toggle-main") });
        l.when("A", "ready").register("preventMulticlick:forceFormSubmit", function(l) {
            return function(d) {
                d &&
                    d.jquery && d.closest("form").submit()
            }
        })
    })
})(function() {
    var l = window.AmazonUIPageJS || window.P,
        r = l._namespace || l.attributeErrors;
    return r ? r("DetailPageOffersMulticlickAssets") : l }(), window);
(function(l, r, E) {
    l.execute(function() {
        l.when("A", "ready").execute(function(C) {
            function d(d, c, a, b) {
                function g() { e ? b ? r.location = "amznapp://page/?app-action=refresh" : e.navstack.begin().back().forward(r.location.href, "GET", {}).end() : r.location.replace(c) }
                C.get(a, { params: d, success: g, error: g }) }
            var e;
            l.when("aw-mash").execute(function(d) { e = d });
            C.declarative("emwa-sign-up", ["click"], function(e) {
                var c = document.getElementById("emwaData");
                if (null !== c) {
                    var a = c.getAttribute("data-detailPageUrl"),
                        b = c.getAttribute("data-subscriptionUrl"),
                        c = "true" === c.getAttribute("data-isRefresh");
                    d(e.data, a, b, c);
                    e.$event.preventDefault()
                }
            })
        })
    })
})(function() {
    var l = window.AmazonUIPageJS || window.P,
        r = l._namespace || l.attributeErrors;
    return r ? r("DetailPageOffersEmwaAssets") : l }(), window);
(function(l, r, E) {
    l.execute(function() {
        l.when("A", "jQuery").execute(function(l, d) {
            function e(e) {
                l.state("quantityState") !== E && l.state("quantityState", { quantity: e });
                d("span[data-aw-mash]").each(function() {
                    var c = d(this).attr("data-aw-mash"),
                        c = JSON.parse(c);
                    c.hasOwnProperty("inputs") && c.inputs.hasOwnProperty("quantity") && (c.inputs.quantity = e, d(this).attr("data-aw-mash", JSON.stringify(c))) });
                d("#buyNowCheckout") !== E && d("#buyNowCheckout input[name='quantity']").val(e);
                d("#buyNowOneClickCheckout") !== E &&
                    d("#buyNowOneClickCheckout input[name='quantity']").val(e);
                d("#addToCart") !== E && d("#addToCart input[name='quantity']").val(e);
                d("#buyNow") !== E && d("#buyNow input[name='quantity']").val(e);
                d("#oneClickBuy") !== E && d("#oneClickBuy input[name='quantity']").val(e)
            }
            l.on("a:dropdown:mobileQuantityDropDown:select", function(d) { e(d.value) });
            l.on.ready(function() {
                if (l.state("minOrderQuantityState") !== E) {
                    var d = l.state("minOrderQuantityState").minOrderQuantity;
                    1 < d && e(d) } })
        });
        l.when("A", "jQuery").execute(function(l,
            d) { l.on("a:dropdown:rcxsubsQuan:select", function(e) { e = e.value;
                d("#sns") !== E && d("#sns input[name='quantity']").val(e) }) });
        l.when("A").execute(function(l) {
            function d(d) { d.preventDefault() }
            l.declarative("go-to-twister", ["click"], function(e) {
                var k = l.$,
                    c = k("body"),
                    a = document.getElementById(e.data.unselected_0 + "-button"),
                    b;
                for (b in e.data) "undefined" !== b && k("#" + e.data[b] + "-button").addClass("twister-required-dim-alert");
                b = document.getElementById("unselectedDimAlert");
                var g = a;
                if (l.state("partialPageState") !==
                    E) {
                    var a = l.state("partialPageState").partialErrorMsg,
                        h = l.state("partialPageState").isPartialStateErrorWeblabEnabled;
                    b && b.children[0] && b.children[0].children[0] && (b.style.display = "block", b.children[0].children[0].innerHTML = a, g = b);
                    "T1" === h ? (b = document.getElementById("dimsInlineError")) && b.children[0] && b.children[0].children[0] && (b.children[0].children[1].innerHTML = a, k(b).fadeIn("slow", function() {
                        var a = k(r),
                            b = k("#dimsInlineError").offset();
                        100 > b.top - a.scrollTop() && k("html, body").animate({
                            scrollTop: b.top -
                                100
                        })
                    })) : "T2" === h ? (k("#pse-toast-overlay").css("display", ""), c.addClass("udp-stop-scrolling"), c.bind("touchmove touchstart touchend touchcancel", d), k("#pse-toast").css("display", ""), k("#pse-success").html(a), k("#pse-success").css("display", ""), k("#pse-toast").addClass("pse-toast-success-styles"), k("#pse-spinner").css("display", ""), setTimeout(function() {
                        var a = document.getElementById(e.data.unselected_0 + "-button");
                        a && k(a).click();
                        k("#pse-spinner").css("display", "none");
                        k("#pse-toast").removeClass("pse-toast-success-styles");
                        k("#pse-success").css("display", "none");
                        k("#pse-toast").css("display", "none");
                        c.removeClass("udp-stop-scrolling");
                        c.unbind("touchmove touchstart touchend touchcancel", d);
                        k("#pse-toast-overlay").css("display", "none")
                    }, 2E3)) : g && g.scrollIntoView()
                }
            })
        });
        l.when("A", "ready").execute(function(l) {
            l.on("a:accordion:buybox-accordion:select", function(d) {
                l.$("#buyBoxAccordion").find(".accordion-header span.header-price").removeClass("a-color-price").addClass("a-color-secondary");
                l.$(d.selectedRow.$row).find(".accordion-header span.header-price").removeClass("a-color-secondary").addClass("a-color-price");
                l.$("#buyBoxAccordion").find(".accordion-header i.header-prime-logo").addClass("opacity-50");
                l.$(d.selectedRow.$row).find(".accordion-header i.header-prime-logo").removeClass("opacity-50")
            })
        });
        l.when("A", "mash", "dp-client-counter").execute(function(l, d, e) {
            function k(a) {
                function c(a) {
                    d.houdini.cart.addItem({
                        asin: a.inputs.a,
                        offerId: a.inputs.oid,
                        qid: a.inputs["log-qid"],
                        sr: a.inputs["log-sr"],
                        ref: "mw_pa_dp_buy_crt",
                        failCallback: function() {
                            l.trigger("dpLogFatalsEvent", "[Prime now MobileApp add to cart failed]",
                                "FATAL", "primenow_addtocart_failure");
                            e.inc("houdiniAddToCartFail")
                        }
                    })
                }
                a.requiresSignIn ? d.showLoginDialog({ successCallback: function() { c(a) } }) : c(a)
            }
            var c = l.$;
            c("body");
            var a = { "add-to-cart": function(a) { e.inc("houdiniAddToCartAction");
                    k(a) } };
            l.declarative("aw-mash-asap", ["click"], function(b) { "object" === typeof b && "object" === typeof b.data && "string" === typeof b.data.buttonID && "function" === typeof a[b.data.buttonID] && a[b.data.buttonID](b.data) })
        });
        l.when("A").execute(function(l) {
            var d = r.ue;
            l.declarative("web-atc",
                "click",
                function(e) { "undefined" !== typeof d && "undefined" !== typeof d.count && d.count("mobWebATCButtonClickCount", (d.count("mobWebATCButtonClickCount") || 0) + 1) });
            l.declarative("app-atc", "click", function(e) { "undefined" !== typeof d && "undefined" !== typeof d.count && d.count("mobAppATCButtonClickCount", (d.count("mobAppATCButtonClickCount") || 0) + 1) });
            l.declarative("web-bnb", "click", function(e) {
                "undefined" !== typeof d && "undefined" !== typeof d.count && d.count("mobWebBuyNowButtonClickCount", (d.count("mobWebBuyNowButtonClickCount") ||
                    0) + 1)
            });
            l.declarative("app-bnb", "click", function(e) { "undefined" !== typeof d && "undefined" !== typeof d.count && d.count("mobAppBuyNowCButtonClickCount", (d.count("mobAppBuyNowButtonClickCount") || 0) + 1) })
        });
        l.when("A", "jQuery").execute(function(l, d) { l.on("a:dropdown:rcxOrdFreq:select", function(e) { e = e.value;
                d("#sns") !== E && d("#sns input[name='rcxOrdFreq']").val(e) }) })
    })
})(function() {
    var l = window.AmazonUIPageJS || window.P,
        r = l._namespace || l.attributeErrors;
    return r ? r("DetailPagePhoneOffersAssets") :
        l
}(), window);
/* ******** */
(function(h) {
    var m = window.AmazonUIPageJS || window.P,
        l = m._namespace || m.attributeErrors,
        b = l ? l("RegistryDPMobileAssets") : m;
    b.guardFatal ? b.guardFatal(h)(b, window) : b.execute(function() { h(b, window) }) })(function(h, m, l) {
    h.when("A", "a-secondary-view", "cf").register("atwl", function(b, e, f) {
        function d(a) {
            null !== a && null !== a.detail && null !== a.detail.sheetMenu && null !== a.detail.sheetMenu.wishlistID && null !== a.detail.sheetMenu.wishlistType && (document.hidden || t(a.detail.sheetMenu.wishlistID, a.detail.sheetMenu.wishlistType, !0))
        }

        function c(a) { a.addEventListener !== l && a.addEventListener("wishlist.AddToListFromNativeBottomSheet", d) }

        function h(a) { b.state("atwl", g.extend(b.state("atwl") || {}, a)) }

        function p() {
            var a = b.state("atwl") || {};
            if (a && a.isResponseSuccess && a.registryId && a.registryType) {
                g("#atwl-error-message").closest(".a-alert-inline-error").addClass("a-hidden").hide();
                g("#atwl-changeover").show();
                g("#atwl-listtype").val(a.registryType);
                g("#atwl-privacy").css({ "padding-left": "5px" }).text(a.registryPrivacy);
                var c = g("#wishlistButtonViewStack").attr("href");
                c !== l && null === c.match(/lid=/) && null === c.match(/ty=/) && (c = c + "&lid=" + a.registryId + "&ty=" + a.registryType, g("#wishlistButtonViewStack").attr("href", c));
                "true" === m(g("#atwl-form")).hideViewWishListOption ? g("#wishListUpdateAction-changeover").show() : (g("#wishlistButtonStack").addClass("a-hidden"), g("#wishlistButtonViewStack").removeClass("a-hidden"));
                c = g("#persistentShellWishlistButtonViewStack").find("a").attr("href");
                c !== l && null === c.match(/lid=/) && null === c.match(/ty=/) && (c = c + "&lid=" + a.registryId + "&ty=" +
                    a.registryType, g("#persistentShellWishlistButtonViewStack").attr("href", c));
                g("#persistentShellWishListButtonStack").addClass("a-hidden");
                g("#persistentShellWishlistButtonViewStack").removeClass("a-hidden");
                b.trigger("atwl:mash:dispatchEvent", { eventType: "wishlist.ListUpdated", listId: a.registryId })
            }
        }

        function k(a) { a && a.message && 0 < a.message.length && g("#atwl-error-message").text(a.message);!r && e && e.get("atwl_secondary_view") ? e.get("atwl_secondary_view").hide() : b.trigger("atwl:mash:goback");
            g("#atwl-error-message").closest(".a-alert-inline-error").removeClass("a-hidden").show() }

        function m(a) {
            var c = {};
            a = a.find(":input");
            b.each(a, function(a) {
                var d = b.$(a);
                a.name && (c[a.name] = d.val()) });
            return c }

        function u() { n = !0;
            setTimeout(function() { n = !1 }, 1E4) }

        function t(a, c, d) {
            var f = g("#atwl-content"),
                f = m(f.find("#atwl-form"));
            f.type = c;
            f.registryID = a;
            f.pcomp = 0;
            f.action = "add";
            g("#atwl-html").hide();
            g(".a-popover-loading").show();
            u();
            b.ajax("/gp/registry/atwl/add.html", {
                method: "post",
                params: f,
                timeout: 5E3,
                success: function(a) {
                    n = !1;
                    a && a.isValid ? (g("#atwl-error-message").closest(".a-alert-inline-error").addClass("a-hidden").hide(),
                        h({ isResponseSuccess: a.isValid, registryId: a.registryID, registryType: a.registryType, registryPrivacy: a.registryPrivacy }), r ? d ? p() : b.trigger("atwl:mash:goback") : e.get("atwl_secondary_view").hide()) : k(a)
                },
                error: function(a) { n = !1;
                    k(a) }
            })
        }
        var g = b.$,
            r = !1;
        b.on("atwl:mashPresent", function(a) {
            r = !0;
            c(a.mash);
            a.mash.addEventListener !== l && (a.mash.addEventListener("appPause", function() {
                var b = a.mash;
                b.removeEventListener !== l && b.removeEventListener("wishlist.AddToListFromNativeBottomSheet", d) }), a.mash.addEventListener("appResume",
                function() { c(a.mash) }))
        });
        b.on("a:popover:afterHide:atwl_secondary_view", function(a) { p() });
        b.on("a:popover:show:atwl_secondary_view", function(a) {
            var c = a.popover.$popover;
            a = g("#atwl-content");
            a = m(a ? a.find("#atwl-form") : {}).sourceVendorId || "other";
            var d;
            d = (b.state("atwl") || {}).hzPopover ? "/hz/wishlist/addtolist" : "/gp/registry/atwl/popover.html";
            b.ajax(d, {
                method: "GET",
                cache: !1,
                params: { type: "wishlist", isMobile: 1, ellipsize: 20, displayHeader: 1, modalView: 0, sourceVendorId: a },
                success: function(a) {
                    a && a.html ? (g("#atwl-error-message").closest(".a-alert-inline-error").addClass("a-hidden").hide(),
                        c.find(".a-popover-loading").hide(), c.find("#atwl-css").html(a.css), c.find("#atwl-html").html(a.html).show()) : k(a)
                },
                error: function(a) { k(a) }
            })
        });
        var n = !1;
        b.declarative("atwl-native-bottom-sheet", "click", function(a) { b.trigger("atwl:mash:dispatchEvent", { eventType: "wishlist.ShowNativeBottomSheet" }) });
        b.declarative("atwl-option", "click", function(a) { a = a.data;
            null === a.type || null === a.id || n || t(a.id, a.type, !1) });
        b.declarative("atwl-add-item", "click", function(a) {
            n || (g("#atwl-html").hide(), g(".a-popover-loading").show(),
                a = m(g("#atwl-form")), a.pcomp = 0, a.action = "add", a.registryID = "new", a.type = "wishlist", u(), b.ajax("/gp/registry/atwl/add.html", { method: "post", params: a, timeout: 5E3, success: function(a) { n = !1;
                        a && a.isValid ? (h({ isResponseSuccess: a.isValid, registryId: a.registryID, registryType: a.registryType, registryPrivacy: a.registryPrivacy }), p()) : k(a) }, error: function(a) { n = !1;
                        k(a) } }))
        })
    });
    h.when("A", "mash", "atwl", "mash-capabilities").execute(function(b, e, f, d) {
        b.trigger("atwl:mashPresent", { mash: e });
        b.on("atwl:mash:goback", function() { e.goBack() });
        b.on("atwl:mash:dispatchEvent", function(b) { d.isDispatchEventAvailable() && e.dispatchEvent({ type: b.eventType, detail: { listId: b.listId } }) })
    });
    h.register("mash-capabilities", function() {
        var b;
        return {
            isDispatchEventAvailable: function() {
                if (b !== l) return b;
                var e;
                a: { e = document.cookie.split(";");
                    for (var f = 0; f < e.length; f++) {
                        for (var d = e[f];
                            " " === d.charAt(0);) d = d.substring(1, d.length);
                        if (0 === d.indexOf("amzn-app-ctxt=")) { e = d.substring(14, d.length);
                            break a } }
                    e = null }
                f = 0;
                if (null !== e) try {
                    var c = e.match(/"cp":[0-9]*/);
                    null === c && (c = decodeURIComponent(e).match(/"cp":[0-9]*/));
                    if (null !== c && 0 < c.length) {
                        var h = c[0].split(/:/);
                        if (null !== h && 2 === h.length) {
                            var p = parseInt(h[1], 10);
                            f = "number" === typeof p ? p & 2048 : 0 } }
                } catch (k) {}
                return b = 0 !== f
            }
        }
    });
    h.when("A").register("baby-registry-view-my-br", function(b) {
        function e(c) {
            var e = c.asin,
                h = c.si;
            c = c.refMarker;
            if ("" !== e && "" !== h) {
                var k = {};
                k.asin = e;
                k.update = "ajaxAddAsinToRegistry";
                k.sid = h;
                k.platform = c;
                b.post("/gp/baby/api/update.html/ref=" + c + "_dp_add_br", {
                    params: k,
                    timeout: 5E3,
                    success: function(b) { "success" === b.result ? (d("#addToBabyRegistryButtonStack").hide(), d("#viewMyBabyRegistryButtonStack").css("display", "block"), d("#atbr-changeover").css("display", "block")) : "duplicate" === b.result ? (d("#addToBabyRegistryButtonStack").hide(), d("#viewMyBabyRegistryButtonStack").css("display", "block"), d("#atbr-changeover-duplicate").css("display", "block")) : f() },
                    failure: function() { f() }
                })
            }
        }

        function f() { d("#atbr-changeover-error").css("display", "block") }
        var d = b.$;
        b.declarative("baby-registry-view-my-br-button", ["click"], function(b) { e(b.data) })
    });
    h.when("A", "b2b-lists-detail-mobile").execute(function(b, e) { e.isEnabled() && (b.on("a:dropdown:selected:quantity", function(b) { e.updateQuantity(b.value) }), b.on("a:pageUpdate", function() { e.updateQuantityAndAsin(b.$("#mobileQuantityDropDown").val(), b.$("#a").val()) })) });
    h.when("A", "a-secondary-view", "ready").register("b2b-lists-detail-mobile", function(b, e) {
        function f() {
            return e.get(b.$("#business-list-secondary-view")) }

        function d(b, d, e) {
            var f = new RegExp("([?&])" +
                    d + "=.*?(&|$)", "i"),
                h = b;
            b.match(f) && (h = b.replace(f, "$1" + d + "=" + e + "$2"));
            return h
        }
        return { updateQuantity: function(c) { 0 < b.$("#business-list-secondary-view").length && (c = d(f().attrs("url"), "quantity", c), f().update({ url: c })) }, updateQuantityAndAsin: function(c, e) {
                if (0 < b.$("#business-list-secondary-view").length) {
                    var h = d(f().attrs("url"), "quantity", c),
                        h = d(h, "asin", e);
                    f().update({ url: h }) } }, isEnabled: function() {
                return 0 < b.$("#add-business-list-button").length } }
    })
});
/* ******** */
(function(m) {
    var p = window.AmazonUIPageJS || window.P,
        q = p._namespace || p.attributeErrors,
        b = q ? q("AmazonCustomCommonAssets") : p;
    b.guardFatal ? b.guardFatal(m)(b, window) : b.execute(function() { m(b, window) }) })(function(m, p, q) {
    m.when("A", "ready").register("acc-font", function(b) {
        (function() {
            var k = b.$,
                h = [],
                d = b.state("ctsStateData");
            if (b.objectIsEmpty(d))
                for (d = 0; 3 > d; d++) {
                    var g = b.state("ctsStateInfo" + d);
                    b.objectIsEmpty(g) || h.push(g) } else h = d.surfaces;
            h.length && b.each(h, function(c) {
                if (c.FontSettings && c.FontSettings.fonts) {
                    var d =
                        c.FontSettings.fonts;
                    b.each(d, function(a) {
                        if (a.fontURL && a.isActive) {
                            var b;
                            b = d.length;
                            a = a.fontURL.split("/");
                            1 > a.length ? b = null : (a = a[a.length - 1].split("."), b = 1 > a.length ? null : "ac_" + b + "_" + a[0].substring(0, 20));
                            b && k("<span>&nbsp;</span>").css("font-family", b).appendTo("body") } })
                }
            })
        })()
    });
    m.register("acc-text-validator", function() {
        return {
            validate: function(b, k, h, d) {
                parseInt(b.length, 10) > k && (b = b.substring(0, k), h.val(b));
                h = b;
                b = parseInt(h.length, 10);
                var g = k;
                0 < d.length && (g = Math.max(k - b, 0), d.html(g));
                return h
            }
        }
    });
    m.when("A", "ready").register("acc-util", function(b) {
        return {
            preloadConfiguratorImages: function(b) {
                try {
                    if (b)
                        for (var h = 0; h < b.areas.length; h++) {
                            var d = b.areas[h];
                            if ("Options" === d.customizationType)
                                for (var g = 0; g < d.customizationTypeSettings.Options.possibleValues.length; g++) {
                                    var c = d.customizationTypeSettings.Options.possibleValues[g];
                                    c.optionImage && ((new Image).src = c.optionImage) } } } catch (e) {
                    p.ueLogError && p.ueLogError(e, {
                        logLevel: "ERROR",
                        attribution: "AmazonCustomCommonAssets:acc-util:prealoading_configurator_images",
                        message: "[Failed to preload configurator images] "
                    })
                }
            }
        }
    });
    m.when("A", "acc-weblab-bbq-updates", "acc-weblab-configurator", "acc-weblab-enable-tabletapp", "acc-weblab-configurator-mobile", "acc-weblab-new-thumbnail", "ready").register("acc-weblab", function(b, k, h, d, g, c) {
        var e = {},
            a = {};
        a[k.name] = k.treatment;
        a[d.name] = d.treatment;
        a[h.name] = h.treatment;
        a[g.name] = g.treatment;
        a[c.name] = c.treatment;
        e.getTreatment = function(c) {
            var d = a[c];
            return b.objectIsEmpty(d) ? (p.console && console.log("Weblab " + c + " not found"),
                q) : d
        };
        e.isT1 = function(a) {
            return "T1" === e.getTreatment(a) };
        return e
    });
    m.when("A").register("acc-weblab-bbq-updates", function(b) {
        return { name: "AMAZON_CUSTOM_BBQ_UPDATES_70086", treatment: "C" } });
    m.when("A").register("acc-weblab-enable-tabletapp", function(b) {
        return { name: "AC_PRODUCT_TABLETAPP_75334", treatment: "C" } });
    m.when("A").register("acc-weblab-configurator", function(b) {
        return { name: "AC_PRODUCT_CONFIGURATOR_DP_75265", treatment: "C" } });
    m.when("A").register("acc-weblab-configurator-mobile",
        function(b) {
            return { name: "AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123", treatment: "C" } });
    m.when("A").register("acc-weblab-new-thumbnail", function(b) {
        return { name: "AC_THUMBNAIL_NEW_84598", treatment: "C" } });
    m.register("acc-accounting", function() {
        function b(a) {
            return !!("" === a || a && a.charCodeAt && a.substr) }

        function k(a) {
            return m ? m(a) : "[object Array]" === p.call(a) }

        function h(a) {
            return a && "[object Object]" === p.call(a) }

        function d(a, b) {
            var c;
            a = a || {};
            b = b || {};
            for (c in b) b.hasOwnProperty(c) && null == a[c] && (a[c] =
                b[c]);
            return a
        }

        function g(a, b, c) {
            var d = [],
                e, f;
            if (!a) return d;
            if (l && a.map === l) return a.map(b, c);
            e = 0;
            for (f = a.length; e < f; e++) d[e] = b.call(c, a[e], e, a);
            return d }

        function c(a, b) { a = Math.round(Math.abs(a));
            return isNaN(a) ? b : a }

        function e(c) {
            var d = a.settings.currency.format; "function" === typeof c && (c = c());
            return b(c) && c.match("%v") ? { pos: c, neg: c.replace("-", "").replace("%v", "-%v"), zero: c } : c && c.pos && c.pos.match("%v") ? c : b(d) ? a.settings.currency.format = { pos: d, neg: d.replace("%v", "-%v"), zero: d } : d }
        var a = {
                version: "0.4.1",
                settings: { currency: { symbol: "$", format: "%s%v", decimal: ".", thousand: ",", precision: 2, grouping: 3 }, number: { precision: 0, grouping: 3, thousand: ",", decimal: "." } }
            },
            l = Array.prototype.map,
            m = Array.isArray,
            p = Object.prototype.toString,
            f = a.unformat = a.parse = function(b, c) {
                if (k(b)) return g(b, function(a) {
                    return f(a, c) });
                b = b || 0;
                if ("number" === typeof b) return b;
                c = c || a.settings.number.decimal;
                var d = new RegExp("[^0-9-" + c + "]", ["g"]),
                    d = parseFloat(("" + b).replace(/\((.*)\)/, "-$1").replace(d, "").replace(c, "."));
                return isNaN(d) ?
                    0 : d
            },
            q = a.toFixed = function(b, d) { d = c(d, a.settings.number.precision);
                var e = Math.pow(10, d);
                return (Math.round(a.unformat(b) * e) / e).toFixed(d) },
            C = a.formatNumber = a.format = function(b, e, l, m) {
                if (k(b)) return g(b, function(a) {
                    return C(a, e, l, m) });
                b = f(b);
                var p = d(h(e) ? e : { precision: e, thousand: l, decimal: m }, a.settings.number),
                    r = c(p.precision),
                    w = 0 > b ? "-" : "",
                    v = parseInt(q(Math.abs(b || 0), r), 10) + "",
                    x = 3 < v.length ? v.length % 3 : 0;
                return w + (x ? v.substr(0, x) + p.thousand : "") + v.substr(x).replace(/(\d{3})(?=\d)/g, "$1" + p.thousand) + (r ? p.decimal +
                    q(Math.abs(b), r).split(".")[1] : "")
            },
            x = a.formatMoney = function(b, l, m, p, q, r) {
                if (k(b)) return g(b, function(a) {
                    return x(a, l, m, p, q, r) });
                b = f(b);
                var w = d(h(l) ? l : { symbol: l, precision: m, thousand: p, decimal: q, format: r }, a.settings.currency),
                    v = e(w.format);
                return (0 < b ? v.pos : 0 > b ? v.neg : v.zero).replace("%s", w.symbol).replace("%v", C(Math.abs(b), c(w.precision), w.thousand, w.decimal)) };
        a.formatColumn = function(l, m, p, q, r, u) {
            if (!l) return [];
            var w = d(h(m) ? m : { symbol: m, precision: p, thousand: q, decimal: r, format: u }, a.settings.currency),
                v = e(w.format),
                x = v.pos.indexOf("%s") < v.pos.indexOf("%v") ? !0 : !1,
                z = 0;
            l = g(l, function(b, d) {
                if (k(b)) return a.formatColumn(b, w);
                b = f(b);
                var e = (0 < b ? v.pos : 0 > b ? v.neg : v.zero).replace("%s", w.symbol).replace("%v", C(Math.abs(b), c(w.precision), w.thousand, w.decimal));
                e.length > z && (z = e.length);
                return e });
            return g(l, function(a, c) {
                return b(a) && a.length < z ? x ? a.replace(w.symbol, w.symbol + Array(z - a.length + 1).join(" ")) : Array(z - a.length + 1).join(" ") + a : a })
        };
        return a
    });
    m.register("acc-currency-config", function() {
        var b = { USAmazon: { symbol: "$", thousand: ",", decimal: "." }, GBAmazon: { symbol: "£", thousand: ",", decimal: "." }, DEAmazon: { symbol: "EUR", thousand: ".", decimal: ",", format: "%s %v" }, FRAmazon: { symbol: "EUR", thousand: " ", decimal: ",", format: "%s %v" }, ESAmazon: { symbol: "EUR", thousand: ".", decimal: ",", format: "%s %v" }, ITAmazon: { symbol: "EUR", thousand: ".", decimal: ",", format: "%s %v" } };
        return { getConfig: function(k) {
                return b[k] } }
    })
});
(function(m) {
    var p = window.AmazonUIPageJS || window.P,
        q = p._namespace || p.attributeErrors,
        b = q ? q("AmazonCustomMobileWebSingleTextAssets") : p;
    b.guardFatal ? b.guardFatal(m)(b, window) : b.execute(function() { m(b, window) }) })(function(m, p, q) {
    (function() {
        m.when("A", "ready").register("ProductCustomizationBase", function(b) {
            return function() {} });
        m.when("A", "ready").execute(function(b) {
            function k(b) {
                var e = "/gp/product/features/log-message.html/ref=" + b.refTag,
                    a;
                d++;
                a = "ajax_amzon_custom_log" + d;
                if (p.ue) {
                    var g = p.uet;
                    g("tc",
                        a)
                }
                h.ajax({ type: "POST", url: e, dataType: "json", data: { component: b.component, message: b.msg, isMetricsNeeded: b.isMetricsNeeded }, success: function(b) { b = b.result.rid;
                        if (p.ue) {
                            var c = p.ues,
                                d = p.uet,
                                e = p.uex;
                            c("id", a, b);
                            c("t0", a, new Date);
                            c("ctb", a, "1");
                            d("cf", a);
                            d("be", a);
                            e("ld", a) } } })
            }
            var h = b.$,
                d = 0,
                g = function() {
                    var b = h("#ASIN", h(".pc-buy-box")).val();
                    return {
                        CustomizeNowClick: { refTag: "amz_custom_cn_clk_" + b, component: "Amazon Custom customize now button", msg: "Amazon Custom customize now button clicked", isMetricsNeeded: !1 },
                        AddToCartClick: { refTag: "amz_custom_atc_clk_" + b, component: "Amazon Custom Add to cart", msg: "Amazon Custom add to cart clicked", isMetricsNeeded: !1 },
                        CloseClick: { refTag: "amz_custom_cls_clk_" + b, component: "Amazon Custom Add to cart", msg: "Amazon Custom close button clicked", isMetricsNeeded: !1 },
                        FontChange: { refTag: "amz_custom_font_chg_" + b, component: "Font drop down list", msg: "Font selected from drop down list", isMetricsNeeded: !1 },
                        FontColorChange: {
                            refTag: "amz_custom_color_chg_" + b,
                            component: "Font drop down list",
                            msg: "Font selected from drop down list",
                            isMetricsNeeded: !1
                        },
                        CustomizeNextSurfaceClick: { refTag: "amz_custom_customize_next_surface_clk_" + b, component: "Amazon Custom Next Surface Button", msg: "Customize next surface button clicked", isMetricNeeded: !1 },
                        CloseWarningClick: { refTag: "amz_custom_close_atc_warning_" + b, component: "Amazon Custom atc warning", msg: "Warning shown when uncustomized surfaces are there and add to cart is clicked", isMetricNeeded: !1 },
                        PreviewSurfaceClick: {
                            refTag: "amz_custom_preview_surface_clk_" +
                                b,
                            component: "Amazon Custom Preview Surface button",
                            msg: "Preview surface button clicked",
                            isMetricNeeded: !1
                        },
                        hasNonASCII: { refTag: "amz_custom_has_non_ASCII", component: "Text", msg: "Added Non ASCII. PC-Token - ", isMetricsNeeded: !0 }
                    }
                }();
            b.on("amazon-custom-popup-open", function() { this.popupOpenTime = new Date });
            b.on("amazon-custom-popup-close", function(b) { b -= this.popupOpenTime;
                p.ue.count("pcSingleTextTimer", b / 1E3);
                p.ue.count("pcSingleTextTimer") });
            b.on("amazon-custom-log-ref-tag", function(b, d) {
                if (b !== q) {
                    var a =
                        g[b];
                    a !== q && (d && d.msg && (a.msg += d.msg), k(a))
                }
            })
        })
    })();
    (function() { m.when("A", "ProductCustomizationBase", "ready").register("pc-input-validator", function(b, k) {
            var h = { AlphaNumeric: function(b) {
                    return !0 }, Digits: function(b) {
                    return /^[\s\d]*$/.test(b) } };
            return { Validate: function(b, g) {
                    return h[g] !== q && "function" === typeof h[g] ? h[g](b) : !0 } } }) })();
    (function() {
        m.when("A", "ProductCustomizationBase", "ready").register("ProductPrice", function(b, k) {
            return function(h) {
                var d = function(b) {
                    return this };
                d.prototype = new k;
                d.prototype.Init = function() {
                    if ("1" !== h("#is-buying-price-enabled").val()) {
                        var d = h(".pc-buy-box");
                        b.post("/gp/product/features/pc-price.html", { dataType: "json", params: { itemAsin: d.find("#ASIN").val(), merchantId: d.find("#merchantID").val() }, success: function(b) { d.find(".a-color-price").html(b.result.price);
                                d.find(".a-color-price,.a-color-base").addClass("active") }, error: function(b) { d.find(".a-color-price,.a-color-base").removeClass("active") } }) } };
                return d
            }(b.$)
        })
    })();
    (function() {
        m.when("A", "ProductCustomizationBase",
            "pc-input-validator", "acc-weblab", "ready").register("SimpleText", function(b, k, h, d) {
            var g = /[\u2600-\u27BF]|\uD83C[\uDDE0-\uDDFF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]|\uD83E[\uDD00-\uDDFF]|\uD83D[\uDE80-\uDEFF]/;
            return function(c) {
                var d = function(a) { this.config = {};
                    this.config.$el = a;
                    return this };
                d.prototype = new k;
                d.prototype.getDOM = function() {
                    var a = this;
                    return {
                        $inputTextElement: function(b) {
                            return a.config.$el.find(c(".pc-simple-text-input")) },
                        $textLimitElement: function(b) {
                            return a.config.$el.find(c(".pc-char-limit-length")) },
                        $isRequiredLabel: function() {
                            return a.config.$el.find(c(".isRequiredLabel")) }
                    }
                };
                d.prototype.BindEvents = function() {
                    function a(a) { b.trigger("simple-text-preview-change", { text: a, state: e.$inputTextElement().data("area-name") }) }

                    function c() {
                        var b = e.$inputTextElement().val() || e.$inputTextElement().find("[type=text]").val(),
                            g = b.length;
                        e.$inputTextElement().attr("maxlength") || e.$inputTextElement().find("[type=text]").attr("maxlength");
                        0 < e.$textLimitElement().length && e.$textLimitElement().html(parseInt(d.config.maxLength,
                            10) - parseInt(g, 10));
                        d.isValid() ? (a(b), d.removeMissingRequiredEmphasis()) : a("")
                    }
                    var d = this,
                        e = d.getDOM();
                    e.$inputTextElement().bind("keyup", function(a) { c.call(d) });
                    e.$inputTextElement().bind("cut", function(a) { setTimeout(function() { c.call(d) }, 100) });
                    e.$inputTextElement().bind("paste", function(a) { setTimeout(function() { c.call(d) }, 100) });
                    e.$inputTextElement().bind("change", function(a) { c.call(d) })
                };
                d.prototype.getComponentName = function() {
                    return "SimpleText" };
                d.prototype.Init = function() {
                    this.BindEvents();
                    var a = this.getDOM();
                    this.config.maxLength = a.$inputTextElement().attr("maxlength") || a.$inputTextElement().find("[type=text]").attr("maxlength");
                    this.config.areaName = a.$inputTextElement().data("area-name");
                    this.config.charset = a.$inputTextElement().data("input-type")
                };
                d.prototype.addContent = function(a) {
                    var b = this.getDOM(); "text" === b.$inputTextElement().attr("type") ? b.$inputTextElement().val(a).change() : b.$inputTextElement().find("[type=text]").val(a).change() };
                d.prototype.getContent = function() {
                    var a =
                        this.getDOM();
                    return "text" === a.$inputTextElement().attr("type") ? a.$inputTextElement().val() : a.$inputTextElement().find("[type=text]").val()
                };
                d.prototype.getAreaName = function() {
                    return this.config.areaName };
                d.prototype.isEmpty = function() {
                    return 0 === this.getContent().length };
                d.prototype.isValid = function() {
                    var a = this.getContent();
                    return h.Validate(a, this.config.charset) && !this.isEmpty() };
                d.prototype.resetContent = function() {
                    var a = this.getDOM();
                    "text" === a.$inputTextElement().attr("type") ? a.$inputTextElement().val("") :
                        a.$inputTextElement().find("[type=text]").val("")
                };
                d.prototype.getJSON = function() {
                    var a = {};
                    a.value = this.getContent();
                    return a };
                d.prototype.isRequired = function() {
                    return !!this.getDOM().$isRequiredLabel().length };
                d.prototype.addMissingRequiredEmphasis = function() {
                    var a = this.getDOM();
                    a.$inputTextElement().addClass("a-form-error");
                    a.$isRequiredLabel().addClass("a-color-error") };
                d.prototype.removeMissingRequiredEmphasis = function() {
                    var a = this.getDOM();
                    a.$inputTextElement().removeClass("a-form-error");
                    a.$isRequiredLabel().removeClass("a-color-error") };
                d.prototype.checkEmoji = function() {
                    var a = this.getContent();
                    return g.test(a) };
                return d
            }(b.$)
        })
    })();
    (function() {
        m.when("A", "a-dropdown", "ProductCustomizationBase", "ready").register("FontPicker", function(b, k, h) {
            return function(d) {
                var g = { $el: q, showLabel: !0 },
                    c, e = {},
                    a = { value: q, fontName: q, fontUrl: q, isDefault: !1 },
                    l = function(a) { e = d.extend({}, g, a);
                        return this };
                l.prototype = new h;
                l.prototype.getComponentName = function() {
                    return "FontPicker" };
                l.prototype.Init = function() {
                    var g = d(".pc-simple-text-font-picker", e.$el),
                        h = parseInt(e.$el.attr("data-surface-num"), 10);
                    if (0 === d("#is-aui-dropdown-available").length) d("select", g).change(function(c) { c = d("#pc-simple-text-font-dropdown-surface" + h + " :selected");
                        1 === c.length && c.data("a-html-content") && (c = d(c.data("a-html-content")), a.isDefault = c.attr("data-is-default"), a.fontUrl = c.attr("data-font-url"), a.fontName = c.text());
                        c = d(this).val();
                        a.value = c;
                        b.trigger("simple-text-preview-font-change") }), d("select option:first-child", g).click().change();
                    else {
                        var f = "pc-font-" + d("#ASIN",
                            d(".pc-buy-box")).val();
                        c = k.getSelect(f);
                        b.on("a:dropdown:" + f + ":select", function(c) { a.value = c.value;
                            b.trigger("simple-text-preview-font-change") });
                        a.value = c.val()
                    }
                    2 > d("#pc-simple-text-font-dropdown-surface" + h + " > option").length ? g.hide() : g.show()
                };
                l.prototype.getJSON = function(b) {
                    return a };
                return l
            }(b.$)
        })
    })();
    (function() {
        m.when("A", "ProductCustomizationBase", "a-popover", "ready").register("ColorPickerPopover", function(b, k, h) {
            return function(d) {
                var g = { $el: q, showLabel: !0 },
                    c = {},
                    e = { value: q },
                    a = function(a) {
                        c =
                            d.extend({}, g, a);
                        return this
                    };
                a.prototype = new k;
                var l = {
                    Bind: function() {
                        var a = c.$el,
                            g = d(".pc-simplecolorpicker", a),
                            f = parseInt(a.attr("data-surface-num"), 10);
                        d(".pc-color-li", a).bind("click", function() {
                            var c = d(this),
                                f = c.find("div").attr("data-color"),
                                c = c.find("div").attr("data-name"),
                                k = h.get(d(".pc-color-picker-trigger", a).parent());
                            g.css("background-color", f);
                            e.value = f;
                            e.name = c ? c : "";
                            b.trigger("simple-text-preview-color-change");
                            k.hide() });
                        e.value = g.data("color");
                        e.name = g.data("name") ? g.data("name") :
                            "";
                        2 > d(".pc-color-surface" + f + " > .pc-color-li").length ? d(".pc-simple-text-color-picker", a).hide() : d(".pc-simple-text-color-picker", a).show()
                    }
                };
                a.prototype.getComponentName = function() {
                    return "ColorPickerPopover" };
                a.prototype.getJSON = function() {
                    return e };
                a.prototype.Init = function() { l.Bind() };
                return a
            }(b.$)
        })
    })();
    (function() {
        m.when("A", "ProductCustomizationBase", "ConfiguratorPicker", "SimpleText", "ColorPickerPopover", "FontPicker", "ProductPrice", "BuyBox", "ac-surfaces-carousel", "acc-weblab", "acc-util", "ready").register("SingleTextInput",
            function(b, k, h, d, g, c, e, a, l, m, p) {
                return function(f) {
                    function l() { f(".pc-single-text-input-container").each(function(a, b) {
                            var c = C("ctsStateInfo" + a);
                            p.preloadConfiguratorImages(c) }) }

                    function C(a) {
                        return b.state(a) === q ? n.states[a] : b.state(a) }

                    function x() {
                        for (var a = 0; a < n.textInputControlObjects.length; a += 1) {
                            var c = n.textInputControlObjects[a];
                            if (c.isValid()) {
                                var d = c.getDOM().$inputTextElement().data("area-name");
                                b.trigger("simple-text-preview-change", { text: c.getContent(), state: d }) } } }

                    function t() {
                        var a =
                            0,
                            c = f(".pc-surface-nav-carousel-item"),
                            d = f(".pc-surface-nav-carousel");
                        if (d.length && c.length) {
                            for (var e = 0; e < c.length; e++) {
                                var g = f(c[e]),
                                    a = a + (g.width() + parseInt(g.css("margin-right").split("px")[0], 10));
                                (function(a) { g.find("a").unbind().bind("click", function(c) { c.preventDefault();
                                        b.trigger("change-surface", { surfaceNum: a + 1 }) }) })(e) }
                            d.width(a);
                            f(c[0]).addClass("active") }
                    }

                    function y(a) {
                        var b = f(".customization-options-block").find("[data-surface-num=" + a + "]");
                        a = f(".pc-surface-nav-carousel").find("[data-surface-num=" +
                            (a + 1) + "]");
                        I(b) ? a.addClass("customized") : a.removeClass("customized")
                    }

                    function D() {
                        f(".pc-single-text-input-container");
                        (new e).Init();
                        t();
                        n.configuratortControlObjects = [];
                        n.textInputControlObjects = [];
                        n.fontPickers = [];
                        n.colorPickers = [];
                        K.Bind();
                        f(".ac-configuratorpicker").each(function(a, b) {
                            if (m.isT1("AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123")) {
                                var c = new h(f(b));
                                c.Init();
                                n.configuratortControlObjects.push(c) } });
                        f(".pc-simple-text").each(function(a, b) {
                            var c = new d(f(b));
                            c.Init();
                            n.textInputControlObjects.push(c) });
                        f(".pc-single-text-input-container").each(function(a, b) {
                            var d = new g({ $el: f(b) });
                            d.Init();
                            n.colorPickers.push(d);
                            d = new c({ $el: f(b) });
                            d.Init();
                            n.fontPickers.push(d) });
                        (new a({ controller: n })).Init()
                    }

                    function F() {
                        if (G()) u().length && b.trigger("blockBuybox", { callback: function() {
                                var a = u();
                                b.each(a, function(a) { a.addMissingRequiredEmphasis() });
                                b.trigger("showMissingRequiredFields", { error: !0 }) } });
                        else {
                            var a = b.reduce(n.textInputControlObjects, function(a, b) {
                                return a || 0 < b.getContent().length }, !1);
                            m.isT1("AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123") &&
                                0 < n.configuratortControlObjects.length && (a = !0);
                            a || b.trigger("blockBuybox", { callback: function() { b.trigger("showMissingCustomization", { error: !0 }) } })
                        }
                        w() && b.trigger("blockBuybox", { callback: function() { b.trigger("showContainingEmoji", { error: !0 }) } })
                    }

                    function G() {
                        var a = b.reduce(n.textInputControlObjects, function(a, b) {
                            return a || b.isRequired() }, !1);
                        m.isT1("AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123") && (a = a || b.reduce(n.configuratortControlObjects, function(a, b) {
                            return a || b.isRequired() }, !1));
                        return a }

                    function u() {
                        var a =
                            f.grep(n.textInputControlObjects, function(a) {
                                return a.isRequired() && !a.isValid() });
                        if (m.isT1("AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123")) var b = f.grep(n.configuratortControlObjects, function(a) {
                                return a.isRequired() && !a.isValid() }),
                            a = f.merge(a, b);
                        return a
                    }

                    function w() {
                        return b.reduce(n.textInputControlObjects, function(a, b) {
                            return a || b.checkEmoji() }, !1) }

                    function v() { b.trigger("unblockBuybox");
                        b.trigger("hideMissingRequiredFields");
                        b.trigger("hideMissingCustomization");
                        b.trigger("hideContainingEmoji") }

                    function I(a) {
                        var c = !1;
                        if (m.isT1("AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123")) {
                            var d = a.data("surface-num"),
                                e = !1;
                            a = [];
                            a = n.textInputControlObjects.concat(n.configuratortControlObjects);
                            b.each(a, function(a) { a.getAreaName().startsWith("surface-" + d) && (!a.isValid() && a.isRequired() && (e = !0), a.isValid() && (c = !0)) });
                            if (e) return !1 } else { a = a.find('[type="text"]');
                            for (var f = 0; f < a.length; f++)
                                if (a[f].value.length) return !0 }
                        return c }

                    function H(a, b, c) {
                        var d = {};
                        c = f(c.find(".pc-simple-text-input"));
                        var e;
                        e = C("ctsStateInfo" +
                            a);
                        d.id = c.data("area-name");
                        d.text = c.find('[type="text"]').val();
                        d.name = c.data("aspect-name") || e.areas[b].name;
                        d.label = c.data("aspect-title") || e.areas[b].customizationTypeSettings.TextPrinting.placeHolderText;
                        d.fill = n.colorPickers[a].getJSON().value;
                        d.colorName = n.colorPickers[a].getJSON().name;
                        d.fontFamily = n.fontPickers[a].getJSON().fontName;
                        d.customizationType = "TextPrinting";
                        d.fulfillmentType = "JSON";
                        d.Position = C("surface-" + a + "-area-" + b).position;
                        d.Dimensions = C("surface-" + a + "-area-" + b).dimension;
                        return d
                    }

                    function A(a, b) {
                        var c = {},
                            d = C("ctsStateInfo" + a);
                        c.name = d.surfaceName || d.name;
                        c.areas = [];
                        c.id = "surface-" + a;
                        c.images = { previewUrl: f("#pc-surfaces-carousel").find("[data-surface-num=" + a + "]").find("img").attr("src") || f(".pc-product-image").attr("src") };
                        if (m.isT1("AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123")) {
                            var e = f(b).find(".ac-configuratorpicker"),
                                d = f(b).find(".pc-simple-text");
                            0 < d.length && (c.font = {}, c.font.isDefault = parseInt(n.fontPickers[a].getJSON().isDefault, 10), c.font.fontName = n.fontPickers[a].getJSON().fontName,
                                c.font.isDefault || (c.font.fontUrl = n.fontPickers[a].getJSON().fontUrl));
                            var e = e.length + d.length,
                                g = 0;
                            "undefined" === typeof A.option_index && (A.option_index = 0);
                            for (var h = C("ctsStateInfo" + a), k = 0; k < e; k++)
                                if ("TextPrinting" === h.areas[k].customizationType) {
                                    var l = f(d[g]);
                                    f(l.find(".pc-simple-text-input"));
                                    l = H(a, k, l);
                                    c.areas.push(l);
                                    g++ } else if ("Options" === h.areas[k].customizationType) {
                                var l = A.option_index,
                                    p = {};
                                p.name = String(n.configuratortControlObjects[l].getJSON().name);
                                p.label = String(n.configuratortControlObjects[l].getJSON().label);
                                p.id = String(n.configuratortControlObjects[l].getJSON().id);
                                p.customizationType = "Options";
                                p.fulfillmentType = "JSON";
                                p.optionId = String(n.configuratortControlObjects[l].getJSON().optionId);
                                p.optionValue = String(n.configuratortControlObjects[l].getJSON().optionValue ? n.configuratortControlObjects[l].getJSON().optionValue : "notSelected");
                                p.optionImage = n.configuratortControlObjects[l].getJSON().optionImage;
                                p.priceDelta = {};
                                p.priceDelta = n.configuratortControlObjects[l].getJSON().priceDelta;
                                c.areas.push(p);
                                A.option_index++
                            }
                        } else
                            for (c.font = {}, c.font.isDefault = parseInt(n.fontPickers[a].getJSON().isDefault, 10), c.font.fontName = n.fontPickers[a].getJSON().fontName, c.font.isDefault || (c.font.fontUrl = n.fontPickers[a].getJSON().fontUrl), d = f(b).find(".pc-simple-text"), k = 0; k < d.length; k++) l = f(d[k]), f(l.find(".pc-simple-text-input")), l = H(a, k, l), c.areas.push(l);
                        return c
                    }
                    var J = { $el: q },
                        n, B = function(a) {
                            f.extend({}, J, a);
                            a = n = this;
                            for (var c = document.getElementsByTagName("script"), d = [], e = 0, g = c.length; e < g; e++)
                                if (!f.data(c[e], "a-eval")) {
                                    var h = f(c[e]),
                                        k = h.attr("data-a-state");
                                    k && (k = b.parseJSON(k), k.key && (h = b.parseJSON(h.html()), d[k.key] = h))
                                }
                            a.states = d;
                            return n
                        };
                    b.on("afterLoad", function() { l() });
                    var K = {
                        Bind: function() {
                            n.fontSwitch = !0;
                            b.on("simple-text-preview-font-change", function(a) { x();
                                n.fontSwitch && b.trigger("amazon-custom-log-ref-tag", "FontChange");
                                n.fontSwitch = !n.fontSwitch });
                            b.on("simple-text-preview-color-change", function(a) { x();
                                b.trigger("amazon-custom-log-ref-tag", "FontColorChange") });
                            b.on("resize-preview", function() {
                                var a = f(".pc-simple-text").find("[type=text]");
                                f(".pc-product-image");
                                for (var c = 0; c < a.length; c++) b.trigger("simple-text-preview-change", { text: f(a[c]).val(), state: f(a[c]).parent().data("area-name") });
                                if (m.isT1("AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123"))
                                    for (a = f(".ac-configuratorpicker"), c = 0; c < a.length; c++) {
                                        var d = f(a[c]).data("area-name"),
                                            e = f("#pc-configurator-" + d + " :selected");
                                        b.trigger("configurator-preview-change", { image: e.data("image-url"), state: d }) }
                            });
                            b.on("simple-text-preview-change", function(a) {
                                var b = f(".pc-product-image").get()[0],
                                    c = b.width,
                                    d = c / b.naturalWidth,
                                    e, g, h, b = a.text;
                                e = C(a.state);
                                var k, l, m;
                                k = e.dimension.width * d;
                                l = e.dimension.height * d;
                                m = e.position.x * d;
                                e = e.position.y * d;
                                a = f(".pc-preview-container").find('[data-area-name="' + a.state + '"]');
                                d = parseInt(a.parent().attr("data-surface-num"), 10);
                                g = n.colorPickers[d].getJSON().value;
                                h = n.fontPickers[d].getJSON().value;
                                if (1 === a.length) {
                                    var p;
                                    f("#pc-text-width-span").length || (p = f("<span>"), p.css({ position: "absolute", left: "-1000px", top: "-1000px", "white-space": "nowrap", visibility: "hidden" }).appendTo(f("body")).attr("id",
                                        "pc-text-width-span"));
                                    p = f("#pc-text-width-span");
                                    p.css({ "font-size": Math.floor(l), "font-family": h }).text(b);
                                    for (var q; p.width() >= .9 * k || p.height() >= .9 * l;)
                                        if (q = p.css("font-size").split("px")[0], 2 < q) p.css("font-size", q - 1 + "px");
                                        else break;
                                    p = p.css("font-size");
                                    a.css({ "font-size": p, "font-family": h, width: Math.round(k), height: Math.round(l), position: "absolute", left: Math.round(m + (f(".pc-preview-container").width() - c) / 2), top: Math.round(e), color: g });
                                    1 === a.children().length && "DIV" === f(a.children()[0]).prop("tagName") ?
                                        f(a.children()[0]).text(b) : (c = f("<div>"), c.appendTo(a), c.text(b))
                                }
                                y(d);
                                v();
                                F()
                            });
                            b.on("configurator-preview-change", function(a) {
                                var b = f(".pc-product-image").get()[0].width,
                                    c, d;
                                c = f(".pc-preview-container").find('[data-area-name="' + a.state + '"]');
                                d = parseInt(c.parent().attr("data-surface-num"), 10);
                                c.css({ width: "auto", height: "auto", position: "absolute", left: Math.round((f(".pc-preview-container").width() - b) / 2), top: 0 });
                                1 === c.length && (0 === c.find("img").length ? (b = f("<img>"), b.appendTo(c), b.attr("src", a.image)) :
                                    c.find("img").attr("src", a.image));
                                y(d);
                                x();
                                v();
                                F()
                            })
                        }
                    };
                    B.prototype = new k;
                    B.prototype.Init = function() { D() };
                    B.prototype.getComponentName = function() {
                        return "SingleTextInput" };
                    B.prototype.checkUncustomizedSurfaces = function() {
                        var a = f(".pc-single-text-input-container"),
                            b = [];
                        if (0 < a.length)
                            for (var c = 0; c < a.length; c++) {
                                var d;
                                a: {
                                    d = f(a[c]);
                                    for (var e = d.find('[type="text"]'), g = 0; g < e.length; g++)
                                        if (e[g].value.length) { d = !0;
                                            break a }
                                    d = d.find(".ac-configurator-picker");d = m.isT1("AC_PRODUCT_CONFIGURATOR_DP_MOBILE_83123") &&
                                    1 <= d.length ? !0 : !1
                                }
                                d || b.push('<a href="#" data-surface-num="' + (c + 1) + '">Surface ' + (c + 1) + "</a>")
                            }
                        return b
                    };
                    B.prototype.getJSON = function() {
                        var a = {},
                            b = [],
                            a = C("ctsStateInfo");
                        A.option_index = 0;
                        f(".pc-single-text-input-container").each(function(a, c) {
                            var d = A(a, c);
                            b.push(d) });
                        return a = { fulfillmentDetails: a.fulfillmentDetails, "version3.0": { surfaces: b } } };
                    String.prototype.startsWith = function(a) {
                        return 0 === this.indexOf(a) };
                    return B
                }(b.$)
            })
    })();
    m.when("A", "ready").execute(function(b) {
        var k = b.$;
        b.on("pc-single-text-loaded",
            function() { k("html").hasClass("a-canvas") || (k(".pc-customization-disabled").addClass("active"), k(".pc-customization-enabled").remove()) })
    });
    m.when("A", "a-modal", "a-dropdown", "SingleTextInput", "acc-weblab", "ready").execute(function(b, k, h, d, g) {
        var c = b.$;
        b.on("a:popover:afterHide:pc-popover-content", function(c) { b.trigger("amazon-custom-log-ref-tag", "CloseClick");
            b.trigger("amazon-custom-popup-close", new Date) });
        c("html").hasClass("a-canvas") && (c(".pc-customization-disabled").remove(), b.on.orientationchange(function() {
            setTimeout(function() { b.trigger("resize-preview") },
                250)
        }), b.on("a:popover:beforeShow:pc-buybox-secondary-view", function(e) {
            e = c("#pc-customize-now-div").attr("data-customization-clicked");
            if (0 === c("#is-aui-dropdown-available").length) b.on("a:popover:beforeShow:pc-popover-content", function(a) { a = a.popover;
                c(".a-button-dropdown", c(".pc-simple-text-font-picker", a.$popover)).remove();
                c("select", c(".pc-simple-text-font-picker", a.$popover)).css("display", "block") });
            var a = c("#ASIN", c(".pc-buy-box", c(".pc-two-column-layout"))).val();
            c(".pc-two-column-layout").attr("asin",
                a);
            b.trigger("amazon-custom-log-ref-tag", "CustomizeNowClick");
            b.trigger("amazon-custom-popup-open");
            "false" === e && ((new d).Init(), c("#pc-customize-now-div").attr("data-customization-clicked", "true"));
            c(".pc-simple-text-font-picker, .selectQuantity").unbind().bind("click", function(a) { setTimeout(function() { "static" !== c("body").css("position") && c("body").css("position", "static") }, 300) })
        }), b.on("a:popover:afterShow:pc-buybox-secondary-view", function(d) {
            b.trigger("resize-preview");
            c(".preview-customization").unbind().bind("click",
                function(a) { b.trigger("amazon-custom-log-ref-tag", "PreviewSurfaceClick");
                    c("html, body").animate({ scrollTop: "0" }, 500);
                    return !1 });
            c(".pc-buybox-warning-close").unbind().bind("click", function(a) { b.trigger("amazon-custom-log-ref-tag", "CloseWarningClick");
                c(".pc-buybox-warning-close").attr("data-is-clicked", "true");
                c(".pc-buybox-warning").hide() });
            c(".pc-popover-footer-wrapper").delay(1E3).fadeIn(1E3)
        }), b.on("a:popover:afterHide:pc-buybox-secondary-view", function(b) { c(".pc-popover-footer-wrapper").fadeOut() }))
    });
    (function() {
        m.when("A", "ac-surfaces-carousel", "acc-weblab", "ready").register("BuyBox", function(b, k, h) {
            return function(d) {
                function g() {
                    var a = {},
                        c = {},
                        e = !1;
                    x.controller !== q && (a.merchantId = d("#merchantID", d(".pc-buy-box")).val(), a.customizationInfo = x.controller.getJSON());
                    c.customizationData = JSON.stringify(a);
                    d("#amazonCustomUseCaseId").length && (c.clientId = d("#amazonCustomUseCaseId").val());
                    e = G(a);
                    d(".pc-error-container").hide();
                    b.post("/gp/product/features/callSetCustomizationDatav2.html", {
                        dataType: "json",
                        params: c,
                        contentType: "application/x-www-form-urlencoded;charset=utf-8",
                        success: function(a) { e && b.trigger("amazon-custom-log-ref-tag", "hasNonASCII", { msg: a.result.pcToken });
                            a.result && "OK" === a.result.Status && a.result.pcToken !== q ? (b.trigger("amazon-custom-log-ref-tag", "AddToCartClick"), d("#UNIQ-pcToken", d(".pc-buy-box")).val(a.result.pcToken), d("#addToCart").submit()) : d(".pc-error-container").show() },
                        error: function(a) { d(".pc-error-container").show() }
                    })
                }

                function c(a, c) {
                    c ? (d(".pc-buybox-warning .uncustomized-surfaces").html(a.join(", ")),
                        d(".pc-buybox-warning .uncustomized-surfaces a").unbind().bind("click", function(a) { a.preventDefault();
                            d("html, body").animate({ scrollTop: "0" }, 500);
                            b.trigger("change-surface", { surfaceNum: d(this).attr("data-surface-num") }) }), d(".pc-buybox-warning").show()) : d(".pc-buybox-warning").hide()
                }

                function e(a) {
                    var b = d("#pc-atc"),
                        c = d(".pc-atc-wrapper");
                    a ? (b.prop("disabled", !1), c.removeClass("a-button-disabled")) : (b.prop("disabled", !0), c.addClass("a-button-disabled")) }

                function a(a, b) {
                    m(d(".pc-atc-missing-customization"),
                        a, b)
                }

                function h(a, b) { m(d(".pc-atc-missing-required-text"), a, b) }

                function k(a, b) { m(d(".pc-atc-containing-emoji"), a, b) }

                function m(a, b, c) { b ? a.show() : a.hide();
                    c && c.error ? a.addClass("a-color-error") : a.removeClass("a-color-error") }

                function f(a) { t = !0;
                    a && (y = a.callback) }

                function p() { t = !1;
                    y = null }
                var C = { $el: q, showLabel: !0, controller: q },
                    x = {},
                    t = !1,
                    y = null,
                    D = function(a) { x = d.extend({}, C, a);
                        return this };
                D.prototype.getComponentName = function() {
                    return "BuyBox" };
                D.prototype.Init = function() { F.Bind();
                    a(!1);
                    h(!1);
                    k(!1);
                    e(!0) };
                var F = {
                        Bind: function() {
                            b.declarative("upload-metadata", "click", function(a) { a.$event.preventDefault();
                                a = x.controller.checkUncustomizedSurfaces();
                                d("#pc-atc").is(":disabled") || (t ? d.isFunction(y) && y() : a.length && "false" === d(".pc-buybox-warning-close").attr("data-is-clicked") ? c(a, !0) : (c(!1), b.trigger("amazon-custom-popup-close", new Date), g())) });
                            b.on("enableBuybox", function() { e(!0) });
                            b.on("disableBuybox", function() { e(!1) });
                            b.on("showMissingCustomization", function(b) { a(!0, b) });
                            b.on("hideMissingCustomization",
                                function() { a(!1) });
                            b.on("showMissingRequiredFields", function(a) { h(!0, a) });
                            b.on("hideMissingRequiredFields", function() { h(!1) });
                            b.on("showContainingEmoji", function(a) { k(!0, a) });
                            b.on("hideContainingEmoji", function() { k(!1) });
                            b.on("blockBuybox", f);
                            b.on("unblockBuybox", p)
                        }
                    },
                    G = function(a) {
                        a = a.customizationInfo["version3.0"].surfaces;
                        for (var b = new RegExp(/[^\x00-\x7F]+/g), c = 0; c < a.length; c++)
                            for (var d = 0; d < a[c].areas.length; d++)
                                if ("TextPrinting" === a[c].areas[d].customizationType && b.test(a[c].areas[d].text)) return !0;
                        return !1
                    };
                return D
            }(b.$)
        })
    })();
    (function() {
        m.when("A", "a-carousel-framework", "ready").register("ac-surfaces-carousel", function(b, k) {
            var h = b.$,
                d;
            k.onInit("pc-surfaces-carousel", function(g) {
                d = g;
                d.gotoPage(1);
                h(".pc-single-text-input-container").hide();
                h(".customization-options-block").find('[data-surface-num="0"]').show();
                h(".customize-next-btn").click(function(c) {
                    b.trigger("amazon-custom-log-ref-tag", "CustomizeNextSurfaceClick");
                    h(".preview-customization").click();
                    setTimeout(function() { d.gotoNextPage() },
                        1E3)
                })
            });
            b.on("a:carousel:pc-surfaces-carousel:change:pageNumber", function(d) {
                var c = d.oldValue;
                d = d.newValue;
                h(".customization-options-block").find('[data-surface-num="' + (c - 1) + '"]').hide();
                h(".customization-options-block").find('[data-surface-num="' + (d - 1) + '"]').show();
                h(".pc-surface-nav-carousel").find('[data-surface-num="' + c + '"]').removeClass("active");
                h(".pc-surface-nav-carousel").find('[data-surface-num="' + d + '"]').addClass("active");
                b.trigger("update-surface-nav", { surfaceNum: d }) });
            b.on("change-surface",
                function(b) { d.gotoPage(b.surfaceNum) });
            b.on("update-surface-nav", function(b) {
                var c = b.surfaceNum,
                    d, a, k, m;
                b = h(".pc-surface-nav-carousel-viewport").get()[0];
                (d = h(".pc-surface-nav-carousel").find('[data-surface-num="' + c + '"]').get()[0]) && b && (c = d.offsetLeft, d = d.offsetWidth, a = b.offsetWidth, k = b.scrollLeft, m = b.offsetLeft, c < k ? b.scrollLeft = c - c : c > k && c + d > k + a && (b.scrollLeft += m + (c + d - (k + a)))) })
        })
    })();
    (function() {
        m.when("A", "a-dropdown", "ProductCustomizationBase", "acc-accounting", "acc-currency-config", "ready").register("ConfiguratorPicker",
            function(b, k, h, d, g) {
                return function(c) {
                    var e = function(a) { this.config = {};
                        this.config.$el = a;
                        this.outputJSON = {};
                        return this };
                    e.prototype = new h;
                    e.prototype.getDOM = function() {
                        var a = this;
                        return { $configuratorOptionElement: function(b) {
                                return a.config.$el.find(c(".ac-configurator-dropdown")) }, $isRequiredLabel: function() {
                                return a.config.$el.find(c(".isRequiredLabel")) } } };
                    e.prototype.getComponentName = function() {
                        return "ConfiguratorPicker" };
                    e.prototype.Init = function() {
                        var a = this,
                            e = c(".ac-configurator-picker",
                                a.config.$el),
                            h = 0,
                            k = b.state("accRealmInfo"),
                            f = g.getConfig(k ? k.realm : "USAmazon");
                        a.config.name = a.config.$el.attr("data-configurator-name");
                        a.config.area_name = a.config.$el.attr("data-area-name");
                        a.config.id = a.config.area_name;
                        a.config.label = a.config.$el.attr("data-label");
                        c("select", e).change(function() {
                            a.removeMissingRequiredEmphasis();
                            var e = c("#pc-configurator-" + a.config.area_name + " :selected"),
                                g = c(this).val();
                            a.config.optionId = e.data("option-id");
                            a.config.optionValue = g;
                            a.config.optionImage = e.data("image-url");
                            a.config.priceDelta = {};
                            null !== e.data("option-price-currency") && null !== e.data("option-price-value") && e.data("option-price-value") !== q ? (a.config.priceDelta.currency = e.data("option-price-currency"), a.config.priceDelta.value = e.data("option-price-value")) : (a.config.priceDelta.currency = "USD", a.config.priceDelta.value = 0);
                            1 < c(".ac-price").find(".ac-price-value").text().length && (g = parseFloat(c(".ac-price").find(".ac-price-value").text().replace(/[^0-9\.]+/g, "")), g = g + a.config.priceDelta.value - h, g = d.formatMoney(g,
                                f), c(".ac-price").find(".ac-price-value").text(g));
                            h = a.config.priceDelta.value;
                            b.trigger("configurator-preview-change", { image: e.data("image-url"), state: a.config.area_name })
                        });
                        c("select option:first-child", e).click().change()
                    };
                    e.prototype.getJSON = function(a) {
                        a = {};
                        a.optionId = this.config.optionId;
                        a.name = this.config.name;
                        a.label = this.config.label;
                        a.id = this.config.id;
                        a.optionId = this.config.optionId;
                        a.optionValue = this.config.optionValue;
                        a.optionImage = this.config.optionImage;
                        a.priceDelta = {};
                        a.priceDelta.currency =
                            this.config.priceDelta.currency;
                        a.priceDelta.value = this.config.priceDelta.value;
                        return a
                    };
                    e.prototype.isValid = function() {
                        return this.config.optionValue && "notSelected" !== this.config.optionValue };
                    e.prototype.isRequired = function() {
                        return !!this.getDOM().$isRequiredLabel().length };
                    e.prototype.addMissingRequiredEmphasis = function() {
                        var a = this.getDOM();
                        a.$configuratorOptionElement().addClass("pc-drop-down-error");
                        a.$isRequiredLabel().addClass("a-color-error") };
                    e.prototype.removeMissingRequiredEmphasis = function() {
                        var a =
                            this.getDOM();
                        a.$configuratorOptionElement().removeClass("pc-drop-down-error");
                        a.$isRequiredLabel().removeClass("a-color-error")
                    };
                    e.prototype.getAreaName = function() {
                        return this.config.area_name };
                    return e
                }(b.$)
            })
    })()
});
/* ******** */
(function(e) {
    var f = window.AmazonUIPageJS || window.P,
        g = f._namespace || f.attributeErrors,
        b = g ? g("DeepLinkingAssets") : f;
    b.guardFatal ? b.guardFatal(e)(b, window) : b.execute(function() { e(b, window) }) })(function(e, f, g) {
    var b = {
        fallbackTimer: !1,
        heartbeatTimer: !1,
        openWebUrlTimer: !1,
        Metrics: { ABORT: 0, CONTINUE: 1 },
        Method: { IFRAME: 0, INTENTS: 1, DIRECT: 2, APPSTORE: 3 },
        Fallback: { NOTHING: 0, APPSTORE: 1, WEBURL: 2 },
        DeepLinkInstance: function(a) {
            if ("object" !== typeof a) throw "DeepLinkingUtils: Invalid constructor argument for DeepLinkInstance; options must be either a key value set of options or a DOM element containing a data-deeplink attribute.";
            if (a.target) { "string" === typeof a.target && (a.target = document.querySelector(a.target));
                if (!a.target || "undefined" === typeof a.target.nodeType) throw "DeepLinkingUtils: Target node was not a valid DOM element or was not found";
                var e = this;
                a.target.addEventListener("click", function() { e.openApp() }, !1) }
            for (var d = "action refTag failAction failRefTag clientToken campaignId treatmentId webUrl appUrl appStoreUrl".split(" "), c = 0; c < d.length; c++)
                if (!a[d[c]]) throw "DeepLinkingUtils: Required option not included for DeepLinkingUtils: `" +
                    d[c] + "`";
            var g = b.AJAX_TIMEOUT || 800,
                d = function(a, b) {
                    return "undefined" === typeof a ? b : a },
                c = function(a, b) {
                    return "string" === typeof a ? b[a] : a };
            a.method = d(c(a.method, b.Method), b.Method.IFRAME);
            a.metricsFailureMode = d(c(a.metricsFailureMode, b.Metrics), b.Metrics.CONTINUE);
            a.timeout = d(a.timeout, 1E3);
            a.storePref = d(a.storePref, !1);
            a.recordMetricsUrl = d(a.recordMetricsUrl, "/gp/mobile-marketing/utility/metrics.html");
            a.updatePreferencesUrl = d(a.updatePreferencesUrl, "/gp/mobile-marketing/utility/update-preference.html");
            a.fallbackUrl = d(a.fallbackUrl, "/gp/mobile-marketing/utility/fallback.html");
            a.openWebUrlOnSuccess = d(a.openWebUrlOnSuccess, !1);
            a.fallbackMethod = d(c(a.fallbackMethod, b.Fallback), b.Fallback.APPSTORE);
            a.autoRedirect = d(a.autoRedirect, !1);
            "/" === a.fallbackUrl[0] && (a.fallbackUrl = location.protocol + "//" + location.hostname + a.fallbackUrl);
            var h = function(b, d, n, c) {
                    n = "storePref=" + (n || 0) + "&clientToken=" + a.clientToken + "&campaignId=" + a.campaignId + "&url=" + encodeURIComponent(a.webUrl) + (a.placementType ? "&placementType=" +
                        a.placementType : "");
                    l(a.recordMetricsUrl + ("?ref_=" + d + "&action=" + b + "_" + a.treatmentId), n, c)
                },
                l = b.ajaxRequest || function(a, b, d) {
                    var c = f.XMLHttpRequest ? new XMLHttpRequest : f.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : !1;
                    d = d || function(a) {};
                    if (c) { c.open("POST", a);
                        c.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                        c.timeout = g;
                        var e = !1;
                        c.onreadystatechange = function() { 4 !== c.readyState || e || (e = !0, d(200 === c.status)) };
                        c.ontimeout = function() { e || (e = !0, d(!1)) };
                        c.send(b) } else d() },
                m = function() {
                    b.heartbeatTimer =
                        setInterval(function() {
                            (document.webkitHidden || document.hidden) && clearTimeout(b.fallbackTimer) }, 200)
                },
                k = function(c, d) { c && d ? h(c, d, !1, function(c) {
                        (c || a.metricsFailureMode === b.Metrics.CONTINUE) && k() }) : p(a.appStoreUrl) },
                r = function() {
                    b.openWebUrlTimer && (clearTimeout(b.openWebUrlTimer), a.openWebUrlOnSuccess && setTimeout(q, 2 * g));
                    h(a.method === b.Method.INTENTS ? "IntentsFailure" : a.failAction, a.method === b.Method.INTENTS ? "mm_intents_failure" : a.failRefTag, !1, function(c) {
                        if (c || a.metricsFailureMode === b.Metrics.CONTINUE) {
                            if (a.onFail) a.onFail();
                            a.fallbackMethod === b.Fallback.APPSTORE ? k() : a.fallbackMethod === b.Fallback.WEBURL && q()
                        }
                    })
                },
                p = b.openUrl || function(b, c) {
                    if (c) {
                        var d = document.getElementById("deeplinkFrame");
                        d && d.parentNode.removeChild(d);
                        document.body.insertAdjacentHTML("beforeend", '<iframe style="display:none" height="0" width="0" id="deeplinkFrame" src="' + a.appUrl + '"></iframe>') } else document.location = b },
                q = function() { p(a.webUrl) };
            this.openApp = function() {
                clearTimeout(b.fallbackTimer);
                clearInterval(b.heartbeatTimer);
                a.method === b.Method.APPSTORE ?
                    (h(a.action, a.refTag, a.storePref), k()) : h(a.action, a.refTag, a.storePref, function(c) {
                        var d = a.appUrl;
                        a.method === b.Method.INTENTS && (d = d.replace(/;S\.browser_fallback_url=(http.+?);/, function(b, c) {
                            return ";S.browser_fallback_url=" + encodeURIComponent(a.fallbackUrl + "?ref_=" + a.failRefTag + "&u=" + c + "&a=" + a.failAction + "_" + a.treatmentId + "&c=" + a.campaignId) + ";" }));
                        if (c || a.metricsFailureMode === b.Metrics.CONTINUE) {
                            var e = Date.now();
                            p(d, a.method === b.Method.IFRAME);
                            m();
                            b.fallbackTimer = setTimeout(function() {
                                clearTimeout(b.fallbackTimer);
                                clearInterval(b.heartbeatTimer);
                                !document.webkitHidden && !document.hidden && Date.now() - e < a.timeout + 500 && r()
                            }, a.timeout)
                        }
                        a.openWebUrlOnSuccess && (b.openWebUrlTimer = setTimeout(q, a.timeout + 500 + g))
                    })
            };
            this.openAppStore = k;
            this.updatePreferences = function(b) { b = a.updatePreferencesUrl + "/ref=" + b + "?ie=UTF8campaignId=" + a.campaignId + "&clientToken=" + a.clientToken;
                var c = "url=" + encodeURIComponent(a.webUrl) + "&treatmentId=" + a.treatmentId + (a.placementType ? "&placementType=" + a.placementType : "");
                l(b, c) };
            a.autoRedirect && setTimeout(this.openApp,
                1)
        }
    };
    e.register("deeplinking-utils", function() {
        return b })
});
(function(e) {
    var f = window.AmazonUIPageJS || window.P,
        g = f._namespace || f.attributeErrors,
        b = g ? g("MobileMarketingSmartAppBannerAssets") : f;
    b.guardFatal ? b.guardFatal(e)(b, window) : b.execute(function() { e(b, window) }) })(function(e, f, g) {
    function b(a) {
        if (a = a || document.getElementById("smart-app-banner")) a.className += " closed" }
    e && document.querySelector("[data-aui-build-date]") ? e.when("deeplinking-utils", "A", "ready").execute(function(a, f, d) {
        (d = f.state("mm-redirect-options")) && new a.DeepLinkInstance(d);
        try {
            var c = document.getElementById("smart-app-banner"),
                t = c ? f.state(c.dataset.options) : g,
                h = document.getElementById("smart-app-banner-close");
            if (t) {
                var l = new a.DeepLinkInstance(t),
                    m = f.$("#smart-app-banner-trigger");
                if (m && m.length) {
                    var k = !1;
                    e.when("a-modal", "ready").execute(function(a) {
                        var b = a.get(m);
                        f.declarative("mm-open-app", "click", function(b) { k = !0;
                            a.get("mobile-marketing-interstitial").hide();
                            l.openApp() });
                        f.on("a:popover:afterHide:mobile-marketing-interstitial", function(a) {
                            k || l.updatePreferences(document.getElementById("smart-app-banner-close").dataset.closereftag);
                            k = !1
                        });
                        b.show()
                    })
                } else h && f.$(h).click(function(a) { a.preventDefault();
                    a.stopPropagation();
                    l && l.updatePreferences(h.dataset.closeRefTag);
                    b(c) })
            } else if (c && c.dataset.options) throw "SmartAppBanner: No options available for smart app banner";
        } catch (r) {
            throw b(), r; }
    }) : f.onload = function() { b() }
});
/* ******** */
(function(p) {
    var r = window.AmazonUIPageJS || window.P,
        m = r._namespace || r.attributeErrors,
        d = m ? m("RentalsPlatformDPXModulesAUIAssets") : r;
    d.guardFatal ? d.guardFatal(p)(d, window) : d.execute(function() { p(d, window) }) })(function(p, r, m) {});
/* ******** */
(function(e, m, q) { e.execute(function() {}) })(function() {
    var e = window.AmazonUIPageJS || window.P,
        m = e._namespace || e.attributeErrors;
    return m ? m("BuyBackAssets") : e }(), window);
/* ******** */
(function(a) { a.execute(function() { a.when("A", "ready").execute(function(a) {
            var d = a.$;
            d("#sms").click(function() { a.ajax("/gp/aw/social/swf/metrics.html/ref=cm_sw_cl_sms_awdo", { method: "post", params: { id: "SMSClick", result: "success" } }) }) });
        a.when("A").register("postShareMetric", function(a) {
            return { postNetworkClickMetrics: function(d, c) { a.ajax("/gp/aw/social/swf/metrics.html/ref=cm_sw_cl_" + d + "_" + c, { method: "post", params: { id: "Network Click", result: "NetworkID: " + d } }) } } }) }) })(function() {
    var a = window.AmazonUIPageJS ||
        window.P,
        b = a._namespace || a.attributeErrors;
    return b ? b("DetailPageTellAFriendMobileWebAssets") : a
}(), window);
/* ******** */
(function(g) {
    var f = window.AmazonUIPageJS || window.P,
        l = f._namespace || f.attributeErrors,
        a = l ? l("SoftlinesPWAssets") : f;
    a.guardFatal ? a.guardFatal(g)(a, window) : a.execute(function() { g(a, window) }) })(function(g, f, l) {
    g.when("A", "LUXController", "softlines-common-utils", "afterLoad", "a-state").register("PWAddressValidator", function(a, d, e) {
        var b = a.$,
            c, h = function() {
                function h(b) {
                    if (f.hasOwnProperty(b) && f.addressId) return f.addressId;
                    if (!b) return !1;
                    var c = e.getCurrentAsin();
                    a.ajax("/gp/product/ajax-handlers/pw-address-validator.html?ie\x3dUTF8\x26", { method: "get", params: { asin: c, pwAddressIdList: b }, success: m, error: function() { console.log("PWAddress validation AJAX call failed for adderss ID : " + b);
                            return !1 } })
                }

                function m(a) { a = a ? a.replace(/(\n+\s+)+/g, "") : "";
                    e.isStringNotEmpty(a) && b(a).each(function(a) {
                        var c = b(this);
                        a = c.data("addressid");
                        c = c.data("eligibility");
                        if (a && c) return f[a] = c, console.log(a + " : " + c), c }) }

                function q() { c = a.state("pwState") ? a.state("pwState") : {} }

                function r() {
                    c.hasOwnProperty("isTryState") && (g.isTryState = c.isTryState);
                    c.hasOwnProperty("isPWEnabled") &&
                        (g.isPWEnabled = c.isPWEnabled);
                    var b = a.state("unifiedLocation") ? a.state("unifiedLocation") : {},
                        b = b.hasOwnProperty("urlParams") ? b.urlParams : {},
                        b = e.extendAndOverride(b, g);
                    a.state("unifiedLocation", { urlParams: b })
                }
                var g = { isTryState: !1, isPWExperienceEnabled: !0, isLocUXPageRefresh: !0, isPWEnabled: !1 },
                    k = {},
                    f = {},
                    l = d.locationChangeEventName,
                    n = d.locationTypes;
                q();
                r();
                d && c.hasOwnProperty("isPWEnabled") && c.isPWEnabled && (k = d.getLocationData(), k.hasOwnProperty("addressId") && k.addressId && (f[k.addressId] = "ELIGIBLE"));
                a.state.bind("pwState", function(a, b) {
                    if (b.isTryState || b.isPWEnabled) q(), r() });
                a.on(l, function(a) { k = a;
                    a = k.locationType;!a || a !== n.accountAddress && a !== n.defaultAddress || h(k.addressId) });
                return { getLocationData: function() {
                        return k }, getAddressEligibilityMap: function() {
                        return f }, getAddressIdPWEligibility: h, locationTypes: n, eligibleValue: "ELIGIBLE", ineligibleValue: "INELIGIBLE" }
            };
        c = a.state("pwState") ? a.state("pwState") : {};
        return c.hasOwnProperty("isPWExperienceEnabled") && c.isPWExperienceEnabled ? h() : {}
    });
    "use strict";
    g.when("A", "pw-common-utils", "a-modal", "atf").execute(function(a, d, e) {
        var b = a.$;
        d.registerTrySelectHandler(function() { a.state("pwState", { isTryState: !0, isPWChildState: !0 });
            m({ isTryState: !0 }) });
        d.registerBuySelectHandler(function() { d.isPwBuyBoxVisible() && (a.state("pwState", { isTryState: !1, isPWChildState: !0 }), m({ isTryState: !1 })) });
        var c = function() {
                b(document).undelegate("#pw-add-to-cart-button", "click.pwBuyboxAtc");
                b(document).delegate("#pw-add-to-cart-button", "click.pwBuyboxAtc", function() {
                    var a = e.get(b("#watchWarrantyModalPwAtc"));
                    if (!a || a.isVisible()) f.ue && f.ue.log("LEWIS_ADD_TO_CART", "PW_DUMMY_CSM_CHANNEL"), b("#pwAddToCart").submit()
                })
            },
            h = function() { a.on("a:pageUpdate", function() {
                    var b = p();
                    b && (b.isPWChildState = d.isPwBuyBoxVisible(), a.state("pwState", b), b.isPWChildState && c()) }) },
            p = function() {
                var a, c = b("#pwController_feature_div");
                d.isNotEmpty(c) && (c = c.find("script"), d.isNotEmpty(c) && (c = c.html()) && (a = b.parseJSON(c)));
                return a },
            m = function(a) {
                var c = p();
                c && (c = b.extend(c, a), (a = d.toString(c)) && b("#pwController_feature_div").find("script").html(a)) };
        g.when("ready", "a-state").execute(function() {
            var b = a.state("pwState") ? a.state("pwState") : {};
            b.hasOwnProperty("isPWExperienceEnabled") && b.isPWExperienceEnabled && (h(), c()) })
    });
    g.declare("PWConfig", { buyBox: { auiEvents: { tryRowSelectEvent: "a:accordion:buybox-accordion:pwBuyBoxAccordionRow:select", buyRowSelectEvent: "a:accordion:buybox-accordion:newAccordionRow:select" }, tryAccordionRowID: "#pwBuyBoxAccordionRow" } });
    "use strict";
    g.when("A").execute(function(a) {
        var d = a.$;
        a.state.bind("pwState", function(a, b) {
            if ((b.isTryState ||
                    b.isPWEnabled) && a.isPWChildState) {
                var c, h;
                a.isTryState && a.isPWEnabled ? (c = d(".pw-try-feature"), h = d(".pw-buy-feature")) : (c = d(".pw-buy-feature"), h = d(".pw-try-feature"));
                0 < c.length && c.removeClass("pw-hidden");
                0 < h.length && h.addClass("pw-hidden") }
        })
    });
    "use strict";
    g.when("A", "dp-refresh-handler", "atf").execute(function(a, d) {
        function e() {
            (new d(b)).addParams({ isTryState: "true" }) }
        var b = { featureName: "primeWardrobe" },
            c = a.state("pwState");
        c && c.isTryState && e();
        a.state.bind("pwState", function(a, c) {
            c.isTryState &&
                (a.isTryState ? e() : (new d(b)).removeParams(["isTryState"]))
        })
    });
    "use strict";
    g.when("A", "pw-common-utils", "afterLoad").execute(function(a, d) {
        function e(a) {
            var b = d.isPwBuyBoxVisible();
            a = !a.isTryState && a.isPWEnabled && b;!h && a && (a = c("#pwOnboardingHintPopoverTriggerId")) && a.click() }

        function b() {
            return c(".pwOnboardingHintContent").parents(".a-popover-wrapper") }
        var c = a.$,
            h = !1,
            f;
        g.when("ready", "a-state").execute(function() {
            var b = a.state("pwState") ? a.state("pwState") : {},
                c = a.state("pwOnboardingHintState") ?
                a.state("pwOnboardingHintState") : {};
            c.hasOwnProperty("deviceType") && b.hasOwnProperty("isTryState") && b.hasOwnProperty("isPWEnabled") && (f = c.deviceType, e(b))
        });
        a.state.bind("pwState", function(a) {!a.isTryState && a.isPWChildState && e(a) });
        a.on("a:popover:dismiss:pwOnboardingHint", function(b) { h = !0;
            d.isNotEmpty(f) && a.ajax("/gp/product/ajax-handlers/pw-onboarding-hint-shown.html?ie\x3dUTF8\x26", { method: "post", params: { deviceType: f } }) });
        a.on("a:popover:beforeShow:pwOnboardingHint", function(a) {
            if (a = b()) a.addClass("pwOnboardingHintPopoverWrapper"),
                (a = a.children(".a-arrow-border")) && a.addClass("pwOnboardingHide")
        });
        a.on("a:popover:afterShow:pwOnboardingHint", function(a) {
            (a = b()) && (a = a.children(".a-popover-inner")) && a.addClass("pwOnboardingHintPopoverInner") })
    });
    "use strict";
    g.when("A", "PWConfig").register("pw-common-utils", function(a, d) {
        var e = function() {};
        e.prototype.isNotEmpty = function(a) {
            return a && a.length };
        e.prototype.isPwBuyBoxVisible = function(b) { b = a.$(d.buyBox.tryAccordionRowID);
            return this.isNotEmpty(b) };
        e.prototype.registerTrySelectHandler =
            function(b) { a.on(d.buyBox.auiEvents.tryRowSelectEvent, b) };
        e.prototype.registerBuySelectHandler = function(b) { a.on(d.buyBox.auiEvents.buyRowSelectEvent, b) };
        e.prototype.toString = function(b) {
            var c = b;
            if ("object" === typeof b) {
                var d = "",
                    c = "";
                a.each(b, function(a, b) { c += d + '"' + b + '":' + a;
                    d = "," });
                c && (c = "{" + c + "}") }
            return c };
        return new e
    })
});
/* ******** */
(function(k) {
    var p = window.AmazonUIPageJS || window.P,
        r = p._namespace || p.attributeErrors,
        b = r ? r("SoftlinesFeaturesAssets") : p;
    b.guardFatal ? b.guardFatal(k)(b, window) : b.execute(function() { k(b, window) }) })(function(k, p, r) {
    k.when("jQuery", "A", "load").execute(function(b, d) {
        var c = p.ue,
            a = function(a) { c && c.count && c.count(a, (c.count(a) || 0) + 1) },
            f = function(a) {
                return "undefined" === typeof a || null === a || "" === a },
            e = function(a, b) {
                var c = a.attr("href");
                if (!f(c)) {
                    var d; - 1 !== c.indexOf("#") && (d = c.split("#"), c = d[0], d = d[1]);
                    c += -1 ===
                        c.indexOf("?") ? "?" : "&";
                    c = c + "dpPl=1&dpID=" + b;
                    f(d) || (c = c + "#" + d);
                    a.attr("href", c);
                    a.attr("data-isDpImgCached", 1)
                }
            },
            m = function(a) {
                if (!f(a)) {
                    var b = /[^\/]+$/,
                        c;
                    f(a) || (a = a.match(b)) && (c = a[0]);
                    return c.split(".")[0] } };
        try {
            (function() { b(".dpLanImgCacheUrl").each(function() {
                    var c = b(this),
                        d = c.attr("data-isDpImgCached");
                    if (f(d)) {
                        var d = c.attr("data-dpLanImgCachedUrl"),
                            h = m(d);
                        try {
                            var l = new Image;
                            l.src = d;
                            b.isFunction(e) && b(l).load(function() { e(c, h);
                                a("dpCacheHit") }) } catch (g) { a("dpCacheEx") } } }) })() } catch (l) { a("dpPlEx") }
    });
    k.when("jQuery", "softlines-common-utils", "atf").execute(function(b, d) {
        var c = b("#softlinesMobileGNOAutoScrollUptoNavBar"),
            a = b("#softlinesMobileGNOAutoScrollUptoNavBarEnd"),
            f = b("#navbar");
        0 === f.length && (f = b(".nav-anywhere-wrapper"));
        var e = 0;
        d.isNotNull(f) && 0 !== f.length && (e = f.offset().top);
        0 < e && (d.isNotNull(c) && 0 < c.length ? d.animationScroll(e, 2E3) : d.isNotNull(a) && 0 < a.length && (e += f.outerHeight(!0), d.animationScroll(e, 2E3))) });
    k.when("jQuery", "ueCount", "ImageBlockATF", "atf").execute(function(b,
        d, c) {
        if (c.isEnhancedImageBlockSize && !0 === c.isEnhancedImageBlockSize) { c = function() {
                var a = b(p).height(),
                    c = b("#landingImage"),
                    f, q = 0;
                f = 0;
                if (c) {
                    if (f = c.offset()) q = f.top;
                    (f = q + c.height()) && a && f > a && d.incrementCounterByOne("sl_main_img_btf") } };
            try {
                (function() {
                    var a = b(p).width();
                    a && (1366 >= a ? d.incrementCounterByOne("sl_vp_dim_1") : 1367 <= a && 1649 >= a ? d.incrementCounterByOne("sl_vp_dim_2") : 1650 <= a && 1859 >= a ? d.incrementCounterByOne("sl_vp_dim_3") : d.incrementCounterByOne("sl_vp_dim_4")) })() } catch (a) { d.incrementCounterByOne("err_sl_vp_dim") }
            try { c() } catch (f) { d.incrementCounterByOne("err_sl_main_img_btf") } } });
    k.when("atf").register("ueCount", function() {
        var b = p.ue;
        return { incrementCounterByOne: function(d) { b && b.count && b.count(d, (b.count(d) || 0) + 1) }, logCounter: function(d, c) { b && b.count && b.count(d, c) } } });
    k.when("jQuery").register("softlines-common-utils", function(b) {
        var d = function() {};
        d.prototype.isNotNull = function(c) {
            return "undefined" !== b.type(c) && "null" !== b.type(c) };
        d.prototype.isString = function(c) {
            return this.isNotNull(c) && "string" === b.type(c) };
        d.prototype.isStringNotEmpty = function(b) {
            return this.isString(b) &&
                0 < b.length
        };
        d.prototype.equalsIgnoreCase = function(b, a) {
            var d = !1;
            this.isString(b) && this.isString(a) && b.toUpperCase() === a.toUpperCase() && (d = !0);
            return d };
        d.prototype.getDeviceType = function(b) {
            return this.getDataAttribute(b, "device-type") };
        d.prototype.getRegexOutput = function(b, a) {
            var d, e = /^[A-Z0-9]*$/;
            if (this.isStringNotEmpty(b)) {
                var m = b.match(a);
                m && m.forEach(function(a) { a && e.test(a) && (d = a) }) }
            return d };
        d.prototype.getUrlParameterByName = function(b) {
            return (b = (new RegExp("[?&]" + b + "=([^$#&]*)|&|#|$")).exec(p.location.href)) ?
                b[1] ? decodeURIComponent(b[1]) : "" : null
        };
        d.prototype.getCurrentAsin = function() {
            return this.getRegexOutput(p.location.href, /\/dp\/([^\/?]*)|\/gp\/product\/([^\/?]*)|\/gp\/aw\/d\/([^\/?]*)/) };
        d.prototype.getDataAttribute = function(c, a) {
            var d = null;
            if (this.isStringNotEmpty(c)) {
                var e = b(c);
                this.isNotNull(e) && 0 < e.length && (d = e.data(a)) }
            return d };
        d.prototype.isMobileWeb = function(b) { b = this.getDeviceType(b);
            return this.equalsIgnoreCase(b, "mobileWeb") ? !0 : !1 };
        d.prototype.isMobileApp = function(b) {
            b = this.getDeviceType(b);
            return this.equalsIgnoreCase(b, "mobileApp") ? !0 : !1
        };
        d.prototype.isPCOrTabletWeb = function(b) { b = this.getDeviceType(b);
            return this.equalsIgnoreCase(b, "pcOrTabletWeb") ? !0 : !1 };
        d.prototype.isTabletApp = function(b) { b = this.getDeviceType(b);
            return this.equalsIgnoreCase(b, "tabletApp") ? !0 : !1 };
        d.prototype.checkWeblabTreatment = function(b, a, d) {
            return this.getDataAttribute(b, a) === d };
        d.prototype.animationScroll = function(c, a) { 0 === b(p).scrollTop() && 0 !== c && b("html, body").delay(500).animate({ scrollTop: c }, a) };
        d.prototype.isMacOs =
            function() {
                var b = !1,
                    a = p.navigator.userAgent;
                a && (b = /Mac OS/i.test(a));
                return b };
        d.prototype.extendAndOverride = function(b, a) { b = b ? b : {};
            if (a)
                for (var d in a) a.hasOwnProperty(d) && (b[d] = a[d]);
            return b };
        return new d
    });
    k.when("jQuery", "ueCount").execute(function(b, d) { b("#softlinesTechnicalSpecificationsLink").bind("click", function() { d.incrementCounterByOne("sts_link", 1) }) });
    k.when("jQuery", "A").execute(function(b, d) {
        d.on("a:popover:ajaxContentLoaded:g2s2SizeChartView", function(c) {
            function a(a) {
                return k +
                    b.param({ asin: t, sizeChartDept: a, deviceType: g })
            }

            function d() {
                var c = b("#sizechart_department_dropdown_native_select").children(":selected").attr("data-deptName"),
                    c = a(c);
                e(c) }

            function e(a) { b.ajax({ url: a, cache: !0, beforeSend: function() {
                        if (q.data(a) !== r) {
                            var b = q.data(a);
                            q.html(b);
                            return !1 }
                        q.addClass(h);
                        return !0 }, complete: function() { q.removeClass(h) }, success: function(b) { q.data(a, b);
                        q.html(b) } }) }

            function m(a) { e(a.data.rwAjaxSizeChartUrl) }
            c = b("#spinnerContainer");
            var l = b("#sizeChartSpinnerUrl").attr("data-sizechart-spinner-url");
            c.css("background-image", "url(" + l + ")");
            c = c.attr("data-showTab");
            l = b("#sizeChartHeight").attr("data-height");
            b(".heightG2S2SizeChartPC").css("height", l + "px");
            if ("true" === c) {
                var q = b("#tabContent"),
                    k = "/gp/product/ajax-handlers/apparel-sizing-chart.html/ref=dp_sizechart?ie=UTF8&isUDP=1&",
                    h = "loadingSpinnerSizeChart",
                    t = q.attr("data-asin"),
                    g = q.attr("data-deviceType");
                c = b("#dataForJs").attr("data-numberOfDepts");
                if ("false" === b("#dataForJs").attr("data-show-department-dropdown"))
                    for (l = 0; l < c; l++) {
                        var n = b("#dept" +
                                l).attr("data-deptName"),
                            I = b("#dept" + l).attr("data-isActive"),
                            n = a(n);
                        "true" === I && q.data(n, q.html());
                        b("#dept" + l).click({ rwAjaxSizeChartUrl: n }, m)
                    } else b("#sizechart_department_dropdown_native_select").change(d), n = b("#sizechart_department_dropdown_native_select").children(":selected").attr("data-deptName"), n = a(n), q.data(n, q.html())
            }
        })
    });
    k.when("A", "imageBlockUtils", "ImageBlockATF", "ImageBlockBTF", "a-modal", "warrantyForesterLogging", "ready").execute(function(b, d, c, a, f, e) {
        function m(a, b) {
            f.get(n(a)).hide();
            n("html,body").animate({ scrollTop: n("#watchRecommendations").offset().top }, "slow");
            e.foresterLog(b)
        }

        function l(a) { n(document).delegate("#similarWatchRecommendationsLink", "click.interstitial", function() { m(a, "simWatchRecOptClickedWR") });
            n(document).delegate("#otherWatchOfferLink", "click.interstitial", function() { m(a, "otherWatchOfferOptClickedWR") }) }

        function q() {
            n(document).undelegate("#pw-add-to-cart-button", "click.interstitial");
            n(document).delegate("#pw-add-to-cart-button", "click.interstitial", function() {
                try {
                    return g(),
                        e.foresterLog("modelShown" + e.warrantyType + e.watchRecommendationsForesterSuffix), f.get(n("#watchWarrantyModalPwAtc")).show(), n(document).undelegate("#warrantyModalBtnPwAtc", D), h(n("#pw-add-to-cart-button"), "PwAtc"), l("#watchWarrantyModalPwAtc"), !1
                } catch (a) {
                    return !0 }
            })
        }

        function H(a) { n(document).undelegate(".interstitial");
            a.click() }

        function h(a, c) {
            n(document).delegate("#warrantyModalBtn" + c, D, function() {
                e.foresterLog("clickedContinue" + e.warrantyType + e.watchRecommendationsForesterSuffix);
                n("#watchWarrantyDoNotShowMessage" +
                    c).is(":checked") ? n.ajax(O, { complete: function() { H(a) }, timeout: 500 }) : H(a)
            });
            n(document).delegate("#warrantyModalCancelBtn" + c, D, function() { n("#watchWarrantyDoNotShowMessage" + c).is(":checked") && (b.ajax(O, {}), n(document).undelegate(".interstitial"));
                e.foresterLog("clickedCancel" + e.warrantyType + e.watchRecommendationsForesterSuffix) })
        }

        function t(a) {
            n(document).delegate("#warrantyModalBtnPtc", D, function() {
                e.foresterLog("clickedContinue" + e.warrantyType + e.watchRecommendationsForesterSuffix);
                n("#watchWarrantyDoNotShowMessagePtc").is(":checked") ?
                    n.ajax(O, { complete: function() { H(a) }, timeout: 500 }) : H(a)
            });
            n(document).delegate("#warrantyModalCancelBtnPtc", D, function() { n("#watchWarrantyDoNotShowMessagePtc").is(":checked") && (b.ajax(O, {}), n(document).undelegate(".interstitial"));
                e.foresterLog("clickedCancel" + e.warrantyType + e.watchRecommendationsForesterSuffix) })
        }

        function g() {
            var b = "";
            p.isTwisterPage ? r && (b = d.getColorFromState(r.selected_variations), b = a.colorImages[b][0].large) : b = c.colorImages.initial[0].large;
            n("[id = interstitialImage]").attr("src",
                b)
        }
        var n = b.$,
            I = b.state("watch-warranty-params");
        if (I && I.showInterstitial) {
            n(document).undelegate(".interstitial");
            var O = "/gp/product/ajax-handlers/watch-warranty-sembu-setter.html?timeStamp=" + (new Date).getTime() + "&WRSuffix=" + e.watchRecommendationsForesterSuffix,
                D = navigator.userAgent.match(/ipad/i) ? "touchstart.interstitial" : "click.interstitial",
                r;
            p.isTwisterPage && k.when("twisterModule").execute(function(a) { r = a.getState() });
            q();
            b.on("a:pageUpdate", function() { q() });
            n(document).delegate("#add-to-cart-button",
                "click.interstitial",
                function() {
                    try {
                        return g(), e.foresterLog("modelShown" + e.warrantyType + e.watchRecommendationsForesterSuffix), f.get(n("#watchWarrantyModalAtc")).show(), h(n("#add-to-cart-button"), "Atc"), l("#watchWarrantyModalAtc"), !1 } catch (a) {
                        return !0 } });
            n(document).delegate("#one-click-button", "click.interstitial", function() {
                try {
                    g();
                    e.foresterLog("modelShown" + e.warrantyType + e.watchRecommendationsForesterSuffix);
                    f.get(n("#watchWarrantyModalPtc")).show();
                    var a = n("#one-click-button");
                    t(a);
                    l("#watchWarrantyModalPtc");
                    return !1
                } catch (b) {
                    return !0 }
            });
            n(document).delegate("#oneClickBuyButton", "click.interstitial", function() {
                try { g();
                    e.foresterLog("modelShown" + e.warrantyType + e.watchRecommendationsForesterSuffix);
                    f.get(n("#watchWarrantyModalPtc")).show();
                    var a = n("#oneClickBuyButton");
                    t(a);
                    l("#watchWarrantyModalPtc");
                    return !1 } catch (b) {
                    return !0 } });
            n("#warrantyPdfInModal").click(function() { e.foresterLog("clicked" + e.watchRecommendationsForesterSuffix) });
            n("#warrantyFaqLink").click(function() {
                e.foresterLog("faqClicked" + e.warrantyType +
                    e.watchRecommendationsForesterSuffix)
            })
        }
    });
    k.when("A", "ueCount", "cf").register("warrantyForesterLogging", function(b, d) {
        var c = b.$;
        if ((c = c("#warranty-div")) && c.length) {
            var a = c.attr("data-watchRecommendationsForesterSuffix");
            return { foresterLog: function(a) { d && d.incrementCounterByOne(a) }, warrantyType: c.find("#watchWarrantyText").attr("data-warrantyType"), watchRecommendationsForesterSuffix: a } } });
    k.when("A", "warrantyForesterLogging").execute(function(b, d) {
        var c = b.$,
            a = c("#warranty-div");
        a && a.length &&
            (c = a.find("#watch-warranty-filelink"), a = a.find("#aboutWatchWarrantyLink"), c.length && d.foresterLog("shown"), a.click(function() { d.foresterLog("aboutWatchWarrantyClickedWR") }), c.click(function() { d.foresterLog("clickedFromDP") }))
    });
    k.when("jQuery", "A", "atf").execute(function(b, d) {
        function c() {
            var a = d.viewport().height,
                b = a - l.heightBuffer;
            m && (a /= 2, b = a - a * l.popupHeightBufferPercent / 100);
            return Math.min(Math.max(b, l.minHeight), l.maxHeight) }

        function a() {
            var a = f.attr("data-header"),
                h = "data-" + e,
                t = f.attr("href"),
                g = c(),
                t = { name: "g2s2SizeChartView", url: t + "&height=" + g };
            m ? (a = d.viewport().width * l.widthPercent / 100, a = Math.min(Math.max(a, l.minWidth), l.maxWidth), b.extend(t, { width: a.toString(), position: "triggerBottom" })) : b.extend(t, { width: "800", header: a });
            a = JSON.stringify(t);
            q.attr(h, a)
        }
        var f = b("#size-chart-url"),
            e = f.attr("data-sizeChartActionType"),
            m = "a-popover" === e,
            l = { widthPercent: 70, minWidth: 300, maxWidth: 800, minHeight: 300, maxHeight: 700, popupHeightBufferPercent: 5, heightBuffer: 300 },
            q = b("#size-chart-popover");
        d.on("resize", function() {
            var a = b("#fit-guide"),
                f = c();
            if (0 === a.length) {
                if (0 < q.length) {
                    var a = q.data(e),
                        m = "",
                        g = a.url.split("?"),
                        n = g[0],
                        g = g[1],
                        l = "";
                    if (g)
                        for (var g = g.split("&"), k = g.length, p = 0; p < k; p++) "height" !== g[p].split("=")[0] && (m += l + g[p], l = "&");
                    a.url = n + "?" + m + (l + "height=" + f);
                    q.data(e, a) } } else d.capabilities.ios || a.height(f) });
        0 < q.length && a()
    });
    k.when("A", "airy-image-block").execute(function(b, d) {
        function c(a) {
            var b = a / H,
                c = (H - a) / 2;
            e(l).each(function() {
                var a = e(this),
                    d = "translate3d(0, " + c +
                    "px, 0)";
                a && a.css("height") && (150 <= a.height() && (d = d + " scale(" + b + ")"), a.css("transform", d), a.css("-webkit-transform", d))
            });
            h.css("-webkit-transform", "translate3d(0," + 2 * c + "px, 0)");
            h.css("transform", "translate3d(0," + 2 * c + "px, 0)");
            t && 0 < t.length && (t.css("transform", "translate3d(0," + 2 * c + "px, 0)"), t.css("-webkit-transform", "translate3d(0," + 2 * c + "px, 0)"));
            g && 0 < g.length && (g.css("transform", "scale(" + b + ") translate3d(0," + 2 * c + "px, 0)"), g.css("-webkit-transform", "scale(" + b + ") translate3d(0," + 2 * c + "px, 0)"));
            n &&
                0 < n.length && (n.css("transform", "scale(" + b + ") translate3d(0," + 2 * c + "px, 0)"), n.css("-webkit-transform", "scale(" + b + ") translate3d(0," + 2 * c + "px, 0)"))
        }

        function a() { h = e("#titleExpander");
            t = e("#video-play-wrapper");
            g = e("#right-arrow-wrapper");
            n = e("#left-arrow-wrapper");
            0 < h.length && (m = e("#image-block"), 0 < m.length && (h.offset(), h.css("position", "relative"), h.css("z-index", "5"), (q = m.length ? !1 : !0) && (m = e("#single-image-block")), l = m.find("img"), H = m.height())) }

        function f() {
            p.requestAnimFrame = function() {
                return p.requestAnimationFrame ||
                    p.webkitRequestAnimationFrame || p.mozRequestAnimationFrame || function(a) { p.setTimeout(a, 1E3 / 60) }
            }();
            var d = function() {
                if (m) {
                    var a = m[0].getBoundingClientRect().top - 60,
                        a = Math.min(Math.max(m.height() + a, 150), H) + 1;
                    c(a) }
                p.requestAnimFrame(d) };
            p.requestAnimFrame(d);
            k.when("a-carousel-framework").execute(function(c) { b.on("a:carousel:image-block-carousel:init", function(b) { a() }) });
            b.on("image-block-refresh", function() { a() })
        }
        var e = b.$,
            m, l = [],
            q, H, h, t, g, n;
        0 < e("#twister_end_marker").length && f()
    });
    k.when("A",
        "ueCount", "atf").register("searchStripeAjaxRequest", function(b, d) {
        function c(c, m) { b.ajax("/gp/product/ajax-handlers/search-stripe.html?ie=UTF8&", { method: "get", dataType: "JSON", params: c, success: function(a) { m(a) }, error: function(b, c, e) {
                    if (!f) {
                        var h = a(".search-stripe-item-loader");
                        0 !== h.length && (h.remove(), f = !0) }
                    console.log("Failed to send the AJAX Request for search stripe");
                    d && d.incrementCounterByOne("SearchStripeAjaxRequestFailure");
                    console.log(arguments) } }) }
        var a = b.$,
            f = !1;
        return {
            sendAjaxGet: function(a,
                b) { c(a, b) }
        }
    });
    k.when("A", "ueCount", "softlines-common-utils", "atf").register("searchStripeContainer", function(b, d, c) {
        var a = b.$,
            f = function() {
                function e() {
                    var b = a("#search-stripe-asin-list");
                    f();
                    b && 0 < b.length && (b = b.data("asinlist")) && (X = b.split(","), L = X.length, u = L * P, 0 < u && (W = u - I.height()), x = !0) }

                function f() { r = a(".search-stripe-item");
                    ba ? 0 !== r.length ? (z = "tiles", P = r.eq(0).height()) : P = 0 : ia ? 0 !== r.length && "none" !== aa.eq(0).css("display") && (z = "tiles", P = aa.eq(0).height()) : (z = "thumbnails", P = R.eq(0).height()) }

                function l() {
                    var b = a(".search-stripe-item-loader");
                    0 !== b.length && b.remove();
                    A() }

                function q(a) {
                    var b = "";
                    0 <= a && a < X.length && (b = X[a]);
                    return b }

                function k(a) {
                    if ((a = a.find("li.search-stripe-item")) && 0 < a.length) { a.first();
                        a = a.last().attr("id");
                        var b = -1;
                        a && (a = a.split("-"), b = X.indexOf(a[a.length - 1]));
                        v.start = 0;
                        v.end = b } }

                function h(b, c) {
                    l();
                    var f = !1;
                    try {
                        var g = a(b),
                            h = t(); "prepend" === c ? h.prepend(g) : h.append(g);
                        x || e();
                        A();
                        k(h);
                        f = !0 } catch (m) {
                        console.log("Couldn't append the aisnBlockHTML in search stripe: " + b + " It gave following error: " +
                            m.message), d && d.incrementCounterByOne("ErrorInAsinBlockAppendForSearchStripe")
                    }
                    return f
                }

                function t() {
                    var a = D;
                    E && (a = D.find(".jspPane"));
                    return a }

                function g() { O.removeClass("search-stripe-slider-expanded") }
                var n = a("#extremeLeftColumn"),
                    I = a("#search-stripe-container"),
                    O = a(".search-stripe-slider-container"),
                    D = a("#search-stripe-item-list"),
                    r = a(".search-stripe-item"),
                    aa = a(".search-stripe-large"),
                    R = a(".search-stripe-thumbnail");
                a("#search-stripe-asin-list");
                var da = a("#imageBlock_feature_div");
                a("#searchStripeOnDetailPage");
                var ea = da.height(),
                    J = a("#ppd"),
                    Y, P = 0,
                    T = "C",
                    T = c.getDataAttribute("div#searchStripeOnDetailPage", "searchstripetreatment"),
                    ia = "T1" === T,
                    ja = "T2" === T,
                    ba = "T3" === T,
                    X = [],
                    v = { start: -1, end: -1 },
                    L = 0,
                    u = 0,
                    B = "",
                    z = "thumbnails",
                    E = !1,
                    x = !1,
                    G = J.height(),
                    W = 0,
                    U = !1,
                    y = !1,
                    S = !1,
                    B = function(a) {
                        a = "";
                        return a = ia ? '<li class="search-stripe-item search-stripe-large search-stripe-item-loader"><div class="a-spinner-wrapper search-stripe-spinner"><span class="a-spinner a-spinner-medium"></span></div></li><li class="search-stripe-item search-stripe-thumbnail search-stripe-item-loader"><div class="a-spinner-wrapper search-stripe-spinner"><span class="a-spinner a-spinner-medium"></span></div></li>' :
                            ja ? '<li class="search-stripe-item search-stripe-thumbnail search-stripe-item-loader"><div class="a-spinner-wrapper search-stripe-spinner"><span class="a-spinner a-spinner-medium"></span></div></li>' : '<li class="search-stripe-item search-stripe-large search-stripe-item-loader"><div class="a-spinner-wrapper search-stripe-spinner"><span class="a-spinner a-spinner-medium"></span></div></li>'
                    }(T);
                (function(a) {
                    a = parseInt(J.parent(".a-container").css("padding-left"), 10);
                    if (ba) {
                        var b = parseInt(n.css("width"),
                            10);
                        a += b
                    }
                    n.css("margin-left", "-" + a)
                })(T);
                f();
                e();
                var F = function() {
                        var a = -1 * parseInt(Y.css("top"), 10);
                        0 < W && (!U && a > W / 4 ? (U = !0, A(), d.incrementCounterByOne("ss_scrolled_upto_50_" + z)) : !y && a > W / 2 ? (y = !0, A(), d.incrementCounterByOne("ss_scrolled_beyond_50_" + z)) : !S && a > 3 * W / 4 && (S = !0, d.incrementCounterByOne("ss_scrolled_beyond_75_" + z), A(), D.unbind("scroll", F))) },
                    C = b.once(function(b) {
                        b = a(b.target).attr("id");
                        "search-stripe-slide-button" === b || "search-stripe-button-text" === b ? d.incrementCounterByOne("ss_user_enter_button") :
                            "sx-slide-transparent-ingress" === b && d.incrementCounterByOne("ss_user_enter_left_edge")
                    });
                I.one("mouseenter", function(a) { d && d.incrementCounterByOne("ss_user_enter_" + z) }).one("mouseleave", function() { d && (U || d.incrementCounterByOne("ss_leave_wout_scroll_" + z)) });
                ba && O.bind("mouseenter", function(a) { C(a);
                    O.addClass("search-stripe-slider-expanded") }).bind("mouseleave", function(a) {
                    if (0 < a.clientX) g();
                    else if (0 === a.clientX) {
                        var b = O.height(),
                            c = O.offset().top;
                        (a.pageY < c || a.pageY > c + b) && g() } });
                var A = function() {
                    I.height(ea);
                    G = J.height();
                    I.height(G);
                    x && (W = u - G);
                    E && D.data("jsp").reinitialise()
                };
                p.onresize = function() { A();
                    f();
                    u = L * P;
                    x && (W = u - I.height()) };
                return {
                    searchStripeTreatment: function() {
                        return T },
                    setCurrentWindowIndices: function() {
                        return k(t()) },
                    getContainer: function() {
                        return I },
                    getContainerItemList: function() {
                        return D },
                    getItemContainer: function() {
                        return t() },
                    addScrolling: function(b) { b(D);
                        E = !0;
                        Y = a(".jspPane");
                        d && 0 !== Y.length && D.bind("scroll", F) },
                    addLoaders: function() {
                        var a = t(),
                            b;
                        for (b = 0; 5 > b; b++) a.append(B);
                        A() },
                    cleanLoaders: function() { l() },
                    updateScroll: function() { A() },
                    appendAsinBlocks: function(a) {
                        return h(a, "append") },
                    prependAsinBlocks: function(a) {
                        return h(a, "prepend") },
                    getWindowSize: function() {
                        return 5 },
                    getEntireAsinList: function() {
                        return X },
                    firstAsinInStripe: function() {
                        return q(v.start) },
                    lastAsinInStripe: function() {
                        return q(v.end) },
                    getCurrentWindowIndices: function() {
                        return v },
                    currentNumberOfAsinsShownOnStripe: function() {
                        var a = 0; - 1 !== v.end && -1 !== v.start && (a = v.end - v.start + 1);
                        return a },
                    asinCapacity: function() {
                        return 5 },
                    getSearchStripeForm: function() {
                        return z },
                    isAsinListAppended: function() {
                        return x },
                    updateSearchStripeAsinList: function() {
                        return e() },
                    handleNoResults: function() { console.log("No search results found for search stripes");
                        I.addClass("search-stripe-container-hidden");
                        l();
                        d && d.incrementCounterByOne("NoSxStripeResultsFound") },
                    isLocalePrimeEligible: function() {
                        var a = "false",
                            b = c.getDataAttribute("div#searchStripeOnDetailPage", "islocaleprimeeligible");
                        b && (a = "true" === b.toString() ? "true" : "false");
                        return a }
                }
            };
        return c.checkWeblabTreatment("div#searchStripeOnDetailPage",
            "searchstripeondetailpage", !0) ? f() : {}
    });
    k.when("A", "softlines-common-utils", "searchStripeScroll", "atf").register("searchStripeInteractions", function(b, d, c) {
        var a;
        return { addInteractions: function(b, d) { a = b;
                a.addScrolling(c) } } });
    k.when("A", "searchStripeAjaxRequest", "softlines-common-utils", "searchStripeContainer", "searchStripeInteractions", "ueCount", "atf").execute(function(b, d, c, a, f, e) {
        function m(b) { b && b.length && a.appendAsinBlocks(b) }

        function l(b) { b && b.length && a.prependAsinBlocks(b) }

        function q(b) {
            (b = b.trim()) && b.length ? (a.appendAsinBlocks(b), h()) : a.handleNoResults() }

        function k(b) {
            var f = c.getUrlParameterByName("searchStripeAsinList");
            if (f && "" !== f) b = { searchStripeDPWeblabTreatment: b, isPrimeEligibleLocale: g, searchStripeCurrentAsin: t, searchStripeAsinList: f };
            else if (f = document.referrer, "" !== f) b = { searchStripeDPWeblabTreatment: b, isPrimeEligibleLocale: g, searchStripeCurrentAsin: t, shouldFetchAsins: "true", httpReferer: f }, e.incrementCounterByOne("SxAjaxRequestSentToFetchAsins");
            else {
                e && (console.log("No http referrer found for search stripe"),
                    e.incrementCounterByOne("NoSxStripeHttpReferrerFound"));
                a.handleNoResults();
                return
            }
            a.addLoaders();
            d.sendAjaxGet(b, q)
        }

        function h() {
            var b = a.getEntireAsinList(),
                c = b.join(","),
                f = a.getWindowSize(),
                h = a.searchStripeTreatment(),
                n = a.getCurrentWindowIndices();
            if (0 < n.start)
                for (var q = n.start; 0 < q;) { q -= f;
                    0 > q && (q = 0);
                    var k = b[q],
                        k = { searchStripeDPWeblabTreatment: h, isPrimeEligibleLocale: g, searchStripeStartAsin: k, searchStripeAsinList: c, searchStripeCurrentAsin: t };
                    d.sendAjaxGet(k, l) }
            var p = b.length - 1;
            if (n.end < p)
                for (a.addLoaders(),
                    q = n.end + 1; q <= p;) k = b[q], k = { searchStripeDPWeblabTreatment: h, isPrimeEligibleLocale: g, searchStripeStartAsin: k, searchStripeAsinList: c, searchStripeCurrentAsin: t }, d.sendAjaxGet(k, m), e && e.incrementCounterByOne("SearchStripeAjaxRequestSent"), q += f;
            else a.updateScroll()
        }
        var t = c.getCurrentAsin(),
            g = "";
        if (c.checkWeblabTreatment("div#searchStripeOnDetailPage", "searchstripeondetailpage", !0)) {
            e && (b = a.getSearchStripeForm(), e.incrementCounterByOne("search_stripe_enabled_" + b));
            g = a.isLocalePrimeEligible();
            b = a.searchStripeTreatment();
            var n = a.isAsinListAppended();
            "T3" !== b || n ? (a.setCurrentWindowIndices(), h()) : k(b);
            f.addInteractions(a, d)
        }
    });
    k.when("jQuery", "ueCount").execute(function(b, d) {
        try {
            var c = b(".dp-heart-button"),
                a = b(".email"),
                f = b("#facebook"),
                e = b("#twitter"),
                m = b("#pinterest"),
                l = !1;
            1 === b(".collect-and-share-buttons-wrapper").length && (l = !0);
            var q = function(a, b) { a.bind("click", function() { d.incrementCounterByOne(b + "_" + (l ? "T1" : "C")) }) };
            q(c, "rsw_heart");
            q(a, "rsw_email");
            q(f, "rsw_fb");
            q(e, "rsw_twitter");
            q(m, "rsw_pinterest") } catch (k) { d.incrementCounterByOne("error_in_rsw_counter") } });
    k.when("A", "ueCount", "softlines-common-utils").register("searchStripeScroll", function(b, d, c) {
        var a = b.$,
            f = function(b, c) {
                function l(b, c) {
                    function e(c) {
                        var d, g, m, H, I = !1,
                            w = !1;
                        v = c;
                        if (u === r) m = b.scrollTop(), H = b.scrollLeft(), b.css({ overflow: "hidden", padding: 0 }), B = b.innerWidth() + fa, z = b.innerHeight(), b.width(B), u = a('<div class="jspPane" />').css("padding", ka).append(b.children()), E = a('<div class="jspContainer" />').css({ width: B + "px", height: z + "px" }).append(u).appendTo(b);
                        else {
                            b.css("width", "");
                            I = v.stickToBottom && T();
                            w = v.stickToRight && ia();
                            if (c = b.innerWidth() + fa !== B || b.outerHeight() !== z) B = b.innerWidth() + fa, z = b.innerHeight(), E.css({ width: B + "px", height: z + "px" });
                            if (!c && ya === x && u.outerHeight() === G) { b.width(B);
                                return }
                            ya = x;
                            u.css("width", "");
                            b.width(B);
                            E.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()
                        }
                        u.css("overflow", "auto");
                        x = v.contentWidth ? v.contentWidth : u[0].scrollWidth;
                        G = u[0].scrollHeight;
                        u.css("overflow", "");
                        W = x / B;
                        U = G / z;
                        y = 1 < U;
                        if (S = !1, y) {
                            b.addClass("jspScrollable");
                            if (c = v.maintainPosition &&
                                (A || M)) d = -u.position().left, g = -u.position().top;
                            f();
                            n();
                            l();
                            c && (P(w ? x - B : d, !1), Y(I ? G - z : g, !1));
                            ja();
                            X();
                            v.clickOnTrack && k()
                        } else b.removeClass("jspScrollable"), u.css({ top: 0, left: 0, width: E.width() - fa }), E.unbind(pa), p();
                        v.autoReinitialise && !ha ? ha = setInterval(function() { e(v) }, v.autoReinitialiseDelay) : !v.autoReinitialise && ha && clearInterval(ha);
                        m && b.scrollTop(0) && Y(m, !1);
                        H && b.scrollLeft(0) && P(H, !1);
                        b.trigger("jsp-initialised", [S || y]);
                        u.width(B)
                    }

                    function f() {
                        y && (E.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),
                            a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'), a('<div class="jspDragBottom" />'))), a('<div class="jspCap jspCapBottom" />'))), va = E.find(">.jspVerticalBar"), ca = va.find(">.jspTrack"), F = ca.find(">.jspDrag"), V = z, E.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function() { V -= a(this).outerHeight() }), F.hover(function() { F.addClass("jspHover") }, function() { F.removeClass("jspHover") }).bind("mousedown.jsp", function(b) {
                            a("html").bind("dragstart.jsp selectstart.jsp",
                                ba);
                            F.addClass("jspActive");
                            d && d.incrementCounterByOne("ss_scroll_thumb_drag");
                            var c = b.pageY - F.position().top;
                            a("html").bind("mousemove.jsp", function(a) { R(a.pageY - c, !1) }).bind("mouseup.jsp mouseleave.jsp", aa);
                            return !1
                        }), g())
                    }

                    function g() { ca.height(V + "px");
                        A = 0;
                        oa = v.verticalGutter + ca.outerWidth();
                        u.width(B);
                        try { 0 === va.position().left && u.css("margin-left", oa + "px") } catch (a) {} }

                    function n() {
                        S && (E.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'), a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),
                                a('<div class="jspDragRight" />'))), a('<div class="jspCap jspCapRight" />'))), Z = E.find(">.jspHorizontalBar"), ga = Z.find(">.jspTrack"), w = ga.find(">.jspDrag"), w.hover(function() { w.addClass("jspHover") }, function() { w.removeClass("jspHover") }).bind("mousedown.jsp", function(b) { a("html").bind("dragstart.jsp selectstart.jsp", ba);
                                w.addClass("jspActive");
                                var c = b.pageX - w.position().left;
                                a("html").bind("mousemove.jsp", function(a) { ea(a.pageX - c, !1) }).bind("mouseup.jsp mouseleave.jsp", aa);
                                return !1 }), Q = E.innerWidth(),
                            m())
                    }

                    function m() { E.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function() { Q -= a(this).outerWidth() });
                        ga.width(Q + "px");
                        M = 0 }

                    function l() {
                        if (S && y) {
                            var b = ga.outerHeight(),
                                c = ca.outerWidth();
                            V -= b;
                            a(Z).find(">.jspCap:visible,>.jspArrow").each(function() { Q += a(this).outerWidth() });
                            Q -= c;
                            z -= c;
                            B -= b;
                            ga.parent().append(a('<div class="jspCorner" />').css("width", b + "px"));
                            g();
                            m() }
                        G = u.outerHeight();
                        U = G / z;
                        S && (N = Math.ceil(1 / W * Q), N > v.horizontalDragMaxWidth ? N = v.horizontalDragMaxWidth :
                            N < v.horizontalDragMinWidth && (N = v.horizontalDragMinWidth), w.width(N + "px"), K = Q - N, J(M));
                        y && (la = Math.ceil(1 / U * V), la > v.verticalDragMaxHeight ? la = v.verticalDragMaxHeight : la < v.verticalDragMinHeight && (la = v.verticalDragMinHeight), F.height(la + "px"), C = V - la, da(A))
                    }

                    function k() {
                        p();
                        y && ca.bind("mousedown.jsp", function(b) {
                            if (b.originalTarget === r || b.originalTarget === b.currentTarget) {
                                var c = a(this),
                                    e = c.offset(),
                                    f = b.pageY - e.top - A,
                                    g, h = !0,
                                    m = function() {
                                        var a = c.offset(),
                                            a = b.pageY - a.top - la / 2,
                                            e = z * v.scrollPagePercent,
                                            l = C * e /
                                            (G - z);
                                        if (0 > f) A - l > a ? L.scrollByY(-e) : R(a);
                                        else if (0 < f) A + l < a ? L.scrollByY(e) : R(a);
                                        else { n();
                                            return }
                                        0 !== f && d && d.incrementCounterByOne("ss_scroll_track_click");
                                        g = setTimeout(m, h ? v.initialDelay : v.trackClickRepeatFreq);
                                        h = !1
                                    },
                                    n = function() { g && clearTimeout(g);
                                        g = null;
                                        a(document).unbind("mouseup.jsp", n) };
                                m();
                                a(document).bind("mouseup.jsp", n);
                                return !1
                            }
                        });
                        S && ga.bind("mousedown.jsp", function(b) {
                            if (b.originalTarget === r || b.originalTarget === b.currentTarget) {
                                var c = a(this),
                                    d = c.offset(),
                                    e = b.pageX - d.left - M,
                                    f, g = !0,
                                    h = function() {
                                        var a =
                                            c.offset(),
                                            a = b.pageX - a.left - N / 2,
                                            d = B * v.scrollPagePercent,
                                            n = K * d / (x - B);
                                        if (0 > e) M - n > a ? L.scrollByX(-d) : ea(a);
                                        else if (0 < e) M + n < a ? L.scrollByX(d) : ea(a);
                                        else { m();
                                            return }
                                        f = setTimeout(h, g ? v.initialDelay : v.trackClickRepeatFreq);
                                        g = !1
                                    },
                                    m = function() { f && clearTimeout(f);
                                        f = null;
                                        a(document).unbind("mouseup.jsp", m) };
                                h();
                                a(document).bind("mouseup.jsp", m);
                                return !1
                            }
                        })
                    }

                    function p() { ga && ga.unbind("mousedown.jsp");
                        ca && ca.unbind("mousedown.jsp") }

                    function aa() {
                        a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");
                        F && F.removeClass("jspActive");
                        w && w.removeClass("jspActive")
                    }

                    function R(a, b) { y && (0 > a ? a = 0 : a > C && (a = C), b === r && (b = v.animateScroll), b ? L.animate(F, "top", a, da) : (F.css("top", a), da(a))) }

                    function da(a) { a === r && (a = F.position().top);
                        E.scrollTop(0);
                        A = a || 0;
                        var c = 0 === A,
                            d = A === C;
                        a = -(a / C) * (G - z);
                        if (xa !== c || qa !== d) xa = c, qa = d;
                        u.css("top", a);
                        b.trigger("jsp-scroll-y", [-a, c, d]).trigger("scroll") }

                    function ea(a, b) { S && (0 > a ? a = 0 : a > K && (a = K), b === r && (b = v.animateScroll), b ? L.animate(w, "left", a, J) : (w.css("left", a), J(a))) }

                    function J(a) {
                        a ===
                            r && (a = w.position().left);
                        E.scrollTop(0);
                        M = a || 0;
                        var c = 0 === M,
                            d = M === K;
                        a = -(a / K) * (x - B);
                        if (sa !== c || ta !== d) sa = c, ta = d;
                        u.css("left", a);
                        b.trigger("jsp-scroll-x", [-a, c, d]).trigger("scroll")
                    }

                    function Y(a, b) { R(a / (G - z) * C, b) }

                    function P(a, b) { ea(a / (x - B) * K, b) }

                    function T() {
                        var a = G - z;
                        return 20 < a && 10 > a - -u.position().top }

                    function ia() {
                        var a = x - B;
                        return 20 < a && 10 > a - -u.position().left }

                    function ja() {
                        E.unbind(pa).bind(pa, function(a, b, c, d) {
                            M || (M = 0);
                            A || (A = 0);
                            b = M;
                            var e = A;
                            a = a.deltaFactor || v.mouseWheelSpeed;
                            L.scrollBy(c * a, -d * a, !1);
                            return b === M && e === A
                        })
                    }

                    function ba() {
                        return !1 }

                    function X() {
                        var a, b, c, d, e, f = !1;
                        E.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp", function(g) { g = g.originalEvent.touches[0];
                            a = -u.position().left;
                            b = -u.position().top;
                            c = g.pageX;
                            d = g.pageY;
                            e = !1;
                            f = !0 }).bind("touchmove.jsp", function(g) {
                            if (f) { g = g.originalEvent.touches[0];
                                var h = M,
                                    m = A;
                                L.scrollTo(a + c - g.pageX, b + d - g.pageY);
                                e = e || 5 < Math.abs(c - g.pageX) || 5 < Math.abs(d - g.pageY);
                                return h === M && m === A } }).bind("touchend.jsp",
                            function(a) { f = !1 }).bind("click.jsp-touchclick", function(a) {
                            if (e) return e = !1 })
                    }
                    var v, L = this,
                        u, B, z, E, x, G, W, U, y, S, F, C, A, w, K, M, va, ca, oa, V, la, Z, ga, Q, N, ha, ka, fa, ya, xa = !0,
                        sa = !0,
                        qa = !1,
                        ta = !1,
                        na = b.clone(!1, !1).empty(),
                        pa = a.fn.mwheelIntent ? "mwheelIntent.jsp" : "mousewheel.jsp";
                    "border-box" === b.css("box-sizing") ? fa = ka = 0 : (ka = b.css("paddingTop") + " " + b.css("paddingRight") + " " + b.css("paddingBottom") + " " + b.css("paddingLeft"), fa = (parseInt(b.css("paddingLeft"), 10) || 0) + (parseInt(b.css("paddingRight"), 10) || 0));
                    a.extend(L, {
                        reinitialise: function(b) { b = a.extend({}, v, b);
                            e(b) },
                        scrollTo: function(a, b, c) { P(a, c);
                            Y(b, c) },
                        scrollToX: function(a, b) { P(a, b) },
                        scrollToY: function(a, b) { Y(a, b) },
                        scrollToPercentX: function(a, b) { P(a * (x - B), b) },
                        scrollToPercentY: function(a, b) { Y(a * (G - z), b) },
                        scrollBy: function(a, b, c) { L.scrollByX(a, c);
                            L.scrollByY(b, c) },
                        scrollByX: function(a, b) {
                            var c = (-u.position().left + Math[0 > a ? "floor" : "ceil"](a)) / (x - B);
                            ea(c * K, b) },
                        scrollByY: function(a, b) {
                            var c = (-u.position().top + Math[0 > a ? "floor" : "ceil"](a)) / (G - z);
                            R(c * C, b) },
                        positionDragX: function(a,
                            b) { ea(a, b) },
                        positionDragY: function(a, b) { R(a, b) },
                        animate: function(a, b, c, d) {
                            var e = {};
                            e[b] = c;
                            a.animate(e, { duration: v.animateDuration, easing: v.animateEase, queue: !1, step: d }) },
                        destroy: function() {
                            var a = -u.position().top,
                                c = -u.position().left;
                            b.removeClass("jspScrollable").unbind(".jsp");
                            u.unbind(".jsp");
                            b.replaceWith(na.append(u.children()));
                            na.scrollTop(a);
                            na.scrollLeft(c);
                            ha && clearInterval(ha) }
                    });
                    e(c)
                }
                c = a.extend({}, f.defaults, c);
                a.each(["arrowButtonSpeed", "trackClickSpeed", "keyboardSpeed"], function() {
                    c[this] =
                        c[this] || c.speed
                });
                return b.each(function() {
                    var b = a(this),
                        d = b.data("jsp");
                    d ? d.reinitialise(c) : (a("script", b).filter('[type="text/javascript"],:not([type])').remove(), d = new l(b, c), b.data("jsp", d)) })
            };
        f.defaults = {
            showArrows: !1,
            maintainPosition: !0,
            stickToBottom: !1,
            stickToRight: !1,
            clickOnTrack: !0,
            autoReinitialise: !1,
            autoReinitialiseDelay: 500,
            verticalDragMinHeight: 0,
            verticalDragMaxHeight: 300,
            horizontalDragMinWidth: 0,
            horizontalDragMaxWidth: 99999,
            contentWidth: r,
            animateScroll: !1,
            animateDuration: 300,
            animateEase: "linear",
            hijackInternalLinks: !1,
            verticalGutter: 4,
            horizontalGutter: 4,
            mouseWheelSpeed: 3,
            arrowButtonSpeed: 0,
            arrowRepeatFreq: 50,
            arrowScrollOnHover: !1,
            trackClickSpeed: 0,
            trackClickRepeatFreq: 70,
            verticalArrowPositions: "split",
            horizontalArrowPositions: "split",
            enableKeyboardNavigation: !0,
            hideFocus: !1,
            keyboardSpeed: 0,
            initialDelay: 300,
            speed: 30,
            scrollPagePercent: .8
        };
        b = c.checkWeblabTreatment("div#searchStripeOnDetailPage", "searchstripeondetailpage", !0);
        c = c.isNotNull("#ivSoftlinesTitle");
        return b || c ? f : {}
    });
    k.when("A", "softlines-common-utils").execute(function(b, d) {
        function c(b) {
            var c = b || p.event,
                d = k.call(arguments, 1),
                e = 0,
                f = 0,
                l = 0,
                r = 0,
                R = 0,
                da = 0;
            b = m.event.fix(c);
            b.type = "mousewheel";
            "detail" in c && (l = -1 * c.detail);
            "wheelDelta" in c && (l = c.wheelDelta);
            "wheelDeltaY" in c && (l = c.wheelDeltaY);
            "wheelDeltaX" in c && (f = -1 * c.wheelDeltaX);
            "axis" in c && c.axis === c.HORIZONTAL_AXIS && (f = -1 * l, l = 0);
            e = 0 === l ? f : l;
            "deltaY" in c && (e = l = -1 * c.deltaY);
            "deltaX" in c && (f = c.deltaX, 0 === l && (e = -1 * f));
            if (0 !== l || 0 !== f) {
                1 === c.deltaMode ? (r = m.data(this,
                    "mousewheel-line-height"), e *= r, l *= r, f *= r) : 2 === c.deltaMode && (r = m.data(this, "mousewheel-page-height"), e *= r, l *= r, f *= r);
                r = Math.max(Math.abs(l), Math.abs(f));
                if (!h || r < h) h = r, t.settings.adjustOldDeltas && "mousewheel" === c.type && 0 === r % 120 && (h /= 40);
                t.settings.adjustOldDeltas && "mousewheel" === c.type && 0 === r % 120 && (e /= 40, f /= 40, l /= 40);
                e = Math[1 <= e ? "floor" : "ceil"](e / h);
                f = Math[1 <= f ? "floor" : "ceil"](f / h);
                l = Math[1 <= l ? "floor" : "ceil"](l / h);
                t.settings.normalizeOffset && this.getBoundingClientRect && (c = this.getBoundingClientRect(),
                    R = b.clientX - c.left, da = b.clientY - c.top);
                b.deltaX = f;
                b.deltaY = l;
                b.deltaFactor = h;
                b.offsetX = R;
                b.offsetY = da;
                b.deltaMode = 0;
                d.unshift(b, e, f, l);
                H && clearTimeout(H);
                H = setTimeout(a, 200);
                return (m.event.dispatch || m.event.handle).apply(this, d)
            }
        }

        function a() { h = null }
        var f = d.checkWeblabTreatment("div#searchStripeOnDetailPage", "searchstripeondetailpage", !0),
            e = d.isNotNull("#ivSoftlinesTitle");
        if (f || e) {
            var m = b.$,
                f = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
                l = "onwheel" in document || 9 <= document.documentMode ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
                k = Array.prototype.slice,
                H, h;
            if (m.event.fixHooks)
                for (e = f.length; e;) m.event.fixHooks[f[--e]] = m.event.mouseHooks;
            var t = m.event.special.mousewheel = {
                version: "3.1.12",
                setup: function() {
                    if (this.addEventListener)
                        for (var a = l.length; a;) this.addEventListener(l[--a], c, !1);
                    else this.onmousewheel = c;
                    m.data(this, "mousewheel-line-height", t.getLineHeight(this));
                    m.data(this, "mousewheel-page-height", t.getPageHeight(this)) },
                teardown: function() {
                    if (this.removeEventListener)
                        for (var a =
                                l.length; a;) this.removeEventListener(l[--a], c, !1);
                    else this.onmousewheel = null;
                    m.removeData(this, "mousewheel-line-height");
                    m.removeData(this, "mousewheel-page-height")
                },
                getLineHeight: function(a) { a = m(a);
                    var b = a["offsetParent" in m.fn ? "offsetParent" : "parent"]();
                    b.length || (b = m("body"));
                    return parseInt(b.css("fontSize"), 10) || parseInt(a.css("fontSize"), 10) || 16 },
                getPageHeight: function(a) {
                    return m(a).height() },
                settings: { adjustOldDeltas: !0, normalizeOffset: !0 }
            };
            m.fn.extend({
                mousewheel: function(a) {
                    return a ? this.bind("mousewheel",
                        a) : this.trigger("mousewheel")
                },
                unmousewheel: function(a) {
                    return this.unbind("mousewheel", a) }
            })
        }
    });
    k.when("jQuery", "ready").execute(function(b) { 0 < b("#brandFollow").length && k.load.js("https://www.amazon.com/follow/follow_button.js") });
    k.when("jQuery", "A", "atf").execute(function(b, d) {
        d.declarative("fabia-like-button-click", "click", function(c) {
            c = c.data.asin;
            var a;
            a = "";
            a = b("#fabiaLikeButton").hasClass("fabia-like") ? "unlike" : "like";
            c = "/gp/product/ajax-handlers/fabia.html/ref=fabia_" +
                a + "?ie=UTF8&" + b.param({ asin: c, operationType: a });
            b.ajax(c, { method: "post" });
            b("#fabiaLikeButton").toggleClass("fabia-like");
            b("#onClickLikeStatusDisplayText").toggleClass("fabia-text-hidden");
            b("#intialLikeStatusDisplayText").toggleClass("fabia-text-hidden")
        })
    });
    k.when("jQuery", "ueCount", "softlines-common-utils", "atf").execute(function(b, d, c) {
        var a = c.checkWeblabTreatment("div#shouldShowSizingAndFitInformationTogether", "shouldshowsizingandfitinformationtogether", !0),
            f = b("#size-chart-url"),
            e = b("#fitRecommendationsLink");
        b = b("#native_dropdown_selected_size_name");
        var m = "sizeChartLinkClickC",
            l = "fitRecommendationsLinkClickC",
            k = "twisterSizeDropdownCLickC";
        a && (m = "sizeChartLinkClickT1", l = "fitRecommendationsLinkClickT1", k = "twisterSizeDropdownCLickT1");
        c.isNotNull(f) && f.bind("click", function() { d.incrementCounterByOne(m) });
        c.isNotNull(e) && e.bind("mouseenter", function() { d.incrementCounterByOne(l) });
        c.isNotNull(b) && b.bind("click", function() { d.incrementCounterByOne(k) })
    });
    k.when("A",
        "a-modal", "a-tooltip", "jQuery", "imageBlockUtils", "searchStripeScroll", "ueCount").register("ImageBlockSoftlinesImmersiveView", function(b, d, c, a, f, e, m) {
        function l(a) {
            return a.hiRes || a.large || a.main[a.main.length - 1] }

        function k(a) { a = a.replace(/\._(AA|SS)\d+_/, "").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/, "");
            a = a.replace(/\._(US)\d+_/, "").replace(/\._SR\d+,\d+_/, "");
            var b = a.lastIndexOf(".");
            return a = a.substring(0, b) + "._AA50_" + a.substring(b) }

        function H(a) { a.addClass("softlinesImmersiveViewTitle");
            a.text(x.title) }

        function h() { ua("slIVDwellTime");
            Q.height();
            m.logCounter("slIVScrollDepth", +((pa + fa) / Ba).toFixed(2));
            U.hide();
            ra = !1 }

        function t() {
            var b = a("<div />", { id: "ivSoftlinesTitle" });
            H(b);
            a("#ivLargeImage").prepend(b);
            b.click(function() { h() }) }

        function g(b) {
            var c = b.attributes["data-index"].value,
                c = parseInt(c, 10),
                d;
            d = c >= C ? a("#ivMainImage_" + c + "_SlateImage") : a("#ivMainImage_" + c);
            d.empty();
            Q.css("visibility", "hidden");
            Q.animate({ opacity: 1 }, 200);
            d.append(b);
            var e = c;
            b = y.find("#ivStage").find("#ivLargeImage");
            c = b.width();
            b.height();
            d = b.find("#ivMainImage_" + e).find("img");
            d.removeAttr("style");
            var f = d.width(),
                g = d.height();
            e >= C ? (e -= C, f = F[e].videoWidth, g = F[e].videoHeight) : 0 < d.length && (d[0].naturalWidth && (f = d[0].naturalWidth), d[0].naturalHeight && (g = d[0].naturalHeight));
            e = 0;
            e = 1;
            c < f && (e = c / f);
            g *= e;
            f *= e;
            e = (c - f) / 2;
            va ? b.css("cursor", "url('" + x.staticImages.zoomOut + "'), auto") : (b.css("cursor", "-webkit-zoom-out"), b.css("cursor", "-moz-zoom-out"), b.css("cursor", "zoom-out"));
            d.css({ "margin-left": e, width: f, height: g });
            b.css("visibility",
                "visible")
        }

        function n(b) {
            var c;
            if (-1 === ma) return c;
            var d = a(".ivThumb.selected"),
                e = "ivVideo_" + ma;
            d.data("position"); "string" === a.type(e) && (d = e.split("_"), a.isArray(d) && 0 < d.length && "ivVideo" === d[0] && (c = parseInt(d[1], 10) + C, c = y.find("#ivMainImage_" + c + b)));
            return c }

        function I() {
            var a = n("_Video"),
                b = n("_SlateImage");
            a !== r && b !== r && 0 < a.length && 0 < b.length && (a.addClass("aok-hidden"), a.removeClass("aok-block"), b.addClass("aok-block"), b.removeClass("aok-hidden"), ia()) }

        function O() {
            if (0 === Z.length && V === N)
                for (var a =
                        Q.find(".mainImage"), b = 0; b < a.length; b++) Z.push(a[b].offsetTop)
        }

        function D(b) { ha && (O(), 0 === Z.length || ga || a("#ivLargeImage").data("jsp").scrollToY(Z[parseInt(b, 10)])) }

        function ua(a) {
            var b = (new Date).getTime() - Ca;
            m.logCounter(a, b) }

        function aa() { na.addClass("aok-hidden");
            e(Q, { animateScroll: !0 });
            oa = !1;
            D(w.index);
            ka = Q.find(".jspPane");
            Ba = ka.height();
            e(a("#ivThumbs"));
            ua("slIVLoadTime");
            xa && u();
            var b, c = a("#ivMainImage_" + (N - 1));
            c && (b = c.height());
            sa = b }

        function R(b) {
            for (var c = 0; c < C; c++) {
                var d = a("<div>").attr("id",
                    "ivMainImage_" + c);
                d.data("position", c);
                d.addClass("mainImage");
                d.addClass("sl-iv-bottom-padding");
                b.append(d);
                d = a("<img>").attr("src", l(S[c])).addClass("fullscreen");
                d.attr("data-index", c);
                d.width();
                d.height();
                d.load(function(a) { g(this);
                    V += 1;
                    ha = !0;
                    V === N && aa() })
            }
        }

        function da(b) {
            for (var c = 0; c < A; c++) {
                var d = C + c,
                    e = a("<div>").attr("id", "ivMainImage_" + d);
                e.data("position", d);
                e.addClass("mainImage");
                e.addClass("sl-iv-bottom-padding");
                e.css("height", F[c].videoHeight);
                var f = a("<div>").attr("id", "ivMainImage_" +
                    d + "_Video");
                f.data("position", d);
                var h = a("<div>").attr("id", "ivMainImage_" + d + "_SlateImage");
                h.data("position", d);
                e.append(f);
                e.append(h);
                b.append(e);
                d = a("<img>").attr("src", F[c].slateUrl).addClass("fullscreen");
                d.attr("data-index", c + C);
                d.load(function(a) { g(this);
                    V += 1;
                    V === N && aa() })
            }
        }

        function ea(a) {
            I();
            y.find(".ivThumb").removeClass("selected");
            a.addClass("selected");
            var b = a.data("position");
            w.index = b;
            if (a.hasClass("ivThumbVideo")) w.type = "chromeful-video", qa = !1, ma = b, a = a.data("position"), a !== r && (a +=
                C, D(a)), P();
            else { w.type = "image";
                qa = !0;
                ma = wa = -1;
                var c;
                f.isDefined(S) && (c = l(S[w.index]));
                f.isDefined(c) && (a = a.data("position"), a !== r && D(a)) }
        }

        function J() {
            var b = a("#ivMain").closest(".a-popover");
            b.addClass("no-margin");
            b.addClass("no-right-padding");
            b.css({ position: "fixed", width: a(p).width(), height: a(p).height(), top: "0px", left: "0px" });
            b = a("#ivMain");
            b.addClass("no-right-padding");
            b.css({ width: a(p).width() - 18, overflow: "hidden" });
            if (b = a("#ivStage")) b.css("width", a(p).width() - 105), b.addClass("no-left-margin");
            b = U.$container.find(".a-popover-wrapper").find(".a-popover-inner");
            b.addClass("no-right-padding");
            b = a(p).height() - parseInt(b.css("padding-top"), 10) - parseInt(b.css("padding-bottom"), 10);
            y.css("height", b);
            var c = y.find("#ivThumbs"),
                d = parseInt(c.css("margin-top"), 10) + parseInt(c.css("margin-bottom"), 10),
                d = b - d,
                f = y.find("#ivLargeImage");
            f.css({ height: b });
            f.addClass("overflow-hidden");
            ta || (ta = f.width());
            y.find("#ivThumbColumn").css("width", "64px");
            c.addClass("no-left-padding");
            c.css({ height: d, width: "64px" });
            oa || (z(f), c = a("#ivThumbs"), z(c), a("#ivThumbs").css("height", a(p).height() - 18), a("#ivThumbColumn").css("height", a(p).height()), c = (document.body.clientWidth - ya) / 2, 0 >= c ? (c = 0, a("#ivLargeImage").css({ height: b, "margin-left": c, width: "100%" })) : a("#ivLargeImage").css({ height: b, "margin-left": c, width: ta + c }), b = a("#ivLargeImage"), e(b, { animateScroll: !0 }), e(a("#ivThumbs")), u(), ka = b.find(".jspPane"))
        }

        function Y() {
            var a = parseInt(w.index, 10) + 1;
            a >= A || y.find("#ivVideo_" + a).click() }

        function P() {
            if (qa) qa = !1;
            else if (!ra) {
                var b,
                    c = parseInt(w.index, 10);
                a.isArray(F) && A > c && (b = F[w.index]);
                if (f.isDefined(b)) {
                    var d = parseInt(w.index, 10) + C,
                        c = y.find("#ivMainImage_" + d + "_Video"),
                        d = y.find("#ivMainImage_" + d + "_SlateImage"),
                        e = 0,
                        g = parseInt(w.index, 10);
                    A > g && (e = F[w.index].videoHeight);
                    0 < d.length && 0 < c.length && (d.addClass("aok-hidden"), d.removeClass("aok-block"), c.css("height", e), c.addClass("aok-block"), c.removeClass("aok-hidden"));
                    K ? (K.isDetached() && 0 < c.length && K.attach(c[0]), f.loadMediaIntoAiry(K, b, M), K.show()) : (b.disabledViewIds = ["screenSizeToggle"],
                        K = f.createAiryInstanceForChromeful(c, b, M, "ImmersiveView"), M.enableContinuousPlay && K.bind("ended", Y));
                    K.play({ isAsync: !0 });
                    ra = !0
                }
            }
        }

        function T() { w = G.getCurrentItem();
            var b = a("#ivMain").closest(".a-popover-wrapper"),
                c = b.find("i"),
                b = b.find("button");
            c.removeClass("a-icon");
            c.addClass("iv-close-icon");
            b.addClass("iv-close-wrapper");
            c = y.find(la[w.type] + w.index);
            ga = 0 === w.index && oa ? !0 : !1;
            f.isjQueryObjDefined(c) || (c = y.find("#ivImage_0"));
            ea(c) }

        function ia() {
            K && !K.isDetached() && (M.volume = K.getVolume(), K.detach(),
                document.all && !document.addEventListener && (K = null))
        }

        function ja() { ia() }

        function ba() { y.delegate("#ivLargeImage", "click", function(a) { h() });
            y.delegate(".a-icon-close", "click", function(a) { h() }) }

        function X() {
            y.delegate(".ivThumb", "click", function() {
                var b = a(this);
                ra = ga = !1;
                Aa = !0;
                ea(b) });
            y.delegate(".ivThumbVideoListOuter", "click", function() {
                y.find(".ivThumbVideoListOuter").removeClass("selected");
                var b = a(this);
                b.addClass("selected");
                w.type = "chromeful-video";
                b.data("position");
                w.index = b.data("position");
                P()
            })
        }

        function v(b, c) { y.find(".ivThumb").removeClass("selected");
            wa = b - c; - 1 !== ma && ma !== wa && (I(), ra = !1);
            ma = wa;
            w.index = ma;
            w.type = "chromeful-video";
            a("#ivVideo_" + (b - c)).addClass("selected");
            P() }

        function L(b) { y.find(".ivThumb").removeClass("selected");
            w.index = b;
            w.type = "image";
            a("#ivImage_" + b).addClass("selected") }

        function u() {
            var b;
            a("#ivLargeImage").bind("scroll", function(a) { clearTimeout(b);
                b = setTimeout(c, 10) });
            var c = function() {
                ha && O();
                if (Aa) setTimeout(function() { Aa = !1 }, 300);
                else if (ka !== r && 0 < ka.length) {
                    var b = -ka.position().top;
                    !za && 0 < b && (za = !0, m.incrementCounterByOne("slIVScrolled"));
                    var c = a(p).height(),
                        d = 0 < b + c - sa - Z[N - 1];
                    if (.7 > sa / c && d) 0 === A ? L(N - 1) : v(N - 1, C);
                    else
                        for (c = 0; c < N; c++) {
                            var d = (b - (Z[c] - fa)) / fa,
                                e = !1;
                            Z[c] < b && (c + 1 < N ? Z[c + 1] > b && .5 < (Z[c + 1] - b) / fa && (e = !0) : e = !0);
                            if (.7 < d && 1.3 > d || e) { c >= C ? v(c, C) : L(c);
                                pa < b && (pa = b);
                                break } }
                }
            }
        }

        function B() {
            var c;
            (c = !x.useIV) || (c = G.getCurrentItem().color, c = x.colorImages && x.colorImages[c] && 0 < x.colorImages[c].length ? !0 : !1, c = !c);
            if (!c && p.atob) {
                m.incrementCounterByOne("softlinesImmersiveViewOpened");
                Ca = (new Date).getTime();
                ra = !1;
                if (f.isDefined(U)) U.show();
                else { c = a("#auiImmersiveViewDiv");
                    var e = a(p).height(),
                        g = a(p).width();
                    U = d.create(c, { name: "immersiveView", activate: "onclick", width: g, height: e, popoverLabel: "ImmersiveView", hideHeader: !0 });
                    c.click() }
                if (ca) {
                    y && (c = a("#ivLargeImage")) && (z(c), c = a("#ivThumbs"), z(c), a("#ivLargeImage").html(""), Z = [], N = 0, ha = !1, oa = ca = !0, V = 0, xa = !0, za = !1, wa = ma = -1);
                    y = a("#ivMain");
                    Q = a("#ivLargeImage");
                    c = G.getCurrentItem().color;
                    S = x.colorImages[c];
                    var h;
                    x.useChildVideos ? x.colorToVideo &&
                        (h = x.colorToVideo[c]) : h = x.videos;
                    F = h;
                    w = G.getCurrentItem();
                    t();
                    A = C = 0;
                    h = y.find("#ivThumbColumn");
                    h.css("height", fa);
                    h.addClass("overflow-hidden");
                    f.isDefined(S) && (C = S.length);
                    f.isDefined(F) && (A = F.length);
                    N = C + A;
                    h = y.find("#ivThumbs");
                    h.find(".ivRow").not(".placeholder").remove();
                    h.find(".ivThumb").not(".placeholder").remove();
                    c = C + A;
                    h.css("border", "0px");
                    h.css("width", "64px");
                    h.css("height", a(p).height());
                    h.css("overflow", "hidden");
                    h.addClass("no-top-padding");
                    for (e = 0; e < c; e++)
                        if (e < C) {
                            var g = h.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(h),
                                l = S[e].thumb,
                                g = h.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id", "ivImage_" + e).appendTo(g);
                            g.data("position", e);
                            g.find(".ivThumbImage").css("background", 'url("' + k(l) + '") center no-repeat')
                        } else if (g = h.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(h), l = F[e - C], g = h.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id", "ivVideo_" + (e - C)).appendTo(g), g.data("position", e - C), g.find(".ivThumbImage").css("background",
                            'url("' + l.thumbUrl + '") center no-repeat'), f.isDefined(l)) {
                        var n = { position: "triggerTop" },
                            u = y.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");
                        u.find(".ivVideoPopoverTitle").text(l.title);
                        u.find(".ivVideoPopoverDuration").text(l.durationTimestamp);
                        n.inlineContent = u[0];
                        b.declarative.create(g, "a-tooltip", n) }
                    h = (fa - 104) / 2;
                    na = a("<img class='ivLoader' src='" + x.staticImages.spinner + "'/>");
                    na.css("top", h);
                    Q.append(na);
                    h = y.find("#ivLargeImage");
                    h.addClass("aok-block");
                    R(h);
                    da(h);
                    M = x.airyConfig;
                    ca = !1;
                    Da()
                }
            }
        }

        function z(a) {
            (a = a.data("jsp")) && a.destroy() }
        var E, x, G, W, U, y, S, F, C, A, w, K, M, va = a.browser.msie || navigator.userAgent.match(/msie|trident/i),
            ca = !0,
            oa = !0,
            V = 0,
            la = { image: "#ivImage_", chromeful: "#ivVideo_", "chromeless-video": "#ivVideo_" },
            Z = [],
            ga = !1,
            Q, N = 0,
            ha = !1,
            ka, fa = a(p).height(),
            ya = document.body.clientWidth,
            xa = !1,
            sa, qa = !1,
            ta, na, pa = 0,
            Ba = 0,
            Ca, za = !1,
            ra = !1,
            wa = -1,
            ma = -1,
            Aa = !1,
            Da = b.once(function() {
                X();
                ba();
                b.on("a:popover:afterUpdatePosition:immersiveView", J);
                b.on("a:popover:afterShow:immersiveView",
                    T);
                b.on("a:popover:afterHide:immersiveView", ja);
                u()
            });
        return function(a, b, c, d) { E = this;
            x = a;
            G = b;
            W = d;
            x.fullScreenImmersiveView && (E.render = function(a, b, c, d, e, f) { ca = !0 }, E.update = function(a) {}, W.register("imageClick", B)) }
    });
    k.when("jQuery", "A", "ueCount", "vs-url-generator", "cf").execute("visual-search", function(b, d, c, a) {
        function f() { b(T).each(function() { b(this).is(".vs-selected") && (u[t(this)] = h(this)) }) }

        function e(a) {
            a.preventDefault();
            c.incrementCounterByOne("vs-overlay-opened");
            J = b("#visualSearch");
            b("#visualSearchLink");
            ja = J.find(".vs-overlay");
            J.find(".vs-close-link");
            T = J.find(".vs-icon-container");
            ia = J.find(".vs-sprite");
            ia.addClass("vs-unselected");
            T.addClass("vs-selected-sprite");
            E = b(".vs-search-button");
            ba = J.find(".vs-search-button a");
            x = b(".vs-dress-finder-button");
            X = J.find(".vs-dress-finder-button a");
            G = J.find(".vs-search-info");
            da || (L = ba.attr("href"), v = X.attr("href"));
            u = {};
            B = J.find(".vs-search-info");
            z = b(p).scrollTop();
            b("html,body").animate({ scrollTop: 0 }, 300);
            q();
            da = !0;
            l();
            f();
            ja.addClass("vs-overlay-expanded");
            U();
            T.bind("click.visual-search", W);
            setTimeout(function() { b("body").addClass("background-scroll-toggle") }, 300)
        }

        function m(a) { a.preventDefault();
            b("body").removeClass("background-scroll-toggle");
            b("html,body").animate({ scrollTop: z }, 300);
            ja.removeClass("vs-overlay-expanded");
            T.unbind("click.visual-search", W);
            c.incrementCounterByOne("vs-overlay-closed") }

        function l() { ja.bind("touchmove.visual-search", function(a) { b(a.target).closest(".vs-overlay-scroll").length || a.preventDefault() }) }

        function q() {
            0 === D ?
                G.addClass("vs-blank-content") : G.removeClass("vs-blank-content")
        }

        function r() { f();
            var b = a.getSearchPath(u);
            ba.attr("href", L + b) }

        function h(a) {
            return b(a).attr("data-node-id") }

        function t(a) {
            return b(a).attr("data-bin") }

        function g(a) {
            var b = [],
                c;
            for (c in a) a.hasOwnProperty(c) && b.push(c);
            return b }

        function n(a) {
            var b = g(a);
            b.sort();
            for (var c = "", d = b.length, e = 0; e < d; e++) c = c + b[e] + a[b[e]];
            return c }

        function I(a, b) {
            if (null !== a && b >= R) {
                R = b;
                var d = parseInt(a, 10);
                if (0 === d) {
                    var e = g(u).length;
                    c.incrementCounterByOne("vs-no-results-avail-" +
                        e)
                }
                d = d.toLocaleString();
                B.find(".vs-search-results-counter").text(d)
            }
        }

        function O() { Y = J.find("#visualSearchLink");
            P = J.find(".visual-search-background");
            Y.removeClass("a-spinner a-spinner-medium");
            P.addClass("vs-ingress-visible") }
        var D = 0,
            ua = {},
            aa = 0,
            R = 0,
            da = !1,
            ea = { "p_n_feature_nine_browse-bin": "vs-icon-neck", "p_n_feature_two_browse-bin": "vs-icon-length", "p_n_size_browse-vebin": "vs-icon-color", "p_n_feature_three_browse-bin": "vs-icon-dress", "p_n_feature_browse-bin": "vs-icon-sleeve", "p_n_feature_four_browse-bin": "vs-icon-pattern" },
            J = b("#visualSearch"),
            Y, P, T, ia, ja, ba, X, v, L, u, B, z, E, x, G, W = function() {
                var d = b(this).is(".vs-selected"),
                    e = ea[t(this)] + "-" + h(this);
                d ? (b(this).removeClass("vs-selected"), delete u[t(this)], e += "-deselected", D--) : (b(this).addClass("vs-selected"), u[t(this)] = h(this), D++);
                r();
                f();
                d = a.getWizardPath(u);
                X.attr("href", v + d);
                U();
                c.incrementCounterByOne(e);
                q() },
            U = function() {
                var c = R += 1,
                    d = a.getAjaxPath(u),
                    e = n(u);
                e in ua ? I(ua[e], c) : b.ajax(d, {
                    type: "GET",
                    beforeSend: function() {
                        aa += 1;
                        B.hasClass("vs-no-results") && B.removeClass("vs-no-results");
                        0 !== D && B.addClass("vs-search-results-updating");
                        E.add(x).addClass("a-button-disabled");
                        ba.attr("href", "#");
                        x.attr("href", "#")
                    },
                    complete: function() {--aa;
                        0 === aa && B.removeClass("vs-search-results-updating");
                        E.add(x).removeClass("a-button-disabled");
                        r() },
                    success: function(a) { a && (I(a.totalResults, c), ua[e] = a.totalResults) }
                })
            };
        0 < J.length && (k.when("cf").execute(function() { O() }), d.on("a:pageUpdate", function() { J = b("#visualSearch");
            O();
            D = 0 }), b(document).delegate("#visualSearchLink", "click.visual-search", e), b(document).delegate(".vs-close-link",
            "click.visual-search", m))
    });
    k.when("jQuery").register("vs-url-generator", function(b) {
        function d(a, b) { a.charAt(a.length - 1) === b && (a = a.substr(0, a.length - 1));
            return a }

        function c(a) {
            var b = "";
            if (a)
                for (var c in a)
                    if (a.hasOwnProperty(c)) {
                        var m = a[c];
                        if (m) var l = c + ":",
                            l = l + (m + "|"),
                            l = d(l, "|"),
                            b = b + (l + ",") }
            return b = d(b, ",") }
        b = function() {};
        b.prototype.getSearchPath = function(a) {
            return (a = c(a)) ? encodeURIComponent("," + a) + "&fst=vs%3Atrue" : "" };
        b.prototype.getWizardPath = function(a) {
            var b = "?";
            if (a)
                for (var c in a)
                    if (a.hasOwnProperty(c)) {
                        var m =
                            a[c];
                        m && (b += "ps=" + m + "&")
                    }
            return b = d(b, "&")
        };
        b.prototype.getAjaxPath = function(a) { a = c(a);
            return "/af/ajax/vs/?refinementsList=n%3A10445813011%2Cn%3A7141123011%2Cn%3A7147440011%2Cn%3A1040660%2Cn%3A1045024%2C" + encodeURIComponent(a) + "&browseNode=10445813011" };
        return new b
    })
});
/* ******** */
(function(k) {
    var p = window.AmazonUIPageJS || window.P,
        r = p._namespace || p.attributeErrors,
        b = r ? r("SoftlinesRecommendationsAssets") : p;
    b.guardFatal ? b.guardFatal(k)(b, window) : b.execute(function() { k(b, window) }) })(function(k, p, r) {
    k.when("A", "atf").register("recommendations-btf-content-loader", function(b) {
        var d = b.$;
        return { loadImageManually: function(c) {
                var a, f = d(c);
                0 < f.length && (a = b.loadImageManually(f), f = d(c), f.parent().removeClass("a-spinner a-spinner-medium"));
                return a } } });
    k.when("recommendations-btf-content-loader",
        "ready").execute(function(b) { b.loadImageManually("#recommendations .recommendations-sprite-manual-load") })
});
/* ******** */
(function(c) {
    var d = window.AmazonUIPageJS || window.P,
        b = d._namespace || d.attributeErrors,
        a = b ? b("SoftlinesRecommendationsMobileAssets") : d;
    a.guardFatal ? a.guardFatal(c)(a, window) : a.execute(function() { c(a, window) }) })(function(c, d, b) {
    c.when("jQuery", "A", "a-util", "p13n-sc-math", "p13n-sc-call-on-visible", "p13n-sc-lazy-image-loader", "p13n-sc-line-truncator").register("srecs-grid", function(a, b, g, l, m, n, p) {
        function f(e) {
            this.$container = a(e);
            this.$gridCells = this.$container.find(".srecs-grid-cell");
            this.currentCellIndex =
                0;
            this.bindEvents();
            this.adjustGrid();
            this.$container.addClass("show-border");
            n.loadImages(this.$container);
            p.truncateLines(this.$container)
        }
        var k = [".srecs-image-container", ".srecs-product-details-container"];
        f.prototype = {
            bindEvents: function() {
                var e = this;
                a(d).bind("resize.srecs-grid", function() { e.resetGrid();
                    e.adjustGrid() });
                b.on("p13n-sc-infinite-widget:loaded-products", function(a) { e.$gridCells = e.$gridCells.add(a);
                    e.adjustGrid() }) },
            adjustGrid: function() {
                for (var e, a; this.currentCellIndex + 1 < this.$gridCells.length;) e =
                    this.$gridCells.eq(this.currentCellIndex), a = this.$gridCells.eq(this.currentCellIndex + 1), e.height() !== a.height() && this.adjustRowHeight(e, a), this.currentCellIndex += 2
            },
            adjustRowHeight: function(a, d) {
                var c = this;
                g.each(k, function(b) {
                    var f = [a.find(b).first(), d.find(b).first()],
                        h = 0;
                    g.each(f, function(a) { h = l.max(h, a.height()) });
                    g.each(f, function(a) { a.height(h); ".srecs-image-container" === b && c.centerImage(a) }) }) },
            centerImage: function(a) {
                var b = a.find("img").first();
                b.css("margin-top", (a.height() - b.height()) / 2) },
            resetGrid: function() { this.$container.find(k.join(", ")).each(function(b, d) {
                    var c = a(d);
                    c.height("auto");
                    c.hasClass(".srecs-image-container") && c.find("img").first().css("margin-top", "") });
                this.currentCellIndex = 0 }
        };
        c.when("afterReady").execute("srecs-grid:init", function() {
            var b = { distanceY: -500, distanceX: 0 };
            a(".srecs-grid-container").each(function(a, c) { m.register(c, function() { new f(c) }, b) }) });
        return f
    })
});
/* ******** */
(function(l) {
    var n = window.AmazonUIPageJS || window.P,
        r = n._namespace || n.attributeErrors,
        b = r ? r("DeliveryStatic") : n;
    b.guardFatal ? b.guardFatal(l)(b, window) : b.execute(function() { l(b, window) }) })(function(l, n, r) {
    l.when("A", "jQuery", "ready").register("DeliveryCountdownComponent", function(b, c) {
        function f(b, c, g, e, f) { this.strings = b;
            this.asin = c;
            this.deliveryMessageSectionId = g;
            this.countdownElementId = e;
            this.secondsLeft = f;
            this.intervalHandle = null }
        n.DeliveryCountdownHandler = function(b) {
            var c = b.strings,
                g = b.asin,
                e =
                b.deliveryMessageSectionId,
                m = b.fastCountdownElementId,
                h = b.cheapCountdownElementId;
            this.cheapCountdownTimer = this.fastCountdownTimer = null;
            this.start = function(b, d) { 0 < b && (this.fastCountdownTimer = new f(c, g, e, m, b), this.fastCountdownTimer.start());
                0 < d && (this.cheapCountdownTimer = new f(c, g, e, h, d), this.cheapCountdownTimer.start()) };
            this.stop = function() {
                this.fastCountdownTimer && (this.fastCountdownTimer.stop(), this.fastCountdownTimer = null);
                this.cheapCountdownTimer && (this.cheapCountdownTimer.stop(), this.cheapCountdownTimer =
                    null)
            }
        };
        f.prototype.start = function() {
            var c = this;
            this.intervalHandle = b.interval(function() { c && c.updateCountdownText() }, 1E3) };
        f.prototype.stop = function() { this.intervalHandle && n.clearInterval(this.intervalHandle) };
        f.prototype.updateCountdownText = function() {
            this.secondsLeft--;
            if (0 < this.secondsLeft) {
                var b = Math.floor(this.secondsLeft / 60),
                    f = b % 60,
                    b = Math.floor(b / 60),
                    g = this.secondsLeft % 60,
                    e = this.strings.inNext,
                    m = 1 < b ? this.strings.hours : this.strings.hour,
                    h = 1 < f ? this.strings.minutes : this.strings.minute,
                    l = 1 < g ? this.strings.seconds :
                    this.strings.second,
                    p = this.strings.timeSeperator,
                    f = 0 < b && 0 < f ? b + p + m + p + f + p + h + p + e : 0 < b && 0 === f ? b + p + m + e : 0 === b && 0 < f ? f + p + h + e : g + p + l + e;
                c(this.countdownElementId).html(f)
            } else this.stop(), f = "<a href='javacript:window.location.reload();'>" + this.strings.refreshTimeout + "</a>", c(this.deliveryMessageSectionId).html(f)
        }
    });
    l.when("A", "jQuery", "LUXContext").register("LUXController", function(b, c, f) {
        function d() {
            return { addressLabel: h, addressId: q, obfuscatedId: p, countryCode: a, zipCode: w, state: r, city: t, district: v, locationType: u } }

        function k(b) { h = b.addressLabel;
            q = b.addressId;
            p = b.obfuscatedId;
            a = b.countryCode;
            w = b.zipCode;
            r = b.state;
            t = b.city;
            v = b.district;
            u = b.locationType }

        function g(a, c, e) {
            a = b.copy(a);
            a.deviceType = f.deviceType;
            a.pageType = m;
            b.post("/gp/delivery/ajax/address-change.html", {
                contentType: "application/x-www-form-urlencoded;charset=utf-8",
                params: a,
                success: function(a) {
                    if (a.sembuUpdated) {
                        a.address && k(a.address);
                        var h = d();
                        f.fullPageRefresh ? (l.when("LUXMetrics").execute(function(a) { a.logLocationChange(h.locationType) }), n.location.reload()) :
                            (b.trigger("DeliveryAddressDropdown_OnSembuUpdateSuccess", h), b.trigger("DeliveryAddressDropdown_OnAddressChange", h), c && c(), l.when("LUXMetrics").execute(function(a) { a.logLocationChange(h.locationType) }))
                    } else e && e()
                },
                error: function() { b.trigger("DeliveryAddressDropdown_OnSembuUpdateFail", d());
                    e && e() }
            })
        }
        var e = !1,
            m = null,
            h, q, p, a, w, r, t, v, u;
        return {
            locationChangeEventName: "DeliveryAddressDropdown_OnAddressChange",
            locationTypes: {
                defaultAddress: "DEFAULT_ADDRESS",
                accountAddress: "ACCOUNT_ADDRESS",
                lockerAddress: "LOCKER_ADDRESS",
                locationInput: "LOCATION_INPUT",
                realmDefault: "REALM_DEFAULT",
                region: "REGION",
                country: "COUNTRY",
                ip2location: "IP2LOCATION"
            },
            init: function(a) { l.when("LUXResponder").execute(function(c) { e ? b.equals(a, d()) || (k(a), c.refresh()) : (k(a), c.activate(), e = !0) });
                l.when("LUXCustom").execute(function(a) { a.activate() });
                l.when("LUXMetrics").execute(function(a) { m = a.getPageType() }) },
            getLocationData: function() {
                return d() },
            changeLocation: function(a, b, c) { g(a, b, c) }
        }
    });
    l.when("A", "LUXDPOnly").register("LUXDPRefreshController",
        function(b) {
            function c(b) {
                h = b;
                f({ addressId: h.addressId, zipCode: h.zipCode, city: h.city, state: h.state, district: h.district, countryCode: h.countryCode, relatedRequestId: h.relatedRequestId });
                var a = { asin: h.asin, merchantId: h.merchantId, deviceType: h.deviceType, smid: h.smid, wdg: h.wdg, exMerchId: h.exMerchId, oneClick: h.oneClick };
                "T1" === h.useTwisterRefresh && l.when("TwisterUpdateHandler").execute(function(b) { b.init(a);
                    e = !0;
                    m = b });
                l.when("UnifiedLocationUpdateHandler").execute(function(b) { e || (b.init(a), m = b) });
                d(h.obfuscatedId);
                k(h.obfuscatedId)
            }

            function f(c) {
                var a = g('#buybox select[name="quantity"]').val() || 1;
                b.state("unifiedLocation", { addressId: c.addressId, zipCode: c.zipCode, city: c.city, state: c.state, district: c.district, countryCode: c.countryCode, quantity: a, relatedRequestId: c.relatedRequestId }) }

            function d(c) {
                if (h && h.oneClick) {
                    var a = "unifiedLocation1ClickAddress";
                    h.deviceType && "mobileApp" === h.deviceType && (a = "addressID");
                    c || (c = g("#" + a).data("addnewaddress")) || (c = "new");
                    a = '[id="' + a + '"]';
                    0 < g(a).length && g(a).val(c);
                    if (h.deviceType &&
                        h.deviceType in n && (a = b.state("buyNowInfo"))) {
                        var d = a.urlParams,
                            d = 0 < d.indexOf("addressID=") ? d.replace(/(addressID=)[^&]*/, "$1" + c) : d + "&addressID=" + c;
                        a.urlParams = d;
                        b.state("buyNowInfo", a) }
                }
            }

            function k(b) { h && !h.oneClick && "T1" === h.updateAddressForNon1Click && (b || (b = g("#unifiedLocationAddress").data("addnewaddress")), 1 === g("#unifiedLocationAddress").length && g("#unifiedLocationAddress").val(b)) }
            var g = b.$,
                e = !1,
                m = null,
                h = null,
                n = { tabletApp: 1, tabletLargeApp: 1, iPad: 1 };
            b.on("DeliveryAddressDropdown_OnAddressChange",
                function(c) {
                    var a = b.state("unifiedLocation") ? b.state("unifiedLocation").relatedRequestId : r;
                    c.relatedRequestId = a;
                    f(c);
                    d(c.obfuscatedId);
                    k(c.obfuscatedId);
                    null !== m && (m.refresh(), e || b.trigger("LocationUX_OnAddressChange", c)) });
            b.on("UnifiedLocationPostRefresh", function() { b.trigger("diodeAjaxRefreshed") });
            return { init: function(b) { c(b) }, updateFeaturesForNewQuantitySelection: function(c) { f(c);
                    null !== m && (m.refresh(), e || b.trigger("LocationUX_OnAddressChange", c)) } }
        });
    l.when("A", "detailPage:RefreshHandler", "LUXDPOnly",
        "a-state").execute(function(b, c) {
        l.register("TwisterUpdateHandler", function() {
            return {
                init: function(c) { b.state("unifiedLocation", c) },
                refresh: function() {
                    var f = c.getHandlerInstance("LocationUX"),
                        d = [],
                        k = "addressId zipCode city state district countryCode relatedRequestId".split(" ");
                    if (f) {
                        var g = b.state("unifiedLocation"),
                            e;
                        for (e in g)
                            if (g.hasOwnProperty(e) && -1 < b.$.inArray(e, k)) {
                                var m = typeof g[e];
                                ("number" === m || "boolean" === m || "string" === m || g[e] instanceof String) && d.push(f.getURLParamObject(e, null === g[e] ?
                                    "" : g[e], 1))
                            }
                    }
                    0 < d.length && f.doPageRefresh(d)
                }
            }
        })
    });
    l.when("A", "LUXDPOnly", "a-state").execute(function(b) {
        l.register("UnifiedLocationUpdateHandler", function() {
            return { init: function(c) { b.state("unifiedLocation", c) }, refresh: function() { c = 2;
                    f() } } });
        var c = 0,
            f = function() {
                var c = b.state("unifiedLocation");
                c.urlParams = JSON.stringify(c.urlParams);
                for (var f in c)
                    if (c.hasOwnProperty(f)) {
                        var h = typeof c[f]; "number" === h || "boolean" === h || "string" === h || c[f] instanceof String || (null === c[f] ? c[f] = "" : delete c[f]) }
                c && c.asin &&
                    c.merchantId && (b.trigger("UnifiedLocationPreRefresh"), b.ajax("/gp/product/features/unified-location/udp/refresh-features.html?_encoding=UTF-8", { params: c, method: "POST", success: d, error: k, abort: g }))
            },
            d = function() { b.trigger("UnifiedLocationPostRefresh", !0) },
            k = function() { b.trigger("UnifiedLocationPostRefresh", !1);
                0 < --c && f() },
            g = function(c) { b.trigger("UnifiedLocationPostRefresh", !1) }
    });
    l.when("A", "jQuery", "a-popover", "ready").execute(function(b, c, f) {
        function d(d) {
            var f = !1,
                a, m, r, t, v = d.isDDSStyle,
                u = d.selectedAddressId,
                y = d.selectedState,
                A = d.selectedCity,
                B = d.selectedDistrict,
                D = d.isSelectedDefaultShippingAddress,
                G = d.isMunicipality,
                E = d.locationMaxLength,
                F = d.addressPopover,
                z = d.strings;
            this.init = function() { f || (f = !0, a = new h, H(), C(), K(), L(), M()) };
            var H = function() { m = new k("#ddmMyAddressSection");
                    m.afterAddressItemSelectDelegator = function(a, b, c, d) { t.reset([null, null, null]);
                        I(a, b, c, d, !0, !1) } },
                C = function() {
                    r = new g("#ddmCustomerAddressSection");
                    r.afterAddressItemSelectDelegator = function(a, b, c) {
                        t.reset([null, null, null]);
                        I(null,
                            a, b, c, !1, !1)
                    }
                },
                K = function() { t = new e(a, G, F.maxRegionTdSpan, F.classRegionTriggerSelect, F.classRegionTriggerDisable, y, A, B, z.plsSelectState, z.plsSelectCity, z.plsSelectDistrict);
                    t.afterRegionSelectDelegator = function(a, b, c) { I(null, a, b, c, !1, !0) } },
                L = function() { c("#ddmSignInPromptSection").delegate("a", "click", function(a) { n.location.href = "/gp/sign-in.html?" + n.location.search + "&useRedirectOnSuccess=1&path=" + n.location.pathname }) },
                M = function() {
                    c(document).delegate("#ddmAddressPopoverTrigger", "click", function(a) {
                        F.prefetchRegion &&
                            t.prefetchRegion();
                        D ? (c("#ddmSelectedStateText").html(z.defaultShipAddress), c("#ddmSelectedCityText").html(""), c("#ddmSelectedDistrictText").html("")) : (c("#ddmSelectedStateText").html(y), c("#ddmSelectedCityText").html(A), c("#ddmSelectedDistrictText").html(B))
                    });
                    c(n).bind("orientationchange", function(a) { b.delay(function() { c("#ddmDestinationBar").html(c("#ddmDestinationBar").html());
                            t.reShowRegionList() }, 500) })
                },
                I = function(b, d, e, h, g, f) {
                    if (u !== b || y !== d || A !== e || B !== h) u = b, y = d, A = e, B = h, D = g, v && D ? b = z.defaultShipAddress :
                        (b = 1 === a.getCityCount(y) ? y + B : A === B ? y + A : y + A + B, 0 < E && b.length > E && (b = B, b.length > E && (b = b.substr(0, E - 1) + "..."))), c("#ddmAddressPopoverTrigger").find("span.ddm-trigger-text").html(b), N(f), J("DeliveryAddressDropdown_OnAddressChange");
                    O()
                },
                N = function(a) {
                    c.ajax({
                        type: "POST",
                        url: "/gp/delivery/ajax/update-sembu.html",
                        contentType: "application/x-www-form-urlencoded;charset=utf-8",
                        data: { addressId: u ? u : "", state: y, city: A, district: B, isUserDefaultAddress: D ? 1 : 0 },
                        dataType: "json",
                        success: function(b) {
                            a && r.updateList(b);
                            J("DeliveryAddressDropdown_OnSembuUpdateSuccess")
                        },
                        error: function() { J("DeliveryAddressDropdown_OnSembuUpdateFail") }
                    })
                },
                O = function() {
                    var a = F.name;
                    l.when(F.type).execute(function(b) { b.get(a) && b.get(a).hide() }) },
                J = function(a) { b.trigger(a, { addressId: u, state: y, city: A, district: B }) }
        }

        function k(b) {
            this.myAddressSectionId = b;
            this.myAddressNode = b + " ul";
            this.afterAddressItemSelectDelegator = function(a, b, c, d) {};
            var d = this;
            c(this.myAddressNode).delegate("li", "click", function(a) { d.whenClickAddressItem(this) });
            c(this.myAddressNode).delegate("li",
                "mouseenter",
                function(a) { c(this).addClass("a-active") });
            c(this.myAddressNode).delegate("li", "mouseout", function(a) { c(this).removeClass("a-active") })
        }

        function g(b) {
            this.customerAddressSectionId = b;
            this.customerAddressListNode = b + " ul";
            this.afterAddressItemSelectDelegator = function(a, b, c) {};
            var d = this;
            c(this.customerAddressListNode).delegate("li", "click", function(a) { d.whenClickAddressItem(this) });
            c(this.customerAddressListNode).delegate("li", "mouseenter", function(a) { c(this).addClass("a-active") });
            c(this.customerAddressListNode).delegate("li",
                "mouseout",
                function(a) { c(this).removeClass("a-active") })
        }

        function e(b, c, a, d, e, h, g, f, k, m, l) { this.maxRegionTdSpan = a;
            this.classRegionTriggerSelect = d;
            this.classRegionTriggerDisable = e;
            this.regionDataProvider = b;
            this.regionCompArr = null;
            this.afterRegionSelectDelegator = function(a, b, c) {};
            this.initSCDRegion(c, h, g, f, k, m, l) }

        function m(b, d, a, e, h, g, f, k, m, l, n) {
            this.maxRegionTdSpan = b;
            this.classRegionTriggerSelect = d;
            this.classRegionTriggerDisable = a;
            this.regionTriggerId = e;
            this.regionListWrapperId = h;
            this.regionNameTextId =
                g;
            this.regionLabel = m;
            this.regionValue = k;
            this.regionDataProvider = l;
            this.completeSelectCallback = n;
            this.curRegionArray = this.nextRegion = this.preRegion = null;
            this.isRegionListShown = !1;
            var r = this;
            c(document).delegate(this.regionTriggerId, "click", function(a) { r.whenClickRegionTrigger() });
            this.updateRegionTriggerStatus(f)
        }

        function h() {
            var b = null;
            this.getRegionArray = function(b, c) {
                d(!0, function(d) {
                    var e = null;
                    if (d) {
                        for (e = 0; e < b.length; e++)
                            if (b[e]) d = a(d, b[e]);
                            else break;
                        for (var e = [], h = 0; h < d.length; h++)
                            if ("string" ===
                                typeof d[h]) e[h] = d[h];
                            else
                                for (var g in d[h]) "string" === typeof g && (e[h] = g)
                    }
                    c(e)
                })
            };
            this.getCityCount = function(c) { d(!1, null);
                return (c = a(b, c)) ? c.length : 0 };
            var d = function(a, d) { b ? d && d(b) : c.ajax({ type: "GET", async: a, url: "/gp/delivery/ajax/get-cn-region-data.html", dataType: "json", success: function(a) { b = a;
                            d && d(b) }, error: function() { d && d(null) } }) },
                a = function(a, b) {
                    for (var c = 0; c < a.length; c++)
                        if (a[c][b]) return a[c][b];
                    return null }
        }
        l.register("DeliveryAddressDropdown", function() {
            return { init: function(b) {
                    (new d(b)).init() } } });
        k.prototype.whenClickAddressItem = function(b) { b = eval(c(b).attr("address-data"));
            this.afterAddressItemSelectDelegator(b[0].addressId, b[0].state, b[0].city, b[0].district) };
        k.prototype.destroy = function() { c(this.myAddressSectionId).undelegate("li") };
        g.prototype.whenClickAddressItem = function(b) { b = eval(c(b).attr("address-data"));
            this.afterAddressItemSelectDelegator(b[0].state, b[0].city, b[0].district) };
        g.prototype.updateList = function(b) {
            if ((b = eval(b)) && 0 < b.length) {
                for (var d = "", a = c(this.customerAddressListNode).find("li").first(),
                        e = a.html(), a = c.trim(a.text()), h = 0; h < b.length; h++) {
                    var g = b[h].state,
                        f = b[h].city,
                        k = b[h].district;
                    g && f && k && (d += '<li address-data="' + ("[{state:'" + g + "',city:'" + f + "',district:'" + k + "'}]") + '">' + e.replace(a, f === k ? g + f : f + k) + "</li>") }
                "" !== d && (c(this.customerAddressListNode).html(d), c(this.customerAddressSectionId).removeClass("a-hidden"))
            } else c(this.customerAddressSectionId).addClass("a-hidden")
        };
        g.prototype.destroy = function() { c(this.customerAddressListNode).undelegate("li") };
        e.prototype.initSCDRegion = function(b,
            c, a, d, e, h, g) {
            var f = this;
            c = new m(this.maxRegionTdSpan, this.classRegionTriggerSelect, this.classRegionTriggerDisable, "#ddmStateTriggerId", "#ddmStateListWrapper", "#ddmSelectedStateText", !0, c, e, this.regionDataProvider, null);
            b = new m(this.maxRegionTdSpan, this.classRegionTriggerSelect, this.classRegionTriggerDisable, "#ddmCityTriggerId", "#ddmCityListWrapper", "#ddmSelectedCityText", !b, a, h, this.regionDataProvider, null);
            d = new m(this.maxRegionTdSpan, this.classRegionTriggerSelect, this.classRegionTriggerDisable,
                "#ddmDistrictTriggerId", "#ddmDistrictListWrapper", "#ddmSelectedDistrictText", !0, d, g, this.regionDataProvider,
                function(a) { f.afterRegionSelectDelegator(a[0], a[1], a[2]) });
            this.regionCompArr = [c, b, d];
            for (d = 0; d < this.regionCompArr.length; d++) this.regionCompArr[d].preRegion = 0 < d ? this.regionCompArr[d - 1] : null, this.regionCompArr[d].nextRegion = d < this.regionCompArr.length - 1 ? this.regionCompArr[d + 1] : null
        };
        e.prototype.prefetchRegion = function() { this.regionCompArr[0].whenClickRegionTrigger() };
        e.prototype.reShowRegionList =
            function() {
                for (var b = 0; b < this.regionCompArr.length; b++) {
                    var c = this.regionCompArr[b];
                    if (c && c.getIsRegionListShown()) { c.reShowRegionList();
                        break } } };
        e.prototype.reset = function(b) {
            for (var c = 0; c < this.regionCompArr.length; c++) this.regionCompArr[c].updateRegionValue(b[c]), this.regionCompArr[c].unHighlightRegionTrigger(), this.regionCompArr[c].hideRegionList() };
        e.prototype.destroy = function() {
            for (var b = 0; b < this.regionCompArr.length; b++) this.regionCompArr[b].destroy() };
        m.prototype.spinnerHtml = '<div class="a-popover-loading-wrapper a-text-center"><div class="a-box a-color-base-background a-popover-loading"></div></div>';
        m.prototype.getPreSiblingsValue = function() {
            for (var b = [], c = !0, a = this.preRegion; a;) {
                if (!a.regionValue) { c = !1;
                    break }
                b.unshift(a.regionValue);
                a = a.preRegion }
            return c ? b : null };
        m.prototype.updateRegionValue = function(b) { this.regionValue = b;
            c(this.regionTriggerId).find("span.ddm-trigger-text").text(b ? b : this.regionLabel);
            c(this.regionNameTextId).text(b ? b : "");
            this.regionValue || this.updateNextSiblingsTriggerStatus(!1) };
        m.prototype.refreshPreSiblingsValue = function() {
            for (var b = this.preRegion; b;) b.updateRegionValue(b.regionValue),
                b = b.preRegion
        };
        m.prototype.updateNextSiblingsValueToNull = function() {
            for (var b = this.nextRegion; b;) b.updateRegionValue(null), b = b.nextRegion };
        m.prototype.updateRegionTriggerStatus = function(b) { b ? c(this.regionTriggerId).removeClass(this.classRegionTriggerDisable) : c(this.regionTriggerId).addClass(this.classRegionTriggerDisable) };
        m.prototype.updateNextSiblingsTriggerStatus = function(b) {
            for (var c = this.nextRegion; c;) c.updateRegionTriggerStatus(b), c = c.nextRegion };
        m.prototype.highlightRegionTrigger = function() { c(this.regionTriggerId).addClass(this.classRegionTriggerSelect) };
        m.prototype.unHighlightRegionTrigger = function() { c(this.regionTriggerId).removeClass(this.classRegionTriggerSelect) };
        m.prototype.unHighlightSiblingsTrigger = function() {
            for (var b = this.preRegion; b;) b.unHighlightRegionTrigger(), b = b.preRegion;
            for (b = this.nextRegion; b;) b.unHighlightRegionTrigger(), b = b.nextRegion };
        m.prototype.getIsRegionListShown = function() {
            return this.isRegionListShown };
        m.prototype.reShowRegionList = function() { this.curRegionArray && this.showRegionList(this.curRegionArray) };
        m.prototype.showRegionList =
            function(b) {
                this.curRegionArray = b;
                for (var d = 0; d < b.length - 1; ++d)
                    for (var a = d + 1; a < b.length; ++a)
                        if (b[d].length > b[a].length) {
                            var e = b[d];
                            b[d] = b[a];
                            b[a] = e }
                for (var e = 660 < c(this.regionListWrapperId).parents(".a-popover").width() ? 6 : 4, h = "<table><tr>", a = 0; a < e; a++) h += "<td></td>";
                for (var h = h + "</tr>", a = b.length, d = 0, g = !1; d < a;) {
                    for (var h = h + (g ? "<tr class='ddm-region-table-even-row'>" : "<tr>"), f = 0; d < a;) {
                        for (var k = b[d], m = k === this.regionValue ? "ddm-region-item-selected" : "", l = k.length, n = 1; l > this.maxRegionTdSpan * n;) n *= 2;
                        n = n > e ? e : n;
                        if (f + n > e) { f < e && (h += "<td colSpan='" + (e - f) + "'></td>");
                            break } else 1 === f && 1 < n && (h += "<td></td>", f++), h += "<td colSpan='" + n + "'><a href='javascript:;' class='" + m + "'>" + k + "</a></td>", f += n, d === a - 1 && f < e && (h += "<td colSpan='" + (e - f) + "'></td>"), d++
                    }
                    h += "</tr>";
                    g = !g
                }
                h += "</table>";
                c(this.regionListWrapperId).html(h);
                this.isRegionListShown = !0;
                var r = this;
                c(this.regionListWrapperId + " table a").click(function(a) { r.whenClickRegionListItem(c(this).text());
                    a.stopImmediatePropagation() })
            };
        m.prototype.hideRegionList =
            function() { c(this.regionListWrapperId).html("");
                this.isRegionListShown = !1 };
        m.prototype.hideSiblingsRegionList = function() {
            for (var b = this.preRegion; b;) b.hideRegionList(), b = b.preRegion;
            for (b = this.nextRegion; b;) b.hideRegionList(), b = b.nextRegion };
        m.prototype.whenClickRegionTrigger = function() {
            var b = this,
                d = this.getPreSiblingsValue();
            d && (c(this.regionListWrapperId).html(this.spinnerHtml), this.regionDataProvider.getRegionArray(d, function(a) {
                c(b.regionListWrapperId).html("");
                a && 0 < a.length && (1 === a.length ? (b.updateRegionTriggerStatus(!1),
                    b.whenClickRegionListItem(a[0])) : (b.updateRegionTriggerStatus(!0), b.highlightRegionTrigger(), b.showRegionList(a), b.unHighlightSiblingsTrigger(), b.hideSiblingsRegionList()))
            }))
        };
        m.prototype.whenClickRegionListItem = function(b) { this.updateRegionValue(b);
            this.refreshPreSiblingsValue();
            this.updateNextSiblingsValueToNull();
            this.unHighlightRegionTrigger();
            this.hideRegionList();
            if (this.nextRegion) this.nextRegion.whenClickRegionTrigger();
            else if (b = this.getPreSiblingsValue()) b.push(this.regionValue), this.completeSelectCallback(b) };
        m.prototype.destroy = function() { c(document).undelegate(this.regionTriggerId, "click") }
    });
    l.when("A", "jQuery", "LUXContext", "LUXWidgetConfig", "LUXUtils", "LUXController", "LUXMetrics", "ready").register("LUXResponder", function(b, c, f, d, k, g, e) {
        function m(a) {
            var d = null;
            c("#unifiedLocationAddrInput").trigger("updateAlerts", [a]);
            1 === a ? (c("#unifiedLocationAddrInput").addClass("a-form-error"), c("#LUXInvalidZipCodeAlert").width(c("#LUXInvalidZipCodeAlert").parent().width()).removeClass("aok-hidden"), c("#LUXMilitaryZipCodeAlert").addClass("aok-hidden"),
                d = c("#LUXInvalidZipCodeAlert")[0]) : 2 === a ? (c("#unifiedLocationAddrInput").removeClass("a-form-error"), c("#LUXInvalidZipCodeAlert").addClass("aok-hidden"), c("#LUXMilitaryZipCodeAlert").width(c("#LUXMilitaryZipCodeAlert").parent().width()).removeClass("aok-hidden"), d = c("#LUXMilitaryZipCodeAlert")[0]) : 3 === a && (c("#unifiedLocationAddrInput").removeClass("a-form-error"), c("#LUXInvalidZipCodeAlert").addClass("aok-hidden"), c("#LUXMilitaryZipCodeAlert").addClass("aok-hidden"));
            b.capabilities.tablet && d && (document.activeElement.blur(),
                d.scrollIntoView())
        }

        function h(a) { c(".lux-location-label").html(k.generateLocationLabel(a)) }

        function q(a) { a = a.locationType === g.locationTypes.locationInput && a.zipCode ? a.zipCode : "";
            c("#unifiedLocationAddrInput").trigger("updateZipCodeField", a);
            c("#unifiedLocationAddrInput").val(a);
            p();
            m(3) }

        function p() { b.capabilities.tablet && (c("#unifiedLocationAddrInput").val() ? c("#unifiedLocationAddrInput").removeAttr("placeholder") : c("#unifiedLocationAddrInput").attr("placeholder", z)) }

        function a(a) {
            for (var d = k.mapLocationDataToCode(a),
                    e = c("#LUXCountrySelections .a-declarative"), h = e.length - 1; 0 <= h; h--) b.parseJSON(e[h].getAttribute("data-lux-country-selection")).value === d ? c(".a-touch-link", e[h]).addClass("a-active") : c(".a-touch-link", e[h]).removeClass("a-active");
            (e = c("#unifiedLocationCountrySelectionLink div")[0]) && e.childNodes[1] && (a.locationType === g.locationTypes.country || a.locationType === g.locationTypes.region || a.locationType === g.locationTypes.ip2location && !a.state ? (a = k.getNameForCode(d), e.childNodes[1].textContent = a) : e.childNodes[1].textContent =
                F)
        }

        function w(a) { g.changeLocation(a.data, null, null) }

        function r(a) { g.changeLocation(k.mapCodeToLocationData(a.data.value), null, null) }

        function t() {
            var a = c("#unifiedLocationAddrInput").val();
            k.validateZipCode(a) ? g.changeLocation({ zipCode: k.preprocessZipCode(a), locationType: g.locationTypes.locationInput }, function() { m(3) }, function() { m(1) }) : k.isMilitaryZipCode(a) ? m(2) : m(1) }

        function v() {
            l.when(d.addressSelectorComponentType).execute(function(a) { a.get(d.addressSelectorComponentName) && a.get(d.addressSelectorComponentName).hide() });
            l.when(d.countrySelectorComponentType).execute(function(a) { a.get(d.countrySelectorComponentName) && a.get(d.countrySelectorComponentName).hide() })
        }

        function u() {
            var a = c("#unifiedLocationPopoverSelections ul li").has("span .a-touch-link.a-touch-select"),
                h = c("#unifiedLocationPopoverSelections ul li").has(".aok-hidden span .a-touch-link.a-touch-select"),
                a = a.length === h.length;
            h.slice(0, a ? d.initialAddressLoadCount : d.addressReloadCount).removeClass("aok-hidden");
            c("#unifiedLocationPopoverSelections ul li").has(".aok-hidden span .a-touch-link.a-touch-select").length ?
                c("#unifiedLocationSeeMore").removeClass("aok-hidden") : c("#unifiedLocationSeeMore").addClass("aok-hidden");
            b.capabilities.tablet && l.when("a-modal").execute(function(a) { a.get(d.addressSelectorComponentName) && a.get(d.addressSelectorComponentName).updatePosition() });
            a || e.logEvent(e.getEvents().click.seeMore)
        }

        function y(d) {
            h(d);
            for (var e = c("#unifiedLocationPopoverSelections ul li .a-declarative").has(".a-touch-link.a-touch-select"), g = d.addressId, f = e.length - 1; 0 <= f; f--) b.parseJSON(e[f].getAttribute("data-lux-address-selection")).addressId ===
                g ? c(".a-touch-link", e[f]).addClass("a-active") : c(".a-touch-link", e[f]).removeClass("a-active");
            q(d);
            k.shouldPopulateCountrySelector() && a(d);
            v()
        }

        function A() {
            0 === c("#LUXCountrySelections .a-declarative").length && b.post("/gp/delivery/ajax/get-country-selections.html", {
                contentType: "application/x-www-form-urlencoded;charset=utf-8",
                params: k.prepareCountrySelectionGeneratorInput(),
                success: function(e) {
                    c("#LUXCountrySelections").html(e);
                    b.capabilities.tablet && l.when("a-modal").execute(function(a) {
                        a.get(d.countrySelectorComponentName) &&
                            a.get(d.countrySelectorComponentName).updatePosition()
                    });
                    a(g.getLocationData())
                }
            });
            e.logWidgetView(e.getEvents().view.countrySelector)
        }

        function B() { c("#unifiedLocationCountrySelectionLink").is(":hidden") || c("#a-page").hide() }

        function D() {
            var a = g.getLocationData();
            q(a);
            b.capabilities.tablet && c("#a-popover-lgtbox") && c("#a-popover-lgtbox").css({ position: "absolute", top: "0px", left: "0px", width: "100%", height: c("#a-page").css("height") });
            e.logWidgetView(e.getEvents().view.addressSelector) }

        function G() {
            var a =
                g.getLocationData();
            f.isRecognizedCustomer && 0 === c("#unifiedLocationPopoverSelections ul li").has("span .a-touch-link.a-touch-select").length && b.get("/gp/delivery/ajax/get-address-selections.html", { params: { currentAddressId: a.addressId, deviceType: f.deviceType }, success: function(a) { a && (c("#unifiedLocationTitleNoAddress").addClass("aok-hidden"), c("#unifiedLocationTitleSelectAddress").removeClass("aok-hidden"), c("#unifiedLocationPopoverSelections ul li").first().before(a), u(), c("#unifiedLocationSeeMoreDiv").removeClass("aok-hidden")) } })
        }

        function E() { b.capabilities.tablet && document.activeElement.blur() }
        var F = null,
            z = null;
        return {
            activate: function() {
                var f = g.getLocationData();
                e.logPageView(f.locationType);
                var C = c("#unifiedLocationCountrySelectionLink div")[0];
                F = C && C.childNodes[1] ? C.childNodes[1].textContent : "";
                z = c("#unifiedLocationAddrInput").attr("placeholder");
                f.locationType === g.locationTypes.region && h(f);
                b.on("a:popover:beforeShow:" + d.addressSelectorComponentName, D);
                b.on("a:popover:show:" + d.addressSelectorComponentName, G);
                b.on("a:popover:afterHide:" +
                    d.addressSelectorComponentName, E);
                k.shouldPopulateCountrySelector() && (b.on("a:popover:beforeShow:" + d.countrySelectorComponentName, A), b.on("a:popover:afterSlideOut:" + d.countrySelectorComponentName, B), a(f));
                b.on(g.locationChangeEventName, y);
                b.declarative("lux-address-selection", ["click"], w);
                q(f);
                c(document).delegate("#unifiedLocationAddrInput", "keypress", function(a) { 13 === a.which && t() });
                c(document).delegate("#unifiedLocationAddrInput", "focus", function() { m(3) });
                c(document).delegate("#unifiedLocationAddrInput",
                    "keyup",
                    function() { p() });
                c(document).delegate("#unifiedLocationAddrUpdate", "click", t);
                c(document).delegate("#unifiedLocationSignIn", "click", function() {
                    var a = !0;
                    b.capabilities.mobile && l.now("mash").execute(function(b) { b && (a = !1, b.navstack.begin().back().end(), b.showLoginDialog({ successCallback: function() { b.navstack.begin().back().forward(n.location.href).end() } })) });
                    if (a) {
                        var c = d.signInURL + n.location.pathname; "SearchAW" === e.getPageType() && (c += n.location.search);
                        n.location.href = c }
                    e.logEvent(e.getEvents().click.signIn) });
                c(document).delegate("#unifiedLocationSeeMore", "click", u);
                c(document).delegate(".lux-manage-address-link", "click", function(a) { e.logEvent(e.getEvents().click.manageAddressBook);
                    return !0 });
                b.declarative("lux-country-selection", ["click"], r);
                b.capabilities.tablet && c.isFunction(b.on.orientationchange) && (n.scrollBy(0, 1), b.on.orientationchange(function() {
                    l.when("a-modal").execute(function(a) {
                        a.get(d.addressSelectorComponentName) && a.get(d.addressSelectorComponentName).isActive() && a.get(d.addressSelectorComponentName).refresh();
                        a.get(d.countrySelectorComponentName) && a.get(d.countrySelectorComponentName).isActive() && a.get(d.countrySelectorComponentName).refresh()
                    })
                }))
            },
            refresh: function(a) { y(g.getLocationData()) }
        }
    });
    l.declare("LUXWidgetConfig", { addressSelectorComponentName: "LUXAddressSelector", addressSelectorComponentType: "a-secondary-view", countrySelectorComponentName: "LUXCountrySelector", countrySelectorComponentType: "a-secondary-view", initialAddressLoadCount: 5, addressReloadCount: 1E3, signInURL: "/gp/aw/si.html?ie=UTF8&destinationURL=" });
    l.when("A", "jQuery", "LUXController", "RegionNames", "ready").register("LUXRegionData", function(b, c, f, d) {
        function k(c) {
            if (b.objectIsEmpty(c) || !c.countryCode || !c.zipCode) return null;
            for (var d in g)
                if (g.hasOwnProperty(d) && b.reduce(g[d], function(h, f, k) {
                        return h && !b.objectIsEmpty(c[k]) && b.equals(c[k], g[d][k]) }, !0)) return d;
            return null }
        var g = {
            "GB-ML": { countryCode: "GB", zipCode: "KA10 6EB" },
            "GB-NI": { countryCode: "GB", zipCode: "BT1 3ES" },
            "GB-JE": { countryCode: "GB", zipCode: "JE2 4QA" },
            "GB-IS": { countryCode: "GB", zipCode: "ZE1 0BX" },
            "GB-BF": { countryCode: "GB", zipCode: "BFPO 204" },
            "GB-HI": { countryCode: "GB", zipCode: "PH41 4PU" },
            "DE-ML": { countryCode: "DE", zipCode: "60313" },
            "DE-GI": { countryCode: "DE", zipCode: "27498" },
            "FR-ML": { countryCode: "FR", zipCode: "75001" },
            "FR-CH": { countryCode: "FR", zipCode: "20000" },
            "FR-GP": { countryCode: "FR", zipCode: "97100" },
            "FR-GY": { countryCode: "FR", zipCode: "97300" },
            "FR-MC": { countryCode: "FR", zipCode: "98000" },
            "FR-MQ": { countryCode: "FR", zipCode: "97200" },
            "FR-NC": { countryCode: "FR", zipCode: "98800" },
            "FR-PF": {
                countryCode: "FR",
                zipCode: "98700"
            },
            "FR-RE": { countryCode: "FR", zipCode: "97400" },
            "FR-SB": { countryCode: "FR", zipCode: "97133" },
            "FR-SM": { countryCode: "FR", zipCode: "97150" },
            "FR-SP": { countryCode: "FR", zipCode: "97500" },
            "FR-WF": { countryCode: "FR", zipCode: "98611" },
            "FR-YT": { countryCode: "FR", zipCode: "97600" },
            "IT-ML": { countryCode: "IT", zipCode: "20125" },
            "IT-II": { countryCode: "IT", zipCode: "09121" },
            "ES-ML": { countryCode: "ES", zipCode: "28004" },
            "ES-BI": { countryCode: "ES", zipCode: "07003" },
            "ES-CI": { countryCode: "ES", zipCode: "35005" },
            "BR-SP": {
                countryCode: "BR",
                zipCode: "01319900"
            }
        };
        return { getRegions: function() {
                return g }, mapLocationDataToRegionCode: function(b) {
                return k(b) }, mapRegionCodeToLocationData: function(b) { b = g.hasOwnProperty(b) ? c.extend({}, { addressLabel: d[b], countryCode: g[b].countryCode, zipCode: g[b].zipCode, state: g[b].state, city: g[b].city, locationType: f.locationTypes.region }) : null;
                return b } }
    });
    l.when("A", "jQuery", "ready").register("LUXRegionConfig", function(b, c) {
        var f = [],
            d = "AD AE AF AG AI AL AM AN AO AQ AR AS AT AU AW AX AZ BA BB BD BE BF BG BH BI BJ BL BM BN BO BQ BR BS BT BV BW BY BZ CA CC CD CF CG CH CI CK CL CM CN CO CR CU CV CW CX CY CZ DE DJ DK DM DO DZ EC EE EG EH ER ES ET FI FJ FK FM FO FR GA GB GD GE GF GG GH GI GL GM GN GP GQ GR GS GT GU GW GY HK HM HN HR HT HU ID IE IL IM IN IO IQ IR IS IT JE JM JO JP KE KG KH KI KM KN KP KR KW KY KZ LA LB LC LI LK LR LS LT LU LV LY MA MC MD ME MF MG MH MK ML MM MN MO MP MQ MR MS MT MU MV MW MX MY MZ NA NC NE NF NG NI NL NO NP NR NU NZ OM PA PE PF PG PH PK PL PM PN PR PS PT PW PY QA RE RO RS RU RW SA SB SC SD SE SG SH SI SJ SK SL SM SN SO SR SS ST SV SX SY SZ TC TD TF TG TH TJ TK TL TM TN TO TR TT TV TW TZ UA UG UM US UY UZ VA VC VE VG VI VN VU WF WS XK YE YT ZA ZM ZW".split(" "),
            k = /^\d{5}([ \-]\d{4})?$/,
            g = /^[ \t]*([AFD](\.?)([ \t]?)P(\.?)([ \t]?)O(\.?)[ \t]*[A-Z]{2}[ \t]*[0-9]{5}([ \-][0-9]{4})?)[ \t]*$/;
        return { getPrimarySelections: function() {
                return f }, getSecondarySelections: function() {
                return d }, getZipCodePattern: function() {
                return k }, getMilitaryZipCodePattern: function() {
                return g }, preprocessZipCode: function(b) {
                return b.toUpperCase().trim().substring(0, 5) } }
    });
    l.declare("RegionNames", {
        "GB-ML": "UK - Mainland",
        "GB-BF": "UK - BFPO",
        "GB-JE": "UK - Channel Islands",
        "GB-IS": "UK - Islands",
        "GB-NI": "UK - Northern Ireland",
        "GB-HI": "UK - Scottish Highlands",
        "DE-ML": "Germany - Mainland",
        "DE-GI": "German Islands",
        "FR-ML": "France - Mainland",
        "FR-CH": "Corsica",
        "FR-GP": "Guadeloupe",
        "FR-GY": "Guyane",
        "FR-MC": "Monaco",
        "FR-MQ": "Martinique",
        "FR-NC": "New Caledonia",
        "FR-PF": "French Polynesia",
        "FR-RE": "Reunion",
        "FR-SB": "Saint Barthélemy",
        "FR-SM": "Saint Martin",
        "FR-SP": "Saint Pierre and Miquelon",
        "FR-WF": "Wallis and Futuna Islands",
        "FR-YT": "Mayotte",
        "IT-ML": "Italy - Mainland",
        "IT-II": "Italian Islands",
        "ES-ML": "Spain - Mainland",
        "ES-BI": "Spain - Balearic Islands",
        "ES-CI": "Spain - Canary Islands, Ceuta and Melilla",
        "BR-SP": "Brazil"
    });
    l.declare("CountryNames", {
        AD: "安道尔",
        AE: "阿联酋",
        AF: "阿富汗",
        AG: "安提瓜和巴布达",
        AI: "安圭拉",
        AL: "阿尔巴尼亚",
        AM: "亚美尼亚",
        AN: "荷属安的列斯",
        AO: "安哥拉",
        AQ: "南极洲",
        AR: "阿根廷",
        AS: "美属萨摩亚",
        AT: "奥地利",
        AU: "澳大利亚",
        AW: "阿鲁巴岛",
        AX: "奥兰群岛",
        AZ: "阿塞拜疆",
        BA: "波黑",
        BB: "巴巴多斯",
        BD: "孟加拉国",
        BE: "比利时",
        BF: "布基纳法索",
        BG: "保加利亚",
        BH: "巴林",
        BI: "布隆迪",
        BJ: "贝宁",
        BL: "圣巴泰勒米",
        BM: "百慕大",
        BN: "文莱",
        BO: "玻利维亚",
        BQ: "博奈尔岛、圣尤斯特歇、萨巴",
        BR: "巴西",
        BS: "巴哈马",
        BT: "不丹",
        BV: "布维岛",
        BW: "博茨瓦纳",
        BY: "白俄罗斯",
        BZ: "伯利兹",
        CA: "加拿大",
        CC: "科科斯（基林）群岛",
        CD: "刚果（金）",
        CF: "中非共和国",
        CG: "刚果",
        CH: "瑞士",
        CI: "科特迪瓦",
        CK: "库克群岛",
        CL: "智利",
        CM: "喀麦隆",
        CN: "中国大陆",
        CO: "哥伦比亚",
        CR: "哥斯达黎加",
        CS: "塞黑",
        CU: "古巴",
        CV: "佛得角",
        CW: "库拉索岛",
        CX: "圣诞岛",
        CY: "塞浦路斯",
        CZ: "捷克共和国",
        DE: "德国",
        DJ: "吉布提",
        DK: "丹麦",
        DM: "多米尼加",
        DO: "多米尼加共和国",
        DZ: "阿尔及利亚",
        EC: "厄瓜多尔",
        EE: "爱沙尼亚",
        EG: "埃及",
        EH: "西撒哈拉",
        ER: "厄立特里亚",
        ES: "西班牙",
        ET: "埃塞俄比亚",
        FI: "芬兰",
        FJ: "斐济",
        FK: "福克兰群岛（马尔维纳斯）",
        FM: "密克罗尼西亚",
        FO: "法罗群岛",
        FR: "法国",
        GA: "加蓬",
        GB: "英国",
        GD: "格林纳达",
        GE: "格鲁吉亚",
        GF: "法属圭亚那",
        GG: "格恩西岛",
        GH: "加纳",
        GI: "直布罗陀",
        GL: "格陵兰岛",
        GM: "冈比亚",
        GN: "几内亚",
        GP: "瓜德罗普岛",
        GQ: "赤道几内亚",
        GR: "希腊",
        GS: "南乔治亚和南桑德韦奇群岛",
        GT: "危地马拉",
        GU: "关岛",
        GW: "几内亚比绍",
        GY: "圭亚那",
        HK: "香港",
        HM: "赫德岛和麦克唐纳群岛",
        HN: "洪都拉斯",
        HR: "克罗地亚",
        HT: "海地",
        HU: "匈牙利",
        ID: "印度尼西亚",
        IE: "爱尔兰",
        IL: "以色列",
        IM: "马恩岛",
        IN: "印度",
        IO: "英属印度洋领地",
        IQ: "伊拉克",
        IR: "伊朗",
        IS: "冰岛",
        IT: "意大利",
        JE: "泽西岛",
        JM: "牙买加",
        JO: "约旦",
        JP: "日本",
        KE: "肯尼亚",
        KG: "吉尔吉斯坦",
        KH: "柬埔寨",
        KI: "基里巴斯",
        KM: "科摩罗",
        KN: "圣基茨和尼维斯",
        KP: "朝鲜",
        KR: "韩国",
        KW: "科威特",
        KY: "开曼群岛",
        KZ: "哈萨克斯坦",
        LA: "老挝",
        LB: "黎巴嫩",
        LC: "圣卢西亚",
        LI: "列支敦士登",
        LK: "斯里兰卡",
        LR: "利比里亚",
        LS: "莱索托",
        LT: "立陶宛",
        LU: "卢森堡",
        LV: "拉脱维亚",
        LY: "利比亚",
        MA: "摩洛哥",
        MC: "摩纳哥",
        MD: "摩尔多瓦",
        ME: "黑山",
        MF: "圣马丁",
        MG: "马达加斯加",
        MH: "马绍尔群岛",
        MK: "马其顿",
        ML: "马里",
        MM: "缅甸",
        MN: "蒙古",
        MO: "澳门",
        MP: "北马里亚纳群岛",
        MQ: "马提尼克岛",
        MR: "毛里塔尼亚",
        MS: "蒙特塞拉特岛",
        MT: "马耳他",
        MU: "毛里求斯",
        MV: "马尔代夫",
        MW: "马拉维",
        MX: "墨西哥",
        MY: "马来西亚",
        MZ: "莫桑比克",
        NA: "纳米比亚",
        NC: "新喀里多尼亚",
        NE: "尼日尔",
        NF: "诺福克岛",
        NG: "尼日利亚",
        NI: "尼加拉瓜",
        NL: "荷兰",
        NO: "挪威",
        NP: "尼泊尔",
        NR: "瑙鲁",
        NU: "纽埃岛",
        NZ: "新西兰",
        OM: "阿曼",
        PA: "巴拿马",
        PE: "秘鲁",
        PF: "法属波利尼西亚",
        PG: "巴布亚新几内亚",
        PH: "菲律宾",
        PK: "巴基斯坦",
        PL: "波兰",
        PM: "圣皮埃尔和密克隆岛",
        PN: "皮特凯恩",
        PR: "波多黎各",
        PS: "巴勒斯坦",
        PT: "葡萄牙",
        PW: "帕劳群岛",
        PY: "巴拉圭",
        QA: "卡塔尔",
        RE: "留尼旺岛",
        RO: "罗马尼亚",
        RS: "塞尔维亚",
        RU: "俄罗斯",
        RW: "卢旺达",
        SA: "沙特阿拉伯",
        SB: "所罗门群岛",
        SC: "塞舌尔",
        SD: "苏丹",
        SE: "瑞典",
        SG: "新加坡",
        SH: "圣赫勒拿、阿森松和特里斯坦 达库尼亚",
        SI: "斯洛文尼亚",
        SJ: "斯瓦尔巴岛和扬马延岛",
        SK: "斯洛伐克",
        SL: "塞拉利昂",
        SM: "圣马力诺",
        SN: "塞内加尔",
        SO: "索马里",
        SR: "苏里南",
        SS: "南苏丹",
        ST: "圣多美和普林西比",
        SV: "萨尔瓦多",
        SX: "圣马丁岛",
        SY: "叙利亚",
        SZ: "斯威士兰",
        TC: "特克斯和凯科斯群岛",
        TD: "乍得",
        TF: "法属南部领土",
        TG: "多哥",
        TH: "泰国",
        TJ: "塔吉克斯坦",
        TK: "托克劳群岛",
        TL: "东帝汶",
        TM: "土库曼斯坦",
        TN: "突尼斯",
        TO: "汤加",
        TR: "土耳其",
        TT: "特立尼达和多巴哥",
        TV: "图瓦卢",
        TW: "台湾",
        TZ: "坦桑尼亚",
        UA: "乌克兰",
        UG: "乌干达",
        UM: "美国本土外小岛屿",
        US: "美国",
        UY: "乌拉圭",
        UZ: "乌兹别克斯坦",
        VA: "梵蒂冈",
        VC: "圣文森特和格林纳丁斯群岛",
        VE: "委内瑞拉",
        VG: "英属维尔京群岛",
        VI: "美属维尔京群岛",
        VN: "越南",
        VU: "瓦努阿图",
        WF: "瓦利斯群岛和富图纳群岛",
        WS: "萨摩亚群岛",
        XK: "科索沃",
        YE: "也门",
        YT: "马约特岛",
        YU: "南斯拉夫",
        ZA: "南非",
        ZM: "赞比亚",
        ZW: "津巴布韦"
    });
    l.when("A", "jQuery", "LUXController", "LUXRegionData", "LUXRegionConfig", "LUXContext", "CountryNames", "RegionNames").register("LUXUtils", function(b, c, f, d, k, g, e, m) {
        function h(a) {
            return !b.objectIsEmpty(a) && a.countryCode && e.hasOwnProperty(a.countryCode) ? b.equals(a.locationType, f.locationTypes.country) ? a.countryCode : b.equals(a.locationType, f.locationTypes.region) ?
                d.mapLocationDataToRegionCode(a) : d.mapLocationDataToRegionCode(a) || a.countryCode : null
        }

        function l(a) {
            return e.hasOwnProperty(a) ? e[a] : m.hasOwnProperty(a) ? m[a] : null }

        function p(a) {
            var c = {};
            if (!b.objectIsEmpty(a))
                for (var d = a.length, e = 0; e < d; e++) c[l(a[e])] = a[e];
            return c }
        return {
            getNameForCode: function(a) {
                return l(a) },
            mapCodeToLocationData: function(a) { a = a ? e.hasOwnProperty(a) ? { countryCode: a, locationType: f.locationTypes.country, district: a } : d.mapRegionCodeToLocationData(a) : null;
                return a },
            mapLocationDataToCode: function(a) {
                return h(a) },
            generateLocationLabel: function(a) {
                var b = "";
                a.addressLabel ? b = a.addressLabel : a.locationType !== f.locationTypes.region && a.locationType !== f.locationTypes.country && a.zipCode ? (k.formatZipCodeForAddressLabel && (a.zipCode = k.formatZipCodeForAddressLabel(a.zipCode)), b = a.city || a.state ? k.generateDiffLocationLabelForZip ? k.generateDiffLocationLabelForZip(a) : (a.city ? a.city + ", " : "") + (a.state ? a.state + " " : "") + a.zipCode : k.formatZipCodeForAddressLabel ? a.zipCode : l(h(a))) : b = l(h(a));
                return b },
            prepareCountrySelectionGeneratorInput: function() {
                return {
                    deviceType: g.deviceType,
                    primarySelections: JSON.stringify(p(k.getPrimarySelections())),
                    primarySelectionsOrder: JSON.stringify(k.getPrimarySelections()),
                    secondarySelections: JSON.stringify(p(k.getSecondarySelections()))
                }
            },
            validateZipCode: function(a) {
                return !b.objectIsEmpty(a) && k.getZipCodePattern().test(a.toUpperCase()) },
            preprocessZipCode: function(a) {
                return k.preprocessZipCode(a) },
            isMilitaryZipCode: function(a) {
                return !b.objectIsEmpty(a) && k.getMilitaryZipCodePattern().test(a.toUpperCase()) },
            shouldPopulateCountrySelector: function() {
                var a = !0;
                "undefined" !== typeof g.shouldPopulateCountrySelector && (a = g.shouldPopulateCountrySelector);
                return a
            }
        }
    });
    l.when("A", "jQuery", "LUXContext", "ready").register("LUXMetrics", function(b, c, f) {
        function d(b, c) { n.ueLogError && b && n.ueLogError({ message: b }, { logLevel: c || "ERROR", attribution: "LocationUX" }) }

        function k(b) { n.ue ? n.ue.count(b, (n.ue.count(b) || 0) + 1) : d("Failed to increment metrics counter: " + b + " because window.ue is not present.", "ERROR") }

        function g() {
            var c;
            if (c = n.ue_pty) a: {
                c = n.ue_pty;
                for (var d in e)
                    if (e.hasOwnProperty(d) &&
                        -1 !== b.indexOfArray(e[d], c)) { c = !0;
                        break a }
                c = !1
            }
            return c ? n.ue_pty : "unrecognizedPage"
        }
        var e = { detail: ["Detail", "DetailAW", "DetailWebView", "TabletUDP"], search: ["Search", "SearchAW"], offerListing: ["OfferListing", "OfferListingAW", "OfferListingMobileAppAW"] },
            m = { click: { signIn: "click.signIn", seeMore: "click.seeMore", manageAddressBook: "click.manageAddressBook" }, view: { page: "view.page", addressSelector: "view.addressSelector", countrySelector: "view.countrySelector" }, selection: "selection", override: "override" };
        return {
            getPageType: function() {
                return g() },
            getEvents: function() {
                return m },
            logLocationChange: function(c) {
                l.when("LUXController").execute(function(d) {
                    var l = g(),
                        a = "LocationUX." + l,
                        a = b.equals(c, d.locationTypes.locationInput) || b.equals(c, d.locationTypes.realmDefault) || b.equals(c, d.locationTypes.ip2location) ? a + ("." + m.override + "." + c) : a + ("." + m.selection + "." + c);
                    b.equals(c, d.locationTypes.defaultAddress) || b.equals(c, d.locationTypes.accountAddress) || b.equals(c, d.locationTypes.lockerAddress) || (a += "." + (f.isRecognizedCustomer ? "recognized" : "unrecognized")); - 1 !== b.indexOfArray(e.detail, l) && f.isRecognizedCustomer && (a += "." + (f.isOneClick ? "1Click" : "Non1Click"));
                    k(a)
                })
            },
            logPageView: function(c) {
                l.when("LUXController").execute(function(d) {
                    var l = g(),
                        a = "LocationUX." + l + "." + m.view.page + "." + c;
                    b.equals(c, d.locationTypes.defaultAddress) || b.equals(c, d.locationTypes.accountAddress) || b.equals(c, d.locationTypes.lockerAddress) || (a += "." + (f.isRecognizedCustomer ? "recognized" : "unrecognized")); - 1 !== b.indexOfArray(e.detail, l) && f.isRecognizedCustomer && (a += "." + (f.isOneClick ? "1Click" :
                        "Non1Click"));
                    k(a)
                })
            },
            logWidgetView: function(c) {
                var d = g();
                c = "LocationUX." + d + "." + c + "." + (f.isRecognizedCustomer ? "recognized" : "unrecognized"); - 1 !== b.indexOfArray(e.detail, d) && f.isRecognizedCustomer && (c += "." + (f.isOneClick ? "1Click" : "Non1Click"));
                k(c) },
            logEvent: function(b) { b = "LocationUX." + g() + "." + b;
                k(b) },
            logError: function(b, c) { d(b, c) }
        }
    });
    l.when("A", "GLUXWidget").execute(function(b, c) { b.on("packard:glow:destinationChangeAll", function() { n.location.reload() }) })
});
/* ******** */
(function(a) { a.execute(function() {}) })(function() {
    var a = window.AmazonUIPageJS || window.P,
        b = a._namespace || a.attributeErrors;
    return b ? b("CashOnDeliveryAssets") : a }(), window);
/* ******** */
(function(l) {
    var n = window.AmazonUIPageJS || window.P,
        r = n._namespace || n.attributeErrors,
        a = r ? r("AskAuiAssets") : n;
    a.guardFatal ? a.guardFatal(l)(a, window) : a.execute(function() { l(a, window) }) })(function(l, n, r) {
    l.when("jQuery", "ready").execute(function(a) { a("body").delegate(".askInlineWidget .cdShowLess, .askInlineWidget .cdReadMore", "click touchstart", function(e) { e.preventDefault();
            a(e.target).parents(".cdJSEnabledText").toggleClass("askShowMore") }) });
    l.when("jQuery", "load").execute(function(a) {
        var e = a(".askSubHeader");
        0 < e.length && !n.pageYOffset && a("html, body").animate({ scrollTop: e.offset().top }, 0)
    });
    l.when("jQuery", "ready").execute(function(a) {
        function e() {
            return a(n).scrollTop() + 5 >= a(document).height() - a(n).height() }

        function c() { e() && f() }

        function g() { a("body").hasClass("allAnswersScrolling") ? a(document).scroll(c) : (a(".loadMoreAnswersMobile").show(), a(".loadMoreAnswersMobile").bind("touchstart click", f)) }

        function f() {
            var k = a(".answersLoadingSpinner"),
                p = a(".loadMoreAnswersMobile"),
                m = a.trim(a(".askPage input[name=askQuestion]").val()),
                q = a.trim(a(".askPage input[name=askSort]").val()),
                t = a(".askPage input[name=askLanguage]").val(),
                l = a(".askPage input[name=askAsin]").val(),
                m = "/ask/answers/inline/" + m + "/" + d + "?pageSize=6&sort=" + q + "&language=" + t;
            l !== r && (m += "&asin=" + l);
            k.show();
            p.hide();
            a(".askMobileFailedToFetchMoreAnswers").hide();
            a(document).unbind("scroll", c);
            p.unbind("touchstart click", f);
            a.ajax({
                url: m,
                data: {},
                dataType: "html",
                cache: !1,
                timeout: 2E3,
                success: function(c) {
                    k.hide();
                    a(".askPage .answerBox").append(c);
                    h && (e() ? f() : h = !1);
                    "true" ===
                    a.trim(a("input[name=moreAnswersAfterPage" + d + "]").val()) ? g() : a(".loadMoreAnswersMobile").hide();
                    a(document).trigger("ajax:success");
                    d += 1
                },
                error: function() { k.hide();
                    a(".askMobileFailedToFetchMoreAnswers").show();
                    g() }
            })
        }
        var h = !0,
            d = 3;
        a("body").hasClass("allAnswersScrolling") && (e() ? f() : h = !1, a(document).scroll(c));
        a(".loadMoreAnswersMobile").bind("touchstart click", f)
    });
    l.when("jQuery", "ready").execute(function(a) {
        var e = !0;
        a("body").delegate(".askQuestionForm", "submit", function(f) {
            f = a(f.currentTarget);
            var h = f.find("[name='askQuestionText']"),
                d = h.val(),
                h = h.attr("placeholder");
            if ("undefined" === typeof d || d.match(/^\s*$/) || d === h) return f.attr("class", "askQuestionForm hasEmptyQuestion"), !1;
            if (e) return e = !1, g(f, d, c), !1;
            f.attr("class", "askQuestionForm");
            return !0
        });
        var c = function(a, c) { c ? a.trigger("submit") : a.attr("class", "askQuestionForm hasBadQuestion") },
            g = function(c, e, d) {
                0 <= e.indexOf("?") ? d(c, !0) : a.ajax({
                    url: "/gp/customer-forum/dynamic-update/validate-post.html",
                    dataType: "json",
                    data: { body: e, checkIsQuestion: 1 },
                    success: function(a) { d(c, a.hasError || a.content.isQuestion);
                        c.trigger("ajax:success") },
                    error: function(a, e, m) { d(c, !0);
                        c.trigger("ajax:error") }
                })
            }
    });
    l.when("jQuery", "ready").register("askPostQuestionValidation", function(a) {
        function e(e) {
            var m = a(e.currentTarget),
                k = h.val(),
                t = h.attr("placeholder");
            a(".askError").hide();
            return "undefined" === typeof k || k.match(/^\s*$/) || k === t ? (d.show(), e.stopImmediatePropagation(), m.trigger("askValidationComplete"), !1) : f ? (f = !1, g(m, k, c), e.stopImmediatePropagation(), m.trigger("askValidationComplete"), !1) : !0
        }

        function c(a, d) { d ? a.trigger("submit") : k.show() }

        function g(d, c, e) { 0 <= c.indexOf("?") ? e(d, !0) : a.ajax({ url: "/gp/customer-forum/dynamic-update/validate-post.html", dataType: "json", data: { body: c, checkIsQuestion: 1 }, success: function(a) { e(d, a.hasError || a.content.isQuestion);
                    d.trigger("askValidationComplete") }, error: function(a, c, f) { e(d, !0);
                    d.trigger("askValidationComplete") } }) }
        var f = !0,
            h, d = a(".askEmptyQuestionError"),
            k = a(".askBadQuestionError");
        return { setup: function(a, d, c) { h = c;
                a.delegate(d, "submit", e) } }
    });
    l.when("jQuery", "askHuddlesControl", "ready").execute(function(a, e) {
        function c(c) {
            var f = "/ask/questions/inline/" + a.trim(a(".askWidgetQuestions input.askAsin").val()) + "/" + c;
            a.ajax({
                url: f,
                data: {},
                dataType: "html",
                cache: !1,
                timeout: 5E3,
                success: function(f) {
                    a(".askInlineWidget .askFailedToFetchMoreQuestions").hide();
                    a(".askInlineWidget .askLoadMoreQuestions").hide();
                    a(".askInlineWidget .askMoreQandAResults").append(f);
                    a(".askInlineWidget .askTopQandALoadMoreQuestions").hide();
                    f = c + 1;
                    a(".askWidgetQuestions input.nextPage").val(f);
                    f = document.getElementById("askInlineQuestionsPage-" + c);
                    var d;
                    if (d = "undefined" !== typeof f && null !== f) d = f.getBoundingClientRect(), d = !(0 <= d.top && 0 <= d.left && d.bottom <= (n.innerHeight || a(n).height()) && d.right <= (n.innerWidth || a(n).width()));
                    if (d) { d = 0;
                        do d += f.offsetTop || 0, f = f.offsetParent; while (f);
                        f = d;
                        a("html, body").animate({ scrollTop: f }, "slow") }
                    e.initializeHuddlesLinks(a(".askInlineWidget .askMoreQandAResults"), "dp")
                },
                error: function() { a(".askInlineWidget .askFailedToFetchMoreQuestions").show() }
            })
        }
        a("body").delegate(".askInlineWidget .askSeeMoreQuestionsLink",
            "click",
            function(a) { c(2);
                a.preventDefault() });
        a("body").delegate(".askInlineWidget .askLoadMoreQuestionsLink", "click", function(e) {
            var f = parseInt(a(".askWidgetQuestions input.nextPage").val(), 10) || 0;
            0 < f && (c(f), e.preventDefault()) })
    });
    l.when("jQuery", "ready").execute(function(a) {
        function e(d) {
            d = document.getElementById(d);
            var c;
            if (c = "undefined" !== typeof d && null !== d) c = d.getBoundingClientRect(), c = !(0 <= c.top && 0 <= c.left && c.bottom <= (n.innerHeight || a(n).height()) && c.right <= (n.innerWidth || a(n).width()));
            if (c) {
                c =
                    0;
                do c += d.offsetTop || 0, d = d.offsetParent; while (d);
                d = c;
                a("html, body").animate({ scrollTop: d }, "slow")
            }
        }

        function c() {
            var d = a(".askQuestionForm input.askAsin").val();
            return d && 0 !== d.length ? "?asin=" + d : "" }

        function g(d, k) {
            if (d) {
                var g = c();
                a.ajax({
                    url: "/ask/answers/inline/" + d + "/" + k + g,
                    data: {},
                    dataType: "html",
                    cache: !1,
                    timeout: 5E3,
                    success: function(c) {
                        a(".askInlineWidget #failed-to-fetch-answers-" + d).hide();
                        a(".askInlineWidget #askSeeAllAnswersLink-" + d).hide();
                        a(".askInlineWidget .askCollapseAnswers-" + d).show();
                        a(".askInlineWidget .askLoadMoreAnswersLink-" + d).hide();
                        a(".askInlineWidget #" + d).show();
                        a(".askInlineWidget #" + d).append(c);
                        f(d, k);
                        e("askInlineAnswersPage-" + d + "-" + k)
                    },
                    error: function() { a(".askInlineWidget #failed-to-fetch-answers-" + d).show() }
                })
            }
        }

        function f(d, c) { a(".askWidgetQuestions input.currentAnswersPage-" + d).val(c) }

        function h(d) {
            e("question-" + d);
            setTimeout(function() {
                a(".askInlineWidget #" + d).empty();
                a(".askInlineWidget .askCollapseAnswers-" + d).hide();
                a(".askInlineWidget #failed-to-fetch-answers-" +
                    d).hide();
                a(".askInlineWidget #askSeeAllAnswersLink-" + d).show()
            }, 500);
            f(d, 1)
        }
        a("body").delegate(".askInlineWidget .askWidgetSeeAllAnswersInline", "click", function(d) {
            var c = a(d.currentTarget).attr("data-questionId");
            g(c, 1);
            d.preventDefault() });
        a("body").delegate(".askInlineWidget .askWidgetLoadMoreAnswersInline", "click", function(d) {
            var c = a(d.currentTarget).attr("data-questionId"),
                e = parseInt(a(".askWidgetQuestions input.currentAnswersPage-" + c).val(), 10) || 0;
            0 < e && (g(c, e + 1), d.preventDefault()) });
        a("body").delegate("input[name='collapse-to-most-helpful-answer']",
            "click",
            function(d) { d = a(d.currentTarget).attr("data-questionId");
                h(d) })
    });
    l.when("jQuery", "ready").register("askAuthenticatedAjax", function(a) {
        return {
            handler: function(e, c) {
                var g = a(e.currentTarget),
                    f = g.attr("action"),
                    h = g.attr("method"),
                    d = g.serializeArray(),
                    k = g.attr("type"),
                    f = {
                        url: f,
                        type: h,
                        data: d,
                        dataType: k,
                        timeout: c,
                        beforeSend: function(d, c) {
                            c.dataType === r && d.setRequestHeader("Accept", "*/*;q=0.5, " + c.accepts.script);
                            d.setRequestHeader("X-Requested-With", "XMLHttpRequest");
                            var e = a.Event("ajax:beforeSend");
                            g.trigger(e, [d, c]);
                            if (!1 !== e.result) g.trigger("ajax:send", d);
                            else return !1
                        },
                        success: function(a, d, c) { g.trigger("ajax:success", [a, d, c]) },
                        complete: function(a, d) { g.trigger("ajax:complete", [a, d]) },
                        error: function(a, d, c) { g.trigger("ajax:error", [a, d, c]) }
                    };
                if (!("withCredentials" in new XMLHttpRequest)) return !0;
                f.xhrFields = { withCredentials: !0 };
                e.preventDefault();
                a.ajax(f)
            }
        }
    });
    l.when("jQuery", "askAbstractLiveSearch", "ready").register("askLiveSearch", function(a, e) {
        return { setup: function(a, g, f) { e.setup(a, g, f, "/ask/livesearch/search") } } });
    l.when("jQuery", "ready").register("askAbstractLiveSearch", function(a) {
        function e(a) {
            return "function" !== typeof a ? function() {} : a }
        var c = function() {
            function a() {
                return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1) }
            return function() {
                return a() + a() + "-" + a() + "-" + a() + "-" + a() + "-" + a() + a() + a() } }();
        return {
            setup: function(g, f, h, d) {
                function k(b) { x();
                    clearTimeout(m);
                    p = a.ajax(d, { type: "GET", data: { query: b, asin: v, forumId: B, liveSearchSessionId: t, liveSearchPageLoadId: l, language: z } }).done(A).fail(C);
                    q = b }
                var p, m, q, t = null,
                    l = null,
                    n = g.find(f),
                    r = g.find(".askLiveSearchSessionId"),
                    u = n.closest("form"),
                    v = a.trim(u.children("input.askAsin").val()),
                    B = a.trim(u.children("input.askForumId").val()),
                    z = a.trim(u.children("input[name=language]").val()),
                    x = e(h.liveSearchStartCallback),
                    A = e(h.liveSearchDoneCallback),
                    y = e(h.liveSearchClearCallback),
                    C = e(h.liveSearchFailCallback);
                g.delegate(f, "keyup input", function() {
                    var b = n.val(),
                        d = a.trim(b);
                    clearTimeout(m);
                    if (d !== q) {
                        null === t && (t = c(), r.val(t));
                        l = a(".askLiveSearchPageLoadId").val();
                        if (null === l || "" === l) l = c(), a(".askLiveSearchPageLoadId").val(l);
                        0 === d.length ? (y(), p && p.abort(), t = q = null) : b.match(/\w\W+$/) ? k(d) : m = setTimeout(function() { k(d) }, 500)
                    }
                })
            }
        }
    });
    l.when("A", "a-alert", "ready").register("askAnswerSolicitationPostAnswer", function(a, e) {
        return {
            setup: function(c) {
                var g = a.$("#askPostAnswerFormSection-" + c),
                    f = a.$("#askPostAnswerForm-" + c),
                    h = a.$("#askAnswerTextArea-" + c),
                    d = a.$("#askPostAnswerResponse-" + c),
                    k = a.$("#askPostAnswerSpinner-" + c),
                    p = e("#askPostAnswerError-" + c);
                a.declarative.create(f,
                    "ask-post-answer-submit");
                a.declarative("ask-post-answer-submit", "submit", function(c) { c.$event.preventDefault();
                    g.children().hide();
                    a.post(f.attr("action"), { withCredentials: !0, params: f.serializeArray(), indicator: k, success: function(a, c, e) { d.html(a).show();
                            h.val("") }, error: function(d) { 401 === d.http.status ? (a.declarative.remove(f, "ask-post-answer-submit"), f.submit()) : (f.show(), p.html(d.http.responseText).show()) } }) })
            }
        }
    });
    l.when("A", "a-alert", "ready").register("askAnswerSolicitationDeleteAnswer", function(a,
        e) {
        function c(c) {
            return a.$("#askDeleteAnswerSection-" + c.data.answerId) }
        return {
            setup: function(g) {
                var f = a.$("#askPostAnswerForm-" + g),
                    h = a.$("#askPostAnswerResponse-" + g);
                a.declarative("ask-show-delete-answer-section", "click", function(a) { c(a).show() });
                a.declarative("ask-hide-delete-answer-section", "click", function(a) { c(a).hide() });
                a.declarative("ask-submit-delete-answer-form", "click", function(d) {
                    d = d.data.answerId;
                    var c = a.$("#askDeleteAnswerForm-" + d),
                        g = a.$("#askAnswerContentSection-" + d),
                        m = a.$("#askUpdateAnswerSection-" +
                            d),
                        q = e("#askDeleteAnswerError-" + d);
                    q.hide();
                    m.hide();
                    a.post(c.attr("action"), { withCredentials: !0, params: c.serializeArray(), indicator: a.$("#askDeleteAnswerSpinner-" + d), success: function(a, d, c) { h.hide();
                            g.hide();
                            f.show() }, error: function(a) { q.html(a.http.responseText).show();
                            m.show() } })
                })
            }
        }
    });
    l.when("jQuery", "ready").register("askExpander", function(a) {
        return {
            setup: function(e) {
                e.delegate(".askExpanderContainer .askSeeMore", "click", function(c) {
                    a(c.currentTarget).closest(".askExpanderContainer").addClass("askExpanderExpanded");
                    c.preventDefault()
                });
                e.delegate(".askExpanderContainer .askSeeLess", "click", function(c) { a(c.currentTarget).parents(".askExpanderContainer").removeClass("askExpanderExpanded");
                    c.preventDefault() })
            }
        }
    });
    l.when("A").register("askPreventEnterKey", function(a) { a.declarative("ask-prevent-enter-key", "keypress", function(a) { 13 === a.$event.which && a.$event.preventDefault() }) });
    l.when("A", "ready").register("askHuddlesControl", function(a) {
        return {
            initializeHuddlesLinks: function(e, c) {
                var g = {};
                e.find(".askHuddlesUninitializedLink").each(function(c) {
                    c =
                        a.$(this);
                    var d = c.data("questionId");
                    g[d] = c
                });
                var f = a.$.map(g, function(a, d) {
                    return d });
                0 !== f.length && a.$.ajax({ url: "/ask/conversations/data", data: { questionId: f, sourcePage: c }, timeout: 5E3, traditional: !0, success: function(c) {
                        if (c = a.$.parseJSON(c)) a.$.each(c, function(a, c) {
                            if (c.questionId && g[c.questionId]) {
                                var e = g[c.questionId];
                                c.url && (e.find("a").attr("href", c.url), e.removeClass("askHuddlesUninitializedLink")) } }), e.find(".askHuddlesUninitializedLink").remove() }, complete: function() { a.trigger("ask:huddles-data:complete") } })
            }
        }
    });
    l.register("askCsmCounter", function() {
        return { logCounterMetric: function(a) {
                if ("undefined" !== typeof a) {
                    var e = n.ue;
                    if (e && e.count) {
                        var c = e.count(a) || 0;
                        e.count(a, c + 1) } } } } });
    l.when("jQuery", "ready").register("askMobileAllQuestionsPageInfiniteScroll", function(a) {
        function e() {
            return a(n).scrollTop() + 5 >= a(document).height() - a(n).height() }

        function c() { e() && h() }

        function g() { "true" === d && (a("body").hasClass("allQuestionsScrolling") ? a(document).scroll(c) : (q.show(), q.bind("touchstart click", h))) }

        function f() {
            q.hide();
            a(document).unbind("scroll", c);
            q.unbind("touchstart click", h)
        }

        function h(c) {
            c = a.trim(a(".askPage input[name=askAsin]").val());
            var l = a.trim(a(".askPage input[name=askSort]").val()),
                n = a.trim(a(".askPage input[name=askLanguage]").val());
            c = "/ask/questions/inline/" + c + "/" + p + "?pageSize=6&sort=" + l + "&language=" + n;
            m.show();
            f();
            a(".askMobileFailedToFetchMoreQuestions").hide();
            a.ajax({
                url: c,
                data: {},
                dataType: "html",
                cache: !1,
                timeout: 2E3,
                success: function(c) {
                    m.hide();
                    a(".askPage .questionBox > .a-box-inner").append(c);
                    k && (e() ? h() : k = !1);
                    d = a.trim(a("input[name=moreQuestionsAfterPage" + p + "]").val());
                    g();
                    "true" !== d && q.hide();
                    a(document).trigger("ajax:success");
                    p += 1
                },
                error: function() { m.hide();
                    a(".askMobileFailedToFetchMoreQuestions").show();
                    g() }
            })
        }
        var d = "true",
            k = !0,
            p = 3,
            m, q;
        return { setup: function() { m = a(".questionsLoadingSpinner");
                q = a(".loadMoreQuestionsMobile");
                a("body").hasClass("allQuestionsScrolling") && (e() ? h() : k = !1, a(document).scroll(c));
                q.bind("touchstart click", h) }, detachHandlers: f, reattachHandlers: g }
    });
    l.when("jQuery",
        "askAuthenticatedAjax", "ready").register("askInlinePostQuestion", function(a, e) {
        function c() {
            p.delegate(".askMobilePostQuestionForm", "submit", g);
            p.delegate(".askMobilePostQuestionForm", "ajax:beforeSend", function(d, c) { a(".askError").hide() });
            p.delegate(".askMobilePostQuestionForm", "ajax:send", f);
            p.delegate(".askMobilePostQuestionForm", "ajax:error", function(d, c, e) {
                "timeout" === e ? a(".askMobileGenericPostQuestionError").show() : 401 === c.status || 466 === c.status ? (p.undelegate(".askMobilePostQuestionForm", "submit",
                    g), a(d.currentTarget).trigger("submit"), p.delegate(".askMobilePostQuestionForm", "submit", g)) : a(".askMobilePostQuestionError").html(c.responseText).show();
                h()
            });
            p.delegate(".askMobilePostQuestionForm", "ajax:success", function(c, d) { q.val("");
                q.trigger("keyup");
                h();
                a(".questionPostResponseContainer").html(d).slideDown() })
        }

        function g(a) { e.handler(a, 1E4) }

        function f() {
            var c = q.val();
            a("#askQuestionTextDisabledInput").val(c);
            a("#askQuestionTextInputWrapper").hide();
            a("#askQuestionTextDisabledInputWrapper").show();
            a("#askSubmitQuestion").hide();
            a(".askPostQuestionLoadingSpinner").show()
        }

        function h() { a("#askQuestionTextInputWrapper").show();
            a("#askQuestionTextDisabledInputWrapper").hide();
            a("#askSubmitQuestion").show();
            a(".askPostQuestionLoadingSpinner").hide() }

        function d(c) { m.delegate("#askQuestionTextInput", "focus.askInputTopScroll", function() {
                var d = a("html,body").scrollTop(),
                    d = c.offset().top + d;
                a("html,body").animate({ scrollTop: d });
                m.undelegate("#askQuestionTextInput", "focus.askInputTopScroll") }) }

        function k() {
            p.delegate("#askQuestionTextInput",
                "keypress",
                function(a) { 13 === (a.keyCode || a.which) && a.preventDefault() })
        }
        var p = a(".askPage"),
            m = a(".askMobilePostQuestionForm"),
            q = a("#askQuestionTextInput");
        return { setup: function() { c();
                d(a(".askWidgetHeader"));
                k() } }
    });
    l.when("A", "jQuery", "askAuthenticatedAjax", "a-modal", "ready").register("askInlinePostQuestionResponse", function(a, e, c, g) {
        function f() { p(e(".modalDeleteFormContainer"), ".askMobileDeleteQuestionForm", q, k) }

        function h() {
            var a = e(".modalDeleteFormContainer"),
                d = q,
                f = k;
            a.undelegate(".askMobileDeleteQuestionForm",
                "submit", c.handler);
            a.undelegate(".askMobileDeleteQuestionForm", "ajax:beforeSend", u);
            a.undelegate(".askMobileDeleteQuestionForm", "ajax:error", f);
            a.undelegate(".askMobileDeleteQuestionForm", "ajax:success", d)
        }

        function d(a, d) { n(a, d, v, ".askMobileEditQuestionForm") }

        function k(a, d) { n(a, d, e(".modalDeleteFormContainer"), ".askMobileDeleteQuestionForm") }

        function p(a, d, e, f) { a.delegate(d, "submit", c.handler);
            a.delegate(d, "ajax:beforeSend", u);
            a.delegate(d, "ajax:error", f);
            a.delegate(d, "ajax:success", e) }

        function m(a) {
            u();
            e(".askMobilePostQuestionForm").hide();
            e(".askEditFormContainer").show();
            e(".successfulQuestionContainer").hide();
            var d = e(".inlineQuestionContent").text().trim();
            e(".askMobileEditQuestionForm").find("[name='askQuestionText']").val(d).focus();
            a.preventDefault()
        }

        function q() { r();
            v.slideUp().text("") }

        function t(a, d) { l(a);
            e(".inlineQuestionContent").html(d) }

        function l(a) { u();
            r();
            e(".askMobilePostQuestionForm").show();
            e(".askEditFormContainer").hide();
            e(".successfulQuestionContainer").show();
            a.preventDefault() }

        function n(a, d, f, m) { 401 === d.status || 466 === d.status ? (f.undelegate(m, "submit", c.handler), e(a.currentTarget).submit()) : (r(), e(".askInlineError").html(d.responseText).show()) }

        function r() { g.get(e("#askDeleteModalPopover")).hide() }

        function u() { e(".askInlineError").hide();
            e(".askMobilePostQuestionError").hide();
            e(".askMobileGenericPostQuestionError").hide() }
        var v = e(".questionPostResponseContainer");
        return {
            setup: function() {
                v.delegate(".askOpenInlineEditForm", "click", m);
                v.delegate(".askCancelInlineEdit",
                    "click", l);
                p(v, ".askMobileEditQuestionForm", t, d);
                a.on("a:popover:beforeShow:deleteModalPopup", f);
                a.on("a:popover:beforeHide:deleteModalPopup", h)
            }
        }
    });
    l.when("A", "jQuery", "ready").register("askMobileLiveSearch", function(a, e) {
        return {
            displayResults: function(a) { e.trim(a) ? e(".askLiveSearchResults").html(a) : (e(".askLiveSearchResults").empty(), e(".askNoResultsError").show()) },
            showLiveSearchSuccess: function() { e(".askMobilePostQuestionButtonContainer").show();
                e(".askLiveSearchSuccessfulMessage").show();
                e(".askLiveSearchFailureMessage").hide() },
            showLiveSearchFailure: function() { e(".askMobilePostQuestionButtonContainer").show();
                e(".askLiveSearchSuccessfulMessage").hide();
                e(".askLiveSearchFailureMessage").show() },
            setupExpander: function() {
                a.on("a:expander:askMobileLiveSearchResultExpander:toggle:expand", function(a) { a = a.expander.$expander;
                    a.find(".askMobileLiveSearchResultHeaderTextExpanded").css("display", "block");
                    a.find(".askMobileLiveSearchResultHeaderTextCollapsed").hide() });
                a.on("a:expander:askMobileLiveSearchResultExpander:toggle:collapse",
                    function(a) { a = a.expander.$expander;
                        a.find(".askMobileLiveSearchResultHeaderTextExpanded").hide();
                        a.find(".askMobileLiveSearchResultHeaderTextCollapsed").css("display", "block") })
            }
        }
    });
    l.when("A", "ready").register("askPrefetchDetailPageSearchData", function(a) {
        return { setup: function() {} } });
    l.when("A", "ready").register("askPostForm", function(a) {
        var e, c, g = { timeout_in_ms: 1E4, postActionName: "ask-post-question", eventType: "submit", indicator: null, callbacks: { success: function(a, c, e) {}, error: function(a, c, e) {}, preventedDoublePost: function() {} } },
            f = { postQuestion: function(a) { c.callbacks.preventedDoublePost() } },
            h = { postQuestion: function(d) { e.state = f;
                    d = e.attr("action");
                    var g = c.timeout_in_ms,
                        p;
                    p = "function" === typeof c.indicator ? c.indicator() : c.indicator;
                    g = { withCredentials: !0, accepts: "text/html", timeout: g, indicator: p, params: e.serializeArray(), success: function() { e.state = h;
                            c.callbacks.success.apply(this, arguments) }, error: function() { e.state = h;
                            c.callbacks.error.apply(this, arguments) } };
                    a.post(d, g) } };
        return {
            setup: function(d, f) {
                e = d;
                e.state = h;
                c = a.$.extend(!0, {}, g, f);
                a.declarative(c.postActionName, c.eventType, function(a) { e.state.postQuestion(a);
                    a.$event.preventDefault() })
            }
        }
    });
    l.when("ready").register("askDetailPageSearchLiveSearch", function() {
        return { setup: function() {} } });
    l.when("ready").register("askTabbing", function() {
        return { setup: function() {} } });
    l.when("A", "a-modal", "ready").register("askDeleteAnswerForm", function(a, e) {
        return {
            setup: function() {
                function c(a) { e.get("modal-answer-delete-" + a).hide() }
                var g = a.$("#ask-postAnswer"),
                    f = a.$("#askQuestionIsNotAnsweredMessage");
                a.declarative("ask-answer-delete-hide", "click", function(a) { c(a.data.answerId) });
                a.declarative("ask-answer-delete-submit", "click", function(e) {
                    var d = e.data.answerId,
                        k = a.$("#ask-deleteAnswerModalSection-" + d);
                    k.hide();
                    var p = a.$("#ask-form-delete-answer-" + d);
                    a.post(p.attr("action"), {
                        withCredentials: !0,
                        params: p.serializeArray(),
                        indicator: a.$("#ask-deleteAnswerLoadingSpinner-" + d),
                        success: function(e, k, h) { a.$("#answer-" + d).remove();
                            g.show();
                            f.show();
                            c(d) },
                        error: function(c) {
                            401 === c.http.status ? p.submit() : (a.$("#ask-deleteAnswerError-" +
                                d).show(), k.show())
                        }
                    })
                })
            }
        }
    });
    l.when("A", "a-modal", "ready").register("askDeleteCommentForm", function(a, e) {
        return {
            setup: function() {
                function c(a) { e.get("ask-comment-delete-modal-" + a).hide() }
                a.declarative("ask-comment-delete-hide", "click", function(a) { c(a.data.commentId) });
                a.declarative("ask-comment-delete-submit", "submit", function(e) {
                    e.$event.preventDefault();
                    var f = e.data.commentId,
                        h = a.$("#askDeleteCommentForm-" + f),
                        d = a.$("#askPostCommentResponse-" + f);
                    h.hide();
                    a.post(h.attr("action"), {
                        withCredentials: !0,
                        params: h.serializeArray(),
                        indicator: a.$("#askDeleteCommentLoadingSpinner-" + f),
                        success: function(a, e, m) { c(f);
                            d.remove() },
                        error: function(d) { a.$("#askDeleteCommentError-" + f).show();
                            h.show() }
                    })
                })
            }
        }
    });
    l.when("A", "a-alert", "ready").register("askPostAnswerForm", function(a, e) {
        return {
            setup: function() {
                function c(e) {
                    e.preventDefault();
                    g.hide();
                    a.post(f.attr("action"), {
                        withCredentials: !0,
                        params: f.serializeArray(),
                        indicator: a.$(".postAnswerLoadingSpinner"),
                        success: function(c, e, f) {
                            a.$("#ask-postAnswerResponse").html(c);
                            a.$("#askQuestionIsNotAnsweredMessage").hide();
                            a.$("#ask-postAnswer").hide();
                            h.val("");
                            g.hide();
                            d.show();
                            k.hide()
                        },
                        error: function(a) { 401 === a.http.status ? f.unbind("submit", c).submit() : (k.html(a.http.responseText).show(), g.show()) }
                    })
                }
                var g = a.$("#ask-postAnswerFormSection"),
                    f = a.$("#ask-postAnswerForm"),
                    h = a.$("#ask-postAnswerInput"),
                    d = a.$("#ask-openAnswerFormLink"),
                    k = e("#ask-postAnswerError");
                a.declarative("ask-answer-form-show", "click", function(a) { g.show();
                    d.hide() });
                a.declarative("ask-answer-form-hide",
                    "click",
                    function(a) { g.hide();
                        d.show() });
                f.bind("submit", c)
            }
        }
    });
    l.when("A", "a-alert", "ready").register("askPostCommentForm", function(a, e) {
        function c(c) { a.$("#askCommentsContainer-" + c).hide();
            a.$("#askPostCommentForm-" + c).show() }

        function g(c) { a.$("#askCommentsContainer-" + c).show();
            a.$("#askPostCommentForm-" + c).hide() }
        return {
            setup: function() {
                a.declarative("ask-comment-post-show", "click", function(a) { c(a.data.answerId) });
                a.declarative("ask-comment-post-hide", "click", function(a) { g(a.data.answerId) });
                a.declarative("ask-comment-post-submit",
                    "submit",
                    function(f) { f.$event.preventDefault();
                        var h = f.data.answerId;
                        f = a.$("#askPostCommentForm-" + h);
                        var d = a.$("#askPostCommentLoadingSpinner-" + h),
                            k = a.$("#askPostCommentResponseContainer-" + h),
                            p = e("#askPostCommentError-" + h);
                        g(h);
                        a.post(f.attr("action"), { withCredentials: !0, params: f.serializeArray(), indicator: d, success: function(d, c, f) { k.html(d);
                                a.$("#askPostCommentForm-" + h + " textArea").val("");
                                g(h);
                                e("#askPostCommentError-" + h).hide() }, error: function(a) { p.html(a.http.responseText).show();
                                c(h) } }) })
            }
        }
    });
    l.when("A", "askTabbing", "ready").register("askDetailPageSearchPostQuestion", function(a, e) {
        function c(c, e, h) { a.post("/gp/customer-forum/dynamic-update/validate-post.html", { contentType: "json", params: { body: c, checkIsQuestion: 1 }, success: function(a) { a.hasError || a.content.isQuestion ? e() : h() }, error: function() { e() } }) }
        return {
            setup: function() {
                var g = !1;
                a.declarative("ask-dpsearch-post-question", "click", function(f) {
                    var h = a.$(".askDPSearchSecondaryViewContent").find(".askPostQuestionForm"),
                        d = h.find(".askPostQuestionTextInput input"),
                        k = a.$(".askDPSearchQuestionErrorContainer"),
                        p = k.find(".askBadQuestionError");
                    f = k.find(".askEmptyQuestionError");
                    d = d.val();
                    k.children().hide();
                    var k = function() { h.submit() },
                        m = function() { p.show();
                            g = !0;
                            e.update() };
                    "undefined" === typeof d || d.match(/^\s*$/) ? f.show() : g ? k() : -1 === d.indexOf("?") ? m() : c(d, k, m)
                })
            }
        }
    });
    l.when("jQuery", "askInlinePostQuestion", "askInlinePostQuestionResponse", "askLiveSearch", "askMobileLiveSearch", "askMobileAllQuestionsPageInfiniteScroll", "askPostQuestionValidation", "ready").register("askMobileAllQuestionsPage",
        function(a, e, c, g, f, h, d) {
            var k = {
                liveSearchDoneCallback: function(d) { a(".askError").hide();
                    a(".questionsBoxGroup").hide();
                    h.detachHandlers();
                    f.showLiveSearchSuccess();
                    a(".questionPostResponseContainer").hide();
                    f.displayResults(d) },
                liveSearchClearCallback: function() { a(".askError").hide();
                    a(".askLiveSearchResults").empty();
                    a(".askMobilePostQuestionButtonContainer").hide();
                    a(".questionsBoxGroup").show();
                    h.reattachHandlers() },
                liveSearchFailCallback: function() {
                    a(".askError").hide();
                    a(".askLiveSearchResults").empty();
                    a(".questionsBoxGroup").show();
                    h.reattachHandlers();
                    f.showLiveSearchFailure()
                }
            };
            return { setup: function() {
                    var p = a(".askMobileAllQuestionsPage");
                    a(".loadMoreQuestionsMobile");
                    d.setup(p, ".askMobilePostQuestionForm", a("#askQuestionTextInput"));
                    e.setup();
                    c.setup();
                    g.setup(p, "#askQuestionTextInput", k);
                    h.setup();
                    f.setupExpander() } }
        });
    l.when("jQuery", "askExpander", "askPostAnswerForm", "askDeleteAnswerForm", "askPostCommentForm", "askDeleteCommentForm", "ready").register("askMobileAllAnswersPage", function(a, e,
        c, g, f, h) {
        return { setup: function() { e.setup(a(".answerBox"));
                c.setup();
                g.setup();
                f.setup();
                h.setup() } } });
    l.when("askAnswerSolicitationPostAnswer", "askAnswerSolicitationDeleteAnswer", "ready").register("askMobileAnswerSolicitationLandingPage", function(a, e) {
        return { setup: function(c) { a.setup(c);
                e.setup(c) } } });
    l.when("jQuery", "askInlinePostQuestion", "askInlinePostQuestionResponse", "askLiveSearch", "askMobileLiveSearch", "askPostQuestionValidation", "ready").register("askMobileDetailPageWidget", function(a, e, c,
        g, f, h) {
        var d = {
            liveSearchDoneCallback: function(d) { a(".askError").hide();
                a(".questionsBoxGroup").hide();
                a(".questionPostResponseContainer").hide();
                f.showLiveSearchSuccess();
                f.displayResults(d);
                a("#askQuestionTextInput").trigger("askLiveSearchComplete") },
            liveSearchClearCallback: function() { a(".askError").hide();
                a(".askLiveSearchResults").empty();
                a(".askMobilePostQuestionButtonContainer").hide();
                a(".questionsBoxGroup").show() },
            liveSearchFailCallback: function() {
                a(".askError").hide();
                a(".askLiveSearchResults").empty();
                a(".questionsBoxGroup").show();
                f.showLiveSearchFailure()
            }
        };
        return { setup: function() {
                var k = a(".askMobileDetailPageWidget");
                h.setup(k, ".askMobilePostQuestionForm", a("#askQuestionTextInput"));
                e.setup();
                c.setup();
                g.setup(k, "#askQuestionTextInput", d);
                f.setupExpander() } }
    });
    l.when("ready").register("askMobileDetailPageSearchWidget", function() {
        return { setup: function() {} } })
});
/* ******** */
(function(c) {
    var g = window.AmazonUIPageJS || window.P,
        r = g._namespace || g.attributeErrors,
        b = r ? r("BurjMobileAssets") : g;
    b.guardFatal ? b.guardFatal(c)(b, window) : b.execute(function() { c(b, window) }) })(function(c, g, r) {
    c.when("A", "jQuery", "dpv2-metrics").execute("dpv2-metrics-reg", function(b, a, c) { b.on("a:pageUpdate", function() {
            return 0 }) });
    c.when("A", "jQuery").register("dpv2-metrics", function(b, a) {
        return 0 });
    c.when("A", "a-dropdown", "a-secondary-view", "cf", "burjPageEvent").register("sns-buybox-mobile-frequency-selection",
        function(b, a, c) {
            function d() {}
            var e = b.$;
            d.prototype.updateFrequency = function(a, b, c) { this._getSelect().val(b);
                e(d.SELECTORS.CYCLE_LENGTH_TOUCH_LINK).removeClass("a-active");
                a.find(d.SELECTORS.CYCLE_LENGTH_TOUCH_LINK).addClass("a-active");
                e(d.SELECTORS.BUTTON_LABEL_TEXT).text(c);
                return this };
            d.prototype.dismissPopover = function(a) { a && "function" === typeof a.goBack ? a.goBack() : this._getPopover().hide();
                return this };
            d.prototype._getPopover = function() {
                return c.get(d.POPOVER_NAME) };
            d.prototype._getSelect = function() {
                return a.getSelect(e(d.SELECTORS.NATIVE_SELECT)) };
            d.POPOVER_NAME = "sns-mobile-frequency-popover";
            d.SELECTORS = { NATIVE_SELECT: "#rcxOrdFreq", CYCLE_LENGTH_TOUCH_LINK: ".sns-mobile-frequency-option", BUTTON_LABEL_TEXT: "#sns-frequency-button-label" };
            return d
        });
    c.when("A", "sns-buybox-mobile-frequency-selection", "burjPageEvent").register("sns-buybox-mobile-frequency-selection-controller", function(b, a) {
        var k;
        c.when("mash").execute(function(a) { k = a });
        b.declarative("sns-frequency-update", "click", function(b) {
            (new a).updateFrequency(b.$currentTarget,
                b.data.frequency, b.data.labelText).dismissPopover(k)
        })
    });
    c.when("A", "jQuery", "airy-image-block", "image-block-exp-weblab", "atf", "burjPageEvent").execute(function(b, a, k, d) {
        function e(a, b) {
            if (null !== a && a !== r && "string" === typeof a) {
                var d = new Image;
                null !== b && b !== r && "function" === typeof b && (d.onload = b);
                d.src = a } }

        function t() {
            if (v.length)
                if (v.css({ "-webkit-transform": "translateX(-" + (0 === u ? u : u + 40) + "px)" }), q) {
                    var a;
                    a = Math.abs(1E3 * (f ? m - u : m + u) / h);
                    a = Math.max(a, 300);
                    a = Math.min(a, 1.2 * g.innerWidth);
                    v.css({
                        "-webkit-transition": "all " +
                            a + "ms cubic-bezier(0.215,0.61,0.355,1)",
                        transition: "all " + a + "ms cubic-bezier(0.215,0.61,0.355,1)"
                    })
                } else v.css({ "-webkit-transition": "", transition: "" })
        }
        var h, f = !1,
            q = !1,
            u = 0,
            m = 0,
            n = !1,
            v = a("#heroImage"),
            w;
        c.when("A").register("loadHeroImage", function(a) {
            return {
                loadImage: function(a) {
                    v.length && a.heroImageUrl && a.calculatedWidth && a.calculatedHeight && e(a.heroImageUrl, function() {
                        var b = a.heroImageUrl,
                            d = a.calculatedWidth,
                            e = a.calculatedHeight;
                        v.length && b && d && e && v.css({
                            "background-image": 'url("' + b + '")',
                            "background-size": d +
                                "px " + e + "px",
                            "max-width": d + "px",
                            "min-height": e + "px",
                            filter: "",
                            "-ms-filter": ""
                        })
                    })
                }
            }
        });
        c.when("A").register("updateRepositionData", function(a) {
            return { updateData: function(a) { w = a } } });
        b.on.orientationchange(function() {
            v.length && w.calculatedWidth && w.calculatedHeight && w.heroFocalPoint && (w.imageWidth && "undefined" !== typeof w.imageWidth && 0 !== w.imageWidth ? v.css({
                "background-position": (g.innerWidth || document.documentElement.clientWidth || document.body.clientWidth) / 2 - 14 - w.heroFocalPoint * w.calculatedWidth / w.imageWidth +
                    "px center"
            }) : v.css({ "background-position": "center center" }))
        });
        c.when("A", "jQuery").execute("test-gestures", function(a, b) { b("#heroContainer").bind("swipe", function(a, b) { h = b.velocityX;
                f = 0 > b.velocityX;
                a.stopPropagation() }) });
        b.on("a:carousel:image-block-carousel:change:pageNumber", function(a) {
            (q = a.newValue) && t() });
        b.on("a:carousel:image-block-carousel:change:px", function(a) { u = a.newValue;
            m = a.oldValue;
            t() });
        b.on("a:carousel:image-block-carousel:change:animating", function(a) {
            n = a.newValue;
            !n && q && (q = !1);
            t()
        });
        b.on("image-block-refresh", function() { u = 0;
            t() })
    });
    c.when("A", "jQuery", "burj-twister-aui-page-state", "ready", "burjPageEvent").execute(function(b, a, k) {
        b.declarative("ctsclickonadditionalitem", "click", function(a) { g.location.assign(a.data.url) });
        var d = 0;
        c.register("ctsRecommendation", function() {
            function e(a, b) {
                switch (a) {
                    case 0:
                        return b.ctsCart1;
                    case 1:
                        return b.ctsCart2;
                    case 2:
                        return b.ctsCart3;
                    case 3:
                        return b.ctsCart4;
                    default:
                        return b.ctsCart1 } }

            function c(a, b) {
                switch (a) {
                    case 0:
                        return b.ctsExpanderText1;
                    case 1:
                        return b.ctsExpanderText2;
                    case 2:
                        return b.ctsExpanderText3;
                    case 3:
                        return b.ctsExpanderText4;
                    default:
                        return b.ctsExpanderText1
                }
            }

            function h(a, b) {
                switch (a) {
                    case 1:
                        return b.ASIN1;
                    case 2:
                        return b.ASIN2;
                    case 3:
                        return b.ASIN3;
                    case 4:
                        return b.ASIN4;
                    default:
                        return null } }

            function f(d, f) {
                var l, g = a("#ctsDataDiv").find("script").html();
                "undefined" === typeof b.state("beautyRecommendations") && k.updatePageState();
                l = g ? a.parseJSON(g) : b.state("beautyRecommendations");
                var m = l.possibleSums,
                    g = a("#ctsCartDeclarative").length;
                "undefined" === typeof b.state("ctsDynamicStrings") && k.updatePageState();
                var q = b.state("ctsDynamicStrings");
                if (l) {
                    var n = a("#ctsForm").attr("action");
                    l = 0;
                    for (var r, y = a("#ctsForm"), p = 2; 4 >= p; p++) y.find("input[name='asin." + p + "']").remove();
                    for (var z = 2, p = 1; p <= f; p++) a("#ctsImg" + p), (r = a("#ctsCheckbox" + p).prop("checked")) ? (l++, r = h(p + 1, d), a("#ctsImg" + p).css({ opacity: "1" }), r = a("<input>", { type: "hidden", name: "asin." + z, value: r }), y.append(r), z += 1) : a("#ctsImg" + p).css({ opacity: "0.3" });
                    a("#ctsAddToCart").find("span.a-button-text").text(e(l,
                        q));
                    a("#ctsExpanderTextString").text(c(l, q));
                    y.attr("action", n + (l + 1));
                    q = "";
                    for (n = 1; n <= f; n++) q += a("#ctsCheckbox" + n).prop("checked") ? "1" : "0";
                    q = parseInt(q, 2);
                    m = m[q];
                    a("#ctsTotalPrice").html(m);
                    a("#ctsExpanderPrice").html(m);
                    if (g) { g = l;
                        m = a("#ctsForm").find("input[name='asin.1']").val();
                        for (l = 2; l <= g + 1; l++) q = a("#ctsForm").find("input[name='asin." + l + "']"), m += "|", m += q.val();
                        u().data("awMash").inputs.a = m }
                }
            }

            function q() {
                var b = a("#buybox").find(".a-declarative").has("#add-to-cart-button");
                if (1 === b.length) return b;
                b = a("#atc-declarative");
                return 1 === b.length ? b : null
            }

            function u() {
                var b = a("#ctsCartDeclarative");
                return 1 === b.length ? b : null }

            function m(b, d) {
                var e = b.data("awMash"),
                    c = d.data("awMash");
                e && e.inputs && c && (c.inputs = { colid: e.inputs.colid, coliid: e.inputs.coliid, verificationSessionID: e.inputs.verificationSessionID, o: e.inputs.o }, c.strings = a.extend({}, e.strings), c.timeout = e.timeout) }

            function n() {
                var b = d,
                    e = ((g.innerWidth || document.documentElement.clientWidth || document.body.clientWidth) / 10 - (1 + 1.3 * b)) / (b + 1);
                9.6 < e &&
                    (e = 9.6);
                var c = e + .3,
                    f = e + "rem",
                    k = e + 1.3;
                a(".ctsImageSize").css({ width: f, height: f, "background-size": "cover" });
                a(".ctsPlusSign").css("line-height", f);
                a("#ctsCaroselBaseImage").css({ width: f, height: f, "background-size": "cover" });
                a(".ctsCaroselBaseImageCss").css("max-width", c + "rem");
                a(".ctsCaroselExtraImageCss").css("width", "");
                a("#beautyRecommendationImageBlock .a-carousel-viewport").css("height", f);
                var h = k + "rem";
                a(".ctsCaroselExtraImageCss").each(function() { this.style.setProperty("width", h, "important") });
                c = 0;
                for (f = 1; f <= b; f++) k = a("#ctsImg" + f), c -= e, a(k).css("background-position-x", c + "rem")
            }
            b.on.orientationchange(function() { b.delay(function() { n() }, 200) });
            return {
                init: function(b, e) {
                    d = e;
                    n();
                    if (a("#ctsCartDeclarative").length) {
                        var c = q(),
                            k = u();
                        try { m(c, k) } catch (h) { g.ueLogError && g.ueLogError(h, { logLevel: "ERROR", attribution: "beauty_recommendations_mobile", message: "An error occurred when extracting information from the buybox." }) }
                        a("#ctsAddToCart").click(function(a) { a.preventDefault() }) }
                    for (c = 1; c <= e; c++) a("#ctsCheckbox" +
                        c).change(function() { f(b, e) });
                    f(b, e)
                }
            }
        })
    });
    c.when("A", "jQuery", "postMetric", "ready").register("ctsMetric", function(b, a, c) {
        return {
            registerMetrics: function() {
                var b = a("#ctsExpanderHeading");
                b.length && (b.bind("click", function(b) { b = a("#beautyRecommendationsExpander #ctsExpanderHeading .a-icon.a-icon-section-expand");
                        var d = a("#beautyRecommendationsExpander #ctsExpanderHeading .a-icon.a-icon-section-collapse");
                        b.length && c.postCountMetric("burjCTSExpand");
                        d.length && c.postCountMetric("burjCTSCollapse") }),
                    a("#ctsAddToCart").bind("click", function(a) { c.postCountMetric("burjCTSAddToCart") }))
            }
        }
    });
    c.when("A", "jQuery", "ctsMetric", "ready").execute("burj-cts-metric", function(b, a, c) { b.on("a:pageUpdate", function() { c.registerMetrics() }) });
    c.when("A", "jQuery", "ready").execute(function(b, a) {
        c.register("pricepinning", function() {
            function c() {
                var b = a("#pe-mom-sns-price-block"),
                    e = a("#pe-regular-sns-price-block"),
                    d = a("#price"),
                    k = a("#snsPrice");
                if (a("#price_feature_div").length) {
                    var m = a(g).scrollTop(),
                        n = a("#price_feature_div").offset().top;
                    if (a("#burjPESnSPrice").length) m > n && m < t && t ? (b.addClass("stick"), e.addClass("stick")) : (b.removeClass("stick"), e.removeClass("stick"));
                    else if (d.length || k.length) t && m > n && m < t ? (d.children().length && d.addClass("stick"), k.addClass("stick"), a("#price.stick .cfs-free-shipping").length && a("#price.stick .cfs-free-shipping").parent().hide()) : (d.removeClass("stick"), k.removeClass("stick"), a("#price .cfs-free-shipping").length && a("#price .cfs-free-shipping").parent().show())
                }
            }

            function d() {
                g.innerHeight < g.innerWidth ?
                    (a("#pe-mom-sns-price-block.stick").length && a("#pe-mom-sns-price-block").removeClass("stick"), a("#pe-regular-sns-price-block.stick").length && a("#pe-regular-sns-price-block").removeClass("stick"), a("#price.stick").length && a("#price").removeClass("stick"), a("#snsPrice.stick").length && a("#snsPrice").removeClass("stick"), b.off("scroll", c)) : b.on.scroll(c);
                1 === e && (b.on.orientationchange(d), e = 0);
                a(".customerReviewsMobileFeature").length && (t = a(".customerReviewsMobileFeature").offset().top + a(".customerReviewsMobileFeature").outerHeight(!0))
            }
            var e = 1,
                t = 0;
            return { init: d }
        })
    });
    c.when("A", "jQuery", "ready", "burjPageEvent").execute(function(b, a) {
        c.register("titleExpander", function() {
            function c() { h.className = h.className.replace(/ with-caret/, " unclamp");
                f && "undefined" !== typeof f && (f.className = f.className.replace(/ collapsed/, " expanded"));
                h.onclick = d }

            function d() { h.className = h.className.replace(/ unclamp/, " with-caret");
                f && "undefined" !== typeof f && (f.className = f.className.replace(/ expanded/, " collapsed"));
                h.onclick = c }

            function e() {
                h =
                    document.getElementById("title");
                h.scrollHeight > h.clientHeight + 1 && (h.className += " with-caret", f && "undefined" !== typeof f && (f.className += " collapsed"), h.onclick = c)
            }

            function t() {
                f && "undefined" !== typeof f && (f.className.match(/expanded/) && (f.className = f.className.replace(/ expanded/, "")), f.className.match(/collapsed/) && (f.className = f.className.replace(/ collapsed/, "")));
                a(".a-icon.a-icon-touch-link.unclamp-icon").remove();
                h.className.match(/with-caret/) && (h.className = h.className.replace(/ with-caret/,
                    ""));
                h.className.match(/unclamp/) && (h.className = h.className.replace(/ unclamp/, ""));
                e()
            }
            var h = document.getElementById("title"),
                f = document.getElementById("burjProductTitleGroup");
            return { init: function() {
                    if (f && "undefined" !== typeof f) { a(g).scroll(function() { a(g).scrollTop() > h.clientHeight && d() });
                        a(g).bind("orientationchange", function() { b.delay(t, 200) });
                        var c = a("#image-block");
                        c.length && c.bind("touchstart", function(a) { d() }) }
                    h.className = h.className.replace(/ with-caret/, "");
                    e() } }
        })
    });
    c.when("A", "jQuery",
        "titleExapnderMetrics").execute("burj-titleExpander-metrics", function(b, a, c) { b.on("a:pageUpdate", function() { c.registerMetrics() }) });
    c.when("A", "jQuery", "postMetric", "ready").register("titleExapnderMetrics", function(b, a, c) {
        return { registerMetrics: function() {
                var b = a("#title");
                b.length && (b.hasClass("with-caret") && c.postCountMetric("burjTitleExpanderPresent"), b.bind("click", function(a) { b.hasClass("with-caret") && c.postCountMetric("burjTitleExpanderUnclamp");
                    b.hasClass("unclamp") && c.postCountMetric("burjTitleExpanderClamp") })) } } });
    c.when("jQuery", "A", "burjPageEvent").register("burj-twister-aui-page-state", function(b, a) {
        var c = ["freeSampleList", "beautyRecommendations", "bRecDynamicStrings", "ctsDynamicStrings"];
        return { updatePageState: function() {
                var d = a.parseJSON;
                a.each(b('script[type="a-state"]'), function(e) { e = b(e);
                    if (!e.data("a-eval")) {
                        var g = e.attr("data-a-state");
                        if (g && (g = d(g), g.key && -1 !== b.inArray(g.key, c))) {
                            var h = d(e.html());
                            a.state.replace(g.key, h);
                            e.data("a-eval", !0) } } }) } } });
    c.when("jQuery", "action-panel", "A",
        "burjPageEvent").register("autoScrollFeature", function(b, a, c) {
        var d = 0;
        return {
            init: function() {
                b("#snsOption").length && b("#snsOption").click(function() { setTimeout(function() {
                        var a = b("#rcx-subscribe-submit-button");
                        d = 0;
                        a.length && a.offset().top - b(g).scrollTop() > b(g).height() - 13 - a.height() && (d = a.offset().top - b(g).height() + a.height() + 13, b("#actionPanel.ap-sns").length && b("html, body").animate({ scrollTop: d })) }, 100) });
                b("#onetimeOption").length && b("#onetimeOption").click(function() {
                    setTimeout(function() {
                        d =
                            0;
                        var a = b("#add-to-cart-button");
                        a.length && a.offset().top - b(g).scrollTop() > b(g).height() - 13 - a.height() && (d = a.offset().top - b(g).height() + a.height() + 13, b("#actionPanel.ap-onetime").length && b("html, body").animate({ scrollTop: d }))
                    }, 100)
                })
            }
        }
    })
});
/* ******** */
(function(b) {
    var a = window.AmazonUIPageJS || window.P,
        d = a._namespace || a.attributeErrors,
        c = d ? d("ActionPanelAssets") : a;
    c.guardFatal ? c.guardFatal(b)(c, window) : c.execute(function() { b(c, window) }) })(function(b, a, d) {
    b.when("A", "jQuery", "action-panel").register("usedBuyBoxDPv2", function(c, e, a) {
        var d = function() {
            e("#one-click-button-ubb, #toggleBuyBox #used #add-to-cart-button-ubb").click(function() {
                e("#addToCart").attr("action", function(c, b) {
                    return b.replace("ref=dp_start-bbf_1_glance", "ref=dp_start-ubbf_1_glance") });
                return !0
            });
            b.when("a-popover").execute(function(b) {
                var a = function(a) { a.preventDefault();
                    a = e("#usedItemConditionInfoLink");
                    b.create(a, { width: 250, position: "triggerBottom", activate: c.capabilities.touch ? "onmousemove" : "onclick", closeButton: !1, popoverLabel: "Used condition details", name: "usedItemConditionDetailsPopover", dataStrategy: "preload" }).show() };
                e(document).undelegate("#usedItemConditionInfoLink", "click", a);
                e(document).delegate("#usedItemConditionInfoLink", "click", a) })
        };
        return { init: function() { d() } }
    })
});
/* ******** */
(function(b) {
    var f = window.AmazonUIPageJS || window.P,
        r = f._namespace || f.attributeErrors,
        a = r ? r("FreshDetailPageCommonAssets") : f;
    a.guardFatal ? a.guardFatal(b)(a, window) : a.execute(function() { b(a, window) }) })(function(b, f, r) {
    b.when("A", "jQuery", "a-modal", "afx-dp-uatc-proxy", "afx-update-cart-count", "a-dropdown", "fresh-dp-double-click", "afx-dp-csm-metrics-utils", "fresh-show-atc-changeover", "fresh-dp-quantity", "afx-utils", "ready").register("fresh-atc-handler", function(a, c, f, e, k, d, h, g, v, q, t) {
        var m;
        b.when("EWC").execute(function(a) {
            m =
                a
        });
        b.when("nav.getFlyout").execute(function(a) { a("ewc") });
        var u = { "itemPrice:priceUnavailable:1": "PRICE_UNAVAILABLE", "itemDeleted:itemCountOverflow:6": "QUANTITY_OVERFLOW" };
        return {
            addToFreshCart: function(d) {
                function n(a, c, g, b) { B(a);
                    d.error(a, c, g, b) }

                function B(d, e) {
                    var h = e || {},
                        k = d.data.sessionID;
                    h.title = x(d.data.title);
                    h.asin = d.data.asin;
                    h.offerListingID = d.data.offerListingID;
                    h.sessionID = k;
                    switch (h.reasonCode ? h.reasonCode : r) {
                        case w.itemNotAvailable:
                            g.increment(p.freshUATCItemNotAvailableErrorCountMetric);
                            break;
                        case w.itemPartiallyAvailable:
                            g.increment(p.freshUATCItemPartiallyAvailableErrorCountMetric);
                            break;
                        case w.itemPartiallyAvailableForReservation:
                            g.increment(p.freshUATCItemPartiallyAvailableForReservationErrorCountMetric);
                            break;
                        case w.itemNotAvailableForReservation:
                            g.increment(p.freshUATCItemNotAvailableForReservationErrorCountMetric);
                            break;
                        case w.itemPriceUnavailable:
                            g.increment(p.freshUATCItemPriceUnavailableErrorCountMetric);
                            break;
                        case w.itemCountOverflow:
                            g.increment(p.freshUATCItemCountOverflowErrorCountMetric);
                            break;
                        default:
                            g.increment(p.freshUATCEmptyItemStatusCodeErrorCountMetric), b.log("fresh-atc-handler: No error status code.", "ERROR")
                    }
                    h = c.param(h);
                    f.create(d.$currentTarget, { name: "fresh-add-to-cart-modal", sessionID: k, url: "/afx/cart/reservation_conflict?" + h }).show();
                    a.on("a:popover:afterHide:fresh-add-to-cart-modal", function(a) { y(k);
                        f.remove(a.popover) })
                }

                function x(a) {
                    var c = { "&amp;": "&" },
                        d;
                    for (d in c) c.hasOwnProperty(d) && (a = a.replace(d, c[d]));
                    return a }

                function C(a) {
                    return a.filter(function(a) {
                        return a.statusKey in
                            u
                    })
                }

                function D(a, c, d) { d += " returned by UATC is not an array";
                    b.log(d, "Error", c);
                    n(a, "", "", d) }

                function z(d, h, f) {
                    f || (f = function() {});
                    try {
                        var k = d.data.asin;
                        if (k)
                            if (d.data.title) {
                                var A = d.data.offerListingID;
                                if (A) {
                                    var x = d.data.sessionID;
                                    if (x) {
                                        var l = q.val();
                                        l || (b.log('fresh-atc-handler: "quantity" action parameter is missing.', "ERROR"), l = 1);
                                        g.setWidgetClickTimestamp(p.freshUATCTCallScope);
                                        e({
                                            asin: k,
                                            offerListingID: A,
                                            sessionID: x,
                                            quantity: l,
                                            reftag: "afx-dp-addtocart",
                                            success: function(e) {
                                                try {
                                                    g.sendWidgetMetrics(p.freshUATCTCallScope);
                                                    var k;
                                                    if (e && e.isOK) {
                                                        var A = e.extraErrorInfos;
                                                        if (A && A.constructor === Array && 0 < A.length) k = !0;
                                                        else {
                                                            var q = e.statusList,
                                                                m;
                                                            if (q && q.constructor === Array && 0 < q.length) {
                                                                var t = C(q);
                                                                m = t && 0 < t.length } else m = !1;
                                                            k = m ? !0 : !1 } } else k = !0;
                                                    if (k)
                                                        if (g.increment(p.freshUATCInvalidErrorResponseCountMetric), e)
                                                            if (e.isOK) {
                                                                var v = e.extraErrorInfos,
                                                                    y = e.statusList;
                                                                if (v && v.constructor !== Array) D(d, v, "extraErrorInfos");
                                                                else if (0 < v.length) {
                                                                    if (v && !(0 >= v.length)) {
                                                                        var r = v[0];
                                                                        if ("ADDRESS_NOT_SELECTED" === r.statusCode) {
                                                                            g.increment(p.freshUATCAddressNotSelectedErrorCountMetric);
                                                                            b.log("fresh-atc-handler: Address is not selected.", "INFO");
                                                                            var w = c.param({ asin: d.data.asin, offerListingID: d.data.offerListingID, quantity: 1, redirectURL: document.location.href, ref: "afx_atfc_noaddress" });
                                                                            document.location.href = "/afx/nc/chooseaddress?" + w
                                                                        } else B(d, { reasonCode: r.itemStatusCode, quantityAdded: r.availableQuantity, quantityRequested: r.requestedQuantity })
                                                                    }
                                                                } else if (y && y.constructor !== Array) D(d, y, "statusList");
                                                                else if (0 < y.length && y && !(0 >= y.length)) {
                                                                    var z = C(y);
                                                                    z && 0 < z.length && B(d, { reasonCode: u[z[0].statusKey] }) }
                                                            } else g.increment(p.freshUATCFailureCountMetric),
                                                                n(d, "", "", "isOK returned by UATC is false");
                                                    else g.increment(p.freshUATCFailureCountMetric), n(d, "", "", "No response from UATC");
                                                    else g.increment(p.freshUATCSuccessCountMetric), h(e, x, l)
                                                } catch (F) { g.increment(p.freshAddToCartExceptionCountMetric), b.log("fresh-atc-handler exception: " + F, "ERROR") } finally { a.delay(f, E.reEnableDelay) }
                                            },
                                            error: function(c, e, h) {
                                                try { g.sendWidgetMetrics(p.freshUATCTCallScope), g.increment(p.freshUATCFailureCountMetric), n(d, c, e, h) } catch (k) {
                                                    g.increment(p.freshAddToCartExceptionCountMetric),
                                                        b.log("fresh-atc-handler exception: " + k, "ERROR")
                                                } finally { a.delay(f, E.reEnableDelay) }
                                            }
                                        })
                                    } else b.log('fresh-atc-handler: Required "sessionID" action parameter is missing.', "ERROR"), g.increment(p.freshAddToCartMissingParameterCountMetric), n(d)
                                } else b.log('fresh-atc-handler: Required "offerListingID" action parameter is missing.', "ERROR"), g.increment(p.freshAddToCartMissingParameterCountMetric), n(d)
                            } else b.log('fresh-atc-handler: Required "title" action parameter is missing.', "ERROR"), g.increment(p.freshAddToCartMissingParameterCountMetric),
                                n(d);
                        else b.log('fresh-atc-handler: Required "asin" action parameter is missing.', "ERROR"), g.increment(p.freshAddToCartMissingParameterCountMetric), n(d)
                    } catch (m) { g.increment(p.freshAddToCartExceptionCountMetric), b.log("fresh-atc-handler exception: " + m, "ERROR"), a.delay(f, E.reEnableDelay) }
                }

                function y(a) { m && "function" === typeof m.refresh ? m.refresh() : k(a) }
                var E = { reEnableDelay: 1E3 },
                    p = {
                        freshAddToCartClickCountMetric: "freshAddToCartClickCount",
                        freshAddToCartMissingParameterCountMetric: "freshAddToCartMissingParameterCount",
                        freshAddToCartExceptionCountMetric: "freshAddToCartExceptionCount",
                        freshUATCTCallScope: "freshUATCCall",
                        freshUATCSuccessCountMetric: "freshUATCSuccessCount",
                        freshUATCFailureCountMetric: "freshUATCFailureCount",
                        freshUATCInvalidErrorResponseCountMetric: "freshUATCInvalidErrorResponseCount",
                        freshUATCAddressNotSelectedErrorCountMetric: "freshUATCAddressNotSelectedErrorCount",
                        freshUATCItemPartiallyAvailableErrorCountMetric: "freshUATCItemPartiallyAvailableErrorCount",
                        freshUATCItemPartiallyAvailableForReservationErrorCountMetric: "freshUATCItemPartiallyAvailableForReservationErrorCount",
                        freshUATCItemNotAvailableErrorCountMetric: "freshUATCItemNotAvailableErrorCount",
                        freshUATCItemNotAvailableForReservationErrorCountMetric: "freshUATCItemNotAvailableForReservationErrorCount",
                        freshUATCEmptyItemStatusCodeErrorCountMetric: "freshUATCEmptyItemStatusCodeErrorCount",
                        freshUATCItemPriceUnavailableErrorCountMetric: "freshUATCItemPriceUnavailableErrorCount",
                        freshUATCItemCountOverflowErrorCountMetric: "freshUATCItemCountOverflowErrorCount"
                    },
                    w = {
                        itemNotAvailable: "ITEM_NOT_AVAILABLE",
                        itemPartiallyAvailable: "ITEM_PARTIALLY_AVAILABLE",
                        itemPartiallyAvailableForReservation: "ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION",
                        itemNotAvailableForReservation: "ITEM_NOT_AVAILABLE_FOR_RESERVATION",
                        itemPriceUnavailable: "PRICE_UNAVAILABLE",
                        itemCountOverflow: "QUANTITY_OVERFLOW"
                    },
                    F = function(a, c, g) { v(g);
                        y(c);
                        d.success(a) };
                a.declarative("fresh-atc-handler", "click", h(function(a, d) { q.valid() ? (t.vibrate(), g.increment(p.freshAddToCartClickCountMetric), z(a, F, d)) : d() }))
            }
        }
    });
    b.when("A", "jQuery", "a-button", "fresh-show-atl-changeover", "ready").register("FreshAddToShoppingList",
        function(a, c, f, e) {
            function k(a) { c("#" + a.asin + "-afx-atl-dropdown").change(function(d) { a.$alreadyInMessage.addClass("aok-hidden");
                    a.$errorMessage.addClass("aok-hidden") }) }

            function d(d) {
                var c = (a.state("baseWidgetState") || {}).csrfToken;
                a.post("/afx/lists/json/shoppinglists/additem", {
                    cache: !1,
                    timeout: 5E3,
                    params: { asin: d.asin, listID: d.shoppingListID, token: c },
                    success: function(a) {
                        d.addButtonInstance.enable();
                        a.successful ? (d.$modalParent.find("#" + d.cancelButtonID).click(), e()) : 1 === a.errorCodes[0] ? d.$alreadyInMessage.removeClass("aok-hidden") :
                            h(d)
                    },
                    error: function() { d.addButtonInstance.enable();
                        h(d) }
                })
            }

            function h(a) { a.$errorMessage.removeClass("aok-hidden");
                b.log("Failed to add asin " + a.asin + " to shopping list " + a.shoppingListID, "ERROR") }
            a.declarative("add-to-list", "click", function(a) {
                var c = a.$currentTarget.closest(".a-popover-wrapper");
                if (1 > c.length) b.log("Could not find the element that parents this modal (it should contain class a-popover wrapper)", "FATAL");
                else {
                    var e = c.find("#" + a.data.addButtonID),
                        h;
                    1 > e.length ? (b.log("Could not find the button that will add the item. This is required for preventing double clicks",
                        "ERROR"), h = !1) : a.data.asin ? h = !0 : (b.log("ASIN was blank. Please supply the ASIN you wish to add to the list.", "ERROR"), h = !1);
                    h && (e = f(e), e.isEnabled() && (e.disable(), a = { asin: a.data.asin, addButtonInstance: e, $modalParent: c, cancelButtonID: a.data.cancelButtonID, shoppingListID: c.find("#" + a.data.asin + "-afx-atl-dropdown").val(), $alreadyInMessage: c.find("#afx-atl-already-in"), $errorMessage: c.find("#afx-atl-service-error") }, a.$alreadyInMessage.addClass("aok-hidden"), a.$errorMessage.addClass("aok-hidden"), k(a),
                        d(a)))
                }
            })
        });
    b.when("A", "jQuery", "a-dropdown", "fresh-dp-constants").register("fresh-dp-quantity", function(a, c, b, e) {
        return function() {
            var f, d, h, g, v, q, t, m, u, l, n, B, x, r = function() {
                    if (!f) { d = c(e.addToCartButtonSelector);
                        v = b.getSelect(e.dropdownID);
                        if (h = !!v) { g = c(e.dropdownDivSelector);
                            var a = v.getOptions().size();
                            a && (t = a - 1) }
                        m = c(e.freeTextDivSelector);
                        if (q = 0 !== m.length) u = c(e.freeTextInputSelector), l = c(e.freeTextErrorDivsSelector), n = c(e.freeTextErrorMsgMin), B = c(e.freeTextErrorMsgMax) } },
                D = function() {
                    a.on(e.dropdownSelectedID,
                        function(a) { c(a.nativeItemNode).index() === t ? (u.attr("validValue", x), u.val(x), m.show(), l.hide(), g.hide(), u.focus().select()) : x = v.val() });
                    var b = function() {
                            var a = u.attr("validValue");
                            a && (v.val(a), v.val() === a ? (x = a, g.show(), m.hide()) : d.focus()) },
                        h = function() {
                            var a = z(u.val());
                            u.attr("validValue", a ? a : "") };
                    u.change(h);
                    u.keyup(h);
                    u.keypress(function(a) {
                        if (0 === a.which || 8 === a.which || a.ctrlKey || a.altKey || e.rxNumbersOnly.test(String.fromCharCode(a.which))) return !0;
                        13 === a.which && (b(), d.click());
                        return !1 });
                    u.blur(b)
                },
                z = function() {
                    var a;
                    a: { a = u.val();
                        if (e.rxNumbersOnly.test(a) && (a = parseInt(a, 10), !isNaN(a))) break a;a = !1 }
                    l.hide();
                    if (!1 === a || 0 >= a) n.show();
                    else if (1E3 <= a) B.show();
                    else return String(a);
                    return !1 };
            return {
                init: function() { f = !1;
                    r();
                    f = !0;
                    if (q) { m.hide().removeClass(e.auiHiddenClass);
                        l.hide().removeClass(e.auiHiddenClass);
                        var a = v.getOption(t),
                            d = a.info()[0].text;
                        a.update({ value: "0", text: c.trim(d) + "+" });
                        x = v.val();
                        D() } },
                valid: function() { r();
                    return q && m.is(":visible") ? !1 !== z() : !0 },
                val: function() {
                    r();
                    return q && m.is(":visible") ?
                        u.attr("validValue") : h ? v.val() : 1
                }
            }
        }()
    });
    b.register("fresh-dp-constants", function() {
        return {
            actionPanelStateData: "apstate",
            actionPanelFreshState: "fresh",
            mobileNavSearchFormSelector: '#nav-search-form, form[role="search"], #searchForm',
            rxNumbersOnly: /^\d+$/,
            auiHiddenClass: "aok-hidden",
            addToCartButtonSelector: "#freshCartButton",
            dropdownID: "freshQuantity",
            dropdownSelectedID: "a:dropdown:selected:freshQuantity",
            dropdownDivSelector: "#quantitySelect",
            freeTextDivSelector: "#quantityText",
            freeTextInputSelector: "#quantityTextInput",
            freeTextErrorDivsSelector: "#quantityTextErrors > div",
            freeTextErrorMsgMin: "#quantityFreeTextErrorMsgMin",
            freeTextErrorMsgMax: "#quantityFreeTextErrorMsgMax"
        }
    });
    b.when("A", "ready").register("fresh-dp-prevent-atc-default", function(a) {
        return { init: function() { a.$("#addToFreshCart").submit(function(a) { a.preventDefault() }) } } });
    b.when("A").register("afx-dp-uatc-proxy", function(a) {
        return function(c) {
            var b = "/gp/add-to-cart/json";
            c.reftag !== r && (b += "/ref=" + c.reftag);
            a.post(b, {
                timeout: 5E3,
                params: {
                    "session-id": c.sessionID,
                    clientName: "SharedFreshHandler",
                    nextPage: "cartitems",
                    ASIN: c.asin,
                    offerListingID: c.offerListingID,
                    useUber: "1",
                    source: "Fresh",
                    ruleSet: "FreshGet",
                    quantity: c.quantity
                },
                success: c.success,
                error: c.error
            })
        }
    });
    b.when("A").register("afx-dp-get-cart-count", function(a) {
        return function(c) { a.get("/gp/api/cart/1.0/get-cart-count.json", { timeout: 5E3, params: { sessionID: c.sessionID, clientName: "sharedFreshHandler" }, success: c.success, error: c.error }) } });
    b.when("A").register("afx-dp-get-cart-item-count",
        function(a) {
            return function(a, b) {
                if (b && b.items) {
                    var e;
                    for (e = 0; e < b.items.length; ++e) {
                        var f = b.items[e];
                        if (f && f.ASIN === a) return f.quantity } } } });
    b.register("afx-dp-csm-metrics-utils", function() {
        return {
            setWidgetClickTimestamp: function(a) { f.ue && f.uet && a && f.uet("bb", a, { wb: 1 }) },
            setWidgetTimestamp: function(a, c) { f.ue && f.uet && a && c && f.uet(a, c, { wb: 1 }) },
            increment: function(a) { f.ue && f.ue.count && a && f.ue.count(a, (f.ue.count(a) || 0) + 1) },
            setCount: function(a, c) { f.ue && f.ue.count && a && c && f.ue.count(a, c) },
            sendWidgetMetrics: function(a) {
                f.ue &&
                    f.uex && a && f.uex("ld", a, { wb: 1 })
            }
        }
    });
    b.when("A", "jQuery", "a-button", "ready").register("fresh-dp-double-click", function(a, c, b) {
        return function(c) {
            var b = { disabled: "true" },
                d = {};
            return function(h) {
                var g = a.state("fresh-atc-status");
                g && g.disabled || (g && a.state("fresh-atc-status", b), c(h, function() {
                    (g = a.state("fresh-atc-status")) && a.state.replace("fresh-atc-status", d) })) } } });
    b.register("afx-utils", function() {
        return {
            isFunction: function(a) {
                return "function" === typeof a },
            isDefined: function(a) {
                return "undefined" !==
                    typeof a
            },
            vibrate: function() {
                return f.amazon && f.amazon.cordova && f.amazon.cordova.notification && f.amazon.cordova.notification.vibrate && f.amazon.cordova.notification.vibrate(50) }
        }
    })
});
/* ******** */
(function(b) {
    var f = window.AmazonUIPageJS || window.P,
        r = f._namespace || f.attributeErrors,
        a = r ? r("FreshDetailPageMobileAssets") : f;
    a.guardFatal ? a.guardFatal(b)(a, window) : a.execute(function() { b(a, window) }) })(function(b, f, r) {
    b.when("A", "afx-update-cart-count", "prime-fresh-upsell", "fresh-dp-prevent-atc-default", "ready").register("fresh-dp-add-to-cart", function(a, c, f, e) {
        var k = !1;
        return {
            init: function(a) {
                k || (b.when("fresh-atc-handler").execute(function(a) {
                    a.addToFreshCart({
                        success: function(a) { f.handlePrimeFreshUpsell() },
                        error: function(a, d, c, e) { b.log("Error adding to Cart on Fresh Detail Page", "Error") }
                    })
                }), k = !0);
                a && c(a);
                e.init()
            }
        }
    });
    b.when("A", "jQuery", "airy-image-block", "image-block-exp-weblab", "atf").execute(function(a, c, A, e) {
        function k() {
            l.length && n && n.calculatedWidth && n.calculatedHeight && n.heroFocalPoint && (n.imageWidth && "undefined" !== typeof n.imageWidth && 0 !== n.imageWidth ? l.css({
                "background-position": (f.innerWidth || document.documentElement.clientWidth || document.body.clientWidth) / 2 - 14 - n.heroFocalPoint *
                    n.calculatedWidth / n.imageWidth + "px center"
            }) : l.css({ "background-position": "center center" }))
        }

        function d(a, d) {
            if (null !== a && a !== r && "string" === typeof a) {
                var c = new Image;
                null !== d && d !== r && "function" === typeof d && (c.onload = d);
                c.src = a } }

        function h() {
            if (l.length)
                if (l.css({ "-webkit-transform": "translateX(-" + (0 === t ? t : t + 40) + "px)" }), q) {
                    var a;
                    a = Math.abs(1E3 * (v ? m - t : m + t) / g);
                    a = Math.max(a, 300);
                    a = Math.min(a, 1.2 * f.innerWidth);
                    l.css({
                        "-webkit-transition": "all " + a + "ms cubic-bezier(0.215,0.61,0.355,1)",
                        transition: "all " +
                            a + "ms cubic-bezier(0.215,0.61,0.355,1)"
                    })
                } else l.css({ "-webkit-transition": "", transition: "" })
        }
        var g, v = !1,
            q = !1,
            t = 0,
            m = 0,
            u = !1,
            l = c("#heroImage"),
            n;
        l && (b.when("A").register("loadFreshHeroImage", function(a) {
            return {
                loadImage: function(a) {
                    l.length && a.heroImageUrl && a.calculatedWidth && a.calculatedHeight && d(a.heroImageUrl, function() {
                        var d = a.heroImageUrl,
                            c = a.calculatedWidth,
                            b = a.calculatedHeight;
                        l.length && d && c && b && l.css({
                            "background-image": 'url("' + d + '")',
                            "background-size": c + "px " + b + "px",
                            "max-width": c + "px",
                            "min-height": b +
                                "px",
                            filter: "",
                            "-ms-filter": ""
                        })
                    })
                }
            }
        }), b.when("A").register("updateFreshRepositionData", function(a) {
            return { updateData: function(a) { n = a } } }), b.when("A", "ready").execute(function(a) { a.on.orientationchange(k) }), b.when("A", "jQuery").execute("test-fresh-gestures", function(a, d) { d("#heroContainer").bind("swipe", function(a, d) { g = d.velocityX;
                v = 0 > d.velocityX;
                a.stopPropagation() }) }), a.on("a:carousel:image-block-carousel:change:pageNumber", function(a) {
            (q = a.newValue) && h() }), a.on("a:carousel:image-block-carousel:change:px",
            function(a) { t = a.newValue;
                m = a.oldValue;
                h() }), a.on("a:carousel:image-block-carousel:change:animating", function(a) { u = a.newValue;!u && q && (q = !1);
            h() }), a.on("image-block-refresh", function() { t = 0;
            h() }))
    });
    b.when("A", "afx-utils", "ready").register("fresh-show-atc-changeover", function(a, c) {
        var b = a.$;
        return function(e) {
            var f = b("#afx-atc-changeover");
            if (e && 0 < f.length && c.isFunction(f.find)) {
                var d = a.state("fresh-atc-toast-text");
                d && d.atcToastTextString && (e = d.atcToastTextString.replace("FreshATCToastQuantity", e),
                    (d = f.find(".a-changeover-inner")) && c.isFunction(d.text) && (d.text(e), c.isFunction(f.show) && f.show()))
            }
        }
    });
    b.when("A", "afx-dp-get-cart-count").register("afx-update-cart-count", function(a, c) {
        return function(a) {
            var e = function(a) { b.when("nav.setCartCount").execute(function(d) { d(a) });
                b.when("aw-mash").execute(function(d) { d.cart && "function" === typeof d.cart.didUpdate && d.cart.didUpdate({ newCartQuantity: a }) }) };
            c({
                sessionID: a,
                success: function(c) {
                    c && c.isOK && c.total && "undefined" !== typeof c.total.numActiveItem ?
                        e(c.total.numActiveItem) : b.log("Failed to get cart count", "Error", a)
                },
                error: function() { b.log("Failed to get cart count", "Error", a) }
            })
        }
    });
    b.when("A", "afx-utils", "ready").register("fresh-show-atl-changeover", function(a, c) {
        var b = a.$,
            e = b("#afx-atl-changeover");
        return function() { 0 < e.length && c.isFunction(e.show) && e.show() } });
    b.when("A", "ready").register("prime-fresh-upsell", function(a) {
        var c = function(a) { a.isOk || b.log("prime-fresh-upsell: prime fresh upsell call encountered error", "ERROR") },
            f = function(a) { b.log("prime-fresh-upsell: prime fresh upsell call failed", "ERROR") };
        return { handlePrimeFreshUpsell: function() { a.$("#primeFreshUpsellCheckbox").is(":checked") && a.post("/afx/detailpage/primefreshupsell", { success: c, timeout: 500, error: f }) } }
    });
    b.when("A", "jQuery", "fresh-dp-constants", "ready").register("fresh-dp-s-fix-nav-properties-js", function(a, c, f) {
        a = a.state("freshPageState");
        var e = c("#ppd.fresh").length;
        a && !b.fixingNavProperties && e && (b.fixingNavProperties = !0, a = c("<input>").attr({
            type: "hidden",
            name: "n",
            value: a.freshNodeId
        }), c(f.mobileNavSearchFormSelector).append(a))
    });
    b.when("A", "jQuery").register("freshTitleExpander", function(a, c) {
        var b = function() {
                var a = !1,
                    c = !1;
                return { isExpanded: function() {
                        return a }, expand: function() { a = !0 }, collapse: function() { a = !1 }, isExpanderEnabled: function() {
                        return c }, disableExpander: function() { c = !1 }, enableExpander: function() { c = !0 } } },
            e = function() {
                var d = c("#title"),
                    b = c("#freshProductTitleGroup"),
                    e = c("#image-block");
                return {
                    isTitleOverflowing: function() {
                        return d.prop("scrollHeight") >
                            d.height() + 1
                    },
                    addCaret: function() { d.addClass("with-caret");
                        b.addClass("collapsed") },
                    removeCaret: function() { d.removeClass("with-caret");
                        d.removeClass("unclamp");
                        b.removeClass("collapsed");
                        b.removeClass("expanded") },
                    expand: function() { a.delay(function() { d.removeClass("with-caret");
                            d.addClass("unclamp");
                            b.removeClass("collapsed");
                            b.addClass("expanded") }) },
                    collapse: function() { a.delay(function() { d.removeClass("unclamp");
                            d.addClass("with-caret");
                            b.removeClass("expanded");
                            b.addClass("collapsed") }) },
                    getTitle: function() {
                        return d },
                    getImageBlock: function() {
                        return e }
                }
            },
            k = function(d, b) {
                var e = function() { d.isExpanded() && (b.collapse(), d.collapse()) },
                    k = function() { d.isExpanded() && c(f).scrollTop() > b.getTitle().height() && e() },
                    q = function() { d.isExpanded() ? (b.collapse(), d.collapse()) : (b.expand(), d.expand()) },
                    r = function() {
                        return function() {
                            a.delay(function() {
                                if (b.isTitleOverflowing() && !d.isExpanderEnabled()) m(), b.addCaret(), d.enableExpander();
                                else if (b.isTitleOverflowing() && d.isExpanderEnabled()) e();
                                else if (!b.isTitleOverflowing() && d.isExpanderEnabled()) {
                                    b.getTitle().unbind("click",
                                        q);
                                    c(f).unbind("scroll", k);
                                    var a = b.getImageBlock();
                                    a.length && a.unbind("touchstart", e);
                                    b.removeCaret();
                                    d.disableExpander()
                                }
                            }, 400)
                        }
                    },
                    m = function() { b.getTitle().bind("click", q);
                        a.on.scroll(k);
                        var c = b.getImageBlock();
                        c.length && c.bind("touchstart", e) };
                return { init: function() { b.isTitleOverflowing() && (m(), b.addCaret(), d.enableExpander());
                        var c = r();
                        a.on.orientationchange(c);
                        a.on.resize(c) } }
            };
        return { init: function() {
                (new k(new b, new e)).init() } }
    })
});
/* ******** */
(function(f) {
    var g = window.AmazonUIPageJS || window.P,
        m = g._namespace || g.attributeErrors,
        c = m ? m("RegionLocationSelectorAssets") : g;
    c.guardFatal ? c.guardFatal(f)(c, window) : c.execute(function() { f(c, window) }) })(function(f, g, m) {
    f.when("A", "jQuery").register("afx-rls-aui-extensions", function(c, a) {
        return { setButtonTextByClass: function(b, d) { a("." + b + " .a-button-text").html(d) } } });
    f.when("jQuery", "a-button", "ready").register("afx-rls-double-click", function(c, a) {
        function b(b) {
            b = b.$currentTarget.find(".a-button");
            if (b.length) return a(b)
        }
        return function(a) {
            return function(c) {
                var q = c.$currentTarget;
                if (!q.data("afx-event-disabled")) {
                    var h = b(c);
                    if (!h || h.isEnabled()) q.data("afx-event-disabled", !0), h && h.disable(), a(c, function() { q.data("afx-event-disabled", !1);
                        h && h.enable() }) } } }
    });
    f.when("A", "jQuery", "ready").execute(function(c, a) {
        c.declarative("see-more-delivery-address", "click", function() {
            a("#addressListTable").find(".addressEntry").removeClass("aok-hidden");
            a("#seeMoreLinkSection").addClass("aok-hidden");
            a("#moreAddressesSection").removeClass("aok-hidden");
            var b = g.ue;
            "undefined" !== typeof b && "undefined" !== typeof b.count && b.count("customerClickedSeeMoreDeliveryAddress", (b.count("customerClickedSeeMoreDeliveryAddress") || 0) + 1)
        })
    });
    f.when("A", "jQuery", "ready").register("afx-rls-page-state", function(c, a) {
        function b() {
            return e("zip-modal-page-state", b) }

        function d() {
            return e("location-selector-state", d) }

        function e(a, b) {
            var d = c.state(a);
            d || b.haveTriedAStateParse || (b.haveTriedAStateParse = !0, c.state.parse(),
                d = c.state(a));
            return d
        }
        return { getZipModalPageState: b, getAddressPageState: d, isWeblabEnabledForLCR: function() {
                return "true" === a('input[name="weblabstateForLCR"]').val() } }
    });
    f.when("A", "jQuery", "ready").execute(function(c, a) {
        function b() { a("#rlsZipcodeTextbox").keypress(function(b) { 13 === b.which && a("#updateZipCodeButton").click() }) }
        c.declarative("show-zipcode-text-input", "click", function() {
            c.post("/afx/regionlocationselector/ajax/showZipcodeTextinput", {
                cache: !1,
                timeout: 5E3,
                success: function(c) {
                    a("#rls-flyout-locationZipcodeSection").html(c);
                    b()
                },
                error: function() { a(".rls-error-message").addClass("aok-hidden");
                    a("#rlsShowZipInputMessage").removeClass("aok-hidden") }
            })
        });
        c.declarative("show-zipcode-text-input-mobile", "click", function() { a("#rls-flyout-locationZipcodeSection").addClass("aok-hidden");
            a("#rls-flyout-locationZipcodeSection-change").removeClass("aok-hidden") });
        b()
    });
    f.when("A", "jQuery", "afx-rls-aui-extensions", "afx-rls-location-change-resolution", "afx-cart-conflict-resolution", "ready").register("afx-rls-update-address",
        function(c, a, b, d, e) {
            function q(a, b, c, d) { h(a.addressId, a.regionId, b, c, d) }

            function h(b, d, e, h, n) { c.post("/afx/regionlocationselector/ajax/updateAddress", { cache: !1, timeout: 5E3, params: { addressId: b, regionId: d, token: e }, success: function() { h() }, error: function() { l();
                        a("#rlsSetAddressErrorMessage").removeClass("aok-hidden");
                        n && n() } }) }

            function n(a, b, d, e) {
                c.post("/afx/slotselection/cancel", {
                    cache: !1,
                    timeout: 5E3,
                    params: { remainOrderSlotMapping: "1", token: b },
                    success: function() { h(a.addressID, a.regionID, b, d, e) },
                    error: function() {
                        f.log("Failed to clear reservation slot",
                            "FATAL");
                        h(a.addressID, a.regionID, b, d, e)
                    }
                })
            }

            function l() { a(".rls-error-message").addClass("aok-hidden");
                b.setButtonTextByClass(k(), m()) }

            function g() { a(".rls-warning-message").addClass("aok-hidden");
                b.setButtonTextByClass(k(), m()) }

            function r() {
                return a("#addressChangeCallToAction").data() }

            function m() {
                return a("#confirmButtonCallToActionStrings").data().defaultString }

            function k() {
                return "rls-confirm-button" }
            return {
                updateAddress: q,
                processAndUpdateAddress: function(a, b, c, d, e, h) {
                    !0 === e ? n(a, b, c, d) : q(a, b,
                        c, d)
                },
                processAndUpdateAddressLCR: function(a, b, c, d, h) { e.getHasConflict() && e.shouldCustomerRedirectedToCartConflictPage() ? (c = {}, c.newRegionId = a.regionId, c.newAddressId = a.addressId, c.oldRegionId = b.regionId, c.oldAddressId = b.addressId, e.resolveCartConflicts(c)) : q(a, c, d, h) },
                getAddress: function(b) { b = (b && b.length ? b.find("#addressListTable") : a("#addressListTable")).find(".addressEntry").find("input:radio:checked").closest(".addressEntry");
                    return { addressId: b.data("address-id"), regionId: b.data("region-id") } },
                showChangingAddressWarning: function(c, d) { l();
                    g();
                    return !0 === c && !1 === d ? (l(), g(), b.setButtonTextByClass(k(), r().regionChange), a("#rls-flyout-changingRegionAndReservationSection").removeClass("aok-hidden"), !0) : !0 === c ? (l(), g(), b.setButtonTextByClass(k(), r().addressChange), a("#rls-flyout-changingReservationSection").removeClass("aok-hidden"), !0) : !1 === d ? (l(), g(), b.setButtonTextByClass(k(), r().regionChange), a("#rls-flyout-changingRegionSection").removeClass("aok-hidden"), !0) : !1 },
                evaluateCartConflictInNewRegion: function(a,
                    b) { l();
                    g();
                    var c = {};
                    c.newRegionId = a.regionId;
                    c.newAddressId = a.addressId;
                    c.oldRegionId = b.regionId;
                    c.oldAddressId = b.addressId;
                    d.callLocationChangeResolutionToDetermineCartConflicts(c) },
                hideAllWarningMessages: g,
                getPreviouslySelectedAddressRegion: function() {
                    return { addressId: a('input[name="selectedAddressId"]').val(), regionId: a('input[name="selectedRegionId"]').val() } }
            }
        });
    f.when("A", "jQuery", "afx-rls-mobile-confirm", "ready").register("afx-rls-update-zip", function(c, a, b) {
        function d(a, b, d, e) {
            c.post("/afx/regionlocationselector/ajax/updateZipcode", { cache: !1, timeout: 5E3, params: { zipcode: a, token: b }, success: function() { d() }, error: function() { n();
                    e && e() } })
        }

        function e() {
            return a("#rlsZipcodeTextbox").val() }

        function q(a, b, c) { h(a, g, m, function(a) { d(a, b, c) }) }

        function h(a, b, d, e) { c.post("/afx/regionlocationselector/ajax/validateZipCode?ref=afx_rls_zip_" + a, { cache: !1, timeout: 5E3, params: { zipcode: a }, success: function(c) { 0 < c.count ? e(a) : b(a) }, error: function() { d() } }) }

        function n() { f();
            k(a("#rlsSetZipcodeErrorMessage")) }

        function l(c) {
            v();
            a("#rlsEligibleZipCodeValue").text(c);
            a("#rlsZipcodeTextbox").removeClass("a-form-error");
            k(a("#rlsEligibleZipInputMessage"));
            b.eligibleZipEntered()
        }

        function f() { v();
            a("#rlsZipcodeTextbox").addClass("a-form-error") }

        function g(c) { f();
            k(a("#rlsShowIneligibleZipInputMessage"));
            b.ineligibleZipEntered() }

        function m() { n();
            b.ineligibleZipEntered() }

        function k(a) { a.removeClass("aok-hidden") }

        function v() { a(".rls-error-message").addClass("aok-hidden") }
        return {
            validateAndUpdateZip: function(a, b) {
                var c = e();
                q(c, a, b) },
            validateZip: function() {
                var a = e();
                h(a, g, m, l)
            },
            updateZip: d,
            getZip: e
        }
    });
    f.when("A", "afx-rls-update-zip", "afx-rls-page-state", "ready").execute(function(c, a, b) {
        function d() { document.location.reload(!0) }
        c.declarative("update-zipcode", "click", function() {
            var c = b.getAddressPageState().freshCSRFToken;
            a.validateAndUpdateZip(c, d) });
        c.declarative("check-zipcode", "click", function() { a.validateZip() }) });
    f.when("A", "jQuery", "afx-rls-page-state", "a-modal", "ready").register("afx-rls-zip-modal", function(c, a, b, d) {
        function e() {
            return a("#zip-input").val().trim() }

        function f(a) {
            var b = new RegExp(p.regex);
            if ("" !== a && b.test(a.toUpperCase())) return !0;
            n("invalid", p.invalidZipCodeText);
            return !1 }

        function h() { a(".zip-message").hide() }

        function n(b, c) {
            if ("eligible" === b) h(), a("#eligible-zip-message-text").html(c), a("#eligible-zip-message").show();
            else if ("ineligible" === b || "invalid" === b) h(), a("#ineligible-zip-message-text").html(c), a("#ineligible-zip-message").show();
            var d = a("#continue-shop-button"),
                e = d.find(".a-button-text");
            "eligible" === b ? (d.removeClass("a-button-disabled"),
                e.text(p.continueShoppingText), d.val("eligible")) : "ineligible" === b && (d.removeClass("a-button-disabled"), e.text(p.continueBrowsingText), d.val("ineligible"))
        }

        function l(a, b) {
            return a.replace(/{zipCode}/g, b.toUpperCase()) }

        function g() {
            var b = e();
            b.length < p.minInputLength ? (a("#continue-shop-button").addClass("a-button-disabled"), h()) : f(b) && c.post("/afx/regionlocationselector/ajax/validateZipCode?ref=afx_rls_ncx_zip_" + b, {
                cache: !1,
                timeout: 5E3,
                params: { zipcode: b },
                success: function(a) {
                    b === e() && (0 < a.results.length ?
                        n("eligible", l(p.eligibleZipCodeText, b)) : 0 < a.partialResults.length ? n("ineligible", l(p.partiallyEligibleZipCodeText, b)) : n("ineligible", l(p.ineligibleZipCodeText, b)))
                },
                error: function() { n("ineligible", l(p.failedZipCodeText)) }
            })
        }

        function m() {
            var a = (c.state("baseWidgetState") || {}).csrfToken;
            c.post("/afx/nc/json/storecontinuebrowsinginsession", { cache: !1, timeout: 5E3, params: { hasSelected: !0, token: a }, success: function() { k() }, error: function() { k() } }) }

        function w(a) {
            var b = (c.state("baseWidgetState") || {}).csrfToken;
            c.post("/afx/regionlocationselector/ajax/updateZipcode", { cache: !1, timeout: 5E3, params: { zipcode: a, token: b }, success: function() { k();
                    document.location.reload(!0) }, error: function() { n("ineligible", "Failed to set the zipcode " + a) } })
        }

        function k() { u && u.unlock(11).hide() }

        function v() { a("#zip-input").focus() }

        function x() { u || (u = d.get(a("#zip-code-modal")));
            u && (u.show().lock(11), a(".a-popover-wrapper").addClass("invisible")) }

        function z() { t && clearInterval(t);
            t = null;
            t = setInterval(A, 500) }

        function A() {
            a("#zip-code-modal").length ||
                k()
        }
        var p, u, t;
        c.on("a:popover:ajaxContentLoaded:zipCodeModal", function() { p = b.getZipModalPageState();
            h();
            g();
            setTimeout(v, 100);
            var c = a("#zip-modal-section");
            c.closest(".a-popover-inner").addClass("zip-modal-popover-inner");
            c.closest(".a-popover-wrapper").addClass("zip-modal-popover-wrapper");
            a(".a-popover-wrapper").removeClass("invisible") });
        c.on("a:popover:afterShow:zipCodeModal", function() { setTimeout(z, 500) });
        c.on("a:popover:afterHide:zipCodeModal", function() { t && clearInterval(t);
            t = null });
        c.declarative("zip-text-input-action",
            "change keyup",
            function(a) { g() });
        c.declarative("set-zip-button-action", "click", function(a) { "ineligible" === a.$currentTarget.find("#continue-shop-button").val() ? (m(), k()) : (a = e(), f(a) && w(a)) });
        x();
        return { showModal: x }
    });
    f.when("A", "jQuery", "ready").execute(function(c, a) {
        function b(a) {
            var b = g.ue; "undefined" !== typeof b && "undefined" !== typeof b.count && b.count(a, (b.count(a) || 0) + 1) }
        c.declarative("locationselector-popover", "click", function() { b("customerClickedLocationSelector") });
        c.declarative("locationselector-popover",
            "mouseenter",
            function() { b("customerHoverOverLocationSelector") })
    });
    f.when("A", "jQuery", "afx-rls-update-address", "afx-rls-page-state", "ready").execute(function(c, a, b, d) {
        function e() { document.location.reload(!0) }

        function f(a) {
            return b.getAddress(a.$currentTarget.closest("#rls-flyout-main")) }
        c.declarative("update-address", "click", function(a) {
            if ("true" === a.data.isCurrentAddress) b.hideAllWarningMessages();
            else {
                var c = d.getAddressPageState(),
                    l = c.freshCSRFToken;
                d.isWeblabEnabledForLCR() ? "true" ===
                    a.data.isCurrentRegion ? b.updateAddress(f(a), l, e, m) : b.evaluateCartConflictInNewRegion(f(a), b.getPreviouslySelectedAddressRegion()) : b.showChangingAddressWarning(c.reservationId && !c.isOrderSlot, "true" === a.data.isCurrentRegion) || b.updateAddress(f(a), l, e)
            }
        });
        c.declarative("confirm-change-address", "click", function(a) {
            var c = d.getAddressPageState(),
                l = c.freshCSRFToken;
            d.isWeblabEnabledForLCR() ? b.processAndUpdateAddressLCR(f(a), b.getPreviouslySelectedAddressRegion(), l, e, m) : b.processAndUpdateAddress(f(a), l,
                e, m, c.reservationId && !c.isOrderSlot, "true" === a.data.isCurrentRegion)
        });
        c.declarative("cancel-change-address", "click", function() {
            var c = a('input[name="selectedAddressId"]').val();
            a("input[name=addressEntryButton][value=" + c + "]").prop("checked", !0);
            b.hideAllWarningMessages() })
    });
    f.when("A").register("afx-constants", function(c) {
        return {
            RLSConstants: {
                CART_CONFLICT_END_POINT_PREFIX: "/afx/cartconflicts/",
                RESOLVE_SUBSTITUE_OPERATION: "resolve/substitute",
                GET_CONFLICT_SUMMARY_OPERATION: "getconflictsummary",
                HAS_RESERVATION_CONFLICT: "reservationConflict",
                AVAILABILITY_CONFLICT: "availabilityConflict",
                PRICE_CONFLICT: "priceConflict",
                CLEAR_CART_CONFLICT: "clearCartConflict",
                URL_PATH_DELIMETER: "/",
                URL_QUERY: "?",
                CLIENT_NAME: "locationSelector"
            }
        }
    });
    f.when("A", "jQuery", "afx-constants", "ready").register("afx-cart-conflict-resolution", function(c, a, b) {
        var d = { hasConflicts: "false", hasReservation: "false", cartConflictSummary: { totalItemCount: 0, quantityConflictsCount: 0, availabilityConflictsCount: 0, priceConflictsCount: 0 } };
        return {
            setCartConflictSummary: function(b) { d = {};
                d = a.extend(!0, {}, b) },
            shouldCustomerRedirectedToCartConflictPage: function() {
                "undefined" === typeof d && f.log("Conflict summary object is undefined", "FATAL");
                var a;
                "true" === d.hasConflicts ? 0 < d.cartConflictSummary.totalItemCount && (0 < d.cartConflictSummary.availabilityConflictsCount || 0 < d.cartConflictSummary.quantityConflictsCount || 0 < d.cartConflictSummary.priceConflictsCount) && (a = d.cartConflictSummary.availabilityConflictsCount === d.cartConflictSummary.totalItemCount ?
                    !1 : !0) : a = !1;
                return a
            },
            getConflictMessageType: function() {
                var a; "true" === d.hasReservation && (a = b.RLSConstants.HAS_RESERVATION_CONFLICT);
                if (0 < d.cartConflictSummary.availabilityConflictsCount || 0 < d.cartConflictSummary.quantityConflictsCount) a = b.RLSConstants.AVAILABILITY_CONFLICT;
                0 < d.cartConflictSummary.priceConflictsCount && (a = b.RLSConstants.PRICE_CONFLICT);
                d.cartConflictSummary.availabilityConflictsCount === d.cartConflictSummary.totalItemCount && (a = b.RLSConstants.CLEAR_CART_CONFLICT);
                return a },
            resolveCartConflicts: function(a) {
                document.location.href =
                    b.RLSConstants.CART_CONFLICT_END_POINT_PREFIX + b.RLSConstants.RESOLVE_SUBSTITUE_OPERATION + b.RLSConstants.URL_QUERY + ("newRegionId=" + a.newRegionId + "&oldRegionId=" + a.oldRegionId + "&newAddressId=" + a.newAddressId + "&oldAddressId=" + a.oldAddressId + "&client=" + b.RLSConstants.CLIENT_NAME + "&sourceUrl=" + document.location.pathname)
            },
            getHasConflict: function() {
                return "true" === d.hasConflicts }
        }
    });
    f.when("A", "jQuery", "afx-cart-conflict-resolution", "afx-constants", "ready").register("afx-rls-location-change-resolution",
        function(c, a, b, d) {
            function e(e, h) {
                c.post(d.RLSConstants.CART_CONFLICT_END_POINT_PREFIX + h, {
                    cache: !1,
                    timeout: 5E3,
                    params: { newRegionId: e.newRegionId, newAddressId: e.newAddressId, oldRegionId: e.oldRegionId, oldAddressId: e.oldAddressId, client: d.RLSConstants.CLIENT_NAME },
                    success: function(c) {
                        if ("true" === c.isSuccess) switch (b.setCartConflictSummary(c), b.getConflictMessageType()) {
                            case d.RLSConstants.HAS_RESERVATION_CONFLICT:
                                a("#rls-flyout-reservation-conflict-message").removeClass("aok-hidden");
                                break;
                            case d.RLSConstants.PRICE_CONFLICT:
                                a("#rls-flyout-price-conflict-message").removeClass("aok-hidden");
                                break;
                            case d.RLSConstants.CLEAR_CART_CONFLICT:
                                a("#rls-flyout-clear-cart-conflict-message").removeClass("aok-hidden");
                                break;
                            case d.RLSConstants.AVAILABILITY_CONFLICT:
                                a("#rls-flyout-availability-conflict-message").removeClass("aok-hidden")
                        }
                    },
                    error: function(a) { f.log("Failed to call Location change resolution UX " + a, "FATAL") }
                })
            }
            return { callLocationChangeResolutionToDetermineCartConflicts: function(a) { e(a, d.RLSConstants.GET_CONFLICT_SUMMARY_OPERATION) } }
        });
    f.when("A", "jQuery", "mash", "ready").execute(function(c,
        a) {
        if (a("#mobile-location-selector-page").length) {
            var b = g.cordova && g.cordova.require("cordova/exec"),
                d = document.URL,
                e = ["amazonfresh", "AmazonFresh", "/s?i=amazonfresh", d],
                d = ["amazonfresh", "AmazonFresh", "", d]; "function" === typeof b && (b(a.noop, a.noop, "MASHSearchScope", "setSearchScope", e), b(a.noop, a.noop, "AFMSearchScopePlugin", "setSearchScope", d)) } });
    f.when("A", "jQuery", "afx-rls-mobile-confirm", "afx-rls-update-address", "afx-rls-page-state", "ready").execute(function(c, a, b, d, e) {
        function f() {
            var a =
                e.getAddressPageState();
            return a.reservationId && !a.isOrderSlot
        }
        c.declarative("afx-rls-radio-button-selected", "click", function(a) {
            var c = a.$currentTarget.find("input:radio");
            c.is(":checked") || c.attr("checked", "checked");
            c = c.closest(".addressEntryButton");
            if (c.hasClass("zip-radio-button")) b.zipRadioButtonClicked();
            else if (c.hasClass("address-radio-button")) {
                var c = "true" === a.data.isCurrentAddress,
                    l = "true" === a.data.isCurrentRegion;
                a = a.$currentTarget.closest("#rls-flyout-container").children("#rls-flyout-main");
                b.addressRadioButtonClicked(c);
                c ? d.hideAllWarningMessages() : e.isWeblabEnabledForLCR() ? d.evaluateCartConflictInNewRegion(d.getAddress(a), d.getPreviouslySelectedAddressRegion()) : d.showChangingAddressWarning(f(), l)
            }
        })
    });
    f.when("A", "jQuery", "a-button", "ready").register("afx-rls-mobile-confirm", function(c, a, b) {
        function d() {
            var b = a("#zip-radio-button");
            return 0 < a("#rlsZipcodeTextbox").length && 0 === b.length || b.find("input:radio").is(":checked") }

        function e() {
            var a = h();
            a && a.enable() }

        function f() {
            var a =
                h();
            a && a.disable()
        }

        function h() {
            var c = a("#rls-mobile-confirm-button"),
                d;
            0 !== c.length && (d = b(c));
            return d }
        var g = !1;
        return { addressRadioButtonClicked: function(a) { a ? f() : e() }, zipRadioButtonClicked: function() { g ? e() : f() }, eligibleZipEntered: function() { g = !0;
                d() && e() }, ineligibleZipEntered: function() { g = !1;
                d() && f() }, isZipRadioButtonChecked: d }
    });
    f.when("A", "jQuery", "afx-rls-update-zip", "afx-rls-update-address", "afx-rls-page-state", "afx-rls-double-click", "afx-rls-mobile-confirm", "ready").execute(function(c,
        a, b, d, e, f, h) {
        function n() {
            var a = e.getAddressPageState().encodedRedirectURL;
            a ? g.location.href = decodeURIComponent(a) : document.location.reload(!0) }
        c.declarative("afx-rls-mobile-confirm", f(function(a, c) {
            if (h.isZipRadioButtonChecked()) {
                var f = e.getAddressPageState().freshCSRFToken;
                b.updateZip(b.getZip(), f, n, c) } else {
                var f = a.$currentTarget.closest("#rls-flyout-container").children("#rls-flyout-main"),
                    g = e.getAddressPageState(),
                    k = g.freshCSRFToken;
                e.isWeblabEnabledForLCR() ? d.processAndUpdateAddressLCR(d.getAddress(f),
                    d.getPreviouslySelectedAddressRegion(), k, n, c) : d.processAndUpdateAddress(d.getAddress(f), k, n, c, !!g.reservationId, !1)
            }
        }))
    })
});
(function(f) {
    var g = window.AmazonUIPageJS || window.P,
        m = g._namespace || g.attributeErrors,
        c = m ? m("FreshExperienceMobileSubnavAssets") : g;
    c.guardFatal ? c.guardFatal(f)(c, window) : c.execute(function() { f(c, window) }) })(function(f, g, m) {
    f.when("A", "jQuery", "mash", "fms-constants", "ready").execute("ChangeSearchScope", function(c, a, b, d) {
        c = g.cordova && g.cordova.require("cordova/exec");
        var e = document.URL;
        b = ["amazonfresh", "AmazonFresh", "/s?i=amazonfresh", e];
        e = ["amazonfresh", "AmazonFresh", "", e];
        a(d.SUBNAV_BAR_SELECTOR).length &&
            ("function" === typeof c && (c(a.noop, a.noop, "MASHSearchScope", "setSearchScope", b), c(a.noop, a.noop, "AFMSearchScopePlugin", "setSearchScope", e)), (a = g.ue) && a.count && a.count("freshSubnavIsApp", (a.count("freshSubnavIsApp") || 0) + 1))
    });
    f.declare("fms-constants", { SUBNAV_BAR_SELECTOR: "#fms-bar", INNER_SUBNAV_SELECTOR: "#innerSubnavDiv", LINK_FLYOUT_SELECTOR: "#fms-link-flyout", RHS_FLYOUT_SELECTOR: "#fms-rhs-flyout", VEIL_SELECTOR: "#fms-flyout-veil", SUBNAV_HEIGHT: 40, SUBNAV_MARGIN: 22 });
    f.when("A",
        "jQuery", "fms-constants", "ready").register("fms-library", function(c, a, b) {
        function d(d, e) { e = e || a.noop;
            var g = h(b.SUBNAV_BAR_SELECTOR),
                k = a(d).outerHeight();
            a(d).css({ "max-height": g });
            f(g, k);
            c.slideDown(a(d), 300, "ease", e) }

        function e(d, e) { e = e || a.noop;
            a("body").removeClass("disable-scroll");
            a(b.VEIL_SELECTOR).unbind("touchmove");
            a(b.INNER_SUBNAV_SELECTOR).unbind("touchmove");
            a(d).css({ "max-height": "" });
            c.slideUp(a(d), 300, "ease", e) }

        function f(c, d) {
            a("body").addClass("disable-scroll");
            var e = function(a) {
                a.preventDefault();
                a.stopPropagation()
            };
            a(b.VEIL_SELECTOR).bind("touchmove", e);
            d <= c && a(b.INNER_SUBNAV_SELECTOR).bind("touchmove", e)
        }

        function h(c) { c = a(g).height();
            var d = a(g).scrollTop(),
                d = a(b.SUBNAV_BAR_SELECTOR).offset().top + a(b.SUBNAV_BAR_SELECTOR).outerHeight() - d;
            return c - d }
        var n = function() {
                return c.isAnimated(a(b.LINK_FLYOUT_SELECTOR)) || c.isAnimated(a(b.RHS_FLYOUT_SELECTOR)) },
            l = function(a) { d(b.LINK_FLYOUT_SELECTOR, a) },
            y = function(a) { d(b.RHS_FLYOUT_SELECTOR, a) },
            r = function() { c.fadeOut(a(b.VEIL_SELECTOR), 300, "ease") },
            w = function() { a(b.VEIL_SELECTOR).css({ top: a(b.SUBNAV_BAR_SELECTOR).offset().top + b.SUBNAV_HEIGHT - a(g).scrollTop() });
                c.fadeIn(a(b.VEIL_SELECTOR), 300, "ease") },
            k = function(a) { a = { linkFlyoutOpen: a.linkFlyoutOpen, rhsFlyoutOpen: a.rhsFlyoutOpen };
                c.state("fmsState", a) };
        return {
            shouldNotStartHidingFlyouts: function() {
                return c.state("fmsState") === m || !c.state("fmsState").linkFlyoutOpen && !c.state("fmsState").rhsFlyoutOpen || n() },
            performAnimationsToHideFlyouts: function() {
                e(b.LINK_FLYOUT_SELECTOR, void 0);
                e(b.RHS_FLYOUT_SELECTOR,
                    void 0);
                r();
                k({ linkFlyoutOpen: !1, rhsFlyoutOpen: !1 })
            },
            returnMaxFlyoutHeight: function(a) {
                return h(a) },
            shouldNotToggleLinkFlyout: function() {
                return c.state("fmsState") === m || n() },
            toggleLinkFlyout: function() { c.state("fmsState").rhsFlyoutOpen ? (e(b.RHS_FLYOUT_SELECTOR, l), k({ linkFlyoutOpen: !0, rhsFlyoutOpen: !1 })) : c.state("fmsState").linkFlyoutOpen ? (e(b.LINK_FLYOUT_SELECTOR, void 0), r(), k({ linkFlyoutOpen: !1, rhsFlyoutOpen: !1 })) : (l(), w(), k({ linkFlyoutOpen: !0, rhsFlyoutOpen: !1 })) },
            shouldNotToggleRhsFlyout: function() {
                return c.state("fmsState") ===
                    m || n()
            },
            toggleRhsFlyout: function() { c.state("fmsState").linkFlyoutOpen ? (e(b.LINK_FLYOUT_SELECTOR, y), k({ linkFlyoutOpen: !1, rhsFlyoutOpen: !0 })) : c.state("fmsState").rhsFlyoutOpen ? (e(b.RHS_FLYOUT_SELECTOR, void 0), r(), k({ linkFlyoutOpen: !1, rhsFlyoutOpen: !1 })) : (y(), w(), k({ linkFlyoutOpen: !1, rhsFlyoutOpen: !0 })) },
            getErrorInfo: function(a) {
                return { logLevel: "FATAL", attribution: "freshMobileSubnav", message: "[" + a + "]" } }
        }
    });
    f.when("A", "jQuery", "fms-library", "ready").execute("fms-assign-link-flyout-declarative",
        function(c, a, b) { c.declarative("open-fms-link-flyout", "touchend", function(a) {
                try { b.shouldNotToggleLinkFlyout() || b.toggleLinkFlyout() } catch (c) { g.ueLogError && g.ueLogError(c, b.getErrorInfo("showLinkFlyout")) } }) });
    f.when("A", "jQuery", "fms-constants", "fms-library", "ready").execute("fms-rhscontent", function(c, a, b, d) {
        if (a(b.RHS_FLYOUT_SELECTOR).length && (c = c.$(b.RHS_FLYOUT_SELECTOR), c.length)) try {
            var e = c.children("a[href='/afx/m/regionlocationselector']"),
                f = "/afx/m/regionlocationselector?ref=af_mw_sn_rls&redirectURL=" +
                encodeURIComponent(g.location.href);
            e.attr("href", f)
        } catch (h) { g.ueLogError && g.ueLogError(h, d.getErrorInfo("rhsContent")) }
    });
    f.when("A", "jQuery", "fms-library", "ready").execute("ClickFreshMobileRhsMenu", function(c, a, b) { c.declarative("open-fms-rhs-flyout", "touchend", function(a) {
            try { b.shouldNotToggleRhsFlyout() || b.toggleRhsFlyout() } catch (c) { g.ueLogError && g.ueLogError(c, b.getErrorInfo("showRhsFlyout")) } }) });
    f.when("A", "jQuery", "fms-library", "ready").execute("ClickFreshMobileSubnavVeil", function(c,
        a, b) { c.declarative("fms-hide-flyouts", "touchend", function(a) {
            try { b.performAnimationsToHideFlyouts() } catch (c) { g.ueLogError && g.ueLogError(c, b.getErrorInfo("hideFlyout")) } }) });
    f.when("A", "jQuery", "fms-constants", "ready").execute("fms-scrollEvent", function(c, a, b) {
        var d = a(b.INNER_SUBNAV_SELECTOR);
        if (d.length) {
            var e = function() {
                    var b;
                    return { create: function() { b || (b = a("<div></div>").css("height", d.height() + "px"), b.insertAfter(d)) }, destroy: function() { b && (b.detach(), b = m) }, getElement: function() {
                            return b } } }(),
                f = d.offset().top;
            c.on.scroll(function() {
                var b = a(document).scrollTop(),
                    c;
                c = d.hasClass("sticky") ? e.getElement().offset().top : f;
                b > c ? (e.create(), d.addClass("sticky")) : (e.destroy(), d.removeClass("sticky")) })
        }
    });
    f.when("A", "jQuery", "fms-constants", "fms-library", "ready").register("fms-resizeEvent", function(c, a, b, d) { c.on.resize(function() {
            if (a(b.LINK_FLYOUT_SELECTOR).length) {
                var c = d.returnMaxFlyoutHeight(b.LINK_FLYOUT_SELECTOR);
                a(b.LINK_FLYOUT_SELECTOR).css({ "max-height": c }) } }) })
});
/* ******** */
(function(d) {
    var f = window.AmazonUIPageJS || window.P,
        m = f._namespace || f.attributeErrors,
        c = m ? m("FreshExperienceAddToCartAssets") : f;
    c.guardFatal ? c.guardFatal(d)(c, window) : c.execute(function() { d(c, window) }) })(function(d, f, m) {
    d.when("A", "jQuery", "a-button").register("fx-atfc-button-utils", function(c, e, a) {
        var b = !1;
        return {
            hideButtonAndRenderSpinner: function(a) {
                var c = a.$currentTarget.find(".a-button");
                c && c.length && (b = !0, a = "atfc-spinner-" + a.data.asin, c.wrap('<div id="' + a + '" class="atfc-spinner"></div>'), e("#" +
                    a).css({ width: c.outerWidth() + "px" }), e("#" + a).css({ height: c.outerHeight() + "px" }), c.css("visibility", "hidden"))
            },
            showButtonAndRemoveSpinner: function(a) {
                var c = a.$currentTarget.find(".a-button");
                a = e("#atfc-spinner-" + a.data.asin);
                c && c.length && a && a.length && (b = !1, c.css("visibility", "visible"), c.unwrap()) },
            shouldDisableButtonClicks: function() {
                return b }
        }
    });
    d.when("fresh-shared-add-to-cart-v2", "ready").register("fresh-add-to-cart", function(c) {
        function e(a) { c.attachCallbacks(a) }
        c.initialize("mobile");
        return { addToFreshCart: function(a) { e(a) }, attachCallbacks: e, updateQuantity: c.updateQuantity }
    });
    d.when("A", "jQuery").register("afx-atfc-v2-proxy", function(c, e) {
        return { addToFreshCart: function(a) {
                var b = "/fpx/addtofreshcart";
                a.reftag !== m && (b += "/ref=" + a.reftag + "/");
                e.ajax(b, { type: "POST", contentType: "application/json", data: JSON.stringify(a.data) }).done(a.success).fail(a.error) }, showGenericErrorModal: function(a) { c.post("/fpx/atfcGenericErrorModal/", { timeout: 5E3, success: a.success, error: a.error }) } } });
    d.when("A").register("afx-uatc-proxy", function(c) {
        return function(e) {
            var a = "/gp/add-to-cart/json";
            e.reftag !== m && (a += "/ref=" + e.reftag);
            c.post(a, { timeout: 5E3, params: { "session-id": e.sessionID, clientName: "SharedFreshHandler", nextPage: "cartitems", ASIN: e.asin, offerListingID: e.offerListingID, useUber: "1", source: "Fresh", ruleSet: "FreshGet" }, success: e.success, error: e.error }) } });
    d.when("A").register("afx-get-cart-count", function(c) {
        return function(e) {
            c.post("/gp/api/cart/1.0/get-cart-count.json", { timeout: 5E3, params: { sessionID: e.sessionID, clientName: "SharedFreshHandler" }, success: e.success, error: e.error })
        }
    });
    d.register("afx-callbacks-helper", function(c) {
        function e(b) {
            var e = b in a;!e && d.log("Unable to retrieve callback for " + b, "Error");
            return e }
        var a = {};
        return { addCallbacks: function(b) { a[b.clientID || "default"] = b }, success: function(b, c, f) { b = b in a ? b : "default";
                e(b) && a[b].success && a[b].success(c, f) }, error: function(b, c, f, d) { b = b in a ? b : "default";
                e(b) && a[b].error && a[b].error(c, f, d) } } });
    d.register("afx-csm-metrics-utils", function() {
        var c = {},
            e = function(a, b) { f.ue && f.ue.count && a && b && f.ue.count(a, b) };
        return {
            startWidgetTimer: function(a) { c[a] = Date.now() },
            endWidgetTimer: function(a, b) {
                var f = Date.now() - c[a];
                e(b, f) },
            setWidgetClickTimestamp: function(a) { f.ue && f.uet && a && f.uet("tc", a, { wb: 1 }) },
            setWidgetTimestamp: function(a, b) { f.ue && f.uet && a && b && f.uet(a, b, { wb: 1 }) },
            increment: function(a) { f.ue && f.ue.count && a && f.ue.count(a, (f.ue.count(a) || 0) + 1) },
            setCount: e,
            sendWidgetMetrics: function(a) {
                f.ue &&
                    f.uex && a && f.uex("ld", a, { wb: 1 })
            }
        }
    });
    d.register("afx-metrics-helper", function() {
        var c = {
            ATFC_COUNT: "afxAddToFreshCartCount",
            ATFC_SUCCESSFUL_ADD_COUNT: "afxAddToFreshCartSuccessfulAddCount",
            ATFC_ERROR_MODAL_COUNT: "afxAddToFreshCartErrorModalCount",
            ATFC_UNEXPECTED_ERROR_COUNT: "afxAddToFreshCartUnexpectedErrorCount",
            ATFC_LATENCY_SCOPE: "afxAddToFreshCartLatencyScope",
            ATFC_ERROR_MODAL_LATENCY_SCOPE: "afxAddToFreshCartErrorModalLatencyScope",
            ATFC_CTCF: "afxAddToFreshCartCTCF",
            CLEAR_SLOT_ATFC_CTCF: "afxClearSlotAndAddToFreshCartCTFC",
            CART_SERVICE_RESPONSE_FALSE: "afxCartServiceResponseIsNotOKErrorCount",
            ITEM_NOT_AVAILABLE: "afxItemNotAvailableErrorModalCount",
            ITEM_PARTIALLY_AVAILABLE: "afxItemPartiallyAvailableErrorModalCount",
            ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION: "afxItemPartiallyAvailableErrorModalCount",
            ADDRESS_NOT_SELECTED: "afxAddressNotSelectedErrorCount",
            INPUT_INVALID: "afxGeneralErrorModalCount",
            ITEM_NOT_AVAILABLE_FOR_RESERVATION: "afxItemNotAvailableForReservationErrorModalCount",
            INTERNAL_SERVER_ERROR: "afxGeneralErrorModalCount",
            PRICE_UNAVAILABLE: "afxItemNotAvailableErrorModalCount",
            QUANTITY_OVERFLOW: "afxUniqueItemQuantityOverflowErrorModalCount"
        };
        return { getMetricsForDevice: function(e) {
                var a = {};
                Object.keys(c).forEach(function(b) { a[b] = c[b] + ":" + e });
                return a } }
    });
    d.when("A").register("afx-quantity-helper", function(c) {
        var e = {};
        return { updateQuantity: function(a, b) { "undefined" !== typeof a && null !== a && !isNaN(b) && 0 < b && (e[a] = b || 1) }, getQuantity: function(a) { a = a.closest(".a-button");
                return 0 < a.length ? e[a.attr("id")] || 1 : 1 } } });
    d.when("A", "jQuery", "a-modal", "afx-atfc-v2-proxy", "afx-get-cart-count", "fx-atfc-button-utils", "afx-csm-metrics-utils", "afx-metrics-helper", "afx-quantity-helper", "afx-callbacks-helper", "ready").register("fresh-shared-add-to-cart-v2", function(c, e, a, b, r, q, g, B, n, w) {
        var l;
        d.when("EWC").execute("add-to-cart-refresh", function(a) { l = a });
        d.when("nav.getFlyout").execute(function(a) { a("ewc") });
        return {
            updateQuantity: n.updateQuantity,
            attachCallbacks: w.addCallbacks,
            initialize: function(C) {
                function p(a,
                    c, f, d) {
                    a.data.quantity = n.getQuantity(a.$target);
                    b.addToFreshCart({
                        data: a.data,
                        reftag: a.data.reftag,
                        success: function(b, e, d) { 200 === d.status && (g.increment(k.ATFC_SUCCESSFUL_ADD_COUNT), e = k.ATFC_CTCF + ":lineItemBucket:" + h(b), g.endWidgetTimer(c, e), t(a.data.sessionID), w.success(a.data.clientID, a, b.uatcResponseModel));
                            z();
                            q.showButtonAndRemoveSpinner(a);
                            f && f() },
                        error: function(b, f, F) {
                            var v = k.ATFC_CTCF,
                                r = b.responseText,
                                l;
                            z();
                            r && (l = JSON.parse(r), v = k.ATFC_CTCF + ":lineItemBucket:" + h(l.uatcResponseModel));
                            300 ===
                                b.status ? (g.increment(k.ATFC_ERROR_MODAL_COUNT), b = { asin: a.data.asin, offerListingID: a.data.offerListingID, quantity: n.getQuantity(a.$target), redirectURL: document.location.href, ref: "afx_atfc_noaddress" }, g.increment(k.ADDRESS_NOT_SELECTED), b = e.param(b), document.location.href = "/afx/nc/chooseaddress?" + b) : 400 === b.status ? (g.increment(k.ATFC_ERROR_MODAL_COUNT), y(a, l, b, f, F)) : (g.increment(k.ATFC_UNEXPECTED_ERROR_COUNT), u(a), w.error(a.data.clientID, a, b, f, F));
                            g.endWidgetTimer(c, v);
                            q.showButtonAndRemoveSpinner(a);
                            d && d()
                        }
                    })
                }

                function A(a, b) { g.startWidgetTimer(b);
                    c.post("/afx/slotselection/cancel", { timeout: 5E3, params: { token: a.data.additionalParams.csrfToken }, success: function() { p(a, b, function() { location.reload() }) }, error: function() { d.log("Failed to clear reservation");
                            u(a) } }) }

                function y(a, b) {
                    var e = b.errorModalHtml;
                    b.uatcResponseModel && b.uatcResponseModel.uberCartStatus && b.uatcResponseModel.uberCartStatus.errorStatusCode in k && g.increment(k[b.uatcResponseModel.uberCartStatus.errorStatusCode]);
                    x(a, e) }

                function x(b,
                    e) { e || u(b);
                    b.data.quantity && (n.updateQuantity("fresh-clear-slot-button", b.data.quantity), n.updateQuantity("alcohol-warning-fresh-add-to-cart-button", b.data.quantity));
                    var k = b.data.sessionID;
                    a.create(b.$currentTarget, { name: "fresh-add-to-cart-modal", header: e.header, inlineContent: e.errorMessage, footer: e.footer, width: 325 }).show();
                    c.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"), function(b) { t(k);
                        a.remove(b.popover) }) }

                function u(a) {
                    b.showGenericErrorModal({
                        success: function(b, c, k) {
                            b && (b = e.parseJSON(k.http.response),
                                y(a, b))
                        },
                        error: function(b, e, c) { d.log("Failed to get the generic error modal", "Error");
                            x(a, { header: "Item was not added to the cart", errorMessage: "We're sorry, there was an error and <b>this item was not added to your cart.</b> Please try again.", footer: '<span class="a-declarative" data-action="a-popover-close"data-a-popover-close="{}">\n<span class="a-button primary-fresh-btn"><span class="a-button-inner"><input class="a-button-input"type="submit"><span class="a-button-text" aria-hidden="true">OK\n    </span></span></span>\n</span>' }) }
                    })
                }

                function z() {
                    var b = a.get("fresh-add-to-cart-modal");
                    b && a.remove(b) }

                function D(a) { r({ sessionID: a, success: function(a) { a && a.isOK && a.total && E(a.total.numActiveItem) }, error: function() { d.log("Failed to get cart count", "Error", a) } }) }

                function E(a) { d.when("nav.setCartCount").execute(function(b) { b(a) });
                    d.when("mash").execute(function(b) { b.cart && "function" === typeof b.cart.didUpdate && b.cart.didUpdate({ newCartQuantity: a }) }) }

                function t(a) { l !== m && "function" === typeof l.refresh ? l.refresh() : D(a) }

                function h(a) {
                    return a.items &&
                        Math.ceil(a.items.length / 5)
                }
                var k = B.getMetricsForDevice(C),
                    v = k.ATFC_LATENCY_SCOPE + Date.now();
                c.declarative("fresh-clear-slot", "click", function(a) { a.$currentTarget.context.disabled = !0;
                    A(a, v) });
                c.declarative("fresh-add-to-cart", "click", function(a) {
                    g.startWidgetTimer(v);
                    g.increment(k.ATFC_COUNT);
                    q.shouldDisableButtonClicks() || a.$currentTarget.find("input").is(":disabled") || (q.hideButtonAndRenderSpinner(a), f.amazon && f.amazon.cordova && f.amazon.cordova.notification && f.amazon.cordova.notification.vibrate &&
                        f.amazon.cordova.notification.vibrate(50), p(a, v))
                });
                c.declarative("fresh-add-to-cart-alcohol", "click", function(a) { a.$currentTarget.context.disabled = !0;
                    g.startWidgetTimer(v);
                    p(a, v) })
            }
        }
    })
});
/* ******** */
(function(k, r, y) {
    k.execute(function() {
        (function(a, b) {
            b.when("A", "a-carousel-framework", "ready").register("pantry-mobile-dashboard", function(a, b) {
                function c(a) {
                    return g(document).scrollTop() > a }
                var g = a.$,
                    h = a.state("pantry-mobile-widget"),
                    h = h ? h.pinning : !0,
                    q = g("#pantry-mobile-widget");
                if (0 !== q.length) {
                    if (h) {
                        var l = q.find(".pantry-mobile-widget-inner"),
                            t = q.parent();
                        if (!q.css("position").match("sticky")) {
                            var f = function() {
                                var a;
                                return {
                                    create: function() {
                                        a || (a = g("<div></div>").css("height", q.height() + "px"),
                                            a.insertAfter(q))
                                    },
                                    destroy: function() { a && (a.detach(), a = y) },
                                    getElement: function() {
                                        return a }
                                }
                            }();
                            g(document).bind("touchmove scroll", function() { g(document).scrollTop();
                                q.position();
                                var a;
                                a = q.hasClass("pw-sticky") ? f.getElement().offset().top + l.position().top : l.offset().top;
                                var b = t.offset().top + t.outerHeight() - q.height();
                                c(a) && !c(b) ? (f.create(), q.addClass("pw-sticky")) : (f.destroy(), q.removeClass("pw-sticky")) })
                        }
                    } else q.css({ position: "static" });
                    var n = q.find(".pw-categories");
                    q.find(".pw-tab").click(function(c) {
                        q.find(".pw-tab").removeClass("pw-tab-activated");
                        g(this).addClass("pw-tab-activated");
                        if (g(this).hasClass("pw-tab-categories")) {
                            var f = g(this);
                            a.fadeToggle(n, 200, "ease-out", function() {
                                var a = q.find(".pw-tab-arrow");
                                n.is(":visible") ? (a.removeClass("a-icon-section-expand"), a.addClass("a-icon-section-collapse"), g("#pw-categories-carousel").hasClass("a-carousel-initialized") || b.initializeAll()) : (a.addClass("a-icon-section-expand"), a.removeClass("a-icon-section-collapse"), f.removeClass("pw-tab-activated")) });
                            return !1 }
                    });
                    return {
                        updateBoxDisplay: function(a) {
                            var b =
                                q.find(".pw-box-display"),
                                c = b[0].className.split(" ").filter(function(a) {
                                    return !a.match(/-(box|fill)$/) });
                            b.removeClass().addClass(g.trim(c.join(" "))).addClass(a.boxFillClass);
                            b.find(".num-full-overlay").text(0 < a.numBoxes - 1 ? a.numBoxes - 1 : "");
                            b.find(".percent-overlay").text(a.fillPercent + "%")
                        }
                    }
                }
            })
        })(r, k)
    })
})(function() {
    var k = window.AmazonUIPageJS || window.P,
        r = k._namespace || k.attributeErrors;
    return r ? r("PantryMobileWidgetJS") : k }(), window);
/* ******** */
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        n = l._namespace || l.attributeErrors,
        b = n ? n("LuxuryBeautyMobileStaticAssets") : l;
    b.guardFatal ? b.guardFatal(g)(b, window) : b.execute(function() { g(b, window) }) })(function(g, l, n) {
    g.when("A", "jQuery", "twister-aui-page-state", "ready").register("sampling-feature", function(b, a, w) {
        function p() {
            this.mainButton = a("#frsmpl-mobile-selector-button");
            this.mainButton.length && (this.links = a("#frsmpl-mobile-list").find(".a-touch-select"), "undefined" === typeof b.state("freeSampleList") &&
                w.updatePageState(), this.freeSampleList = b.state("freeSampleList"), this.buttonFaceShelf = a("#frsmpl-mobile-button-faces"), this.activeChoice = null)
        }

        function k(a) {
            var f;
            for (f = 0; f < a.length && !a[f].isSelectedByDefault; f++);
            return f }

        function m(c, f, d) {
            a("#freeSampleAsin-" + d).length || (f.append('<input type="hidden" name="fsa" id="freeSampleAsin-' + d + '">'), f.append('<input type="hidden" name="fsoid" id="freeSampleOfferListingID-' + d + '">'), f.append('<input type="hidden" name="fsoq" id="freeSampleOfferQuantity-' +
                d + '">'));
            a("#freeSampleAsin-" + d).val(c.asin);
            a("#freeSampleOfferListingID-" + d).val(c.offerListingId);
            a("#freeSampleOfferQuantity-" + d).val(1)
        }

        function l(c) { a("#freeSampleAsin-" + c).remove();
            a("#freeSampleOfferListingID-" + c).remove();
            a("#freeSampleOfferQuantity-" + c).remove() }

        function g(a) {
            var f = a.indexOf("|");
            return 0 < f ? a.substr(0, f) : a }

        function n() {
            var c = a("form#addToCart");
            return 1 === c.length ? c : null }

        function q() {
            var c = a("form#oneClickBuy");
            return 1 === c.length ? c : null }

        function t() {
            var c = a("#buybox").find(".a-declarative").has("#add-to-cart-button");
            if (1 === c.length) return c;
            c = a("#atc-declarative");
            return 1 === c.length ? c : null
        }
        p.prototype = {
            initialize: function() {
                var a = this;
                this.links.unbind("click.sampleChoices").bind("click.sampleChoices", function() { this !== a.activeChoice && a.activateChoice(this) });
                var f = k(a.freeSampleList);
                a.activateChoice(a.links[f]) },
            activateChoice: function(c) {
                this.activeChoice ? (a("#frsmpl-mobile-state-" + this.activeChoice.sampleIndex).appendTo(this.buttonFaceShelf), a(this.activeChoice).removeClass("a-active")) : this.mainButton.empty();
                this.activeChoice = c;
                c = a(this.activeChoice);
                this.activeChoice.sampleIndex || (this.activeChoice.sampleIndex = c.data("index"));
                var f = a("#frsmpl-mobile-state-" + this.activeChoice.sampleIndex),
                    d = a("img.frsmpl-mobile-image", f);
                if (this.activeChoice.sampleIndex < this.freeSampleList.length) {
                    var b = this.freeSampleList[this.activeChoice.sampleIndex],
                        h = n();
                    h && m(b, h, "cart");
                    (h = q()) && m(b, h, "co");
                    (h = t()) && (h = h.data("awMash")) && h.inputs && (h.inputs.a = g(h.inputs.a), h.inputs.a = h.inputs.a + "|" + b.asin, h.inputs.oid = g(h.inputs.oid),
                        h.inputs.oid = h.inputs.oid + "|" + b.offerListingId);
                    a.get(b.foresterURL);
                    d.removeClass("csxfs_faded_image")
                } else n() && l("cart"), q() && l("co"), (b = t()) && (b = b.data("awMash")) && b.inputs && (b.inputs.a = g(b.inputs.a), b.inputs.oid = g(b.inputs.oid)), d.addClass("csxfs_faded_image");
                f.appendTo(this.mainButton);
                c.addClass("a-active")
            }
        };
        return { init: function() {
                var a = new p;
                a.mainButton.length && a.initialize() } }
    });
    g.when("A", "jQuery", "twister-aui-page-state", "ready").register("beauty-recommendations", function(b, a, g) {
        function p(e) {
            return a("#bRecCheckbox" +
                e)
        }

        function k(a) {
            switch (a) {
                case 0:
                    return d.bRecCart1;
                case 1:
                    return d.bRecCart2;
                case 2:
                    return d.bRecCart3;
                case 3:
                    return d.bRecCart4;
                default:
                    return d.bRecCart1 } }

        function m(a) {
            switch (a) {
                case 0:
                    return d.bRecWish1;
                case 1:
                    return d.bRecWish2;
                case 2:
                    return d.bRecWish3;
                case 3:
                    return d.bRecWish4;
                default:
                    return d.bRecWish1 } }

        function n(a) {
            switch (a) {
                case 0:
                    return d.bRecPrice1;
                case 1:
                    return d.bRecPrice2;
                case 2:
                    return d.bRecPrice3;
                case 3:
                    return d.bRecPrice4;
                default:
                    return d.bRecPrice1 } }

        function u() {
            for (var e = 0,
                    b, d, f, g = 0; g < r; g++) b = p(g), f = a("#bRecImg" + g), (d = b.prop("checked")) ? (e++, b.attr("name", "asin." + (e + 1)), f.removeClass("bRecDisabled")) : f.addClass("bRecDisabled");
            a("#bRecAddToCart").find("span.a-button-text").text(k(e));
            a("#bRecAddToList").find("span.a-button-text").text(m(e));
            a("#bRecPriceLabel").text(n(e));
            e += 1;
            a("#bRecForm").attr("action", v + e);
            e = "";
            for (b = 0; b < r; b++) e += p(b).prop("checked") ? "1" : "0";
            e = parseInt(e, 2);
            e = h[e];
            a("#bRecPrice").html(e);
            if (c) {
                e = a("#bRecForm").find("input[name='asin.1']").val();
                for (b = 0; b < r; b++) d = p(b), d.prop("checked") && (e && (e += "|"), e += d.val());
                q().data("awMash").inputs.a = e
            }
        }

        function x() {
            var b = a("#buybox").find(".a-declarative").has("#add-to-cart-button");
            if (1 === b.length) return b;
            b = a("#atc-declarative");
            return 1 === b.length ? b : null }

        function q() {
            var b = a("#bRecCartDeclarative");
            return 1 === b.length ? b : null }

        function t(b, d) {
            var c = b.data("awMash"),
                f = d.data("awMash");
            c && c.inputs && f && (f.inputs = {
                colid: c.inputs.colid,
                coliid: c.inputs.coliid,
                verificationSessionID: c.inputs.verificationSessionID,
                o: c.inputs.o
            }, f.strings = a.extend({}, c.strings), f.timeout = c.timeout)
        }
        var c = a("#bRecCartDeclarative").length,
            f, d, r, h, v;
        return {
            init: function() {
                var e = a("#bRecDataDiv").find("script").html();
                "undefined" === typeof b.state("beautyRecommendations") && g.updatePageState();
                f = e ? a.parseJSON(e) : b.state("beautyRecommendations");
                "undefined" === typeof b.state("bRecDynamicStrings") && g.updatePageState();
                d = b.state("bRecDynamicStrings");
                if (f && d) {
                    r = f.numRecommendations;
                    h = f.possibleSums;
                    v = a("#bRecForm").attr("action");
                    a("#bRecAddToList").click(function() {
                        var b =
                            a("#bRecAddToListNative").data("action");
                        a("#bRecForm").attr("action", b)
                    });
                    if (c) {
                        var e = x(),
                            k = q();
                        try { t(e, k) } catch (m) { l.ueLogError && l.ueLogError(m, { logLevel: "ERROR", attribution: "beauty_recommendations_mobile", message: "An error occurred when extracting information from the buybox." }) }
                        a("#bRecAddToCart").click(function(a) { a.preventDefault() }) }
                    a("#bRecPricePara").removeClass("a-hidden");
                    for (e = 0; e < r; e++) p(e).prop("checked", !0).change(u);
                    u()
                }
            }
        }
    });
    g.when("jQuery", "A").register("twister-aui-page-state", function(b,
        a) {
        var g = ["freeSampleList", "beautyRecommendations", "bRecDynamicStrings"];
        return { updatePageState: function() {
                var p = a.parseJSON;
                a.each(b('script[type="a-state"]'), function(k) { k = b(k);
                    if (!k.data("a-eval")) {
                        var m = k.attr("data-a-state");
                        if (m && (m = p(m), m.key && -1 !== b.inArray(m.key, g))) {
                            var l = p(k.html());
                            a.state.replace(m.key, l);
                            k.data("a-eval", !0) } } }) } } });
    g.when("A", "ready").register("beauty-business-finder-common", function(b) {
        var a = l.ue;
        b.declarative("bbf-dp-link-action", "click", function(b) {
            b =
                b.data;
            var g = !(!a || !a.count);
            g || (a = l.ue, g = !(!a || !a.count));
            if (g) {
                var g = b.counterName,
                    k = 1,
                    k = k !== n ? k : 1;
                g !== n && a.count(g, (a.count(g) || 0) + k) }
            l.location = b.url
        })
    })
});
/* ******** */
(function(b) {
    var e = window.AmazonUIPageJS || window.P,
        d = e._namespace || e.attributeErrors,
        c = d ? d("ScenesStageAssets") : e;
    c.guardFatal ? c.guardFatal(b)(c, window) : c.execute(function() { b(c, window) }) })(function(b, e, d) {
    b.when("A", "atf").register("shoppingLens", function(c) {
        var f = c.$,
            a = e.ue,
            b, g, h, d, k, l = function() {
                h.click(function(c) { b.addClass("aok-hidden");
                    d.removeClass("aok-hidden");
                    g.addClass("aok-hidden");
                    a && a.count && a.count("shoppingLensShowScene", 1);
                    a && a.count && a.count("shoppingLensClickIngressButton", 1) });
                k.click(function(c) { d.addClass("aok-hidden");
                    g.removeClass("aok-hidden");
                    b.removeClass("aok-hidden");
                    f(e).resize();
                    a && a.count && a.count("shoppingLensClickBackButton", 1) })
            };
        return {
            init: function() {
                b = f("#imageBlock_feature_div");
                h = f("#shoppingLensIngressButton");
                g = f("#shoppingLensIngressContainer");
                d = f("#shoppingLensStage");
                k = f("#shoppingLensBackButtonImage");
                l();
                b.removeClass("aok-hidden");
                g.removeClass("aok-hidden");
                h.removeClass("aok-hidden");
                h.fadeTo(100, 1);
                a && a.count && a.count("shoppingLensShowIngress",
                    1)
            }
        }
    })
});
/* ******** */
(function(p) {
    var e = window.AmazonUIPageJS || window.P,
        z = e._namespace || e.attributeErrors,
        k = z ? z("DetailPageFeaturesAssets") : e;
    k.guardFatal ? k.guardFatal(p)(k, window) : k.execute(function() { p(k, window) }) })(function(p, e, z) {
    ! function(k) {
        if ("function" == typeof define && define.amd) define(["jquery"], k);
        else if ("object" === ("undefined" == typeof module ? "undefined" : module && "undefined" != typeof Symbol && module.constructor === Symbol ? "symbol" : typeof module) && module.exports) {
            var a;
            try { a = require("jquery") } catch (c) { a = null }
            module.exports =
                k(a)
        } else e && (e.Slider = k(e.jQuery))
    }(function(k) {
        var a;
        return function(a) {
                function e() {}
                var k = Array.prototype.slice;
                (function(a) {
                    function d(b) { b.prototype.option || (b.prototype.option = function(b) { a.isPlainObject(b) && (this.options = a.extend(!0, this.options, b)) }) }

                    function b(b, d) {
                        a.fn[b] = function(f) {
                            if ("string" == typeof f) {
                                for (var e = k.call(arguments, 1), p = 0, A = this.length; A > p; p++) {
                                    var E = a.data(this[p], b);
                                    if (E)
                                        if (a.isFunction(E[f]) && "_" !== f.charAt(0)) {
                                            var w = E[f].apply(E, e);
                                            if (void 0 !== w && w !== E) return w } else c("no such method '" +
                                            f + "' for " + b + " instance");
                                    else c("cannot call methods on " + b + " prior to initialization; attempted to call '" + f + "'")
                                }
                                return this
                            }
                            e = this.map(function() {
                                var c = a.data(this, b);
                                return c ? (c.option(f), c._init()) : (c = new d(this, f), a.data(this, b, c)), a(this) });
                            return !e || 1 < e.length ? e : e[0]
                        }
                    }
                    if (a) {
                        var c = "undefined" == typeof console ? e : function(b) { console.error(b) };
                        return a.bridget = function(a, c) { d(c);
                            b(a, c) }, a.bridget }
                })(a)
            }(k),
            function(c) {
                function k(a, b) {
                    function g(b, a) {
                        var d = "data-slider-" + a.replace(/_/g, "-"),
                            d =
                            b.getAttribute(d);
                        try {
                            return JSON.parse(d) } catch (c) {
                            return d }
                    }
                    this._state = { value: null, enabled: null, offset: null, size: null, percentage: null, inDrag: !1, over: !1 };
                    "string" == typeof a ? this.element = document.querySelector(a) : a instanceof HTMLElement && (this.element = a);
                    b = b ? b : {};
                    for (var n = Object.keys(this.defaultOptions), h = 0; h < n.length; h++) {
                        var f = n[h],
                            u = b[f],
                            u = "undefined" != typeof u ? u : g(this.element, f),
                            u = null !== u ? u : this.defaultOptions[f];
                        this.options || (this.options = {});
                        this.options[f] = u }
                    "vertical" !== this.options.orientation ||
                        "top" !== this.options.tooltip_position && "bottom" !== this.options.tooltip_position ? "horizontal" !== this.options.orientation || "left" !== this.options.tooltip_position && "right" !== this.options.tooltip_position || (this.options.tooltip_position = "top") : this.options.tooltip_position = "right";
                    var p, A, E, w, x, n = this.element.style.width,
                        f = !1,
                        u = this.element.parentNode;
                    if (this.sliderElem) f = !0;
                    else {
                        this.sliderElem = document.createElement("div");
                        this.sliderElem.className = "slider";
                        var B = document.createElement("div");
                        B.className =
                            "slider-track";
                        A = document.createElement("div");
                        A.className = "slider-track-low";
                        p = document.createElement("div");
                        p.className = "slider-selection";
                        E = document.createElement("div");
                        E.className = "slider-track-high";
                        w = document.createElement("div");
                        w.className = "slider-handle min-slider-handle";
                        w.setAttribute("role", "slider");
                        w.setAttribute("aria-valuemin", this.options.min);
                        w.setAttribute("aria-valuemax", this.options.max);
                        x = document.createElement("div");
                        x.className = "slider-handle max-slider-handle";
                        x.setAttribute("role",
                            "slider");
                        x.setAttribute("aria-valuemin", this.options.min);
                        x.setAttribute("aria-valuemax", this.options.max);
                        B.appendChild(A);
                        B.appendChild(p);
                        B.appendChild(E);
                        h = Array.isArray(this.options.labelledby);
                        if (h && this.options.labelledby[0] && w.setAttribute("aria-labelledby", this.options.labelledby[0]), h && this.options.labelledby[1] && x.setAttribute("aria-labelledby", this.options.labelledby[1]), !h && this.options.labelledby && (w.setAttribute("aria-labelledby", this.options.labelledby), x.setAttribute("aria-labelledby",
                                this.options.labelledby)), this.ticks = [], Array.isArray(this.options.ticks) && 0 < this.options.ticks.length) {
                            for (h = 0; h < this.options.ticks.length; h++) {
                                var t = document.createElement("div");
                                t.className = "slider-tick";
                                this.ticks.push(t);
                                B.appendChild(t) }
                            p.className += " tick-slider-selection" }
                        if (B.appendChild(w), B.appendChild(x), this.tickLabels = [], Array.isArray(this.options.ticks_labels) && 0 < this.options.ticks_labels.length)
                            for (this.tickLabelContainer = document.createElement("div"), this.tickLabelContainer.className =
                                "slider-tick-label-container", h = 0; h < this.options.ticks_labels.length; h++) {
                                var t = document.createElement("div"),
                                    v = 0 === this.options.ticks_positions.length,
                                    v = this.options.reversed && v ? this.options.ticks_labels.length - (h + 1) : h;
                                t.className = "slider-tick-label";
                                t.innerHTML = this.options.ticks_labels[v];
                                this.tickLabels.push(t);
                                this.tickLabelContainer.appendChild(t) }
                        h = function(b) {
                            var a = document.createElement("div");
                            a.className = "tooltip-arrow";
                            var d = document.createElement("div");
                            d.className = "tooltip-inner";
                            b.appendChild(a);
                            b.appendChild(d)
                        };
                        t = document.createElement("div");
                        t.className = "tooltip tooltip-main";
                        t.setAttribute("role", "presentation");
                        h(t);
                        v = document.createElement("div");
                        v.className = "tooltip tooltip-min";
                        v.setAttribute("role", "presentation");
                        h(v);
                        var D = document.createElement("div");
                        D.className = "tooltip tooltip-max";
                        D.setAttribute("role", "presentation");
                        h(D);
                        this.sliderElem.appendChild(B);
                        this.sliderElem.appendChild(t);
                        this.sliderElem.appendChild(v);
                        this.sliderElem.appendChild(D);
                        this.tickLabelContainer && this.sliderElem.appendChild(this.tickLabelContainer);
                        u.insertBefore(this.sliderElem, this.element);
                        this.element.style.display = "none"
                    }
                    if (c && (this.$element = c(this.element), this.$sliderElem = c(this.sliderElem)), this.eventToCallbackMap = {}, this.sliderElem.id = this.options.id, this.touchCapable = "ontouchstart" in e || e.DocumentTouch && document instanceof e.DocumentTouch, this.tooltip = this.sliderElem.querySelector(".tooltip-main"), this.tooltipInner = this.tooltip.querySelector(".tooltip-inner"), this.tooltip_min = this.sliderElem.querySelector(".tooltip-min"), this.tooltipInner_min =
                        this.tooltip_min.querySelector(".tooltip-inner"), this.tooltip_max = this.sliderElem.querySelector(".tooltip-max"), this.tooltipInner_max = this.tooltip_max.querySelector(".tooltip-inner"), r[this.options.scale] && (this.options.scale = r[this.options.scale]), !0 === f && (this._removeClass(this.sliderElem, "slider-horizontal"), this._removeClass(this.sliderElem, "slider-vertical"), this._removeClass(this.tooltip, "hide"), this._removeClass(this.tooltip_min, "hide"), this._removeClass(this.tooltip_max, "hide"), ["left", "top",
                            "width", "height"
                        ].forEach(function(b) { this._removeProperty(this.trackLow, b);
                            this._removeProperty(this.trackSelection, b);
                            this._removeProperty(this.trackHigh, b) }, this), [this.handle1, this.handle2].forEach(function(b) { this._removeProperty(b, "left");
                            this._removeProperty(b, "top") }, this), [this.tooltip, this.tooltip_min, this.tooltip_max].forEach(function(b) {
                            this._removeProperty(b, "left");
                            this._removeProperty(b, "top");
                            this._removeProperty(b, "margin-left");
                            this._removeProperty(b, "margin-top");
                            this._removeClass(b,
                                "right");
                            this._removeClass(b, "top")
                        }, this)), "vertical" === this.options.orientation ? (this._addClass(this.sliderElem, "slider-vertical"), this.stylePos = "top", this.mousePos = "pageY", this.sizePos = "offsetHeight") : (this._addClass(this.sliderElem, "slider-horizontal"), this.sliderElem.style.width = n, this.options.orientation = "horizontal", this.stylePos = "left", this.mousePos = "pageX", this.sizePos = "offsetWidth"), this._setTooltipPosition(), Array.isArray(this.options.ticks) && 0 < this.options.ticks.length && (this.options.max =
                            Math.max.apply(Math, this.options.ticks), this.options.min = Math.min.apply(Math, this.options.ticks)), Array.isArray(this.options.value) ? (this.options.range = !0, this._state.value = this.options.value) : this.options.range ? this._state.value = [this.options.value, this.options.max] : this._state.value = this.options.value, this.trackLow = A || this.trackLow, this.trackSelection = p || this.trackSelection, this.trackHigh = E || this.trackHigh, "none" === this.options.selection && (this._addClass(this.trackLow, "hide"), this._addClass(this.trackSelection,
                            "hide"), this._addClass(this.trackHigh, "hide")), this.handle1 = w || this.handle1, this.handle2 = x || this.handle2, !0 === f)
                        for (this._removeClass(this.handle1, "round triangle"), this._removeClass(this.handle2, "round triangle hide"), h = 0; h < this.ticks.length; h++) this._removeClass(this.ticks[h], "round triangle hide");
                    if (-1 !== ["round", "triangle", "custom"].indexOf(this.options.handle))
                        for (this._addClass(this.handle1, this.options.handle), this._addClass(this.handle2, this.options.handle), h = 0; h < this.ticks.length; h++) this._addClass(this.ticks[h],
                            this.options.handle);
                    this._state.offset = this._offset(this.sliderElem);
                    this._state.size = this.sliderElem[this.sizePos];
                    this.setValue(this._state.value);
                    this.handle1Keydown = this._keydown.bind(this, 0);
                    this.handle1.addEventListener("keydown", this.handle1Keydown, !1);
                    this.handle2Keydown = this._keydown.bind(this, 1);
                    this.handle2.addEventListener("keydown", this.handle2Keydown, !1);
                    this.mousedown = this._mousedown.bind(this);
                    this.touchCapable && this.sliderElem.addEventListener("touchstart", this.mousedown, !1);
                    this.sliderElem.addEventListener("mousedown",
                        this.mousedown, !1);
                    this.resize = this._resize.bind(this);
                    e.addEventListener("resize", this.resize, !1);
                    "hide" === this.options.tooltip ? (this._addClass(this.tooltip, "hide"), this._addClass(this.tooltip_min, "hide"), this._addClass(this.tooltip_max, "hide")) : "always" === this.options.tooltip ? (this._showTooltip(), this._alwaysShowTooltip = !0) : (this.showTooltip = this._showTooltip.bind(this), this.hideTooltip = this._hideTooltip.bind(this), this.sliderElem.addEventListener("mouseenter", this.showTooltip, !1), this.sliderElem.addEventListener("mouseleave",
                        this.hideTooltip, !1), this.handle1.addEventListener("focus", this.showTooltip, !1), this.handle1.addEventListener("blur", this.hideTooltip, !1), this.handle2.addEventListener("focus", this.showTooltip, !1), this.handle2.addEventListener("blur", this.hideTooltip, !1));
                    this.options.enabled ? this.enable() : this.disable()
                }
                var u = { formatInvalidInputErrorMsg: function(a) {
                            return "Invalid input value '" + a + "' passed in" }, callingContextNotSliderInstance: "Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method" },
                    r = {
                        linear: {
                            toValue: function(a) {
                                var b = a / 100 * (this.options.max - this.options.min),
                                    c = !0;
                                if (0 < this.options.ticks_positions.length) {
                                    for (var e, h, f, b = 0, c = 1; c < this.options.ticks_positions.length; c++)
                                        if (a <= this.options.ticks_positions[c]) { e = this.options.ticks[c - 1];
                                            f = this.options.ticks_positions[c - 1];
                                            h = this.options.ticks[c];
                                            b = this.options.ticks_positions[c];
                                            break }
                                    b = e + (a - f) / (b - f) * (h - e);
                                    c = !1 }
                                a = (c ? this.options.min : 0) + Math.round(b / this.options.step) * this.options.step;
                                return a < this.options.min ? this.options.min : a >
                                    this.options.max ? this.options.max : a
                            },
                            toPercentage: function(a) {
                                if (this.options.max === this.options.min) return 0;
                                if (0 < this.options.ticks_positions.length) {
                                    for (var b, c, e, h = 0, f = 0; f < this.options.ticks.length; f++)
                                        if (a <= this.options.ticks[f]) { b = 0 < f ? this.options.ticks[f - 1] : 0;
                                            e = 0 < f ? this.options.ticks_positions[f - 1] : 0;
                                            c = this.options.ticks[f];
                                            h = this.options.ticks_positions[f];
                                            break }
                                    if (0 < f) return e + (a - b) / (c - b) * (h - e) }
                                return 100 * (a - this.options.min) / (this.options.max - this.options.min) }
                        },
                        logarithmic: {
                            toValue: function(a) {
                                var b =
                                    0 === this.options.min ? 0 : Math.log(this.options.min),
                                    c = Math.log(this.options.max);
                                a = Math.exp(b + (c - b) * a / 100);
                                return a = this.options.min + Math.round((a - this.options.min) / this.options.step) * this.options.step, a < this.options.min ? this.options.min : a > this.options.max ? this.options.max : a
                            },
                            toPercentage: function(a) {
                                if (this.options.max === this.options.min) return 0;
                                var b = Math.log(this.options.max),
                                    c = 0 === this.options.min ? 0 : Math.log(this.options.min);
                                return 100 * ((0 === a ? 0 : Math.log(a)) - c) / (b - c) }
                        }
                    };
                (a = function(a, b) {
                    return k.call(this,
                        a, b), this
                }, a.prototype = {
                    _init: function() {},
                    constructor: a,
                    defaultOptions: { id: "", min: 0, max: 10, step: 1, precision: 0, orientation: "horizontal", value: 5, range: !1, selection: "before", tooltip: "show", tooltip_split: !1, handle: "round", reversed: !1, enabled: !0, formatter: function(a) {
                            return Array.isArray(a) ? a[0] + " : " + a[1] : a }, natural_arrow_keys: !1, ticks: [], ticks_positions: [], ticks_labels: [], ticks_snap_bounds: 0, scale: "linear", focus: !1, tooltip_position: null, labelledby: null },
                    getElement: function() {
                        return this.sliderElem },
                    getValue: function() {
                        return this.options.range ? this._state.value : this._state.value[0] },
                    setValue: function(a, b, c) {
                        a || (a = 0);
                        var e = this.getValue();
                        this._state.value = this._validateInputValue(a);
                        a = this._applyPrecision.bind(this);
                        this.options.range ? (this._state.value[0] = a(this._state.value[0]), this._state.value[1] = a(this._state.value[1]), this._state.value[0] = Math.max(this.options.min, Math.min(this.options.max, this._state.value[0])), this._state.value[1] = Math.max(this.options.min, Math.min(this.options.max,
                            this._state.value[1]))) : (this._state.value = a(this._state.value), this._state.value = [Math.max(this.options.min, Math.min(this.options.max, this._state.value))], this._addClass(this.handle2, "hide"), "after" === this.options.selection ? this._state.value[1] = this.options.max : this._state.value[1] = this.options.min);
                        this.options.max > this.options.min ? this._state.percentage = [this._toPercentage(this._state.value[0]), this._toPercentage(this._state.value[1]), 100 * this.options.step / (this.options.max - this.options.min)] :
                            this._state.percentage = [0, 0, 100];
                        this._layout();
                        a = this.options.range ? this._state.value : this._state.value[0];
                        return this._setDataVal(a), !0 === b && this._trigger("slide", a), e !== a && !0 === c && this._trigger("change", { oldValue: e, newValue: a }), this
                    },
                    destroy: function() { this._removeSliderEventHandlers();
                        this.sliderElem.parentNode.removeChild(this.sliderElem);
                        this.element.style.display = "";
                        this._cleanUpEventCallbacksMap();
                        this.element.removeAttribute("data");
                        c && (this._unbindJQueryEventHandlers(), this.$element.removeData("slider")) },
                    disable: function() {
                        return this._state.enabled = !1, this.handle1.removeAttribute("tabindex"), this.handle2.removeAttribute("tabindex"), this._addClass(this.sliderElem, "slider-disabled"), this._trigger("slideDisabled"), this },
                    enable: function() {
                        return this._state.enabled = !0, this.handle1.setAttribute("tabindex", 0), this.handle2.setAttribute("tabindex", 0), this._removeClass(this.sliderElem, "slider-disabled"), this._trigger("slideEnabled"), this },
                    toggle: function() {
                        return this._state.enabled ? this.disable() : this.enable(),
                            this
                    },
                    isEnabled: function() {
                        return this._state.enabled },
                    on: function(a, b) {
                        return this._bindNonQueryEventHandler(a, b), this },
                    off: function(a, b) { c ? (this.$element.off(a, b), this.$sliderElem.off(a, b)) : this._unbindNonQueryEventHandler(a, b) },
                    getAttribute: function(a) {
                        return a ? this.options[a] : this.options },
                    setAttribute: function(a, b) {
                        return this.options[a] = b, this },
                    refresh: function() {
                        return this._removeSliderEventHandlers(), k.call(this, this.element, this.options), c && c.data(this.element, "slider", this), this },
                    relayout: function() {
                        return this._layout(),
                            this
                    },
                    _removeSliderEventHandlers: function() {
                        this.handle1.removeEventListener("keydown", this.handle1Keydown, !1);
                        this.handle2.removeEventListener("keydown", this.handle2Keydown, !1);
                        this.showTooltip && (this.handle1.removeEventListener("focus", this.showTooltip, !1), this.handle2.removeEventListener("focus", this.showTooltip, !1));
                        this.hideTooltip && (this.handle1.removeEventListener("blur", this.hideTooltip, !1), this.handle2.removeEventListener("blur", this.hideTooltip, !1));
                        this.showTooltip && this.sliderElem.removeEventListener("mouseenter",
                            this.showTooltip, !1);
                        this.hideTooltip && this.sliderElem.removeEventListener("mouseleave", this.hideTooltip, !1);
                        this.sliderElem.removeEventListener("touchstart", this.mousedown, !1);
                        this.sliderElem.removeEventListener("mousedown", this.mousedown, !1);
                        e.removeEventListener("resize", this.resize, !1)
                    },
                    _bindNonQueryEventHandler: function(a, b) { void 0 === this.eventToCallbackMap[a] && (this.eventToCallbackMap[a] = []);
                        this.eventToCallbackMap[a].push(b) },
                    _unbindNonQueryEventHandler: function(a, b) {
                        var c = this.eventToCallbackMap[a];
                        if (void 0 !== c)
                            for (var e = 0; e < c.length; e++)
                                if (c[e] === b) { c.splice(e, 1);
                                    break }
                    },
                    _cleanUpEventCallbacksMap: function() {
                        for (var a = Object.keys(this.eventToCallbackMap), b = 0; b < a.length; b++) this.eventToCallbackMap[a[b]] = null },
                    _showTooltip: function() {
                        !1 === this.options.tooltip_split ? (this._addClass(this.tooltip, "in"), this.tooltip_min.style.display = "none", this.tooltip_max.style.display = "none") : (this._addClass(this.tooltip_min, "in"), this._addClass(this.tooltip_max, "in"), this.tooltip.style.display = "none");
                        this._state.over = !0
                    },
                    _hideTooltip: function() {!1 === this._state.inDrag && !0 !== this.alwaysShowTooltip && (this._removeClass(this.tooltip, "in"), this._removeClass(this.tooltip_min, "in"), this._removeClass(this.tooltip_max, "in"));
                        this._state.over = !1 },
                    _layout: function() {
                        var a;
                        if (a = this.options.reversed ? [100 - this._state.percentage[0], this.options.range ? 100 - this._state.percentage[1] : this._state.percentage[1]] : [this._state.percentage[0], this._state.percentage[1]], this.handle1.style[this.stylePos] = a[0] + "%", this.handle1.setAttribute("aria-valuenow",
                                this._state.value[0]), this.handle2.style[this.stylePos] = a[1] + "%", this.handle2.setAttribute("aria-valuenow", this._state.value[1]), Array.isArray(this.options.ticks) && 0 < this.options.ticks.length) {
                            var b = "vertical" === this.options.orientation ? "height" : "width",
                                c = "vertical" === this.options.orientation ? "marginTop" : "marginLeft",
                                e = this._state.size / (this.options.ticks.length - 1);
                            if (this.tickLabelContainer) {
                                var h = 0;
                                if (0 === this.options.ticks_positions.length) "vertical" !== this.options.orientation && (this.tickLabelContainer.style[c] = -e / 2 + "px"), h = this.tickLabelContainer.offsetHeight;
                                else
                                    for (f = 0; f < this.tickLabelContainer.childNodes.length; f++) this.tickLabelContainer.childNodes[f].offsetHeight > h && (h = this.tickLabelContainer.childNodes[f].offsetHeight);
                                "horizontal" === this.options.orientation && (this.sliderElem.style.marginBottom = h + "px")
                            }
                            for (var f = 0; f < this.options.ticks.length; f++) h = this.options.ticks_positions[f] || this._toPercentage(this.options.ticks[f]), this.options.reversed && (h = 100 - h), this.ticks[f].style[this.stylePos] = h + "%", this._removeClass(this.ticks[f],
                                "in-selection"), this.options.range ? h >= a[0] && h <= a[1] && this._addClass(this.ticks[f], "in-selection") : "after" === this.options.selection && h >= a[0] ? this._addClass(this.ticks[f], "in-selection") : "before" === this.options.selection && h <= a[0] && this._addClass(this.ticks[f], "in-selection"), this.tickLabels[f] && (this.tickLabels[f].style[b] = e + "px", "vertical" !== this.options.orientation && void 0 !== this.options.ticks_positions[f] ? (this.tickLabels[f].style.position = "absolute", this.tickLabels[f].style[this.stylePos] = h + "%",
                                this.tickLabels[f].style[c] = -e / 2 + "px") : "vertical" === this.options.orientation && (this.tickLabels[f].style.marginLeft = this.sliderElem.offsetWidth + "px", this.tickLabelContainer.style.marginTop = this.sliderElem.offsetWidth / 2 * -1 + "px"))
                        }
                        this.options.range ? (b = this.options.formatter(this._state.value), this._setText(this.tooltipInner, b), this.tooltip.style[this.stylePos] = (a[1] + a[0]) / 2 + "%", "vertical" === this.options.orientation ? this._css(this.tooltip, "margin-top", -this.tooltip.offsetHeight / 2 + "px") : this._css(this.tooltip,
                            "margin-left", -this.tooltip.offsetWidth / 2 + "px"), "vertical" === this.options.orientation ? this._css(this.tooltip, "margin-top", -this.tooltip.offsetHeight / 2 + "px") : this._css(this.tooltip, "margin-left", -this.tooltip.offsetWidth / 2 + "px"), b = this.options.formatter(this._state.value[0]), this._setText(this.tooltipInner_min, b), b = this.options.formatter(this._state.value[1]), this._setText(this.tooltipInner_max, b), this.tooltip_min.style[this.stylePos] = a[0] + "%", "vertical" === this.options.orientation ? this._css(this.tooltip_min,
                            "margin-top", -this.tooltip_min.offsetHeight / 2 + "px") : this._css(this.tooltip_min, "margin-left", -this.tooltip_min.offsetWidth / 2 + "px"), this.tooltip_max.style[this.stylePos] = a[1] + "%", "vertical" === this.options.orientation ? this._css(this.tooltip_max, "margin-top", -this.tooltip_max.offsetHeight / 2 + "px") : this._css(this.tooltip_max, "margin-left", -this.tooltip_max.offsetWidth / 2 + "px")) : (b = this.options.formatter(this._state.value[0]), this._setText(this.tooltipInner, b), this.tooltip.style[this.stylePos] = a[0] + "%",
                            "vertical" === this.options.orientation ? this._css(this.tooltip, "margin-top", -this.tooltip.offsetHeight / 2 + "px") : this._css(this.tooltip, "margin-left", -this.tooltip.offsetWidth / 2 + "px"));
                        "vertical" === this.options.orientation ? (this.trackLow.style.top = "0", this.trackLow.style.height = Math.min(a[0], a[1]) + "%", this.trackSelection.style.top = Math.min(a[0], a[1]) + "%", this.trackSelection.style.height = Math.abs(a[0] - a[1]) + "%", this.trackHigh.style.bottom = "0", this.trackHigh.style.height = 100 - Math.min(a[0], a[1]) - Math.abs(a[0] -
                            a[1]) + "%") : (this.trackLow.style.left = "0", this.trackLow.style.width = Math.min(a[0], a[1]) + "%", this.trackSelection.style.left = Math.min(a[0], a[1]) + "%", this.trackSelection.style.width = Math.abs(a[0] - a[1]) + "%", this.trackHigh.style.right = "0", this.trackHigh.style.width = 100 - Math.min(a[0], a[1]) - Math.abs(a[0] - a[1]) + "%", a = this.tooltip_min.getBoundingClientRect(), b = this.tooltip_max.getBoundingClientRect(), "bottom" === this.options.tooltip_position ? a.right > b.left ? (this._removeClass(this.tooltip_max, "bottom"), this._addClass(this.tooltip_max,
                            "top"), this.tooltip_max.style.top = "", this.tooltip_max.style.bottom = "22px") : (this._removeClass(this.tooltip_max, "top"), this._addClass(this.tooltip_max, "bottom"), this.tooltip_max.style.top = this.tooltip_min.style.top, this.tooltip_max.style.bottom = "") : a.right > b.left ? (this._removeClass(this.tooltip_max, "top"), this._addClass(this.tooltip_max, "bottom"), this.tooltip_max.style.top = "18px") : (this._removeClass(this.tooltip_max, "bottom"), this._addClass(this.tooltip_max, "top"), this.tooltip_max.style.top = this.tooltip_min.style.top))
                    },
                    _resize: function(a) { this._state.offset = this._offset(this.sliderElem);
                        this._state.size = this.sliderElem[this.sizePos];
                        this._layout() },
                    _removeProperty: function(a, b) { a.style.removeProperty ? a.style.removeProperty(b) : a.style.removeAttribute(b) },
                    _mousedown: function(a) {
                        if (!this._state.enabled) return !1;
                        this._state.offset = this._offset(this.sliderElem);
                        this._state.size = this.sliderElem[this.sizePos];
                        var b = this._getPercentage(a);
                        if (this.options.range) {
                            var c = Math.abs(this._state.percentage[0] - b),
                                e = Math.abs(this._state.percentage[1] -
                                    b);
                            this._state.dragged = e > c ? 0 : 1
                        } else this._state.dragged = 0;
                        this._state.percentage[this._state.dragged] = b;
                        this._layout();
                        this.touchCapable && (document.removeEventListener("touchmove", this.mousemove, !1), document.removeEventListener("touchend", this.mouseup, !1));
                        this.mousemove && document.removeEventListener("mousemove", this.mousemove, !1);
                        this.mouseup && document.removeEventListener("mouseup", this.mouseup, !1);
                        this.mousemove = this._mousemove.bind(this);
                        this.mouseup = this._mouseup.bind(this);
                        this.touchCapable &&
                            (document.addEventListener("touchmove", this.mousemove, !1), document.addEventListener("touchend", this.mouseup, !1));
                        document.addEventListener("mousemove", this.mousemove, !1);
                        document.addEventListener("mouseup", this.mouseup, !1);
                        this._state.inDrag = !0;
                        b = this._calculateValue();
                        return this._trigger("slideStart", b), this._setDataVal(b), this.setValue(b, !1, !0), this._pauseEvent(a), this.options.focus && this._triggerFocusOnHandle(this._state.dragged), !0
                    },
                    _triggerFocusOnHandle: function(a) {
                        0 === a && this.handle1.focus();
                        1 === a && this.handle2.focus()
                    },
                    _keydown: function(a, b) {
                        if (!this._state.enabled) return !1;
                        var c;
                        switch (b.keyCode) {
                            case 37:
                            case 40:
                                c = -1;
                                break;
                            case 39:
                            case 38:
                                c = 1 }
                        if (c) {
                            if (this.options.natural_arrow_keys) {
                                var e = "horizontal" === this.options.orientation && this.options.reversed;
                                ("vertical" === this.options.orientation && !this.options.reversed || e) && (c = -c) }
                            c = this._state.value[a] + c * this.options.step;
                            return this.options.range && (c = [a ? this._state.value[0] : c, a ? c : this._state.value[1]]), this._trigger("slideStart", c), this._setDataVal(c),
                                this.setValue(c, !0, !0), this._setDataVal(c), this._trigger("slideStop", c), this._layout(), this._pauseEvent(b), !1
                        }
                    },
                    _pauseEvent: function(a) { a.stopPropagation && a.stopPropagation();
                        a.preventDefault && a.preventDefault();
                        a.cancelBubble = !0;
                        a.returnValue = !1 },
                    _mousemove: function(a) {
                        if (!this._state.enabled) return !1;
                        a = this._getPercentage(a);
                        this._adjustPercentageForRangeSliders(a);
                        this._state.percentage[this._state.dragged] = a;
                        this._layout();
                        a = this._calculateValue(!0);
                        return this.setValue(a, !0, !0), !1 },
                    _adjustPercentageForRangeSliders: function(a) {
                        if (this.options.range) {
                            var b =
                                this._getNumDigitsAfterDecimalPlace(a),
                                b = b ? b - 1 : 0;
                            a = this._applyToFixedAndParseFloat(a, b);
                            0 === this._state.dragged && this._applyToFixedAndParseFloat(this._state.percentage[1], b) < a ? (this._state.percentage[0] = this._state.percentage[1], this._state.dragged = 1) : 1 === this._state.dragged && this._applyToFixedAndParseFloat(this._state.percentage[0], b) > a && (this._state.percentage[1] = this._state.percentage[0], this._state.dragged = 0)
                        }
                    },
                    _mouseup: function() {
                        if (!this._state.enabled) return !1;
                        this.touchCapable && (document.removeEventListener("touchmove",
                            this.mousemove, !1), document.removeEventListener("touchend", this.mouseup, !1));
                        document.removeEventListener("mousemove", this.mousemove, !1);
                        document.removeEventListener("mouseup", this.mouseup, !1);
                        this._state.inDrag = !1;
                        !1 === this._state.over && this._hideTooltip();
                        var a = this._calculateValue(!0);
                        return this._layout(), this._setDataVal(a), this._trigger("slideStop", a), !1
                    },
                    _calculateValue: function(a) {
                        var b;
                        if (this.options.range ? (b = [this.options.min, this.options.max], 0 !== this._state.percentage[0] && (b[0] = this._toValue(this._state.percentage[0]),
                                b[0] = this._applyPrecision(b[0])), 100 !== this._state.percentage[1] && (b[1] = this._toValue(this._state.percentage[1]), b[1] = this._applyPrecision(b[1]))) : (b = this._toValue(this._state.percentage[0]), b = parseFloat(b), b = this._applyPrecision(b)), a) { a = [b, 1 / 0];
                            for (var c = 0; c < this.options.ticks.length; c++) {
                                var e = Math.abs(this.options.ticks[c] - b);
                                e <= a[1] && (a = [this.options.ticks[c], e]) }
                            if (a[1] <= this.options.ticks_snap_bounds) return a[0] }
                        return b
                    },
                    _applyPrecision: function(a) {
                        var b = this.options.precision || this._getNumDigitsAfterDecimalPlace(this.options.step);
                        return this._applyToFixedAndParseFloat(a, b)
                    },
                    _getNumDigitsAfterDecimalPlace: function(a) {
                        return (a = ("" + a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/)) ? Math.max(0, (a[1] ? a[1].length : 0) - (a[2] ? +a[2] : 0)) : 0 },
                    _applyToFixedAndParseFloat: function(a, b) {
                        var c = a.toFixed(b);
                        return parseFloat(c) },
                    _getPercentage: function(a) {
                        !this.touchCapable || "touchstart" !== a.type && "touchmove" !== a.type || (a = a.touches[0]);
                        a = (a[this.mousePos] - this._state.offset[this.stylePos]) / this._state.size * 100;
                        return a = Math.round(a / this._state.percentage[2]) *
                            this._state.percentage[2], this.options.reversed && (a = 100 - a), Math.max(0, Math.min(100, a))
                    },
                    _validateInputValue: function(a) {
                        if ("number" == typeof a) return a;
                        if (Array.isArray(a)) return this._validateArray(a), a;
                        throw Error(u.formatInvalidInputErrorMsg(a)); },
                    _validateArray: function(a) {
                        for (var b = 0; b < a.length; b++) {
                            var c = a[b];
                            if ("number" != typeof c) throw Error(u.formatInvalidInputErrorMsg(c)); } },
                    _setDataVal: function(a) {
                        this.element.setAttribute("data-value", a);
                        this.element.setAttribute("value", a);
                        this.element.value =
                            a
                    },
                    _trigger: function(a, b) { b = b || 0 === b ? b : void 0;
                        var e = this.eventToCallbackMap[a];
                        if (e && e.length)
                            for (var n = 0; n < e.length; n++)(0, e[n])(b);
                        c && this._triggerJQueryEvent(a, b) },
                    _triggerJQueryEvent: function(a, b) {
                        var c = { type: a, value: b };
                        this.$element.trigger(c);
                        this.$sliderElem.trigger(c) },
                    _unbindJQueryEventHandlers: function() { this.$element.off();
                        this.$sliderElem.off() },
                    _setText: function(a, b) { "undefined" != typeof a.innerText ? a.innerText = b : "undefined" != typeof a.textContent && (a.textContent = b) },
                    _removeClass: function(a,
                        b) {
                        for (var c = b.split(" "), e = a.className, h = 0; h < c.length; h++) e = e.replace(new RegExp("(?:\\s|^)" + c[h] + "(?:\\s|$)"), " ");
                        a.className = e.trim() },
                    _addClass: function(a, b) {
                        for (var c = b.split(" "), e = a.className, h = 0; h < c.length; h++) {
                            var f = c[h];
                            (new RegExp("(?:\\s|^)" + f + "(?:\\s|$)")).test(e) || (e += " " + f) }
                        a.className = e.trim() },
                    _offsetLeft: function(a) {
                        return a.getBoundingClientRect().left },
                    _offsetTop: function(a) {
                        for (var b = a.offsetTop;
                            (a = a.offsetParent) && !isNaN(a.offsetTop);) b += a.offsetTop;
                        return b },
                    _offset: function(a) {
                        return {
                            left: this._offsetLeft(a),
                            top: this._offsetTop(a)
                        }
                    },
                    _css: function(a, b, e) { c ? c.style(a, b, e) : (b = b.replace(/^-ms-/, "ms-").replace(/-([\da-z])/gi, function(a, b) {
                            return b.toUpperCase() }), a.style[b] = e) },
                    _toValue: function(a) {
                        return this.options.scale.toValue.apply(this, [a]) },
                    _toPercentage: function(a) {
                        return this.options.scale.toPercentage.apply(this, [a]) },
                    _setTooltipPosition: function() {
                        var a = [this.tooltip, this.tooltip_min, this.tooltip_max];
                        if ("vertical" === this.options.orientation) {
                            var b = this.options.tooltip_position || "right",
                                c = "left" ===
                                b ? "right" : "left";
                            a.forEach(function(a) { this._addClass(a, b);
                                a.style[c] = "100%" }.bind(this))
                        } else "bottom" === this.options.tooltip_position ? a.forEach(function(a) { this._addClass(a, "bottom");
                            a.style.top = "22px" }.bind(this)) : a.forEach(function(a) { this._addClass(a, "top");
                            a.style.top = -this.tooltip.outerHeight - 14 + "px" }.bind(this))
                    }
                }, c) && c.bridget(c.fn.slider ? "bootstrapSlider" : "slider", a)
            }(k), a
    });
    e.P && p.when("A", "jQuery", "atf", "ready").execute(function(k, a) {
        var c = {
                VERSION: "1.1.0",
                GestureHandle: function(k,
                    r, d, b, g) {
                    function n() {
                        a(l.leftPanel).bind("tap", E);
                        a(l.rightPanel).bind("tap", w);
                        a(l.progressBar).bind("tap", H);
                        a(l.leftPanel).bind("pan-horizontal", t);
                        a(l.rightPanel).bind("pan-horizontal", v);
                        a(l.progressBar).bind("pan-horizontal", F);
                        a(l.leftPanel).bind("pan-vertical", D);
                        a(l.rightPanel).bind("pan-vertical", D);
                        a(l.leftPanel).bind("swipe-horizontal", x);
                        a(l.rightPanel).bind("swipe-horizontal", B);
                        a(l.progressBar).bind("swipe-horizontal", C);
                        a(l.leftPanel).bind("swipe-vertical", D);
                        a(l.rightPanel).bind("swipe-vertical",
                            D);
                        a(l.leftPanel).bind("touchend", z);
                        a(l.rightPanel).bind("touchend", z);
                        a(l.leftPanel).bind("touchstart", p);
                        a(l.rightPanel).bind("touchstart", p)
                    }

                    function h(a, b, c) { a.ajax({ url: "/gp/collect-coupon/handler/applicable_promotion_list_hover_count.html?ref_=" + ("lookinside_" + b + "_" + c), type: "POST", dataType: "json" }) }

                    function f(a, b) {
                        var c = e.screen.width,
                            d = 80 < c ? c / 4 : 20;
                        return Math.abs(a - c / 2) > d ? !1 : !0 }

                    function p(a) {
                        var b = a.originalEvent.changedTouches[0].clientY;
                        m = a.originalEvent.changedTouches[0].clientX;
                        M = b }

                    function z(b) {
                        var c =
                            b.originalEvent.changedTouches[0].clientX,
                            d = b.originalEvent.changedTouches[0].clientY;
                        10 > Math.abs(d - M) && 10 > Math.abs(c - m) && f(c, d) && (l.reader.toggleControlPanel(), l.isSlideBarShowing = !l.isSlideBarShowing, h(a, I, "touchCenter"));
                        b.preventDefault()
                    }

                    function A() {
                        return l.controlModule }

                    function E(b, c) { f(c.x, c.y) || (l.isSlideBarShowing && (l.isSlideBarShowing = !l.isSlideBarShowing, l.reader.toggleControlPanel()), l.reader.slideToPrePage(), h(a, I, "tapLeft"));
                        b.preventDefault() }

                    function w(b, c) {
                        f(c.x, c.y) || (l.isSlideBarShowing &&
                            (l.isSlideBarShowing = !l.isSlideBarShowing, l.reader.toggleControlPanel()), l.reader.slideToNextPage(), h(a, I, "tapRight"));
                        b.preventDefault()
                    }

                    function x(b, c) { l.isSlideBarShowing && (l.isSlideBarShowing = !l.isSlideBarShowing, l.reader.toggleControlPanel());
                        c.ended && (0 <= c.touchDeltaX ? (l.reader.slideToPrePage(), h(a, I, "slideLeft")) : (l.reader.slideToNextPage(), h(a, I, "slideRight"))) }

                    function B(b, c) {
                        l.isSlideBarShowing && (l.isSlideBarShowing = !l.isSlideBarShowing, l.reader.toggleControlPanel());
                        c.ended && (0 <= c.touchDeltaX ?
                            (l.reader.slideToPrePage(), h(a, I, "slideRight")) : (l.reader.slideToNextPage(), h(a, I, "slideLeft")))
                    }

                    function t(b, c) { c.ended && (0 <= c.touchDeltaX ? (l.reader.slideToPrePage(), h(a, I, "panLeft")) : (l.reader.slideToNextPage(), h(a, I, "panRight"))) }

                    function v(b, c) { c.ended && (0 <= c.touchDeltaX ? (l.reader.slideToPrePage(), h(a, I, "panRight")) : (l.reader.slideToNextPage(), h(a, I, "panLeft"))) }

                    function D(b, c) {
                        l.isSlideBarShowing && (l.isSlideBarShowing = !l.isSlideBarShowing, l.reader.toggleControlPanel());
                        var d = a(".look-inside-page.current"),
                            e = a(".look-inside-drag-bar.bottom"),
                            f = a("#look-inside-similarities");
                        c.ended ? (q(d, 0), q(e, 0), a(".look-inside-drag-bar.bottom").hide(), -40 > c.touchDeltaY && (y(f, .5), q(f, 0), a("#look-inside-sample").hide(), h(a, I, "showSims"))) : (a(".look-inside-drag-bar.bottom").show(), y(d, 0), 0 > c.touchDeltaY && (-40 < c.touchDeltaY ? (q(d, c.touchDeltaY), q(e, c.touchDeltaY)) : (q(d, -40), q(e, -40))))
                    }

                    function y(b, c) {
                        a(b).css("transition", "transform " + c + "s");
                        a(b).css("-moz-transition", "-moz-transform " + c + "s");
                        a(b).css("-webkit-transition",
                            "-webkit-transform " + c + "s");
                        a(b).css("-o-transition", "-o-transform " + c + "s");
                        a(b).css("-ms-transition", "-ms-transform " + c + "s")
                    }

                    function q(b, c) { a(b).css("transform", "translateY(" + c + "px)");
                        a(b).css("-ms-transform", "translateY(" + c + "px)");
                        a(b).css("-webkit-transform", "translateY(" + c + "px)");
                        a(b).css("-moz-transform", "translateY(" + c + "px)");
                        a(b).css("-o-transform", "translateY(" + c + "px)") }

                    function C(a, b) {
                        if (A) {
                            var c = L(a, b);
                            b.ended ? (c = Math.floor(c * l.reader.getTotalPageCount() + .5), l.reader.jumpToPage(c)) : N(c) } }

                    function N(b) {
                        var c = a(l.progressBar).width();
                        b = Math.floor(b * c + .5);
                        a(l.progressBar).find(".look-inside-percentage").width(b) }

                    function L(b, c) { a(l.progressBar).position();
                        a(l.progressBar).width() }

                    function H(a, b) {
                        if (A) {
                            var c = L(a),
                                c = Math.floor(c * l.reader.getTotalPageCount() + .5);
                            l.reader.jumpToPage(c) } }

                    function F(a, b) {
                        if (A) {
                            var c = L(a, b);
                            b.ended ? (c = Math.floor(c * l.reader.getTotalPageCount() + .5), l.reader.jumpToPage(c)) : N(c) } }
                    var J = { constructor: c.GestureHandle };
                    J.constants = J.constructor;
                    var l = J.properties = { reader: k, leftPanel: r, rightPanel: d, progressBar: b, similarities: g, controlModule: !0, isSlideBarShowing: !0 },
                        m, M, I = a("#look-inside-redesign-js-params").attr("lookInsideDeviceType");
                    n();
                    J.bindEvent = n;
                    return J
                },
                Reader: function(k) {
                    function r(b, c) { a(".look-inside-assistant-panel.whole").hide();
                        a(".look-inside-assistant-panel.center").hide() }

                    function d(b, c) {
                        var d = a(b).find(".look-inside-sheaf .look-inside-frame");
                        a(d).css("column-width", c + "px");
                        a(d).css("-webkit-column-width", c + "px");
                        a(d).css("-moz-column-width",
                            c + "px")
                    }

                    function b() {
                        var b = a(".look-inside-page.current");
                        return g(b) }

                    function g(b) { b = a(b).data("index");
                        return b ? b = parseInt(b, 10) : 0 }

                    function n() {
                        return parseInt(a(".look-inside-page.current").data("id"), 0) }

                    function h() {
                        var b = a(".look-inside-page.current .look-inside-sheaf .look-inside-frame"),
                            b = a(b).get(0).scrollWidth,
                            c = e.screen.width - 34,
                            b = Math.floor((b + 20 + c + 20 - 1) / (c + 20)),
                            d = b - 1;
                        H.setAttribute("max", d);
                        a(".look-inside-page").each(function(b, c) {
                            var e = g(c);
                            a(c).find(".look-inside-number span").html(e +
                                "/" + d)
                        });
                        return b
                    }

                    function f(c) {
                        "undefined" === typeof c && (c = .5);
                        if (!q.isBusy)
                            if (0 === b()) c = a("<div id='lookinside-control-guide' style='display:none'>" + C + "</div>"), a("body").append(c), a("#lookinside-control-guide").fadeIn(0).delay(800).fadeOut(400, function() { a("#lookinside-control-guide").remove() });
                            else {
                                q.isBusy = !0;
                                var d = a(".look-inside-page.current"),
                                    f = parseInt(a(d).data("id"), 0);
                                a(d).css("z-index", "2");
                                var g = (f + 2) % 3,
                                    f = a(".look-inside-page[data-id=" + g + "]");
                                a(f).css("z-index", "3");
                                z(f, c);
                                A(f, 0);
                                z(d,
                                    c);
                                A(d, e.innerWidth);
                                a(d).removeClass("current");
                                a(f).addClass("current");
                                w(g, 1);
                                setTimeout(function() { x(g, 2);
                                    q.isBusy = !1 }, 100)
                            }
                    }

                    function p(c) {
                        "undefined" === typeof c && (c = .5);
                        if (!q.isBusy)
                            if (b() === h() - 1) c = a("<div id='lookinside-control-guide' style='display:none'>" + N + "</div>"), a("body").append(c), a("#lookinside-control-guide").fadeIn(0).delay(800).fadeOut(400, function() { a("#lookinside-control-guide").remove() });
                            else {
                                q.isBusy = !0;
                                var d = a(".look-inside-page.current"),
                                    f = parseInt(a(d).data("id"), 0);
                                a(d).css("z-index",
                                    "2");
                                var g = (f + 1) % 3,
                                    f = a(".look-inside-page[data-id=" + g + "]");
                                a(f).css("z-index", "3");
                                z(f, c);
                                A(f, 0);
                                z(d, c);
                                A(d, -1 * e.innerWidth);
                                a(d).removeClass("current");
                                a(f).addClass("current");
                                x(g, 1);
                                setTimeout(function() { w(g, 2);
                                    q.isBusy = !1 }, 100)
                            }
                    }

                    function z(b, c) { a(b).css("transition", "transform " + c + "s");
                        a(b).css("-moz-transition", "-moz-transform " + c + "s");
                        a(b).css("-webkit-transition", "-webkit-transform " + c + "s");
                        a(b).css("-o-transition", "-o-transform " + c + "s");
                        a(b).css("-ms-transition", "-ms-transform " + c + "s") }

                    function A(b,
                        c) { a(b).css("transform", "translateX(" + c + "px)");
                        a(b).css("-ms-transform", "translateX(" + c + "px)");
                        a(b).css("-webkit-transform", "translateX(" + c + "px)");
                        a(b).css("-moz-transform", "translateX(" + c + "px)");
                        a(b).css("-o-transform", "translateX(" + c + "px)") }

                    function E(b, c) { a(b).css("transform", "translateY(" + c + "px)");
                        a(b).css("-ms-transform", "translateY(" + c + "px)");
                        a(b).css("-webkit-transform", "translateY(" + c + "px)");
                        a(b).css("-moz-transform", "translateY(" + c + "px)");
                        a(b).css("-o-transform", "translateY(" + c + "px)") }

                    function w(a,
                        c) {
                        var d = b(),
                            e = n(),
                            f = t();
                        0 < d && B((e + 2) % 3, d - 1, -f, c) }

                    function x(a, c) {
                        var d = b(),
                            e = t(),
                            f = (a + 1) % 3;
                        d < h() - 1 && B(f, d + 1, e, c) }

                    function B(b, c, d, f) { b = a(".look-inside-page[data-id=" + b + "]");
                        a(b).show();
                        z(b, 0);
                        a(b).css("z-index", f);
                        var g = h();
                        f = c + 1;
                        var k = a(b).find(".look-inside-number");
                        2 > f || 2 > g ? a(k).hide() : (--f, --g, a(k).show(), a(k).find("span").html(f + "/" + g));
                        f = (e.screen.width - 34 + 20) * -c;
                        A(b, d);
                        d = a(b).find(".look-inside-sheaf .look-inside-frame");
                        A(d, f);
                        a(b).data("index", c) }

                    function t() {
                        if (0 < q.frameWidth) return q.frameWidth;
                        var b = a(".look-inside-page[data-id='0']");
                        if (b && 0 !== b.length) return q.frameWidth = a(b).width(), q.frameHeight = a(b).find(".look-inside-sheaf").height(), 0 === q.frameWidth && (q.frameWidth = e.screen.width), q.frameWidth
                    }

                    function v(c) {
                        if (!q.isBusy) {
                            var d = b();
                            if (c < d) {
                                var d = a(".look-inside-page.current"),
                                    d = parseInt(a(d).data("id")),
                                    e = b(),
                                    d = n(),
                                    g = t();
                                0 < e && B((d + 2) % 3, c, -g, 1);
                                f(0) } else c > d && (d = a(".look-inside-page.current"), g = parseInt(a(d).data("id")), d = b(), e = t(), g = (g + 1) % 3, d < h() - 1 && B(g, c, e, 1), p(0)) } }

                    function x(a,
                        c, d) { d = b();
                        var e = t();
                        a = (a + 1) % 3;
                        d < h() - 1 && B(a, d + 1, e, c) }

                    function D() {
                        for (var b = e.screen.width, c = 1; 3 > c; ++c) B(c, c, b, 1);
                        var f = e.screen.width - 34;
                        a(".look-inside-page").each(function(b, c) { d(c, f);
                            a(c).show() });
                        q.isBusy = !1 }
                    var y = { constructor: c.Reader };
                    y.constants = y.constructor;
                    var q = y.properties = { source: k, eventHandle: null, frameWidth: 0, frameHeight: 0, columnWidth: 0, isBusy: !1 },
                        C = a("#look-inside-redesign-js-params").attr("noPreviousPageText"),
                        N = a("#look-inside-redesign-js-params").attr("noNextPageText"),
                        L = 0;
                    k = function(c) {
                        0 ===
                            L && 0 === b() && (D(), L = 1);
                        b();
                        var d = h() - 1;
                        a("#RC .tooltip-main .tooltip-inner").text(c + "/" + d);
                        v(c)
                    };
                    var H = new Slider("#R");
                    H.on("slide", k);
                    H.on("slideStop", k);
                    (function(b) {
                        var c = e.screen.width - 34,
                            f = b.replace(/<a[^>]+>/g, "").replace(/#0000CC/g, "#444444").replace(/#0000cc/g, "#444444");
                        a(".look-inside-page").each(function(b, e) {
                            d(e, c);
                            a(e).css("z-index", 3 - b);
                            a(e).data("index", b);
                            0 < b && a(e).hide();
                            var g = a(e).find(".look-inside-sheaf .look-inside-frame");
                            a(g).html(f);
                            g = a("<div class='look-inside-number' style='display:none'><span>1</span></div>");
                            a(e).append(g)
                        });
                        var g = 0,
                            h = b.lastIndexOf('sitbanchor="srl"');
                        if (0 < h) { g = h;
                            h = b.indexOf("</", h);
                            0 < h && (g = h);
                            var k = b.substring(0, g);
                            a(".look-inside-page-helper").each(function(b, e) { d(e, c);
                                a(e).css("z-index", -1);
                                var f = a(e).find(".look-inside-sheaf .look-inside-frame");
                                a(f).html(k) }) }
                        a(".look-inside-page[data-id='0']").addClass("current")
                    })(q.source);
                    E(a("#look-inside-similarities"), e.screen.height);
                    a("#look-inside-similarities").css("min-height", e.screen.height + "px");
                    a("#look-inside-similarities-bar").bind("tap",
                        function(b, c) { a("#look-inside-sample").show();
                            E(a("#look-inside-similarities"), e.screen.height);
                            b.preventDefault();
                            b.stopPropagation() });
                    (function() {
                        a(".look-inside-assistant-panel.whole").bind("tap", r);
                        var b;
                        a: {
                            if (0 < document.cookie.length && (b = document.cookie.indexOf("hasLookedInside="), -1 != b)) { b = b + 15 + 1;
                                var c = document.cookie.indexOf(";", b); - 1 == c && (c = document.cookie.length);
                                b = unescape(document.cookie.substring(b, c));
                                break a }
                            b = null }
                        null != b ? (a(".look-inside-assistant-panel.whole").hide(), a(".look-inside-assistant-panel.center").hide()) :
                            (b = new Date, b.setDate(b.getDate() + 365), document.cookie = "hasLookedInside=" + escape(!0) + (";expires=" + b.toGMTString()))
                    })();
                    (function() {
                        var b = a(".look-inside-touch-panel.left"),
                            d = a(".look-inside-touch-panel.right"),
                            e = a(".look-inside-progress-bar"),
                            f = a("#look-inside-similarities");
                        q.eventHandle = new c.GestureHandle(y, b, d, e, f) })();
                    y.slider = H;
                    y.slideToPrePage = f;
                    y.slideToNextPage = p;
                    y.getTotalPageCount = h;
                    y.getSkipPageCount = function() {
                        var b = a(".look-inside-page-helper .look-inside-sheaf .look-inside-frame"),
                            b = a(b).get(0).scrollWidth,
                            c = e.screen.width - 34;
                        return Math.floor((b + 20 + c + 20 - 1) / (c + 20))
                    };
                    y.getCurrentPageIndex = b;
                    y.getPageIndex = g;
                    y.jumpToPage = v;
                    y.jumpToPageFromPercent = function(a) { 0 > a || 100 < a || (a = Math.floor((h() - 1) * a / 100 + .5), v(a)) };
                    y.toggleControlPanel = function() { 0 === L && 0 === b() && (D(), L = 1);
                        a("#look-inside-header-bar").fadeToggle();
                        a("#lookInsideSlideBar").fadeToggle();
                        var c = b(),
                            d = h() - 1;
                        H.setValue(c);
                        a("#RC .tooltip-main .tooltip-inner").text(c + "/" + d) };
                    y.setPageColumnWidth = d;
                    y.swipeToLeft = function(a) { f() };
                    y.swipeToRight = function(a) { p() };
                    return y
                }
            },
            p = a("#look-inside-sample").data("asin");
        p && 0 !== p.length && a.ajax({
            url: "/gp/search-inside/service-data",
            type: "POST",
            cache: !1,
            timeout: 4E4,
            data: { method: "getMobi8Sample", asin: p },
            dataType: "json",
            success: function(p) {
                function r(a, b, c) { a.ajax({ url: "/gp/collect-coupon/handler/applicable_promotion_list_hover_count.html?ref_=" + ("lookinside_" + b + "_" + c), type: "POST", dataType: "json" }) }
                if (p.sample && 0 !== p.sample.length) {
                    var d = c.Reader(p.sample),
                        b = d.properties.eventHandle;
                    p =
                        a("#online-look-inside-ajax-content").html();
                    375 > e.screen.width && (p = a("#look-inside-ajax-content").html());
                    p = '<div id="look-inside-button" style="position:absolute;width:90px;height:40px;z-index:10;bottom:20px;right:0;">' + p + "</div>";
                    a("#imageBlock_feature_div").append(p);
                    a("#look-inside").removeClass("a-hidden");
                    a("#look-inside-sample center").css({ "margin-top": "40px", overflow: "auto" });
                    var g = a("#look-inside-redesign-js-params").attr("lookInsideDeviceType");
                    "mobileApp" != g ? a(".look-inside-header-content").css("left",
                        "6rem") : (a("#look-inside-price").css("left", "10px"), a("#look-inside-three-rows-price").css("left", "10px"));
                    (90 === e.orientation || -90 === e.orientation || e.screen.width > e.screen.height) && a("#look-inside-button").hide();
                    var n = !0;
                    k.on("a:popover:afterShow:lookInsidePreloadName", function(c) {
                        d && b && (b.properties.isSlideBarShowing && (n && "mobileApp" != g && (c = a(".look-inside-header-content").width() - 118, a("#look-inside-price-first-row").width() >= c && (a("#look-inside-header-bar").height("90px"), a("#look-inside-add-to-cart").css("margin-top",
                            "1rem"), a("#look-inside-price").addClass("a-hidden"), a("#look-inside-three-rows-price").removeClass("a-hidden"))), b.properties.isSlideBarShowing = !b.properties.isSlideBarShowing, d.toggleControlPanel()), n && (setTimeout(function() {
                                var b = d.getTotalPageCount() - 1;
                                a("#R").attr("data-slider-max", b);
                                d.slider.setAttribute("max", b);
                                var c = d.getSkipPageCount() - 1;
                                1 <= c && c <= b && (d.jumpToPage(c), d.slider.setAttribute("value", c), a("#RC .tooltip-main .tooltip-inner").text(c + "/" + b));
                                a(".look-inside-page-helper").hide() },
                            500), n = !1))
                    });
                    a(e).bind("orientationchange", function(b) { 90 === e.orientation || -90 === e.orientation || e.screen.width > e.screen.height ? (a("#look-inside-button").hide(), a("#look-inside-no-landscape-tips").show(), r(a, g, "landscape")) : (a("#look-inside-button").show(), a("#look-inside-no-landscape-tips").hide()) });
                    r(a, g, "impression");
                    a("#look-inside").bind("click", function() { r(a, g, "clicks") })
                }
            }
        })
    })
});
/* ******** */
(function(n) {
    var d = window.AmazonUIPageJS || window.P,
        q = d._namespace || d.attributeErrors,
        m = q ? q("DetailPageCouponsAssets") : d;
    m.guardFatal ? m.guardFatal(n)(m, window) : m.execute(function() { n(m, window) }) })(function(n, d, q) {
    n.when("A", "ready").register("vpcCommonFunctions", function(a) {
        return {
            clipAjax: function(d, c, b, e) { a.$.ajax({ type: "GET", url: "/gp/promotions/vpc?ie=UTF8&promoId=" + d + "&source=dp_" + c, success: b, error: e }) },
            publishImpression: function(g, c, b, e, f) {
                d.ue && d.ue.tag && d.ue.tag("digital_coupon_dp");
                var l = ("https:" ===
                    location.protocol ? "https://" : "http://") + d.ue_furl + "/1/action-impressions/1/OP/vpc/promotion/";
                e = e || a.$("#couponFeature").attr("data-vpcpromoid");
                f = f || a.$("#couponFeature").attr("data-vpcasin");
                b = "vpc_i_" + e + "_" + f + "_dp_" + b + "_";
                g = l + ((c ? g ? b + "r" : b + "nr" : b + "nc") + ":" + e);
                g = g + "?marketplaceId=" + d.ue_mid + "&requestId=" + d.ue.rid + "&session=" + d.ue_sid;
                (new Image).src = g
            }
        }
    });
    n.when("A", "vpcCommonFunctions").register("vpc-ccx", function(a, g) {
        return {
            initialize: function(c) {
                var b = function() {
                        return a.$("#couponFeature").hasClass("vpc_clipped") },
                    e = function() {
                        return a.$("#couponFeature").hasClass("vpc_signedIn") },
                    f = function() { a.$("#couponFeature").addClass("vpc_clip_error");
                        a.$("#couponFeature").removeClass("vpc_clipped");
                        a.$("#couponFeature").removeClass("vpc_unclipped") },
                    l = function(c) { b() || (-1 < c.indexOf("SUCCESS") || -1 < c.indexOf("REDEEMED") ? (a.$("#couponFeature").removeClass("vpc_unclipped"), a.$("#couponFeature").addClass("vpc_clipped")) : f(), "function" === typeof d.displaySpecialOffersClipCouponResult && d.displaySpecialOffersClipCouponResult(c)) };
                a.$("#couponFeature").length && (d.displayClipCouponResult = l);
                var k = function(a, b, c) { f() },
                    h = function(b) { e() ? g.clipAjax(a.$("#couponFeature").attr("data-vpcpromoid"), a.$("#couponFeature").attr("data-vpcasin"), l, k) : d.location = c.signinUrl ? c.signinUrl : "/gp/sign-in.html/ref=sr_1_1?ie=UTF8&email=&redirectASIN=" + a.$("#couponFeature").attr("data-vpcasin") + "&disableCorpSignUp=&path=%2Fgp%2Fcoupon%2Fc%2F" + a.$("#couponFeature").attr("data-vpcpromoid") + "&redirectProtocol=&mode=&useRedirectOnSuccess=1";
                        b.preventDefault() };
                a.$("#couponFeature").length && g.publishImpression(b(), e(), "db");
                a.$(".ccx_dpv2 #vpcButton").find(".a-button").click(h);
                a.$(".ccx_dpv2 #vpcButtonSns").find(".a-button").click(h)
            }
        }
    });
    n.when("A", "vpcCommonFunctions").register("vpc-price-block", function(a, g) {
        var c;
        return {
            initialize: function(b) {
                c = b.clickedClipCoupon;
                var e = b.loggedIn,
                    f = !1,
                    l = function(b) {
                        c || (-1 < b.indexOf("SUCCESS") || -1 < b.indexOf("REDEEMED") ? (a.$(".couponFeature .vpc_unclipped").addClass("vpc_clipped"), a.$(".couponFeature .vpc_unclipped").removeClass("vpc_unclipped")) :
                            (a.$(".couponFeature .vpc_unclipped").addClass("vpc_clip_error"), a.$(".couponFeature .vpc_unclipped").removeClass("vpc_unclipped"), a.$(".couponFeature .vpc_unclipped").removeClass("vpc_clipped"), f = !0), c = !0, "function" === typeof d.displaySpecialOffersClipCouponResult && d.displaySpecialOffersClipCouponResult(b))
                    },
                    k = function(a) {
                        if (e) g.clipAjax(b.vpc.id, b.vpc.asin, l), a.preventDefault();
                        else return d.location = b.signinUrl ? b.signinUrl : "/gp/sign-in.html/ref=sr_1_1?ie=UTF8&email=&redirectASIN=${vendorPoweredCoupon.asin}&disableCorpSignUp=&path=%2Fgp%2Fcoupon%2Fc%2F${vendorPoweredCoupon.id}&redirectProtocol=&mode=&useRedirectOnSuccess=1",
                            a.preventDefault(), !0
                    },
                    h = function() { f || (a.$(".couponFeature").addClass("vpc_oneTimeBuy"), a.$(".couponFeature").removeClass("vpc_sns")) },
                    p = function() { f || (a.$(".couponFeature").removeClass("vpc_oneTimeBuy"), a.$(".couponFeature").addClass("vpc_sns")) };
                g.publishImpression(c, e, "db");
                a.$("#vpcButton").find(".a-button").click(k);
                a.$("#vpcButtonSns").find(".a-button").click(k);
                a.$("#vpcButton").find(".a-checkbox").click(k);
                a.$("#vpcButtonSns").find(".a-checkbox").click(k);
                a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#snsBuyBox")) ?
                    "function" === typeof p && p() : a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#oneTimeBuyBox")) ? "function" === typeof h && h() : a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#LDBuybox")) && "function" === typeof h && h();
                a.off("a:accordion:buybox-accordion:onetime-accordion:select", h);
                a.off("a:accordion:buybox-accordion:sns-accordion:select", p);
                a.off("a:accordion:buybox-accordion:gb_ld_buybox:select", h);
                if ("function" === typeof p) a.on("a:accordion:buybox-accordion:sns-accordion:select",
                    p);
                "function" === typeof h && (a.on("a:accordion:buybox-accordion:onetime-accordion:select", h), a.on("a:accordion:buybox-accordion:gb_ld_buybox:select", h))
            }
        }
    });
    n.when("A", "vpcCommonFunctions").register("vpc-mobile-ccx", function(a, g) {
        return {
            initialize: function(c) {
                var b = function() {
                        return a.$("#couponFeature").hasClass("vpc_signedIn") },
                    e = function() {
                        return a.$("#couponFeature").hasClass("vpc_clipped") },
                    f = function() {
                        a.$("#couponFeature").addClass("vpc_clip_error");
                        a.$("#couponFeature").removeClass("vpc_clipped");
                        a.$("#couponFeature").removeClass("vpc_unclipped")
                    },
                    l = function(b) { e() || (-1 < b.indexOf("SUCCESS") || -1 < b.indexOf("REDEEMED") ? (a.$("#couponFeature").removeClass("vpc_unclipped"), a.$("#couponFeature").addClass("vpc_clipped")) : f(), "function" === typeof d.displaySpecialOffersClipCouponResult && d.displaySpecialOffersClipCouponResult(b)) };
                a.$("#couponFeature").length && (d.displayClipCouponResult = l);
                var k = function(a, b, c) { f() },
                    h = function(e) {
                        b() ? a.$.ajax({
                            type: "GET",
                            url: "/gp/promotions/vpc?ie=UTF8&promoId=" + a.$("#couponFeature").attr("data-vpcpromoid") +
                                "&source=dp_${deviceRef}_" + a.$("#couponFeature").attr("data-vpcasin"),
                            success: l,
                            error: k
                        }) : d.location = c.signinUrl ? c.signinUrl : "ma" === c.deviceRef ? "/gp/aw/coupon/c/" + c.vpc.id + "?ie=UTF8&vs=1&email=&redirectASIN=" + c.vpc.asin + "&redirect=1&source=dp_" + c.deviceRef + "_" + c.vpc.asin : "/gp/sign-in.html/ref=sr_1_1?ie=UTF8&email=&redirectASIN=" + a.$("#couponFeature").attr("data-vpcasin") + "&disableCorpSignUp=&path=%2Fgp%2Fcoupon%2Fc%2F" + a.$("#couponFeature").attr("data-vpcpromoid") + "&redirectProtocol=&mode=&useRedirectOnSuccess=1";
                        e.preventDefault()
                    };
                a.$("#couponFeature").length && g.publishImpression(e(), b(), c.deviceRef);
                a.$(".ccx_dpv2 #vpcButton").find(".a-button").click(h);
                a.$(".ccx_dpv2 #vpcButtonSns").find(".a-button").click(h)
            }
        }
    });
    var m = !1;
    n.when("A", "vpcCommonFunctions").register("vpc-mobile", function(a, g) {
        var c;
        return {
            initialize: function(b) {
                function e() { m || (a.$("#priceBlockCoupon").addClass("vpc_oneTimeBuy"), a.$("#priceBlockCoupon").removeClass("vpc_sns")) }

                function f() {
                    m || (a.$("#priceBlockCoupon").removeClass("vpc_oneTimeBuy"),
                        a.$("#priceBlockCoupon").addClass("vpc_sns"))
                }
                c = b.clickedClipCoupon;
                var l = function(b) {
                        c || (-1 < b.indexOf("SUCCESS") || -1 < b.indexOf("REDEEMED") ? (a.$("#priceBlockCoupon .vpc_unclipped, .standaloneCoupon.vpc_unclipped").addClass("vpc_clipped"), a.$("#priceBlockCoupon .vpc_unclipped, .standaloneCoupon.vpc_unclipped").removeClass("vpc_unclipped")) : (a.$("#priceBlockCoupon .vpc_unclipped, .standaloneCoupon.vpc_unclipped").addClass("vpc_clip_error"), a.$("#priceBlockCoupon .vpc_unclipped, .standaloneCoupon.vpc_unclipped").removeClass("vpc_unclipped"),
                            a.$("#priceBlockCoupon .vpc_unclipped, .standaloneCoupon.vpc_unclipped").removeClass("vpc_clipped"), m = !0), c = !0)
                    },
                    k = function(c) {
                        if (b.loggedIn) a.$.ajax({ type: "GET", url: "/gp/promotions/vpc?ie=UTF8&promoId=" + b.vpc.id + "&source=dp_" + b.deviceRef + "_" + b.vpc.asin, success: l }), c.preventDefault();
                        else return d.location = b.clipAction, c.preventDefault(), !0 };
                g.publishImpression(c, b.loggedIn, b.deviceRef, b.vpc.id, b.vpc.asin);
                a.$("#oneTimeBuyVpcButton").find(".a-button").click(k);
                a.$("#snsVpcButton").find(".a-button").click(k);
                a.$("#oneTimeBuyVpcButton").find(".a-checkbox").click(k);
                a.$("#snsVpcButton").find(".a-checkbox").click(k);
                a.off("a:accordion:buybox-accordion:onetime-accordion:select", e);
                a.off("a:accordion:buybox-accordion:sns-accordion:select", f);
                if ("function" === typeof f) a.on("a:accordion:buybox-accordion:sns-accordion:select", f);
                if ("function" === typeof e) a.on("a:accordion:buybox-accordion:onetime-accordion:select", e);
                a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#snsBuyBox")) ? f() : a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#oneTimeBuyBox")) ?
                    e() : a.$("div#snsBuyBoxAccordion > .a-accordion-active").is(a.$("#LDBuybox")) && e()
            }
        }
    })
});
/* ******** */
(function(f) {
    var m = window.AmazonUIPageJS || window.P,
        l = m._namespace || m.attributeErrors,
        g = l ? l("PrivateLabelMobileAssets") : m;
    g.guardFatal ? g.guardFatal(f)(g, window) : g.execute(function() { f(g, window) }) })(function(f, m, l) {
    f.when("A", "jQuery", "twister-aui-page-state", "ready").register("cross-sell-recommendations", function(f, d, l) {
        function x(a) {
            return d("#crossSellCheckbox" + a) }

        function w() {
            for (var a = 0, b = 0; b < e; b++) {
                var c = x(b);
                c.prop("checked") && (a++, c.attr("name", "asin." + (a + 1))) }
            d("#crossSellAddToCart").find("span.a-button-text").text(h["addToCartText" +
                (a + 1)]);
            d("#crossSellPriceLabel").text(h["priceText" + (a + 1)]);
            a += 1;
            d("#crossSellForm").attr("action", r + a);
            a = "";
            for (b = 0; b < e; b++) a += x(b).prop("checked") ? "1" : "0";
            a = parseInt(a, 2);
            a = p[a];
            d("#crossSellPrice").text(a);
            if (t) { a = d("#crossSellForm").find("input[name='asin.1']").val();
                for (b = 0; b < e; b++) c = x(b), c.prop("checked") && (a && (a += "|"), a += c.val());
                b = u();
                c = v();
                null !== b && null !== c && (c.data("awMash").inputs.a = a) }
        }

        function u() {
            var a = d("#buybox").find(".a-declarative").has("#add-to-cart-button");
            if (1 === a.length) return a;
            a = d("#atc-declarative");
            return 1 === a.length ? a : null
        }

        function v() {
            var a = d("#crossSellCartDeclarative");
            return 1 === a.length ? a : null }

        function q(a, b) {
            var c = a.data("awMash"),
                k = b.data("awMash");
            c && c.inputs && k && (k.inputs = { colid: c.inputs.colid, coliid: c.inputs.coliid, verificationSessionID: c.inputs.verificationSessionID, o: c.inputs.o }, k.strings = d.extend({}, c.strings), k.timeout = c.timeout) }
        var t = d("#crossSellCartDeclarative").length,
            n, h, e, p, r;
        return {
            init: function() {
                l.updatePageState();
                n = f.state("crossSellData");
                h = f.state("crossSellStrings");
                if (n && h) { e = n.numRecommendations;
                    p = n.possibleSums;
                    r = d("#crossSellForm").attr("action");
                    if (t) {
                        var a = u(),
                            b = v();
                        try { null !== a && null !== b && q(a, b) } catch (c) { m.ueLogError && m.ueLogError(c, { logLevel: "ERROR", attribution: "cross_sell_recommendations_mobile", message: "An error occurred when extracting information from the buybox." }) }
                        d("#crossSellAddToCart").click(function(a) { a.preventDefault() }) }
                    for (a = 0; a < e; a++) x(a).change(w);
                    d("#crossSellPricePara").removeClass("a-hidden");
                    w() }
            }
        }
    });
    f.register("hero-image-executer", function() {
        return {
            execute: function(g) {
                f.when("A", "jQuery", "airy-image-block", "image-block-exp-weblab", "atf", g).execute(function(d, g, x, w) {
                    function u() {
                        if (a.length && b && b.calculatedWidth && b.calculatedHeight && b.heroFocalPoint)
                            if (b.imageWidth && "undefined" !== typeof b.imageWidth && 0 !== b.imageWidth) {
                                var c = (m.innerWidth || document.documentElement.clientWidth || document.body.clientWidth) / 2 - 14 - b.heroFocalPoint * b.calculatedWidth / b.imageWidth,
                                    d = g("#imageBlock_feature_div");
                                if (d && d.length) {
                                    var e = d.offset(),
                                        d = d.outerHeight(),
                                        f = a.offset(),
                                        h = (a.outerHeight() - b.calculatedHeight) / 2,
                                        e = h + (e.top - f.top + d - (h + 1 * b.calculatedHeight));
                                    (d = g("#image-block-pagination")) && d.length && (e = e - d.outerHeight() - 5);
                                    a.css({ "background-position": c + "px " + e + "px" }) } else a.css({ "background-position": c + "px center" })
                            } else a.css({ "background-position": "center center" })
                    }

                    function v(a, b) {
                        if (null !== a && a !== l && "string" === typeof a) {
                            var d = new Image;
                            null !== b && b !== l && "function" === typeof b && (d.onload = b);
                            d.src = a } }

                    function q() {
                        if (a.length)
                            if (a.css({ "-webkit-transform": "translateX(-" + (0 === e ? e : e + 40) + "px)" }), h) {
                                var c;
                                c = Math.abs(1E3 * (n ? p - e : p + e) / t);
                                c = Math.max(c, 300);
                                c = Math.min(c, 1.2 * m.innerWidth);
                                a.css({ "-webkit-transition": "all " + c + "ms cubic-bezier(0.215,0.61,0.355,1)", transition: "all " + c + "ms cubic-bezier(0.215,0.61,0.355,1)" }) } else a.css({ "-webkit-transition": "", transition: "" }) }
                    var t, n = !1,
                        h = !1,
                        e = 0,
                        p = 0,
                        r = !1,
                        a = g("#heroImage"),
                        b;
                    f.when("A").register("loadHeroImage", function(c) {
                        return {
                            loadImage: function(c) {
                                a.length &&
                                    c.heroImageUrl && c.calculatedWidth && c.calculatedHeight && v(c.heroImageUrl, function() {
                                        var b = c.heroImageUrl,
                                            d = c.calculatedWidth,
                                            e = c.calculatedHeight;
                                        a.length && b && d && e && a.css({ "background-image": 'url("' + b + '")', "background-size": d + "px " + e + "px", "max-width": d + "px", "min-height": e + "px", filter: "", "-ms-filter": "" }) })
                            }
                        }
                    });
                    f.when("A").register("updateRepositionData", function(a) {
                        return { updateData: function(a) { b = a } } });
                    f.when("A", "ready").execute(function(a) {
                        a.on.orientationchange(u);
                        a.on("a:popover:afterSlideOut",
                            u)
                    });
                    f.when("A", "jQuery").execute("test-gestures", function(a, b) { b("#heroContainer").bind("swipe", function(a, c) { t = c.velocityX;
                            n = 0 > c.velocityX;
                            a.stopPropagation() }) });
                    d.on("a:carousel:image-block-carousel:change:pageNumber", function(a) {
                        (h = a.newValue) && q() });
                    d.on("a:carousel:image-block-carousel:change:px", function(a) { e = a.newValue;
                        p = a.oldValue;
                        q() });
                    d.on("a:carousel:image-block-carousel:change:animating", function(a) { r = a.newValue;!r && h && (h = !1);
                        q() });
                    d.on("image-block-refresh", function() { e = 0;
                        q() })
                })
            }
        }
    })
});
/* ******** */
(function(c) {
    var b = window.AmazonUIPageJS || window.P,
        d = b._namespace || b.attributeErrors,
        a = d ? d("SamplingMobileAssets") : b;
    a.guardFatal ? a.guardFatal(c)(a, window) : a.execute(function() { c(a, window) }) })(function(c, b, d) {});
/* ******** */
(function(a, b, c) { a.execute(function() {}) })(function() {
    var a = window.AmazonUIPageJS || window.P,
        b = a._namespace || a.attributeErrors;
    return b ? b("MomDetailPageAssets") : a }(), window);
/* ******** */
(function(g, u, A) {
    g.execute(function() {
        g.when("a-util", "gc-util", "gc-formatter", "gc-validator", "gc-string").register("GC", function(a) {
            var k = {},
                t = [].slice.call(arguments, 1);
            a.each(t, function(c) { a.extend(k, c) });
            return k });
        g.when("A", "gc-util", "ready").register("gc-formatter", function(a, k) {
            function t(b, a) {
                if (-1 === b.indexOf(a)) return b;
                var c = b.split(a);
                return c.slice(0, -1).join("") + a + c.slice(-1) }

            function c(c, q, e) {
                var l = b.CURRENCY_SIGN,
                    n = b.GROUPING_SEPARATOR,
                    f = b.DECIMAL_SEPARATOR,
                    r = b.DIGIT_OPTIONAL,
                    m = b.DIGIT_REQUIRED,
                    p = q.split(b.SUBPATTERN_SEPARATOR);
                q = p[0];
                p = p[1] || "-" + q;
                q = 0 > c ? p : q;
                var p = -1 !== q.indexOf(l),
                    g = /([,\.#0]+)/.exec(q)[1],
                    g = t(g, n),
                    g = t(g, f),
                    f = g.split(f),
                    g = f[0],
                    f = f[1] || "",
                    v = g.lastIndexOf(n),
                    u = Infinity; - 1 !== v && (u = g.length - 1 - v);
                g = g.replace(n, "");
                c = Math.abs(c);
                d.performRounding && (c = k.round(c, f.length, "half_even"));
                c = (c + "").split(".");
                var B = c[0];
                c = c[1] || "";
                c = k.toFixedLength(c, f.length, "0", "right");
                v = Math.max(g.length, B.length);
                B = k.toFixedLength(B, v, " ", "left");
                g = k.toFixedLength(g, v, "#", "left");
                n = "";
                for (--v; 0 <= v; v--) {
                    var C = B.charAt(v),
                        z = g.charAt(v);
                    z === r ? " " !== C && (n = C + n) : z === m && (n = " " === C ? "0" + n : C + n) }
                if (Infinity !== u && 0 < u) { g = n;
                    n = d.groupingSeperator;
                    v = [];
                    for (z = u; g.length;) { v.length && v.unshift(n);
                        if (g.length <= z) { v.unshift(g);
                            break }
                        v.unshift(g.substr(g.length - z, z));
                        g = g.substr(0, g.length - z); - 1 < D.indexOf("_IN") && (z = u - 1) }
                    n = v.join("") }
                if ("" !== c && "" !== f) {
                    g = "";
                    u = !1;
                    for (v = f.length - 1; 0 <= v; v--)
                        if (B = c.charAt(v), z = f.charAt(v), z === r) {
                            if (u || "0" !== B) u = !0, g = B + g } else z === m && (g = B + g);
                        "" !== g && (n = n + (p ? d.currencyDecimalSeparator :
                        d.decimalSeparator) + g)
                }
                r = q.replace(/[,\.#0]+/, n);
                r = r.replace(l, e ? "" : d.currencySymbol);
                return a.trim(r)
            }

            function f(b, a) {
                if ("number" === typeof b) return !1;
                var c = a ? d.currencyDecimalSeparator : d.decimalSeparator,
                    q = "" + b;
                if (-1 !== q.indexOf(d.currencySymbol) || -1 !== q.indexOf(c) && -1 !== q.indexOf(d.groupingSeperator)) return !0;
                if (-1 !== q.indexOf(d.groupingSeperator)) {
                    if (c = q.split(d.groupingSeperator), 2 < c.length || 2 < c[1].length) return !0 } else if (-1 !== q.indexOf(c) && (c = q.split(c), 1 === c.length)) return !0;
                return !1 }

            function e(b,
                a) {
                var c = a ? d.currencyDecimalSeparator : d.decimalSeparator;
                return "" !== c && (c = c.replace(/\./g, "\\."), c = b.match(new RegExp("^(.*)" + c + "([^" + c + "]*)$")), null !== c) ? c.slice(1) : [b, ""] }

            function r(b, a) {
                if (f(b) || isNaN(b)) {
                    var c = e("" + b, a),
                        d = c[0],
                        c = c[1] || "00",
                        d = k.filterNumeric(d),
                        c = k.filterNumeric(c);
                    return k.toDecimal(d + "." + c) }
                return Number(b) }

            function p(b) { n.hasOwnProperty(b) || g.error('No formatter with the name: "' + b + '" for locale: ' + D, "gc-formatter", "getLocalizedFormatter");
                return n[b] }
            var m = a.state("gc-formatter-config"),
                d = { locale: "en_US", currencySymbol: "$", currencyDecimalSeparator: ".", decimalSeparator: ".", groupingSeperator: ",", dateShortPattern: "M/d/yy", currencyPattern: "¤#,##0.00;(¤#,##0.00)", decimalPattern: "#,##0.###", performRounding: !0 },
                b = { CURRENCY_SIGN: "¤", GROUPING_SEPARATOR: ",", DECIMAL_SEPARATOR: ".", DIGIT_OPTIONAL: "#", DIGIT_REQUIRED: "0", SUBPATTERN_SEPARATOR: ";", MONTH_REPLACE_SEPARATOR: "¤" },
                l = a.$;
            "object" === typeof m && l.extend(d, m);
            var D = d.locale,
                q = function() {
                    var b = function() {
                            function b(c) {
                                return a.trim("" + c) }
                            return {
                                interpret: b,
                                format: function(a) {
                                    return b(a) }
                            }
                        }(),
                        c = function() {
                            function b(a) {
                                return k.toInteger(k.filterNumeric("" + a)) }
                            return { interpret: b, format: function(a) {
                                    return "" + b(a) } } }();
                    return { message: b, integer: c }
                }(),
                n = function() {
                    var a = function() {
                            function b(a) {
                                return r(a, !1) }
                            return { interpret: b, format: function(a) { a = b(a);
                                    return c(a, d.decimalPattern) } } }(),
                        q = function() {
                            function b(a) {
                                a = a.trim();
                                if (!(new RegExp("^((\\d{1,3})(\\" + d.groupingSeperator + "\\d{3})+|\\d+)?(\\" + d.decimalSeparator + "\\d{0,2})?$")).test(a)) throw "gcui-strict-amount-input-errors";
                                a = a.split(d.groupingSeperator).join("");
                                a = e("" + a, !1);
                                return Number(a[0] + "." + (a[1] || "00"))
                            }
                            return { interpret: b, format: function(a) { a = b(a);
                                    return c(a, d.currencyPattern, !0) } }
                        }(),
                        n = function() {
                            function b(a) {
                                return r(a, !1) }
                            return { interpret: b, format: function(a) { a = b(a);
                                    return c(a, d.currencyPattern, !0) } } }(),
                        l = function() {
                            function b(a) {
                                return r(a, !0) }
                            return { interpret: b, format: function(a) { a = b(a);
                                    return c(a, d.currencyPattern) } } }(),
                        f = function() {
                            function a(b, c) {
                                var h = null;
                                if (b && "function" === typeof b.getMonth) h = b;
                                else if (b === k.toInteger(b)) h = new Date(k.toInteger(b));
                                else if ("string" === typeof b) {
                                    var h = c || d.dateShortPattern,
                                        h = h.split(/[^A-Za-z]+/),
                                        q = b.split(/[^0-9]+/);
                                    if (3 !== q.length) h = null;
                                    else {
                                        for (var n, e, l, C = 0; 3 > C; C++) switch (h[C]) {
                                            case "yy":
                                                n = k.toInteger(q[C]);
                                                n = (60 >= n ? 2E3 : 1900) + n;
                                                break;
                                            case "yyyy":
                                                n = k.toInteger(q[C]);
                                                break;
                                            case "MONTH":
                                            case "M":
                                            case "MM":
                                                e = k.toInteger(q[C]) - 1;
                                                break;
                                            case "d":
                                            case "dd":
                                                l = k.toInteger(q[C]) }
                                        h = new Date(n, e, l, 0, 0, 0) } }
                                return h
                            }
                            return {
                                interpret: a,
                                format: function(c, h, q) {
                                    c = a(c, h);
                                    h = "";
                                    if (c) { h = c.getFullYear();
                                        var n = c.getMonth() + 1;
                                        c = c.getDate();
                                        h = (q ? q : d.dateShortPattern).replace("yyyy", h).replace("yy", ("" + h).substr(2, 2)).replace("MONTH", b.MONTH_REPLACE_SEPARATOR + n + b.MONTH_REPLACE_SEPARATOR).replace("MM", k.toFixedLength(n, 2, "0")).replace("M", n).replace("dd", k.toFixedLength(c, 2, "0")).replace("d", c) }
                                    return h
                                },
                                monthSeparator: b.MONTH_REPLACE_SEPARATOR
                            }
                        }();
                    return { decimal: a, amount: n, currency: l, date: f, strictAmount: q }
                }();
            return {
                interpolateMessage: function(b, a) {
                    return b.replace(/\{([^{}]+)\}/g,
                        function(b, c) {
                            var d = c.split(","),
                                h = d[0],
                                e = d[1],
                                d = d[2],
                                h = "object" === typeof a ? a[h] : a;
                            if ("number" === e) switch (d) {
                                case "integer":
                                    h = q.integer.format(h);
                                    break;
                                case "currency":
                                    h = n.currency.format(h);
                                    break;
                                case "percent":
                                    break;
                                default:
                                    h = n.decimal.format(h) } else "date" === e && (h = "short" === d ? n.date.format(h, c.dateShortPattern) : n.date.format(h, d));
                            return h })
                },
                getLocalizedFormatter: p,
                getFormatter: function(b) {
                    if (a.contains(b, "locale:")) return p(b.split(":")[1]);
                    q.hasOwnProperty(b) || g.error("No formatter with the name: " +
                        b, "gc-formatter", "getFormatter");
                    return q[b]
                },
                getLocale: function() {
                    return d.locale },
                prettifyClaimCode: function(b) {
                    return 14 > b.length ? b : b.replace(/^(.{4})(.{6})(.+)?$/, "$1-$2-$3") }
            }
        });
        g.when("A", "gc-util").register("gc-html", function(a, k) {
            var t = a.$;
            return {
                scaleHtml: function(a, f, e) {
                    a = a.replace(/([0-9|.]+)px/g, function(a, b) {
                        return k.round(k.multiply(b, f), 0, "up") + "px" });
                    for (var r = ["width", "height", "cellpadding", "cellspacing"], g = 0; g < r.length; g++) {
                        var m = r[g];
                        a = a.replace(new RegExp(" " + m + "=(['\"]?)([0-9]+)(['\"]?)",
                            "g"), function(a, b, c, e) {
                            return " " + m + "=" + b + k.round(k.multiply(c, f), 0, "up") + e })
                    }
                    a = a.replace(/ src=/g, " data-src=");
                    a = t("<div />").html(a);
                    a.find("img").each(function() {
                        var a = t(this);
                        e ? a.attr("data-src", k.clearImageStyleCode(a.attr("data-src"))) : k.addImageStyleDimensions(a) });
                    return a = a.html().replace(/ data-src=/g, " src=")
                },
                makeHtml5: function(a) {
                    a = a.replace(/ src=/g, " data-src=");
                    a = t("<div />").html(a);
                    a.find("table, th, td").each(function() {
                        var a = t(this),
                            c = a.attr("cellpadding"),
                            r = a.attr("cellspacing"),
                            g = a.attr("valign"),
                            m = a.attr("align"),
                            d = a.attr("width"),
                            b = a.attr("height");
                        if (a.is("table")) {
                            var l = a.find("td, th"); "undefined" !== typeof c && (c = k.toInteger(c), l.css("padding", c), a.removeAttr("cellpadding")); "undefined" !== typeof r && (r = k.toInteger(r), a.css("border-collapse", 0 < r ? "separate" : "collapse"), a.css("border-spacing", r), a.removeAttr("cellspacing")); "undefined" !== typeof g && (l.css("vertical-align", g), a.removeAttr("valign")) }
                        "undefined" !== typeof m && (a.is("table") && "center" === m ? a.css("margin", "0 auto") :
                            a.is("td") && a.css("text-align", m), a.removeAttr("align"));
                        "undefined" !== typeof d && (a.css("width", d), a.removeAttr("width"));
                        "undefined" !== typeof b && (a.css("height", b), a.removeAttr("height"))
                    });
                    return a = a.html().replace(/ data-src=/g, " src=")
                },
                escapeHtml: function(a) {
                    return "string" !== typeof a ? "" : a.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/>/g, "&gt;") },
                nl2br: function(a) {
                    return "string" !== typeof a ? "" : a.replace(/(\r\n)|(\n\r)|(\n)|(\r)/g, "<br />") }
            }
        });
        g.when("A", "ready").execute(function(a) {
            var k = a.$;
            if (a = a.state("gc-device-info")) {
                var k = k("html"),
                    t = "";
                a.type && (t += "gc-" + a.type);
                a.os && a.os.name && (t += " gc-" + a.os.name);
                t += a.isApp ? " gc-app" : " gc-no-app";
                k.addClass(t) } });
        g.when("A", "ready").register("gc-metrics", function(a) {
            function k() {
                return "function" === typeof u.uet }

            function t(a) { k() && !f.hasOwnProperty(a) && (f[a] = 1, u.uet("bb", a, { wb: 1 })) }

            function c(a) {
                k() && f.hasOwnProperty(a) && (delete f[a], u.uet("be", a, { wb: 1 }), u.uex("ld", a, { wb: 1 }))
            }
            var f = {};
            return { trackSecondaryView: function(e) { k() && (a.on("a:popover:beforeShow:" + e, function() { t(e) }), a.on("a:popover:afterShow:" + e, function() { c(e) })) }, incrementCounter: function(a) { u.ue && "function" === typeof u.ue.count && u.ue.count(a, (u.ue.count(a) || 0) + 1) }, stopWidgetTimer: c, startWidgetTimer: t }
        });
        g.when("A", "gc-util", "ready").register("gc-reftag", function(a, k) {
            function t(c, f, t) {
                0 !== f.length && (f = f.hasClass("gc-indexed") ? f : f.closest(".gc-indexed"), 0 !== f.length && (f = f.index(), f++, t =
                    k.toInteger(t), 0 < t && (f += t), a.get("/gc/reftag?ref_=" + (c + "_" + f))))
            }

            function c(a, c) { f.hasOwnProperty(a) || g.error("No reftag actions exist for feature: " + a, "gc-reftag");
                f[a].hasOwnProperty(c) || g.error("No reftag action exists: " + c + " for feature: " + a, "gc-reftag");
                var k = f[a][c];
                k.hasOwnProperty("reftag") || g.error("No reftag exists for feature: " + a + " and action: " + c, "gc-reftag");
                return k.reftag }
            var f = a.state("gc-reftags") || {};
            a.declarative("gc-record-reftag", "click", function(c) {
                c.data && c.data.reftag && a.get("/gc/reftag?ref_=" +
                    c.data.reftag)
            });
            a.declarative("gc-record-indexed-reftag", "click", function(a) { a.data && a.data.reftag && t(a.data.reftag, a.$target) });
            return {
                getReftag: c,
                getFeatureReftags: function(c) { f.hasOwnProperty(c) || g.error("No reftag actions exist for feature: " + c, "gc-reftag");
                    var k = {};
                    a.each(f[c], function(a, f) { a.hasOwnProperty("reftag") || g.error("No reftag exists for feature: " + c + " and action: " + f, "gc-reftag");
                        k[f] = a.reftag });
                    return k },
                recordIndexedReftag: t,
                recordReftag: function(e, f) {
                    var k = c(e, f);
                    a.get("/gc/reftag?ref_=" +
                        k)
                }
            }
        });
        g.when("A").register("gc-storage", function(a) {
            function k(a) {
                if (a) return "gc-storage-" + a }
            a = function() { this.storage = {} };
            a.prototype.get = function(a) {
                if (this.storage.hasOwnProperty(a)) return this.storage[a] };
            a.prototype.set = function(a, f) { this.storage[a] = f };
            a.prototype.remove = function(a) { this.storage.hasOwnProperty(a) && delete this.storage[a] };
            a.prototype.clear = function() { this.storage = {} };
            var t = new a;
            return {
                get: function(a) {
                    if (a = k(a)) return t.get(a) },
                set: function(a, f) {
                    (a = k(a)) && t.set(a,
                        f)
                },
                remove: function(a) {
                    (a = k(a)) && t.remove(a) },
                clear: function() { t.clear() }
            }
        });
        g.when("A", "gc-formatter").register("gc-string", function(a, k) {
            function t(c) {
                var f = a.state("gc-strings") || {};
                f.hasOwnProperty(c) || g.error("String does not exist: " + c, "gc-string", "getString");
                return f[c] }
            return {
                getStrings: function(c) {
                    for (var f = a.state("gc-strings") || {}, e = {}, k = 0; k < c.length; k++) {
                        var t = c[k];
                        f.hasOwnProperty(t) || g.error("String does not exist: " + t, "gc-string", "getStrings");
                        e[t] = f[t] }
                    return e },
                getString: t,
                addStrings: function(c) {
                    var f = {};
                    a.each(c, function(a, c) { "" === c && g.error("String cannot be blank: " + a, "gc-string", "addStrings");
                        f[a] = c });
                    a.state("gc-strings", f) },
                addString: function(c, f) {
                    var e = {}; "" === f && g.error("String cannot be blank: " + f, "gc-string", "addString");
                    e[c] = f;
                    a.state("gc-strings", e) },
                getInterpolatedString: function(a, f) {
                    return k.interpolateMessage(t(a), f) }
            }
        });
        g.when("A").register("gc-util", function(a) {
            var k = a.$,
                t = {
                    keyCodes: {
                        alt: 18,
                        backspace: 8,
                        ctrl: 17,
                        del: 46,
                        end: 35,
                        enter: 13,
                        escape: 27,
                        home: 36,
                        shift: 16,
                        tab: 9,
                        num_zero: 48,
                        num_nine: 57,
                        numpad_zero: 96,
                        numpad_nine: 105,
                        A: 65,
                        Z: 90,
                        arrow_left: 37,
                        arrow_up: 38,
                        arrow_right: 39,
                        arrow_down: 40
                    }
                },
                c = function() {
                    function b(b) {
                        return isNaN(b) ? 0 : Number(b) }

                    function a(b, c) {
                        var d = ((b + "").split(".")[1] || "").length,
                            l = ((c + "").split(".")[1] || "").length;
                        return d > l ? d : l }

                    function c(b, a, d) {
                        a = "number" !== typeof a ? 2 : a;
                        a = 0 > a ? 0 : a;
                        if (((b + "").split(".")[1] || "").length < a) return b;
                        "string" === typeof d && (d = d.toLowerCase());
                        a = Math.pow(10, a);
                        b *= a;
                        switch (d) {
                            case "down":
                                b = Math.floor(b);
                                break;
                            case "up":
                                b = Math.ceil(b);
                                break;
                            case "half_even":
                                var l = (b + "").split(".");
                                d = l[0];
                                l = l[1];
                                b = 5 === (l ? parseInt(l.charAt(0), 10) : 0) ? 0 === parseInt(d, 10) % 10 % 2 ? Math.floor(b) : Math.ceil(b) : Math.round(b);
                                break;
                            default:
                            case "half_up":
                                b = Math.round(b)
                        }
                        return b / a
                    }
                    return {
                        add: function(c, d) { c = b(c);
                            d = b(d);
                            var h = Math.pow(10, a(c, d));
                            return (Math.round(c * h) + Math.round(d * h)) / h },
                        subtract: function(c, d) { c = b(c);
                            d = b(d);
                            var h = Math.pow(10, a(c, d));
                            return (Math.round(c * h) - Math.round(d * h)) / h },
                        multiply: function(c, d) {
                            c = b(c);
                            d = b(d);
                            var h = Math.pow(10, a(c, d));
                            return Math.round(c * h) * Math.round(d * h) / (h * h)
                        },
                        divide: function(c, d) { c = b(c);
                            d = b(d);
                            var h = Math.pow(10, a(c, d));
                            return Math.round(c * h) * (1 / Math.round(d * h)) },
                        round: c,
                        toDecimal: function(a) { a = b(a);
                            return c(100 * a, 0) / 100 },
                        toInteger: function(b) {
                            return parseInt(b, 10) || 0 }
                    }
                }(),
                f = function() {
                    return {
                        arrayMove: function(b, a, c) {
                            var d = b.length;
                            d && 0 <= a && 0 <= c && a < d && c < d && b.splice(c, 0, b.splice(a, 1)[0]) },
                        arrayIntersection: function(b, c) {
                            return !k.isArray(b) || !k.isArray(c) || a.objectIsEmpty(b) || a.objectIsEmpty(c) ? [] : k.grep(b, function(b) {
                                return null === b ? !1 : -1 < k.inArray(b, c) })
                        }
                    }
                }(),
                e = function() {
                    return {
                        parseTemplate: function(b, a) {
                            return b.replace(/\{([\w\.]*)\}/g, function(b, c) {
                                var d = c.split("."),
                                    h = a[d.shift()];
                                if ("undefined" === typeof h) return "";
                                for (var e = 0; e < d.length; e++)
                                    if (h = h[d[e]], "undefined" === typeof h || null === h) return "";
                                return h }) },
                        filterNumeric: function(b) { b = b.replace(/[^0-9\-]/g, "").replace(/(?!^)\-/g, "");
                            return "-" === b ? "" : b },
                        interpretString: function(b) {
                            return "boolean" === typeof b || "number" === typeof b ||
                                "" === a.trim(b) ? b : isNaN(b) ? "true" === b || "false" === b ? "true" === b : b : Number(b)
                        },
                        parseQueryArguments: function(b, a) {
                            var c = {};
                            if ("string" !== typeof b) return c;
                            var d = b.split("?"),
                                n = /&?([^=]+?)=([^&#]*)/g;
                            if (2 !== d.length) return c;
                            for (var d = d[1], h, e; null !== (h = n.exec(d));) e = h[2], c[h[1]] = a ? decodeURIComponent(e) : e;
                            return c },
                        toFixedLength: function(b, a, c, d) { b += "";
                            if (b.length > a) return b.substr(0, a);
                            b.length < a && (a = Array(a - b.length + 1).join(c), b = "right" === d ? b + a : a + b);
                            return b },
                        extractFileNameFromFilePath: function(b) {
                            return b &&
                                "string" === typeof b ? b.replace(/^.*[\\\/]/, "") : ""
                        }
                    }
                }(),
                g = function() {
                    return { renameProperty: function(b, a, c) {
                            if (!b.hasOwnProperty(a) || null === b[a]) return !1;
                            if (a === c) return !0;
                            b[c] = b[a];
                            delete b[a];
                            return !0 } } }(),
                p = function() {
                    function b(b) {
                        return b.replace(a, ".") }
                    var a = /\._(.+)_\./g,
                        c = /(.+?)\._(.+)_\.(.+)/,
                        d = /(.+?)\.(jpg|png|gif|jpeg|bmp|ugc)(\?.*)?$/;
                    return {
                        clearStyleCode: b,
                        addStyleCode: function(a, h, e) {
                            if (!a) return "";
                            if (!h) return a;
                            e && !c.test(a) && (e = !1);
                            e ? "_" === h.charAt(0) && (h = h.substr(1)) : (a = b(a), h = "." +
                                h);
                            return a.replace(d, "$1" + h + ".$2$3")
                        }
                    }
                }(),
                m = function() {
                    return {
                        moveElToFront: function(b) { 0 < b.index() && b.parent().prepend(b) },
                        toggleElements: function(b, a) {
                            return b && b.length && a && a.length ? (a.hide(), b.show(), !0) : !1 },
                        scrollToElement: function(b, a, d) {
                            if (b.length) {
                                var q = k("html, body");
                                b = b.offset().top - c.toInteger(d);
                                a ? q.animate({ scrollTop: b }, 400) : q.scrollTop(b) } },
                        pruneChildElements: function(b, a, d) { a = c.toInteger(a);
                            b = b.children(d ? d : "");
                            b.length <= a || b.slice(a).remove() },
                        addImageStyleDimensions: function(b) {
                            var d =
                                b.attr("data-src");
                            if (d && 0 === d.indexOf("http")) {
                                var e = c.toInteger(b.attr("width")),
                                    q = c.toInteger(b.attr("height")),
                                    n;
                                a.capabilities.hires && (e *= 2, q *= 2);
                                0 < e ? n = "_SX" + e + "_" : 0 < q && (n = "_SY" + q + "_");
                                n && b.attr("data-src", p.addStyleCode(d, n)) }
                        },
                        bindEventAndSuppressKey: function(b, a, c, d, e) {
                            if (!b || !a || !c) return !1;
                            b.bind(a, function(b) {
                                (b.keyCode || b.which) === c && (b.preventDefault(), d && d(b));
                                e && e(b) }) }
                    }
                }(),
                d = function() {
                    return {
                        isNumber: function(b) {
                            var a = b.keyCode || (b.$event ? b.$event.keyCode : !1) || b;
                            return !(b.shiftKey ||
                                b.$event && b.$event.shiftKey) && a >= t.keyCodes.num_zero && a <= t.keyCodes.num_nine || a >= t.keyCodes.numpad_zero && a <= t.keyCodes.numpad_nine ? !0 : !1
                        },
                        isArrowKey: function(b) { b = b.keyCode || (b.$event ? b.$event.keyCode : !1) || b;
                            return b >= t.keyCodes.arrow_left && b <= t.keyCodes.arrow_down ? !0 : !1 }
                    }
                }();
            return {
                constants: t,
                add: c.add,
                subtract: c.subtract,
                multiply: c.multiply,
                divide: c.divide,
                round: c.round,
                toDecimal: c.toDecimal,
                toInteger: c.toInteger,
                arrayMove: f.arrayMove,
                arrayIntersection: f.arrayIntersection,
                parseTemplate: e.parseTemplate,
                filterNumeric: e.filterNumeric,
                interpretString: e.interpretString,
                extractFileNameFromFilePath: e.extractFileNameFromFilePath,
                renameProperty: g.renameProperty,
                parseQueryArguments: e.parseQueryArguments,
                toFixedLength: e.toFixedLength,
                moveElToFront: m.moveElToFront,
                toggleElements: m.toggleElements,
                scrollToElement: m.scrollToElement,
                pruneChildElements: m.pruneChildElements,
                addImageStyleDimensions: m.addImageStyleDimensions,
                bindEventAndSuppressKey: m.bindEventAndSuppressKey,
                addImageStyleCode: p.addStyleCode,
                clearImageStyleCode: p.clearStyleCode,
                keyCodeIsNumber: d.isNumber,
                keyCodeIsArrowKey: d.isArrowKey
            }
        });
        g.when("A", "gc-util").register("gc-validations", function(a, k) {
            function t(c, b) {
                return a.contains(c, b) }

            function c(a) {
                return new RegExp("^" + a + "$", "i") }
            var f = c("[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+(\\.[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+)*"),
                e = c("(([a-z0-9\\-]+\\.)+([a-z]{2,63}))"),
                g = c("[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+(\\.[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+)*@(([a-z0-9\\-]+\\.)+([a-z]{2,63}))"),
                p = c("[\\s,]*[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+(\\.[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+)*@(([a-z0-9\\-]+\\.)+([a-z]{2,63}))((\\s*,\\s*)+[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+(\\.[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+)*@(([a-z0-9\\-]+\\.)+([a-z]{2,63})))*[\\s,]*"),
                m = c("([2-9][0-8][0-9])[-. ]?([2-9][0-9]{2})[-. ]?([0-9]{4})");
            return {
                notNull: function(a, b) {
                    return null !== a && a !== A },
                notEmpty: function(a, b) {
                    return 0 < ("" + a).length },
                lengthAtMost: function(a, b) {
                    return ("" + a).length <= b },
                lengthAtLeast: function(a, b) {
                    return ("" + a).length >= b },
                linesAtMost: function(c, b) {
                    for (var e = c.split("\n"), f = e.length, q = a.state("gc-validator-fields")["AmazonDownloadLineItem.message"][1].constraint, n = 0; n < e.length; n++) f += Math.max(Math.ceil(e[n].length / q), 1) - 1;
                    return f <= b },
                linesLengthAtMost: function(a,
                    b) {
                    return !0 },
                atLeast: function(a, b) {
                    return a >= b },
                atMost: function(a, b) {
                    return a <= b },
                equal: function(a, b) {
                    return a === b },
                notEqual: function(a, b) {
                    return a !== b },
                contains: t,
                containsOne: function(a, b) {
                    return 2 === ("" + a).split(b).length },
                excludes: function(a, b) {
                    return !t(a, b) },
                isNumeric: function(a, b) {
                    return !isNaN(a) },
                isInteger: function(a, b) {
                    return !isNaN(a) && 0 === Number(a) % 1 },
                isBoolean: function(a, b) {
                    return "boolean" === typeof a || "string" === typeof a && ("true" === a || "false" === a) },
                isOneEmail: function(a, b) {
                    return 1 === ("" +
                        a).split(/[\s,;]+/).length
                },
                isPositive: function(a, b) {
                    return 0 < a },
                hasEmailLocal: function(a, b) {
                    var c = ("" + a).split("@");
                    return 1 > c.length ? !1 : f.test(c[0]) },
                hasEmailDomain: function(a, b) {
                    var c = ("" + a).split("@");
                    return 2 > c.length ? !1 : e.test(c[1]) },
                isValidEmail: function(a, b) {
                    return g.test("" + a) },
                isCommaSeparatedEmailList: function(a, b) {
                    return p.test("" + a) },
                dateAtLeast: function(a, b) {
                    return a && b && a.getTime() >= b.getTime() },
                dateAtMost: function(a, b) {
                    return a && b && a.getTime() <= b.getTime() },
                isValidPhoneNumber: function(a,
                    b) {
                    return m.test("" + a) }
            }
        });
        g.when("A", "gc-util", "gc-formatter", "gc-string", "gc-validations").register("gc-validator", function(a, k, t, c, f) {
            function e(b) {
                var c = a.state("gc-validator-fields");
                c.hasOwnProperty(b) || g.error("No validator field exists with the name: " + b, "gc-validator", "getFieldValidations");
                return c[b] }

            function r(b) {
                switch (b) {
                    case "DateToday":
                        return b = new Date, b = new Date(b.getFullYear(), b.getMonth(), b.getDate());
                    case "DateNextYear":
                        return b = new Date, b = new Date(b.getFullYear() +
                            1, b.getMonth(), b.getDate())
                }
            }

            function p(b) {
                return a.contains(b, "dynamic:") ? (b = b.split(":")[1], r(b)) : k.interpretString(b) }

            function m(b) {
                var a = [];
                y.each(K, function(c, d) {
                    if (b.is(c)) return a = d, !1 });
                return a }

            function d(b) {
                var a = {};
                y.each(F, function(c, d) { b.is(c) && y.extend(a, d) });
                return a }

            function b(b, a) {
                var c = b.parent("div.a-input-text-wrapper");
                (c.length ? c : b).toggleClass("a-form-error", !a) }

            function l(d, h, e, q, f, n) {
                var l = y.extend({
                        formatter: A,
                        field: A,
                        optional: !1,
                        events: "change",
                        formatEvents: A,
                        addClass: !0,
                        listField: !1
                    }, h),
                    x = "*" !== e,
                    m = l.formatEvents || l.events;
                if ("undefined" === typeof e || !x || a.contains(l.events, e)) {
                    "string" !== typeof l.field && g.error("Field is required for validation", "gc-validator", "validateElement");
                    h = d.val();
                    var r = l.field,
                        p = l.optional,
                        E = l.addClass,
                        w = l.formatter;
                    e = !x || a.contains(m, e);
                    l = l.listField;
                    d.is(":checkbox") && (h = d.is(":checked"));
                    if ((m = "" === a.trim("" + h)) && x || m && p && !q || f) return a.trigger("gc:validate:ignored", d, r), a.trigger("gc:validate:" + r + ":ignored", d, n), E && b(d, !0), -1;
                    if ("string" ===
                        typeof w) { q = t.getFormatter(w);
                        try { e && d.val(q.format(h)), h = q.interpret(h) } catch (G) {
                            return E = c.getString(G), a.trigger("gc:validate:failure", d, r, h, [E]), a.trigger("gc:validate:" + r + ":failure", d, h, [E], n), -1 } } else h = k.interpretString(h);
                    l && (h = h.split(/[ ,\n;]+/));
                    n = D(d, r, h, n, l);
                    E && b(d, n);
                    return n ? 1 : 0
                }
            }

            function D(b, c, d, h, n) {
                a.trigger("gc:validate:before", b, c, d);
                a.trigger("gc:validate:" + c + ":before", b, d);
                var f = [],
                    l = e(c);
                if (w.length && !k.arrayIntersection(l[0].validationGroups, w).length) return a.trigger("gc:validate:skipped",
                    b, c, d), a.trigger("gc:validate:" + c + ":skipped", b, d, h), !0;
                if (n)
                    for (n = 0; n < d.length; n++) q(d[n], l, f);
                else q(d, l, f);
                (l = 0 === f.length) ? (a.trigger("gc:validate:success", b, c, d), a.trigger("gc:validate:" + c + ":success", b, d, h)) : (a.trigger("gc:validate:failure", b, c, d, f), a.trigger("gc:validate:" + c + ":failure", b, d, f, h));
                return l
            }

            function q(b, a, d) {
                for (var h = 0; h < a.length; h++) {
                    var e = a[h],
                        q = b,
                        n = d,
                        l, k = e.validation;
                    f.hasOwnProperty(k) || g.error("No validation method exists with the name: " + k, "gc-validator", "getValidationMethod");
                    l = f[k];
                    k = p(e.constraint);
                    l.call({}, q, k) || (e = c.getString(e.errorId), e = t.interpolateMessage(e, k), n.push(e))
                }
            }

            function n(b, a) {
                return h(b, a) }

            function h(b, c, d, h) {
                var e = b.attr("data-gc-validate");
                if ("string" === typeof e) return e = a.parseJSON(e), l(b, e, "*", !!c, !!d, h) }

            function x(b) {
                var a = !0;
                b.find("[data-gc-validate]").each(function() { a = 0 !== n(y(this)) && a });
                return a }

            function E(b, c) {
                var d = {};
                b.find("[data-gc-validate]").each(function() {
                    var b = y(this),
                        c;
                    c = b.attr("data-gc-validate");
                    "string" !== typeof c ? c = null : (c =
                        a.parseJSON(c), c = c.field);
                    d.hasOwnProperty(c) || (d[c] = []);
                    d[c].push(b)
                });
                var e = !0,
                    q = a.parseJSON(b.attr("data-gc-validate-form") || "{}").requireOne || [];
                y.each(d, function(a, d) {
                    var n = -1 !== y.inArray(a, q),
                        f;
                    a: { f = m(b);
                        for (var l = 0; l < f.length; l++)
                            if (-1 !== a.indexOf(f[l])) { f = !0;
                                break a }
                        f = !1 }
                    for (var l = !1, k = d.length - 1; 0 <= k; k--) {
                        var x = d[k];
                        n ? (x = h(x, 0 === k && !l, f, c), l = l || 1 === x, e = 0 !== x && e) : e = 0 !== h(x, !1, f, c) && e } });
                return e
            }

            function G(b, a) {
                return b.is("form") ? E(b, a) : x(b) }

            function u(b) {
                b = d(b);
                var a = !0;
                y.each(b, function(b,
                    c) {
                    var d = c.call({});
                    a = D(null, b, d) && a });
                return a
            }

            function H(b) {
                return function() {
                    if (I) return b.apply(null, arguments);
                    b.apply(null, arguments) } }
            var y = a.$,
                K = {},
                F = {},
                w = [],
                v = !1,
                I = !1,
                B = !0;
            a.declarative("gc-validate-form", "submit", function(b) {
                var c = b.$target,
                    d = b.$event,
                    c = c.is("form") ? c : c.closest("form"),
                    h = !0;
                v && d.preventDefault();
                if (B) {
                    c.removeAttr("gc-invalid");
                    a.trigger("gc:validate:form:before", c);
                    try { h = (h = G(c) && h) && u(c) } catch (e) {
                        throw d.preventDefault(), e; }
                    h ? a.trigger("gc:validate:form:success", c, d) :
                        (c.attr("gc-invalid", ""), d.preventDefault(), a.trigger("gc:validate:form:failure", c));
                    a.trigger("gc:validate:form:after", c)
                } else a.trigger("gc:validate:form:disabled", b)
            });
            a.on("gc:validate:form:upload", function(b) {
                var c = !1;
                b.removeAttr("gc-invalid");
                a.trigger("gc:validate:form:before", b);
                try { c = (c = G(b, !0)) && u(b) } catch (d) {
                    throw d; }
                c ? a.trigger("gc:validate:form:success", b) : (b.attr("gc-invalid", ""), a.trigger("gc:validate:form:failure", b)) });
            a.declarative("gc-validate", "click change keydown keyup keypress",
                function(b) { "object" === typeof b.data && l(b.$target, b.data, b.type, !1, !1) });
            return {
                validate: H(n),
                validateWithin: H(G),
                validateVirtualField: function(b, a) { d(b)[a] || g.error("No virtual field exists: " + a, "gc-validator", "validateVirtualField");
                    var c = d(b)[a].call({});
                    D(null, a, c) },
                validateVirtualFields: H(u),
                addVirtualField: function(b, a, c) { F.hasOwnProperty(b) || (F[b] = {});
                    F[b][a] = c },
                setIgnoredFields: function(b, a) { "string" === typeof a && (a = [a]);
                    K[b] = a },
                getValidationConstraint: function(b, a) {
                    for (var c = e(b), d = 0; d < c.length; d++) {
                        var h =
                            c[d];
                        if (h.validation === a) return p(h.constraint)
                    }
                    g.error("Field " + b + " has no " + a + " validation", "gc-validator", "getValidationConstraint")
                },
                getDynamicConstraint: r,
                setEnabled: function(b) { "boolean" === typeof b && (B = b) },
                setValidationGroups: function(b) { w = b },
                clearValidationGroups: function() { w = [] },
                addValidationGroup: function(b) {-1 === y.inArray(b, w) && w.push(b) },
                removeValidationGroup: function(b) { b = y.inArray(b, w); - 1 < b && w.splice(b, 1) },
                getValidationGroups: function() {
                    return w },
                getAlwaysPreventDefault: function() {
                    return v },
                setAlwaysPreventDefault: function(b) { v = b },
                getAlwaysReturnResult: function() {
                    return I },
                setAlwaysReturnResult: function(b) { I = b }
            }
        });
        g.register("gc-promise", function() {
            return function(a) {
                function k() { g ? setTimeout(function() { f(p) }, 0) : m && "function" === typeof e && setTimeout(function() { e(d) }, 0) }

                function t(b) { g || m || (g = !0, p = b, k()) }

                function c(b) { g || m || (m = !0, d = b, k()) }
                var f, e, g = !1,
                    p, m = !1,
                    d;
                setTimeout(function() {
                    try { a(t, c) } catch (b) {
                        if ("function" === typeof c) return c(b) } }, 0);
                return {
                    then: function(b, a) {
                        if ("function" !==
                            typeof b) throw Error("callback is expected to be a function");
                        f = b;
                        e = a;
                        k()
                    }
                }
            }
        })
    })
})(function() {
    var g = window.AmazonUIPageJS || window.P,
        u = g._namespace || g.attributeErrors;
    return u ? u("GCUIBaseJS") : g }(), window);
(function(g, u, A) {
    g.execute(function() {
        g.when("A").execute(function(a) {
            var k = a.$("#giftcardcustomtwister_feature_div");
            a = a.$("#gc-order-form-custom-amount");
            k.length && a.length && g.declare("gc-execute") });
        g.when("A", "gc-execute", "vgc-validation", "gc-validation-utils", "ready").execute(function(a, k, t, c) {
            function f() { m.$customAmount.removeClass("gc-amount-padding");
                m.$customAmount.attr("placeholder", d);
                m.$currencySymbol.removeClass("gc-currency-symbol");
                m.$currencySymbol.addClass("aok-hidden") }
            var e = a.$,
                g, p = c.KEYDOWN_TIMEOUT,
                m = { $amountSwatchesWrapper: e("#gc-amount-picker"), $customAmount: e("#gc-order-form-custom-amount"), $amountField: e("#gc-order-form-amount"), $currencySymbol: e("#gc-custom-amout-currency-symbol") },
                d = m.$customAmount.attr("placeholder");
            m.$customAmount.focus(function() {
                m.$amountSwatchesWrapper.find(".a-button-selected").removeClass("a-button-selected a-button-focus");
                m.$customAmount.addClass("gc-amount-padding");
                m.$customAmount.removeAttr("placeholder");
                m.$currencySymbol.removeClass("aok-hidden");
                m.$currencySymbol.addClass("gc-currency-symbol")
            });
            m.$customAmount.keydown(function(b) {
                var a = this;
                clearTimeout(g);
                g = setTimeout(function() {
                    var b = e(a).val(),
                        b = t.parseCustomInputAmount(b); "" !== b && m.$amountField.val(b).trigger("change") }, p) });
            m.$customAmount.blur(function() {
                var b = e(this).val(),
                    b = t.parseCustomInputAmount(b); "" === b && (f(), m.$amountField.val(b).trigger("change")) });
            a.declarative("gc-select-amount-swatch", "click", function(b) { m.$amountField.val(b.$target.val()).trigger("change");
                f();
                m.$customAmount.val("") })
        });
        g.when("A", "gc-execute", "mobile-twister-data", "twister-history").register("gc-twister-core", function(a, k, t, c) {
            function f(b, a) { p = [];
                var c = { dimKey: "design_name", val: a };
                p.push({ dimKey: "denomination", val: b });
                p.push(c) }

            function e(b, c, d, e, f) { g();
                b = "/gp/twister/update?asin=" + b + (c ? c : "") + (d ? e ? "&sd=" + e : "" : "&vs=1") + (D ? "&twsid=" + D : "");
                (c = n.getDeviceType()) && (b = b + "&deviceType=" + c);
                a.ajax(b, { success: function() { a.trigger("image-block-refresh");
                        q.hide() }, timeout: 2E4 }) }

            function g() {
                q.show();
                a.delay(function() {
                    q.offset({
                        top: u.scrollY,
                        left: 0
                    }).css("height", u.innerHeight)
                })
            }
            k = a.$;
            var p, m, d, b, l, D, q = k('<div id="wow-twister-loading"><div id="wow-twister-spinner"></div></div>');
            q.hide();
            k("body").append(q);
            q.bind("touchmove touchstart touchend", function(b) { b.preventDefault() });
            var n = function() {
                var b;
                return { getDeviceType: function() {
                        if (b) return b;
                        var c = a.state("detail-page-device-type"); "undefined" !== typeof c && (b = c.deviceType);
                        return b } } }();
            a.on.ready(function() {
                var c = a.state("mobile-twister");
                c && (m = [], m.push({
                    dimKey: "denomination",
                    dimOrder: 0,
                    isRequired: !0
                }), m.push({ dimKey: "design_name", dimOrder: 1, isRequired: !0 }), f(c.selectedDimensions.denomination, c.selectedDimensions.design_name), b = a.state("mobile-twister-dims-to-asin-list"), d = a.state("mobile-twister-dim-val-list"), l = c.ajaxUrlParams, D = c.pageLoadRequestId)
            });
            return {
                twister: {
                    dimensionChanged: function(h) {
                        var q = b[h.newDimensionCombo],
                            n = h.hasOwnProperty("amount") ? h.amount : "";
                        h = h.newDimensionCombo;
                        var k = l,
                            t = h.split(":")[0],
                            g = d.denomination[t];
                        "0" === t && "0" === g && (k = k + "&gpo=" + n);
                        c.saveTwisterState(q,
                            h);
                        n = {};
                        n.currentAsin = q;
                        a.state("twister-selection-state", n);
                        f(h.split(":")[0], h.split(":")[1]);
                        e(q, k, 0)
                    },
                    getCurrentDimComboId: function() {
                        return 2 === p.length ? p[0].val + "_" + p[1].val : "" },
                    tvm: { getDimensionInfo: function() {
                            return m }, getDimensionValues: function(b) {
                            return d[b] }, getAsinFromDimensionCombo: function(a) {
                            if (2 === a.length && (a = a[0] + ":" + a[1], b.hasOwnProperty(a))) return b[a] }, exists: function(a) {
                            return 2 === a.length ? b.hasOwnProperty(a[0].val + ":" + a[1].val) : !1 } }
                }
            }
        });
        g.when("A", "gc-execute",
            "gc-twister-core", "a-popover-base").execute(function(a, k, t, c) {
            function f(b, a) {
                var c = b + ":" + a;
                if (p.exists([{ dimKey: "denomination", val: b }, { dimKey: "design_name", val: a }])) return c;
                if (b) return "0:" + a }

            function e(b, a) {
                var c = {};
                c.newDimensionCombo = b; "undefined" !== typeof a && "" !== a && (c.amount = a);
                return c }
            var g = a.$,
                p = t.twister.tvm,
                m = t.twister,
                d = g("#gc-initial-vgc-amount").val();
            a.on("gc:validate:amount:success", function(b) {
                var a = m.getCurrentDimComboId();
                if (typeof a !== A && a.length) {
                    var a = a.split("_")[1],
                        c;
                    c = p.getDimensionValues("denomination");
                    c = g.inArray(b.toString(), c);
                    a = f(c, a);
                    d = b;
                    m.dimensionChanged(e(a, d))
                }
            });
            a.on("a:popover:afterUpdatePosition", function(b) {
                b = g('span[data-action="mobile-twister"]');
                if (0 < b.length) {
                    a.declarative.remove(b, "mobile-twister");
                    var c = m.getCurrentDimComboId();
                    g.each(b, function(b, d) {
                        var e = g(d),
                            h = e.find('div[id^="dimSum_"]'),
                            f = h.attr("id"),
                            k;
                        "undefined" !== typeof f && (k = f.split("_"));
                        var f = p.getAsinFromDimensionCombo(c.split("_")),
                            t = e.find("a.a-touch-select");
                        "undefined" !== typeof k && k[1] === f ? t.addClass("a-active") :
                            t.removeClass("a-active");
                        k = e.attr("data-mobile-twister");
                        e.removeAttr("data-mobile-twister");
                        e.removeAttr("data-action");
                        a.declarative.create(e, "gc-mobile-twister", k);
                        e.find(".a-color-price").remove();
                        h.find("br").remove();
                        e.find(".a-color-secondary").html("In Stock")
                    })
                }
            });
            a.declarative("gc-mobile-twister", "click", function(b) {
                var a = JSON.parse(b.data);
                b = b.$target.closest(".a-touch-link");
                g("a.a-active", b.closest("ul")).removeClass("a-active");
                b.addClass("a-active");
                b = a.value;
                var k = m.getCurrentDimComboId();
                typeof k !== A && k.length && (k = k.split("_")[0], b = f(k, b), m.dimensionChanged(e(b, d)));
                b = g("#" + a.dimension + "-button");
                var k = g(".dimension-label", b),
                    q = g(".dimension-thumbnail", b);
                b.removeClass("twister-required-dim-alert");
                k.html(a.label);
                q.attr("src", a.thumbnail);
                q.show();
                a = c.get("mobile-twister_design_name");
                c.hide(a.id)
            })
        });
        g.when("A", "gc-execute", "gc-util", "gc-validation-utils", "gc-string", "a-popover", "ready").register("vgc-validation", function(a, k, g, c, f, e) {
            function r(b, a) {
                l.$amountWrapper.find(".gc-inline-error").remove();
                c.removeInputErrorHighlighting()
            }

            function p() {
                var a = d("#buybox");
                a.addClass("gc-buybox");
                a.append('<div id="gc-disable-atc"></div>');
                a.delegate("#gc-disable-atc", "click mouseover", function(a) {
                    a.preventDefault();
                    c.showPopover ? (a = d("#" + c.disableBuyBoxOptions.triggerPopoverOnId), b = e.create(a, { inlineContent: 'Select or input a valid <strong style="color:#e8281e">Amount</strong> to add to Shopping Cart', width: 200, position: c.disableBuyBoxOptions.triggerPosition, closeButton: !1 })) : (g.scrollToElement(l.$customAmount, !0, 50), l.$customAmount.trigger("click"))
                })
            }

            function m(b) {
                var a = (b + "").split("."),
                    c = a[0] || "",
                    a = a[1] || "";
                2 < a.length && (b = c + "." + a.substring(0, 2));
                return b }
            var d = a.$,
                b, l = { $customAmount: d("#gc-order-form-custom-amount"), $amountField: d("#gc-order-form-amount"), $amountWrapper: d("#gc-amount-wrapper"), $amountDimensionText: d("#gc-amount-dimension") },
                D = d("#gc-tmpl-inline-error").html();
            d("#gc-tmpl-atc-error").html();
            a.on("gc:validate:success", function(c, f, h) {
                if (null !== c) {
                    var k = l.$customAmount.val(),
                        k = m(k);
                    "" !==
                    l.$customAmount.val() && l.$customAmount.val(k);
                    "AmazonRetailLineItem.amount" === f && a.trigger("gc:validate:amount:success", h);
                    r(c, f);
                    d("#buybox").removeClass("gc-buybox");
                    d("#gc-disable-atc").remove();
                    e.remove(b)
                }
            });
            a.on("gc:validate:failure", function(b, a, h, e) { null !== b && (r(b, a), b = d(g.parseTemplate(D, { message: e[0] })), a && b.attr("gc-field", a), c.addInputErrorHighlighting(), l.$amountWrapper.append(b), l.$amountDimensionText.text(""), p()) });
            return { parseCustomInputAmount: m }
        });
        g.when("A", "gc-execute",
            "ready").register("gc-validation-utils", function(a, k) {
            var g = a.$,
                c = g("#gc-order-form-custom-amount").parent();
            return { KEYDOWN_TIMEOUT: 750, showPopover: !1, addInputErrorHighlighting: function() { c.addClass("gc-input-error") }, removeInputErrorHighlighting: function() { c.removeClass("gc-input-error") } } });
        g.when("A", "gc-execute").execute(function(a) { a = a.$;
            a("#twister").delegate("input", "keyup keypress", function(a) {
                if (13 === a.keyCode) return a.preventDefault(), !1 }) })
    })
})(function() {
    var g = window.AmazonUIPageJS ||
        window.P,
        u = g._namespace || g.attributeErrors;
    return u ? u("PhysicalGiftCardsDetailPageAssets") : g
}(), window);
/* ******** */
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        q = l._namespace || l.attributeErrors,
        f = q ? q("AmazonDevicesDetailPageUtilityAssets") : l;
    f.guardFatal ? f.guardFatal(g)(f, window) : f.execute(function() { g(f, window) }) })(function(g, l, q) {
    g.when("A").execute(function(f) { f.declarative("popup-window", "click", function(c) {
            var b = c.data.windowName || "popupWindow",
                a = c.data.windowOptions || "width=600,height=400,scrollbars=yes";
            c.$event.preventDefault();
            l.open(c.$target.prop("href"), b, a) }) });
    g.when("A").register("ods-element-factory",
        function(f) {
            var c = f.$;
            return { getHiddenInput: function(b, a) {
                    return c("<input>").prop("name", b).prop("type", "hidden").prop("value", a) } } });
    g.register("ods-url-utils", function() {
        return { getUrlParam: function(f) {
                for (var c = null, b = l.location.search.substr(1).split("&"), a = 0; a < b.length; a++) {
                    var e = b[a].split("=");
                    e[0] === f && (c = e[1]) }
                return c } } });
    g.when("A").register("csmCounter", function(f) {
        var c = f.$;
        return {
            register: function(b, a, e) { b && a && e && c(b).bind(a, c.proxy(this.increment, this, e)) },
            increment: function(b) { b && l.ue.count(b, (l.ue.count(b) || 0) + 1) },
            update: function(b, a) { b && a && l.ue.count(b, a) }
        }
    });
    g.register("function-utils", function() {
        return {
            throttle: function(f, c, b) {
                var a, e, d, h = null,
                    k = 0;
                b || (b = {});
                var m = function() { k = !1 === b.leading ? 0 : (new Date).getTime();
                    h = null;
                    d = f.apply(a, e);
                    h || (a = e = null) };
                return function() {
                    var g = (new Date).getTime();
                    k || !1 !== b.leading || (k = g);
                    var n = c - (g - k);
                    a = this;
                    e = arguments;
                    0 >= n || n > c ? (h && (clearTimeout(h), h = null), k = g, d = f.apply(a, e), h || (a = e = null)) : h || !1 ===
                        b.trailing || (h = setTimeout(m, n));
                    return d
                }
            },
            debounce: function(f, c, b) {
                var a;
                return function() {
                    var e = this,
                        d = arguments;
                    clearTimeout(a);
                    a = setTimeout(function() { a = null;
                        b || f.apply(e, d) }, c);
                    b && !a && f.apply(e, d) } },
            memoize: function(f, c) {
                var b = {};
                return function() {
                    for (var a = 0 < arguments.length ? "" : "%NO_ARGUMENTS%", e = 0; e < arguments.length; e++) a && (a += "-"), a += "object" === typeof arguments[e] ? JSON.stringify(arguments[e]) : arguments[e];
                    b.hasOwnProperty(a) || (b[a] = c.apply(f, arguments));
                    return b[a] } }
        }
    });
    g.when("A").register("odsRefTagUtils",
        function(f) {
            var c = f.$;
            return { send: function(b, a) {
                    if (!b) throw Error("refTag is not defined");
                    c.post((a || "/gp/digital/fiona/ajax/log.html") + "/ref=" + b) } } });
    g.when("A").register("ods-image-utilities", function(f) {
        function c(a, b) {
            var d = new Image;
            d.onload = function() { b.resolve(a) };
            d.onerror = function() { b.reject(a) };
            d.src = a }
        var b = f.$;
        return {
            preloadImage: function(a, e) {
                var d = b.Deferred(),
                    h;
                c(a, d);
                e && f.capabilities.hires && (h = b.Deferred(), c(e, h));
                return { image: d.promise(), hiResImage: h ? h.promise() : q } },
            preloadImages: function(a) {
                for (var e = [], d = 0; d < a.length; d++) {
                    var f = b.Deferred();
                    c(a[d], f);
                    e.push(f.promise()) }
                return e }
        }
    });
    g.when("A").register("ODSEventDispatcher", function(f) {
        return f.createClass({
            init: function() { this._callbacks = {} },
            registerCallback: function(c, b) {
                var a = this._callbacks[c] || []; - 1 === a.indexOf(b) && a.push(b);
                this._callbacks[c] = a },
            unregisterCallback: function(c, b) {
                var a = this._callbacks[c];
                if (a) {
                    var e = a.indexOf(b); - 1 < e && a.splice(e, 1) } },
            dispatch: function(c) {
                var b = this._callbacks[c];
                if (b)
                    for (var a = 0; a < b.length; a++) b[a].apply(this, Array.prototype.slice.call(arguments, 1))
            }
        })
    });
    g.when("A", "jQuery").register("BuyboxManagerFactory", function(f, c) {
        function b(a, b, h, k) {
            var m = f.copy(h);
            c.each(m, function(f) {-1 === ["initialize", "reset"].indexOf(f) && (a[f] = k ? c.proxy(b, null, f) : c.proxy(h, f)) }) }

        function a(a, d, f, k) {
            var m = function(r) {
                    if (!n && (k ? (k.initialize(), b(g, m, k, !1)) : l = new f, n = new d(l), c.each(a, function(a, b) { g[b] = c.proxy(n, b) }), "string" === typeof r)) return g[r].apply(n, Array.prototype.slice.call(arguments,
                        1))
                },
                g = { reset: function() { n ? (k && k.reset(), l && l.reset(), n.reset()) : m() }, initialize: m },
                n, l;
            k && b(g, m, k, !0);
            c.each(a, function(a, b) { g[b] = c.proxy(m, null, b) });
            return g
        }
        return { create: function(b, d, c) {
                return a(b, d, c) }, extend: function(b, d, c) {
                return a(b, d, null, c) } }
    });
    g.when("jQuery", "BuyboxManagerViewHelper").register("BuyboxManagerFormHelper", function(f, c) {
        function b(a, b) {
            return '<input type="hidden" name="' + a + '" value="' + b + '" />' }

        function a(a) {
            return 0 <= a.attr("id").search("buyNow") }

        function e(a) {
            return 0 <=
                a.attr("id").search("addToCart") || 0 <= a.attr("id").search("mobile-installments")
        }

        function d(a, b) {
            return f.map(a, function(a) {
                return f(a).attr(b) }) }
        'input[name="%NAME%"]'.replace("%NAME%", "verificationSessionID");
        var h = 'input[name="%NAME%"]'.replace("%NAME%", "a"),
            k = 'input[name="%NAME%"]'.replace("%NAME%", "oid"),
            m = 'input[name="%NAME%"]'.replace("%NAME%", "quantity"),
            g = 'input[name="%NAME%"]'.replace("%NAME%", "asin"),
            n = 'input[name="%NAME%"]'.replace("%NAME%", "offeringID"),
            l = 'input[name="%NAME%"]'.replace("%NAME%",
                "quantity"),
            r = [h, k, m].concat([g, n, l]).join(", ");
        return {
            removeAllFormFields: function(a) { a.find(r).remove() },
            getHiddenInputHTML: b,
            isFormBuyNow: a,
            isFormAddToCart: e,
            createMobileAppFormInputs: function(a) {
                var d = a[0],
                    e, c, f;
                d && (e = d.asin, c = d.offerId, f = d.quantity);
                for (d = 1; d < a.length; d++) e += "|" + a[d].asin, c += "|" + a[d].offerId, f += "|" + a[d].quantity;
                return a = "" + (b("asin", e) + b("offeringID", c) + b("quantity", f)) },
            getViewData: function(b) {
                if (a(b)) {
                    var f = d(b.find(g), "value")[0].split("|"),
                        r = d(b.find(n), "value")[0].split("|");
                    b = d(b.find(l), "value")[0].split("|");
                    return c.buildRawData(f, r, b)
                }
                if (e(b)) return f = d(b.find(h), "value"), r = d(b.find(k), "value"), b = d(b.find(m), "value"), c.buildRawData(f, r, b);
                throw Error("Add to order button not handled in buyBoxManagerFormHelper");
            }
        }
    });
    g.when("A", "jQuery", "BuyboxManagerViewBase", "BuyboxManagerViewHelper", "BuyboxManagerMashHelper", "BuyboxManagerFormHelper").register("BuyboxManagerView", function(f, c, b, a, e, d) {
        return b.extend({
            init: function() { this._super() },
            moveFieldsToContainer: function(a,
                b) { a.find(this.getHiddenSelector("a")).appendTo(b);
                a.find(this.getHiddenSelector("oid")).appendTo(b) },
            buildHTML: function(a) {
                for (var b = "", d = 0; d < a.quantity; d++) b += this.getHiddenInputHTML("a", a.asin) + this.getHiddenInputHTML("oid", a.offerId);
                return b },
            getDataFromDOM: function() {
                var b = this.$atcBtns.first(),
                    c = a.getAtcBtnViewType(b),
                    f = a.ViewType;
                switch (c) {
                    case f.FORM:
                        return b = b.closest("form"), d.getViewData(b);
                    case f.AW_MASH:
                        return e.getViewData(e.getDeclarativeDataFromBtn(b));
                    default:
                        throw Error("View type was not determined as either FORM or MASH Declarative");
                }
            },
            render: function(b) {
                var f = this;
                c.each(this.$atcBtns, function(m, g) {
                    var n = c(g),
                        l = a.getAtcBtnViewType(n),
                        r = a.ViewType;
                    switch (l) {
                        case r.FORM:
                            l = n.closest("form");
                            d.isFormBuyNow(l) ? (n = d.createMobileAppFormInputs(b), d.removeAllFormFields(l), l.append(n)) : d.isFormAddToCart(l) && f.appendFormData(b);
                            break;
                        case r.AW_MASH:
                            n = e.getDeclarativeDataFromBtn(n);
                            e.isAddToCart(n) && c.extend(n.inputs, e.createInputs(b));
                            break;
                        default:
                            throw Error("View type was not determined as either FORM or MASH Declarative"); } }) }
        })
    });
    g.when("A", "jQuery").register("BuyboxManagerViewBase", function(f, c) {
        return f.createClass({
            init: function() { this.reset() },
            registerAtcBtn: function(b) { this.$atcBtns = this.$atcBtns.add(b) },
            registerForm: function(b) { b = "string" === typeof b ? c(b) : b;
                if (b instanceof c && 0 < b.length && 0 === this.$forms.has(b).length) { this.$forms = this.$forms.add(b);
                    var a = this.createFieldsContainer(b);
                    this.moveFieldsToContainer(b, a) } },
            createFieldsContainer: function(b) {
                var a = b.find(".buyboxManagerHiddenFieldsContainer");
                0 ===
                    a.length && (a = c('<div class="buyboxManagerHiddenFieldsContainer">'), b.append(a));
                0 === this.$fieldsContainers.has(a).length && (this.$fieldsContainers = this.$fieldsContainers.add(a));
                return a.first()
            },
            moveFieldsToContainer: function(b, a) {
                throw Error("The view must override the moveFieldsToContainer function"); },
            getHiddenSelector: function(b, a) {
                var e = 'input[type="hidden"]'; "string" === typeof b && (e += '[name="' + b + '"]'); "string" === typeof a && (e += '[value="' + a + '"]');
                return e },
            getHiddenInputHTML: function(b, a) {
                return '<input type="hidden" name="' +
                    b + '" value="' + a + '" />'
            },
            render: function(b) { this.appendFormData(b) },
            appendFormData: function(b, a) { a = a || 1;
                var e = "";
                if (c.isArray(b))
                    for (var d = 0; d < b.length; d++) e += this.buildHTML(b[d], a + d);
                this.$fieldsContainers.html(e) },
            reset: function() { this.$forms = c();
                this.$fieldsContainers = c();
                this.registerForm(c("#addToCart"));
                this.$atcBtns = c();
                this.registerAtcBtn(c("#add-to-cart-button"));
                this.registerAtcBtn(c("#bb_to_cfg_button"));
                this.registerAtcBtn(c("#buy-now-button")) }
        })
    });
    g.when("jQuery").register("BuyboxManagerViewHelper",
        function(f) {
            var c = { FORM: "form", AW_MASH: "aw_mash", UNKNOWN: q };
            return { ViewType: c, getAtcBtnViewType: function(b) {
                    var a = c.UNKNOWN;
                    b instanceof f || (b = f(b));
                    return 0 < b.closest('.a-declarative[data-action="aw-mash"]').length ? c.AW_MASH : 0 < b.closest("form").length ? c.FORM : a }, buildRawData: function(b, a, e) {
                    var d = {},
                        c = [];
                    f.each(b, function(b, f) {
                        var g = a.length > b ? a[b] : "",
                            n = e.length > b ? parseInt(e[b], 10) : 1,
                            l = f + ":" + g;
                        d.hasOwnProperty(l) ? c[d[l]].quantity += n : d[l] = c.push({ asin: f, offerId: g, quantity: n }) - 1 });
                    return c } } });
    g.when("A", "jQuery", "ODSEventDispatcher", "BuyboxManagerViewBase").register("BuyboxManagerController", function(f, c, b, a) {
        return f.createClass({
            init: function(e) {
                if (!(e instanceof a)) throw new TypeError("The view must inherits from BuyboxManagerViewBase");
                this._view = e;
                this._eventDispatcher = new b;
                this._enableEvents(!0);
                this.reset();
                var d = this;
                f.on("a:dropdown:mobileQuantityDropDown:select", function(a) {
                    var b = d._asinsData && d._asinsData.length && d._asinsData[0];
                    b && d.setPageAsin(b.asin, b.offerId, parseInt(a.value,
                        10))
                })
            },
            _enableEvents: function(a) { c.each("UpsellAsinAdded UpsellAsinRemoved UpsellAsinChanged PageAsinAdded PageAsinReplaced PageAsinChanged".split(" "), c.proxy(function(b, f) { a ? (this["register" + f] = c.proxy(this._eventDispatcher, "registerCallback", f), this["unregister" + f] = c.proxy(this._eventDispatcher, "unregisterCallback", f)) : (delete this["register" + f], delete this["unregister" + f]) }, this)) },
            _parseInitialAsins: function() {
                for (var a = this._view.getDataFromDOM(), b = 0; b < a.length; b++) this[0 === b ? "setPageAsin" :
                    "setUpsellAsin"](a[b].asin, a[b].offerId, a[b].quantity)
            },
            _dispatchSetUpsellAsinEvents: function(a, b, c, f) { f !== c && (0 === f && 0 < c ? this._eventDispatcher.dispatch("UpsellAsinAdded", a, b, c, f) : 0 === c && 0 < f && this._eventDispatcher.dispatch("UpsellAsinRemoved", a, b, c, f), this._eventDispatcher.dispatch("UpsellAsinChanged", a, b, c, f)) },
            _indexOfAsin: function(a, b) { b = b || "";
                for (var c = 0; c < this._asinsData.length; c++)
                    if (this._asinsData[c].asin === a && this._asinsData[c].offerId === b) return c;
                return -1 },
            setUpsellAsin: function(a, b, c) {
                if ("string" !==
                    typeof a || 0 >= a.length) throw new TypeError("The asin argument is required");
                var f = this._indexOfAsin(a, b),
                    m = 0;
                b = b || "";
                c = "number" === typeof c ? Math.max(0, c) : 1;
                if (0 === f) throw Error("To modify the pageAsin, use setPageAsin() instead.");
                if (0 < f) {
                    var g = this._asinsData[f],
                        m = g.quantity;
                    0 >= c ? this._asinsData.splice(f, 1) : g.quantity = c } else if (0 < c) this._asinsData.push({ asin: a, offerId: b, quantity: c });
                else return !1;
                this.render();
                this._dispatchSetUpsellAsinEvents(a, b, c, m, f);
                return !0
            },
            registerForm: function(a) {
                this._view.registerForm(a);
                this.render()
            },
            registerAtcBtn: function(a) { this._view.registerAtcBtn(a);
                this.render() },
            setPageAsin: function(a, b, c) {
                if ("string" !== typeof a || 0 >= a.length) throw new TypeError("The asin argument is required");
                var f = this._indexOfAsin(a, b),
                    m = 0 < this._asinsData.length ? this._asinsData[0].quantity : 0;
                b = b || "";
                if (0 >= c) throw new TypeError("The quantity of the page asin must be > 0.");
                c = "number" === typeof c ? Math.max(1, c) : 1;
                if (0 === f && c === m) return !1;
                0 < f && this.setUpsellAsin(a, b, 0);
                this._asinsData[0] = {
                    asin: a,
                    offerId: b,
                    quantity: c
                };
                this.render(); - 1 < f ? this._eventDispatcher.dispatch("PageAsinReplaced", a, b, c, m) : this._eventDispatcher.dispatch("PageAsinAdded", a, b, c);
                this._eventDispatcher.dispatch("PageAsinChanged", a, b, c);
                return !0
            },
            addUpsellAsin: function(a, b, c) { c = c || 1;
                for (var f = 0; f < this._asinsData.length; f++) {
                    var m = this._asinsData[f];
                    if (m.asin === a) { this.setUpsellAsin(a, b, m.quantity + c);
                        return } }
                this.setUpsellAsin(a, b, c) },
            render: function() { this._view.render(this._asinsData) },
            getAsins: function() {
                return f.copy(this._asinsData) },
            getUpsellAsins: function() {
                var a = this.getAsins();
                a.splice(0, 1);
                return a },
            getPageAsin: function() {
                return f.copy(this._asinsData[0]) },
            reset: function() { this._asinsData = [];
                this._parseInitialAsins() }
        })
    });
    g.when("BuyboxManagerController", "BuyboxManagerView", "BuyboxManagerFactory", "jQuery").register("BuyboxManager", function(f, c, b, a) {
        return b.create("getAsins getUpsellAsins setUpsellAsin getPageAsin setPageAsin registerUpsellAsinChanged registerUpsellAsinAdded registerUpsellAsinRemoved registerPageAsinChanged registerPageAsinAdded registerPageAsinReplaced unregisterUpsellAsinChanged unregisterUpsellAsinRemoved unregisterUpsellAsinAdded unregisterPageAsinChanged unregisterPageAsinAdded unregisterPageAsinReplaced addUpsellAsin registerForm registerAtcBtn".split(" "),
            f, c)
    });
    g.when("jQuery", "BuyboxManagerViewHelper").register("BuyboxManagerMashHelper", function(f, c) {
        return {
            createInputs: function(b) {
                var a = { a: [], oid: [], quantity: [] };
                f.each(b, function(b, d) { a.a.push(d.asin);
                    a.oid.push(d.offerId);
                    a.quantity.push(d.quantity) });
                a.a = a.a.join("|");
                a.oid = a.oid.join("|");
                a.quantity = a.quantity.join("|");
                return a },
            getViewData: function(b) {
                var a = b.inputs.a.split("|"),
                    e = b.inputs.oid.split("|");
                b = b.inputs.quantity.split("|");
                return c.buildRawData(a, e, b) },
            setDeclarativeMultiple: function(b) {
                b.buttonID =
                    "add-multiple-to-cart"
            },
            getDeclarativeDataFromBtn: function(b) {
                return b.closest('.a-declarative[data-action="aw-mash"]').data("awMash") },
            isAddToCart: function(b) {
                return "add-to-cart" === b.buttonID }
        }
    });
    g.when("ODSBuyboxManagerController", "BuyboxManager", "BuyboxManagerFactory", "A", "jQuery").register("ODSBuyboxManager", function(f, c, b, a, e) {
        return b.extend(["addMetadata", "getMetadata", "getAsins", "getPageAsin", "getUpsellAsins"], f, c) });
    g.when("BuyboxManager", "ODSBuyboxAsinMetadata",
        "A", "jQuery").register("ODSBuyboxManagerController", function(f, c, b, a) {
        return b.createClass({
            init: function() { this.reset() },
            addMetadata: function(a) {
                if (!(a instanceof c)) throw Error("The argument metadata must be an instance of ODSBuyboxAsinMetadata");
                if (!a.isValid()) throw Error("The metadata is NOT valid");
                this._metadatas[a.asin + ":" + a.offerId] = a.clone() },
            getMetadata: function(a, b) {
                return this._metadatas[a + ":" + b] },
            getMetadatas: function() {
                return b.copy(this._metadatas) },
            enhanceAsinsData: function(b) {
                var d =
                    this;
                a.isArray(b) ? b = a.map(b, function(b) {
                    return a.extend({}, b, { metadata: d.getMetadata(b.asin, b.offerId) }) }) : b.metadata = d.getMetadata(b.asin, b.offerId);
                return b
            },
            getPageAsin: function() {
                return this.enhanceAsinsData(f.getPageAsin()) },
            getUpsellAsins: function() {
                return this.enhanceAsinsData(f.getUpsellAsins()) },
            getAsins: function() {
                return this.enhanceAsinsData(f.getAsins()) },
            reset: function() { this._metadatas = {} }
        })
    });
    g.when("A", "jQuery").register("ODSBuyboxAsinMetadata", function(f, c) {
        var b = f.createClass({
            init: function(a,
                b, d, c, f, m, g) { this.asin = a;
                this.offerId = b;
                this.buyingPrice = d;
                this.listingPrice = c;
                this.title = f;
                this.imageUrl = m;
                this.availabilityMessage = g },
            isValid: function() {
                var a = "string" === typeof this.asin && 0 < this.asin.length;
                return "number" === typeof this.buyingPrice && a },
            clone: function() {
                return new b(this.asin, this.offerId, this.buyingPrice, this.listingPrice, this.title) }
        });
        return b
    });
    g.when("A", "jQuery", "a-modal").register("singleton-popup-modal", function(f, c, b) {
        function a(a) {
            null === k ? (h = d.appendTo(c("body")),
                k = b.create(h, a)) : k.update(a);
            k.show()
        }

        function e() { k && k.hide() }
        var d = c('<div style="display:none">'),
            h = null,
            k = null;
        f.declarative("cfg-singleton-modal-close", "click", e);
        f.declarative("cfg-singleton-modal-open", "click", function(b) { a({ inlineContent: b.data.inlineContent, header: b.data.header, width: b.data.width || "502", position: "triggerRight" }, !0) });
        return { show: a, hide: e, destroy: function() { k && (b.remove(k), k = null) } }
    })
});
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        q = l._namespace || l.attributeErrors,
        f = q ? q("SizzleConfiguratorRenderAssets") : l;
    f.guardFatal ? f.guardFatal(g)(f, window) : f.execute(function() { g(f, window) }) })(function(g, l, q) {
    g.when("A").register("EventDispatcher", function(f) {
        var c = f.$,
            b = f.createClass({
                init: function() { this._events = this._events || {};
                    this._maxListeners = 15;
                    this._memLeakDetected = !1 },
                on: function(a, e) {
                    if (void 0 === e || null === e) throw Error('Missing argument "handler"');
                    if ("function" !== typeof e && "function" !==
                        typeof e.handleEvent) throw new TypeError("Handler must be a function.");
                    this._events[a] ? this._events[a].push(e) : this._events[a] = [e];
                    b.warn && this._events[a].length > this._maxListeners && 0 < this._maxListeners && !this._memLeakDetected && (this._memLeakDetected = !0, console.warn("WARNING: Possible event EventDispatcher memory leak detected.", this._events[a].length, "event handlers added.", "Use EventDispatcher.setMaxListeners() to increase the threshold."), console.trace());
                    return this
                },
                once: function(a, b) {
                    function d() { c() }

                    function c() { this.removeListener(a, d); "function" !== typeof b ? b.handleEvent.apply(b, arguments) : b.apply(this, arguments) }
                    if (void 0 === b || null === b) throw Error('Missing argument "handler"');
                    if ("function" !== typeof b && "function" !== typeof b.handleEvent) throw new TypeError("Handler must be a function.");
                    this._events[a] ? this._events[a].push(d) : this._events[a] = [d];
                    return this
                },
                emit: function(a) {
                    function b(a, d) { "function" !== typeof a ? a.handleEvent.apply(a, d) : a.apply(this, d) }
                    var d = this._events[a];
                    if ("error" === a &&
                        !d) {
                        if (!this._events.error) throw arguments[1] instanceof Error ? arguments[1] : Error('Unhandled "error" event.'); } else if (!d) return !1;
                    var f = [].slice.call(arguments, 1),
                        k, m = d.length;
                    for (k = 0; k < m; k++) this.nextTick(c.proxy(b, this, d[k], f));
                    return !0
                },
                emitSync: function(a) {
                    var b = this._events[a];
                    if ("error" === a && !b) {
                        if (!this._events.error) throw arguments[1] instanceof Error ? arguments[1] : Error('Unhandled "error" event.'); } else if (!b) return !1;
                    var d = [].slice.call(arguments, 1),
                        c, f, m = b.length;
                    for (f = 0; f < m; f++) c = b[f], "function" !==
                        typeof c ? c.handleEvent.apply(c, d) : c.apply(this, d);
                    return !0
                },
                listeners: function(a) {
                    return this._events[a] ? this._events[a].slice() : [] },
                setMaxListeners: function(a) {
                    if ("number" !== typeof a) throw new TypeError("Value must be a number.");
                    this._maxListeners = a;
                    return this },
                off: function(a, b) {
                    return this.removeListener(a, b) },
                removeListener: function(a, b) {
                    var d = this._events[a];
                    if (d) {
                        var c = d.indexOf(b);~c && (1 === d.length ? (this._events[a] = q, delete this._events[a]) : d.splice(c, 1)) }
                    return this },
                removeAllListeners: function(a) {
                    if (0 ===
                        arguments.length)
                        for (a in this._events) this.removeAllListeners(a);
                    else this._events[a] = q, delete this._events[a];
                    return this
                },
                nextTick: function(a) { b.tickCount++ >= b.maxTicks ? (b.tickCount = 0, b.immediate(a)) : b.tick(a) }
            });
        b.immediate = "function" === typeof setImmediate ? c.proxy(setImmediate, l) : c.proxy(setTimeout, l);
        b.tick = l.process && "function" === typeof process.nextTick ? c.proxy(process.nextTick, process) : c.proxy(setTimeout, l);
        b.maxTicks = l.process && process.maxTickDepth ? l.process.maxTickDepth : 1E3;
        b.tickCount = 0;
        b.warn = !0;
        return b
    });
    g.when("a-button", "CFG.AUIConfig", "A", "jQuery").register("CFG.CFGButton", function(f, c, b, a) {
        var e = b.createClass({
            init: function(b) { this.auiButton = b;
                this.$el = this.auiButton._$element;
                this.enable = a.proxy(this.auiButton.enable, this.auiButton);
                this.text = a.proxy(this.auiButton.text, this.auiButton);
                this.isEnabled = a.proxy(this.auiButton.isEnabled, this.auiButton) },
            disable: function() { this.auiButton.disable();
                this.unfocus();
                this.$el.toggleClass("a-button-unavailable", !1) },
            available: function() {
                this.auiButton._$element.toggleClass("cfg-button-na", !1);
                this.$el.toggleClass("a-button-unavailable", !1)
            },
            unavailable: function() { this.$el.toggleClass("cfg-button-na", !0) },
            isAvailable: function() {
                return !this.$el.hasClass("cfg-button-na") },
            toggleAvailable: function(a) {!a || "undefined" === typeof a && this.isAvailable() ? this.unavailable() : this.available() },
            select: function() { this.$el.toggleClass(c.A_BUTTON_SELECTED_CLASS, !0);
                this.$el.toggleClass("a-button-unavailable", !1) },
            unselect: function() { this.$el.toggleClass(c.A_BUTTON_SELECTED_CLASS, !1) },
            isSelected: function() {
                return this.$el.hasClass(c.A_BUTTON_SELECTED_CLASS) },
            unfocus: function() { this.$el.removeClass(c.A_BUTTON_FOCUS_CLASS) },
            toggleSelected: function(a) { a || "undefined" === typeof a && this.isSelected() ? this.select() : this.unselect() },
            toggleEnabled: function(a) {!a || "undefined" === typeof a && this.isEnabled() ? this.disable() : this.enable() },
            hint: function(a) { this.$el.find(".cfg-button-text-hint").html(a) },
            extendedHint: function(a) { this.$el.find(".cfg-button-text-hint-extended").html(a) },
            resetStates: function() { this.enable();
                this.available();
                this.unselect() },
            setStates: function(a,
                b, e) { this.toggleEnabled(a);
                this.toggleAvailable(b);
                this.toggleSelected(e) }
        });
        return { getButtonFromAttributes: function(a, b) {
                return new e(f("#cfg-button-" + a + "-" + b)) } }
    });
    g.when("CFG.LocaleCurrency").register("accounting", function(f) {
        function c(a) {
            return !!("" === a || a && a.charCodeAt && a.substr) }

        function b(a) {
            return n ? n(a) : "[object Array]" === l.call(a) }

        function a(a) {
            return "[object Object]" === l.call(a) }

        function e(a, b) {
            var d;
            a = a || {};
            b = b || {};
            for (d in b) b.hasOwnProperty(d) && null == a[d] && (a[d] = b[d]);
            return a }

        function d(a,
            b, d) {
            var e = [],
                c, f;
            if (!a) return e;
            if (g && a.map === g) return a.map(b, d);
            c = 0;
            for (f = a.length; c < f; c++) e[c] = b.call(d, a[c], c, a);
            return e }

        function h(a, b) { a = Math.round(Math.abs(a));
            return isNaN(a) ? b : a }

        function k(a) {
            var b = m.settings.currency.format; "function" === typeof a && (a = a());
            return c(a) && a.match("%v") ? { pos: a, neg: a.replace("-", "").replace("%v", "-%v"), zero: a } : a && a.pos && a.pos.match("%v") ? a : c(b) ? m.settings.currency.format = { pos: b, neg: b.replace("%v", "-%v"), zero: b } : b }
        var m = { version: "0.3.2" };
        m.settings = {
            currency: {
                symbol: f.symbol,
                format: f.format,
                decimal: f.decimal,
                thousand: f.thousand,
                precision: f.precision,
                grouping: f.grouping
            },
            number: { precision: 0, grouping: 3, thousand: ",", decimal: "." }
        };
        var g = Array.prototype.map,
            n = Array.isArray,
            l = Object.prototype.toString,
            r = m.unformat = m.parse = function(a, e) {
                if (b(a)) return d(a, function(a) {
                    return r(a, e) });
                a = a || 0;
                if ("number" === typeof a) return a;
                e = e || ".";
                var c = new RegExp("[^0-9-" + e + "]", ["g"]),
                    c = parseFloat(("" + a).replace(/\((.*)\)/, "-$1").replace(c, "").replace(e, "."));
                return isNaN(c) ? 0 : c },
            t = m.toFixed =
            function(a, b) { b = h(b, m.settings.number.precision);
                var d = Math.pow(10, b);
                return (Math.round(m.unformat(a) * d) / d).toFixed(b) },
            x = m.formatNumber = function(c, f, k, g) {
                if (b(c)) return d(c, function(a) {
                    return x(a, f, k, g) });
                c = r(c);
                var p = e(a(f) ? f : { precision: f, thousand: k, decimal: g }, m.settings.number),
                    n = h(p.precision),
                    l = 0 > c ? "-" : "",
                    v = parseInt(t(Math.abs(c || 0), n), 10) + "",
                    q = 3 < v.length ? v.length % 3 : 0;
                return l + (q ? v.substr(0, q) + p.thousand : "") + v.substr(q).replace(/(\d{3})(?=\d)/g, "$1" + p.thousand) + (n ? p.decimal + t(Math.abs(c), n).split(".")[1] :
                    "")
            },
            q = m.formatMoney = function(c, f, g, p, n, l) {
                if (b(c)) return d(c, function(a) {
                    return q(a, f, g, p, n, l) });
                c = r(c);
                var t = e(a(f) ? f : { symbol: f, precision: g, thousand: p, decimal: n, format: l }, m.settings.currency),
                    v = k(t.format);
                return (0 < c ? v.pos : 0 > c ? v.neg : v.zero).replace("%s", t.symbol).replace("%v", x(Math.abs(c), h(t.precision), t.thousand, t.decimal)) };
        m.formatColumn = function(f, g, p, n, l, t) {
            if (!f) return [];
            var v = e(a(g) ? g : { symbol: g, precision: p, thousand: n, decimal: l, format: t }, m.settings.currency),
                q = k(v.format),
                y = q.pos.indexOf("%s") <
                q.pos.indexOf("%v") ? !0 : !1,
                E = 0;
            f = d(f, function(a, d) {
                if (b(a)) return m.formatColumn(a, v);
                a = r(a);
                var e = (0 < a ? q.pos : 0 > a ? q.neg : q.zero).replace("%s", v.symbol).replace("%v", x(Math.abs(a), h(v.precision), v.thousand, v.decimal));
                e.length > E && (E = e.length);
                return e });
            return d(f, function(a, b) {
                return c(a) && a.length < E ? y ? a.replace(v.symbol, v.symbol + Array(E - a.length + 1).join(" ")) : Array(E - a.length + 1).join(" ") + a : a })
        };
        return m
    });
    g.when("jQuery", "A", "EventDispatcher").register("CFG.BaseModel", function(f, c, b) {
        return b.extend({
            init: function(a) {
                this._super();
                this._properties = a || {}
            },
            get: function(a) { a = a in this._properties ? this._properties[a] : q;
                if ("undefined" !== typeof a) {
                    if (f.isPlainObject(a)) return f.extend({}, a);
                    if (f.isArray(a)) return a.slice() }
                return a },
            equal: function(a, b) {
                return this.get(a) === b },
            set: function(a, b, d) {
                if (f.isPlainObject(a)) return this._setMultiple(a);
                var h = !1,
                    k = this._properties[a];
                b === k || c.equals(b, k) || (this._properties[a] = b, h = !0, this.emit(a + ".changed", b), typeof d !== q && d || this.emit("changed", this));
                return h },
            _setMultiple: function(a) {
                var b = !1,
                    d;
                for (d in a) a.hasOwnProperty(d) && (b = this.set(d, a[d], !0) || b);
                b && this.emit("changed", this);
                return b
            },
            add: function(a, b) {
                var d = this.get(a);
                if (f.isArray(d)) {
                    if (b = f.isArray(b) ? b : [b], 0 < b.length) {
                        for (var c = 0; c < b.length; c++) d.push(b[c]);
                        this.set(a, d);
                        this.emit(a + ".added", b) } } else throw Error("Can't add to a non-array object"); },
            remove: function(a, b) {
                var d = this.get(a);
                if (f.isArray(d)) {
                    b = f.isArray(b) ? b : [b];
                    var c = [],
                        d = f.grep(d, function(a) {
                            var d = -1 < b.indexOf(a);
                            d && c.push(a);
                            return !d });
                    0 < c.length && (this.set(a,
                        d), this.emit(a + ".removed", c))
                } else throw Error("Can't removeAll to a non-array object");
            },
            replace: function(a, b, d) {
                var c = this.get(a);
                if (f.isArray(c)) b = f.isArray(b) ? b : [b], d = f.isArray(d) ? d : [d], b = f.grep(b, function(a) {
                    return null !== a && -1 < c.indexOf(a) && -1 === d.indexOf(a) }), d = f.grep(d, function(a) {
                    return null !== a && -1 === c.indexOf(a) }), this.remove(a, b), this.add(a, d);
                else throw Error("Can't replace to a non-array object"); }
        })
    });
    g.when("A").register("CFG.BaseView", function(f) {
        return f.createClass({
            init: function(c,
                b) { this.$scope = c;
                this.sectionAttribute = b },
            render: function() {}
        })
    });
    g.when("jQuery", "A").register("CFG.BaseController", function(f, c) {
        var b = c.createClass({
            init: function(a, b, d) { this.view = a || null;
                this.model = b || null;
                this.appState = d || null;
                this.__proxy = {};
                this.__enabled = !1 },
            proxy: function(a, b) { "function" === typeof b && (this.__proxy[a] = f.proxy(b, this));
                return this.__proxy[a] },
            enable: function() {
                var a = !this.__enabled;
                a && (this.disable(), this.__enabled = !0);
                return a },
            isEnabled: function() {
                return this.__enabled },
            disable: function() {
                var a = this.__enabled;
                this.__enabled = !1;
                return a },
            destroy: function() { this.appState = this.model = this.view = this.__proxy = null }
        });
        b.RENDER_VIEW = "renderView";
        return b
    });
    g.when("CFG.BaseController", "CFG.BuyBoxFactory", "CFG.AppStateFactory", "CFG.UpsellStateFactory", "CFG.SectionHelper", "CFG.Section", "CFG.DeviceHelper", "CFG.AUIConfig", "CFG.Strings", "CFG.ReftagHelper", "A", "jQuery").register("CFG.AppController", function(f, c, b, a, e, d, h, k, m, g, n, l) {
        return f.extend({
            init: function(a,
                b) { this._super.call(this);
                this._controllers = [];
                this._onDeviceAsinChanged(a.asin);
                this._initStateModels(a);
                this._initSections(e.getSections());
                g.openConfigurator(a.installmentsProgramId) },
            _initBuybox: function(a) { console.warn("WARNING: _initBuybox not properly overridden by appController subclass.") },
            _resolveFactoryInterface: function(a) { console.warn("WARNING: _resolveFactoryInterface not properly overridden by appController subclass.") },
            _initStateModels: function(a) {
                this._appState = b.getAppState(a);
                a =
                    h.getDeviceAttributes(a.asin);
                this._appState.setDeviceAttributes(a);
                this._appState.setPreviousDeviceAttributes(a)
            },
            _onDeviceAsinChanged: function(a) {
                if (h.isDeviceAsin(a)) {
                    var b = h.getDevice(a).getParentAsin();
                    g.setParentAsin(b);
                    g.sendDeviceAsinChanged(a) } },
            _createComponent: function(a, b) { this._controllers.push(a.create(b, this._appState, this._upsellState)) },
            _initSection: function(a) {
                var b = this._resolveFactoryInterface(a.getSectionType());
                b && this._createComponent(b, a) },
            enable: function() {
                var a = this._super();
                if (a)
                    for (var b = 0; b < this._controllers.length; b++) this._controllers[b].enable();
                return a
            },
            disable: function() {
                var a = this._super();
                if (a)
                    for (var b = 0; b < this._controllers.length; b++) this._controllers[b].disable();
                return a },
            _initSections: function(a) {
                for (var b = 0; b < a.length; b++) {
                    var e = a[b];
                    e.getSectionType() === d.SectionType.SECTION_CONTAINER ? this._initSections(e.getSectionList()) : this._initSection(e) } }
        })
    });
    g.when("jQuery", "CFG.BaseModel").register("CFG.AppStateModel", function(f, c) {
        return c.extend({
            init: function(b) {
                this._super(b);
                this.update(b)
            },
            update: function(b) { this.set("deviceAttributes", b.deviceAttributes || {});
                this.set("customOptions", b.customOptions || {});
                this.set("installmentsProgramId", b.installmentsProgramId) },
            setCustomOption: function(b, a) {
                var e = this.get("customOptions");
                e[b] = a;
                this.set("customOptions", e) }
        })
    });
    g.when("CFG.AppStateModel", "CFG.ReftagHelper").register("CFG.AppStateFactory", function(f, c) {
        return {
            getAppState: function(b) {
                var a = new f(b);
                return {
                    update: function(b) { a.update(b) },
                    registerDeviceAttributesChangedHandler: function(b) {
                        a.on("deviceAttributes.changed",
                            b)
                    },
                    unregisterDeviceAttributesChangedHandler: function(b) { a.off("deviceAttributes.changed", b) },
                    getDeviceAttributes: function() {
                        return a.get("deviceAttributes") },
                    setDeviceAttributes: function(b) {
                        return a.set("deviceAttributes", b) },
                    registerInstallmentsProgramIdChangedHandler: function(b) { a.on("installmentsProgramId.changed", b) },
                    unregisterInstallmentsProgramIdChangedHandler: function(b) { a.off("installmentsProgramId.changed", b) },
                    setInstallmentsProgramId: function(b) {
                        a.set("installmentsProgramId", b);
                        null ===
                            b ? c.sendInstallmentsOptOut() : c.sendInstallmentsOptIn()
                    },
                    getInstallmentsProgramId: function() {
                        return a.get("installmentsProgramId") },
                    registerCustomOptionsChangedHandler: function(b) { a.on("customOptions.changed", b) },
                    unregisterCustomOptionsChangedHandler: function(b) { a.off("customOptions.changed", b) },
                    getCustomOptions: function() {
                        return a.get("customOptions") },
                    setCustomOption: function(b, d) { a.setCustomOption(b, d) },
                    setCustomerSelectedDeviceAttributes: function(b) {
                        return a.set("customerSelectedDeviceAttributes",
                            b)
                    },
                    getCustomerSelectedDeviceAttributes: function() {
                        return a.get("customerSelectedDeviceAttributes") },
                    setSelectedQuantity: function(b) {
                        return a.set("selectedQuantity", b) },
                    getSelectedQuantity: function() {
                        return a.get("selectedQuantity") },
                    setPreviousDeviceAttributes: function(b) {
                        return a.set("previousDeviceAttributes", b) },
                    getPreviousDeviceAttributes: function(b) {
                        return a.get("previousDeviceAttributes") }
                }
            }
        }
    });
    g.when("CFG.BaseModel").register("CFG.Device", function(f) {
        return f.extend({
            init: function(c) { this._super(c) },
            isAvailable: function() {
                return this.equal("availabilityCondition", "in_stock") },
            installmentsOption: function() {
                return this.get("installments") },
            getInstallmentsProgramId: function() {
                var c = this.installmentsOption();
                return c ? Object.keys(c)[0] : null },
            hasInstallments: function(c) {
                var b = this.get("installments");
                return b && b.hasOwnProperty(c) },
            getInstallmentsDivisor: function(c) {
                return this.hasInstallments(c) ? this.get("installments")[c].divisor : null },
            getInstallmentsDownPaymentPrice: function(c) {
                return this.hasInstallments(c) &&
                    (c = this.getInstallmentsPrincipal(c)) ? (100 - c) / 100 * this.getPrice() : 0
            },
            getInstallmentsPrincipal: function(c) {
                return this.hasInstallments(c) ? this.get("installments")[c].principalPercentage : 0 },
            getInstallmentsMaxQuantity: function(c) {
                return this.hasInstallments(c) ? this.get("installments")[c].maxQuantity : 1 },
            getDeviceName: function() {
                return this.get("title") },
            getPrice: function() {
                var c = 0;
                this.isAvailable() && (c = this.get("buyingPrice"), "undefined" === typeof c || null === c) && (c = 0);
                return c },
            getVariation: function(c) {
                return this.get("variationMap")[c] },
            getImage: function() {
                return this.get("productImageUrl") },
            getAsin: function() {
                return this.get("asin") },
            getParentAsin: function() {
                return this.get("variationalParent") },
            getAvailabilityText: function() {
                return this.get("availabilityMessage") },
            isPreorder: function() {
                return this.get("preorder") },
            getOfferListingId: function() {
                return this.get("offerListingId") || "" },
            isOutOfStock: function() {
                return this.equal("availabilityCondition", "out_of_stock") },
            isAvailabilityWarning: function() {
                return this.get("availabilityWarning") },
            getMaxOrderLimit: function() {
                return this.get("maxOrderLimit") }
        })
    });
    g.when("CFG.BaseModel").register("CFG.Section", function(f) {
        var c = f.extend({
            init: function(b) { this._super(b);
                if (this.getSectionType() === c.SectionType.SECTION_CONTAINER) { b = this.getSectionList();
                    for (var a = [], e = 0; e < b.length; e++) a.push(new c(b[e]));
                    this.set(c.SECTION_LIST, a) } },
            getSectionAttribute: function() {
                return this.get(c.SECTION_ATTRIBUTE) },
            getDisplayList: function() {
                return this.get(c.DISPLAY_LIST) },
            getSectionType: function() {
                return this.get(c.SECTION_TYPE) },
            getSectionList: function() {
                return this.get(c.SECTION_LIST) },
            isSectionTypeCustom: function() {
                return this.equal(c.SECTION_TYPE, c.SectionType.CUSTOM) },
            isSectionTypeProperty: function() {
                return this.equal(c.SECTION_TYPE, c.SectionType.PROPERTY) },
            isDisplayTypeSwatch: function() {
                return this.equal(c.DISPLAY_TYPE, c.DisplayType.SWATCH) }
        });
        c.SECTION_ATTRIBUTE = "sectionAttribute";
        c.SECTION_TYPE = "sectionType";
        c.DISPLAY_TYPE = "displayType";
        c.DISPLAY_LIST = "displayList";
        c.SECTION_LIST = "sectionList";
        c.SectionType = {
            CUSTOM: "CUSTOM",
            PROPERTY: "PROPERTY",
            SECTION_CONTAINER: "SECTION_CONTAINER",
            INFORMATIONAL: "INFORMATIONAL",
            UPSELL_BLOCK: "UPSELL_BLOCK",
            UPSELL_FEATURED: "UPSELL_FEATURED"
        };
        c.DisplayType = { SWATCH: "SWATCH", TEXT: "TEXT" };
        return c
    });
    g.when("CFG.BaseModel", "ODSBuyboxAsinMetadata").register("CFG.Upsell", function(f, c) {
        return f.extend({
            init: function(b) { b instanceof c && (b = this._remapMetadata(b));
                this._super(b) },
            _remapMetadata: function(b) {
                var a = {};
                a.asin = b.asin;
                a.title = b.title;
                a.buyingPrice = b.buyingPrice;
                a.listPrice =
                    b.listingPrice;
                return a
            },
            getAsin: function() {
                return this.get("asin") },
            getTitle: function() {
                return this.get("title") },
            getBuyingPrice: function() {
                return this.get("buyingPrice") },
            getListingPrice: function() {
                return this.get("listPrice") },
            getOfferListingId: function() {
                return this.get("offerListingId") || "" },
            getVariation: function() {
                return this.get("variation") },
            getVariationKey: function() {
                return this.get("variationKey") },
            getVariationType: function() {
                return this.get("variationType") },
            getProductImage: function() {
                return this.get("productImageUrl") }
        })
    });
    g.when("CFG.Strings", "accounting").register("CFG.PriceHelper", function(f, c) {
        function b(a) {
            return c.formatMoney(a) }
        return { format: b, formatPrice: function(a, e, d, c) {
                var k = {},
                    m = "";
                c && (a -= e, 0 > a ? m = "-" : m = "+");
                k.price = a;
                k.sign = m;
                m = k.price;
                k = k.sign;
                m = "number" === typeof d && 1 < d ? b(Math.abs(m / d)) + f.installmentsPriceSuffix : b(Math.abs(m));
                return k + m } } });
    g.when("CFG.DevicesData", "CFG.Device", "CFG.DeviceProperties", "CFG.SectionHelper", "function-utils", "jQuery").register("CFG.DeviceHelper", function(f,
        c, b, a, e, d) {
        function h(a) {
            var b = null,
                d = null,
                e;
            for (e in k)
                if (k.hasOwnProperty(e)) {
                    var c = k[e];
                    if (null === b || c.getPrice() < b.getPrice()) b = c;
                    c.isAvailable() && (null === d || c.getPrice() < d.getPrice()) && (d = c) }
            return a ? d : b }
        var k = function() {
                var a = {},
                    b;
                for (b in f)
                    if (f.hasOwnProperty(b)) {
                        var d = new c(f[b]);
                        a[b] = d }
                return a }(),
            m = function() {
                var a = {},
                    e;
                for (e in k)
                    if (k.hasOwnProperty(e)) {
                        var c = k[e],
                            f;
                        for (f in b)
                            if (b.hasOwnProperty(f)) {
                                var h = c.getVariation(b[f]);
                                a[h] || (a[h] = {}) } }
                for (var m in k)
                    if (k.hasOwnProperty(m) && (e =
                            k[m], e.isAvailable()))
                        for (var g in b) b.hasOwnProperty(g) && (c = e.getVariation(b[g]), d.isEmptyObject(a[c]) ? a[c] = e : e.getPrice() < a[c].getPrice() && (a[c] = e));
                return a
            }();
        return {
            getCheapestDevice: e.memoize(null, h),
            getCheapestAvailableDevice: function() {
                return h(!0) },
            isPricingIncremental: !0,
            getSimilarDevice: function(a) {
                return m[a] || null },
            getDevice: function(a) {
                return k[a] },
            isDeviceAsin: function(a) {
                return k[a] !== q },
            getAvailabilityColor: e.memoize(null, function(a) {
                return (a = k[a]) && !a.isAvailabilityWarning() ? "a-color-success" :
                    "a-color-state"
            }),
            getAsinResume: e.memoize(null, function(d) {
                var e = "";
                if (d = k[d])
                    for (var c = 0; c < b.length; c++) var f = b[c],
                        h = d[f],
                        f = a.findSectionFromSectionAttribute(f),
                        h = a.findDisplayListItemFromAttribute(f, h),
                        e = e + (", " + h.shortText);
                return e }),
            getAsinFromVariation: e.memoize(null, function(a, d, e) {
                var c = null,
                    f;
                for (f in k)
                    if (k.hasOwnProperty(f)) {
                        var h = k[f],
                            m = h.getVariation(d) === e;
                        if (m)
                            for (var g = 0; g < b.length; g++) {
                                var l = b[g];
                                if (l !== d && h.getVariation(l) !== a[l]) { m = !1;
                                    break } }
                        if (m) { c = h.getAsin();
                            break } }
                return c }),
            getAsinFromDeviceAttributes: e.memoize(null, function(a) {
                for (var b in k)
                    if (k.hasOwnProperty(b)) {
                        var d = k[b],
                            e;
                        for (e in a)
                            if (a.hasOwnProperty(e) && d.getVariation(e) !== a[e]) { b = null;
                                break }
                        if (b) break }
                return b }),
            getDeviceAttributes: e.memoize(null, function(a) { a = k[a];
                for (var d = {}, e = 0; e < b.length; e++) {
                    var c = b[e],
                        f = a.getVariation(c);
                    d[c] = f }
                return d }),
            NA_ASIN: "NA_ASIN"
        }
    });
    g.when("CFG.UpsellsData", "CFG.Upsell", "function-utils").register("CFG.UpsellHelper", function(f, c, b) {
        function a(a) { e[a.asin] = new c(a) }
        var e = {};
        (function() {
            for (var b in f) f.hasOwnProperty(b) && a(f[b]) })();
        return { getUpsell: function(a) {
                return e[a] }, registerUpsell: a }
    });
    g.when("CFG.Strings").register("CFG.StringsHelper", function(f) {
        function c(b) {
            return b.charAt(0).toLowerCase() + b.slice(1) }
        return { getReplaceButtonText: function(b) {
                return f.replace_order.replace("%VARIATION%", c(b)) } } });
    g.when("CFG.Section", "CFG.SectionsData", "jQuery").register("CFG.SectionHelper", function(f, c, b) {
        var a = b.map(c, function(a) {
            return new f(a) });
        return { getSections: function() {
                return a }, getSection: function(b) {
                return a[b] }, getSectionsFromType: function(e) {
                return b.map(a, function(a) {
                    if (a.getSectionType() === e) return a }) }, findSectionFromSectionAttribute: function(b) {
                for (var d = 0; d < a.length; d++)
                    if (a[d].getSectionAttribute() === b) return a[d];
                return null }, findDisplayListItemFromAttribute: function(a, b) {
                for (var c = a.getDisplayList(), f = 0; f < c.length; f++)
                    if (c[f].attribute === b) return c[f];
                return null } }
    });
    g.when("odsRefTagUtils", "jQuery").register("CFG.ReftagHelper",
        function(f, c) {
            function b(b) {
                if (a) {
                    for (var c = "ods_cfg_%ACTION_NAME%_%PARENT_ASIN%".replace("%PARENT_ASIN%", a).replace("%ACTION_NAME%", b), k = Array.prototype.slice.call(arguments, 1), m = 0; m < k.length; m++) c += "_" + k[m];
                    f.send(c) } else e.push(arguments) }
            c("#addToCart");
            var a, e = [];
            return {
                setParentAsin: function(d) { a = d;
                    c.each(e, function(a, d) { b.apply(null, d) });
                    e = [] },
                openConfigurator: function(b) { b === q || null === b ? f.send("ods_dp_atc_" + a) : f.send("ods_dp_atc_inst_" + a) },
                buildAtcReftag: function(b) {
                    return "ods_cfg_atc_" + (b ?
                        "inst_" : "") + a
                },
                sendDeviceAsinChanged: function(a) { b("deviceAsinChanged", a) },
                sendDeviceAttributeSelected: function(a, e) { b("deviceAttributeSelected", a, e) },
                sendUpsellFeaturedSelected: function(a, e) { b("upsellFeaturedSelected", a, e) },
                sendCustomOptionChanged: function(a, e) { b(a + "_" + e) },
                sendAccessoryAdded: function(a) { b("accessory_added", a) },
                sendAccessoryRemovedFromBuybox: function(a) { b("accessory_removed_from_buybox", a) },
                sendAccessoryRemovedFromBlock: function(a) { b("accessory_removed_from_block", a) },
                sendInstallmentsOptIn: function() { b("inst_opt_in") },
                sendInstallmentsOptOut: function() { b("inst_opt_out") },
                sendHistoryBack: function() { b("historyBack") },
                sendLoadingDisplayedReftag: function() { b("loadingDisplayed") }
            }
        });
    g.when("jQuery").register("CFG.LayoutHelper", function(f) {
        function c() {
            return parseInt(f("#cfg-left-col").css("padding-top"), 10) }

        function b(a) { f("#cfg-left-col").css("padding-top", a) }
        var a = null;
        return {
            isDesktop: function() { null === a && (a = 0 < f(".cfg-desktop").length);
                return a },
            getTopPadding: c,
            setTopPadding: b,
            setSafeTopPadding: function(a) {
                var d =
                    a - c();
                0 > d && (a += Math.abs(d));
                b(a);
                0 < d && f(l).scrollTop(f(l).scrollTop() + d)
            },
            setIdealTopPadding: function(a) {
                var d = c() - a;
                0 < d && f(l).scrollTop() > d && (b(a), a = -d, f(l).scrollTop(f(l).scrollTop() + a)) }
        }
    });
    g.when("jQuery").register("CFG.DOMHelper", function(f) {
        return {
            getClassSelector: function(c) {
                return "." + c },
            findElementFromClass: function(c, b) { b = b || f("body");
                return b.find("." + c) },
            createHiddenFormField: function(c, b) {
                var a = f('<input type="hidden" name="%NAME%" value="%VAL%" />'.replace("%NAME%", c.name).replace("%VAL%",
                    c.value));
                b && a.appendTo(b)
            }
        }
    });
    g.when("a-button", "CFG.DOMHelper", "CFG.AUIConfig", "jQuery").register("CFG.AtcHelper", function(f, c, b, a) {
        return {
            renderAddToCartBtn: function(e, d, h) {
                d = !d;
                f(e)[d ? "enable" : "disable"]();
                e = a(e);
                d = c.findElementFromClass(b.A_BUTTON_INPUT_CLASS, e);
                var k = c.findElementFromClass(b.A_BUTTON_TEXT_CLASS, e),
                    m = d.data(h ? "text-preorder" : "text-atc");
                e.toggleClass(b.A_BUTTON_PREORDER_CLASS, h).toggleClass(b.A_BUTTON_PRIMARY_CLASS, !h);
                k.text(m);
                d.val(m);
                d.attr("title", m);
                d.data("hover",
                    m)
            }
        }
    });
    g.when("A", "jQuery", "CFG.DeviceSelectionController", "CFG.DeviceSelectionModel", "CFG.DeviceSelectionTextView", "CFG.DeviceSelectionSwatchView").register("CFG.DeviceSelectionFactory", function(f, c, b, a, e, d) {
        return f.createClass({
            _SECTION_ATTRIBUTE: "sectionAttribute",
            _DISPLAY_TYPE: "displayType",
            _SWATCH: "SWATCH",
            _VIEW_SELECTOR: "#cfg-device-",
            createController: function(a, d, e) {
                return new b(a, d, e) },
            createModel: function(b) {
                return new a(b) },
            createView: function(a, b) {
                var f = c(this._VIEW_SELECTOR +
                    a);
                return b === this._SWATCH ? new d(f, a) : new e(f, a)
            },
            create: function(a, b) {
                var d = this.createModel(a),
                    e = this.createView(d.get(this._SECTION_ATTRIBUTE), d.get(this._DISPLAY_TYPE));
                return this.createController(e, d, b) }
        })
    });
    g.when("jQuery", "CFG.BaseController", "CFG.BaseView", "CFG.DeviceHelper", "CFG.ReftagHelper", "CFG.Strings").register("CFG.DeviceSelectionController", function(f, c, b, a, e, d) {
        return c.extend({
            init: function(a, b, d) { this._super(a, b, d) },
            enable: function() {
                var a = this._super();
                a && (this.view.$scope.delegate(".cfg-button",
                    "click", this.proxy("onButtonClicked", this.onButtonClicked)), this.appState.registerDeviceAttributesChangedHandler(this.proxy(c.RENDER_VIEW, this[c.RENDER_VIEW])), this.appState.registerInstallmentsProgramIdChangedHandler(this.proxy(c.RENDER_VIEW)), this.renderView());
                return a
            },
            disable: function() {
                var a = this._super();
                a && (this.view.$scope.undelegate(".cfg-button", "click", this.proxy("onButtonClicked")), this.appState.unregisterDeviceAttributesChangedHandler(this.proxy(c.RENDER_VIEW)), this.appState.unregisterInstallmentsProgramIdChangedHandler(this.proxy(c.RENDER_VIEW)));
                return a
            },
            renderView: function() {
                var a = this.appState.getDeviceAttributes(),
                    a = this.prepareViewModel(a);
                this.view.render(a) },
            prepareViewModel: function(a) {
                var b = this.model.getAttributeValues(a, this.appState.getInstallmentsProgramId(), this.appState.getCustomerSelectedDeviceAttributes(), this.appState.getPreviousDeviceAttributes());
                return { attributeValues: b, selectedData: this.model.getSelectedData(b, a) } },
            onButtonClicked: function(b) {
                var d = f(b.currentTarget);
                b = this.model.get("sectionAttribute");
                var d = d.find("input").data("attr"),
                    c = this.appState.getDeviceAttributes(),
                    g = a.getAsinFromVariation(c, b, d),
                    n = a.getDevice(g),
                    l = n ? n.getOfferListingId() : "",
                    r = n ? a.getDeviceAttributes(g) : c,
                    t = n ? n.getInstallmentsProgramId() : null;
                this.appState.setCustomerSelectedDeviceAttributes({ sectionAttribute: b, deviceAttributes: r, installmentsProgramId: t });
                if (n === q || n.isOutOfStock())
                    if ((c = a.getSimilarDevice(d)) && !f.isEmptyObject(c)) g = c.getAsin(), l = (n = c) ? n.getOfferListingId() : "", c = a.getDeviceAttributes(g);
                    else return;
                this.appState.setPreviousDeviceAttributes(this.appState.getDeviceAttributes());
                e.sendDeviceAttributeSelected(b, d);
                e.sendDeviceAsinChanged(g);
                c[b] = d;
                this.appState.setDeviceAttributes(c);
                return { twistItemAsin: g, twistOid: l }
            }
        })
    });
    g.when("jQuery", "CFG.BaseView", "CFG.CFGButton", "CFG.Strings").register("CFG.DeviceSelectionTextView", function(f, c, b, a) {
        return c.extend({
            init: function(a, b) { this._super(a, b) },
            _renderDeviceSelections: function(e) {
                for (var d in e)
                    if (e.hasOwnProperty(d)) {
                        var c = e[d],
                            k = b.getButtonFromAttributes(this.sectionAttribute, d);
                        k && (k.setStates(!c.disabled, !c.unavailable,
                            c.selected), k.$el.find(".cfg-button-text-hint-extended").hide(), this._renderNotificationMessage(k, c), c.disabled && (c.similarDevice && !f.isEmptyObject(c.similarDevice) ? (k.enable(), c.disabled = !1, k.$el.addClass("a-button-unavailable"), c.price = "") : (c.price = a.outOfStockText, k.$el.addClass("a-button-disabled"))), k.hint(c.price || "&nbsp;"))
                    }
            },
            _renderNotificationMessage: function(a, b) {
                var c = this.$scope.find(".cfg-section-notification");
                b.notificationMessage ? (c.find("p").html(b.notificationMessage), c.show()) :
                    c.hide()
            },
            render: function(a) { this._renderDeviceSelections(a.attributeValues) }
        })
    });
    g.when("jQuery", "CFG.DeviceSelectionTextView").register("CFG.DeviceSelectionSwatchView", function(f, c) {
        return c.extend({
            init: function(b, a) { this.$imgContainer = b.find(".cfg-color-img");
                this.$colorText = this.$imgContainer.find(".cfg-color-text");
                this.$imgThumb = this.$imgContainer.find(".cfg-color-img-thumb");
                this._super(b, a) },
            render: function(b) {
                this._super(b);
                this.renderColorSelection(b.selectedData.text, b.selectedData.image,
                    b.selectedData.item && b.selectedData.item.disabled)
            },
            renderColorSelection: function(b, a, e) { this.$colorText.html("undefined" === typeof b ? "&nbsp;" : b);
                this.$imgThumb.attr("src") !== a && this.$imgThumb.attr("src", a);
                this.$imgContainer.toggleClass("disabled", e) }
        })
    });
    g.when("CFG.BaseModel", "CFG.PriceHelper", "CFG.DeviceHelper", "CFG.SectionHelper", "CFG.Section", "CFG.Strings", "A", "jQuery").register("CFG.DeviceSelectionModel", function(f, c, b, a, e, d, h, k) {
        var m = b.isPricingIncremental;
        return e.extend({
            init: function(a) { this._super(a._properties) },
            getAttributeValues: function(a, d, e, f) {
                for (var h = {}, k = this.getSectionAttribute(), g = this.getDisplayList(), l = b.getAsinFromDeviceAttributes(a), l = l ? b.getDevice(l) : null, q = 0; q < g.length; q++) {
                    var F = g[q].attribute,
                        B = { price: "", disabled: !0, unavailable: !0, selected: a[k] === F, similarDevice: null, notificationMessage: null },
                        u = b.getAsinFromVariation(a, k, F);
                    e && e.sectionAttribute === k && (B.notificationMessage = this._generateNotificationMessage(e, a, f));
                    u && (u = b.getDevice(u), B.disabled = !u.isAvailable(), B.unavailable = !1, l = (l = b.getAsinFromDeviceAttributes(a)) ?
                        b.getDevice(l) : null, B.price = c.formatPrice(u.getPrice(), l.getPrice(), l.getInstallmentsDivisor(d), m));
                    B.similarDevice = b.getSimilarDevice(F);
                    h[F] = B
                }
                return h
            },
            getSelectedData: function(e, c) {
                var f = {};
                this.getDisplayList();
                var h = this.getSectionAttribute(),
                    k;
                for (k in e)
                    if (e.hasOwnProperty(k) && c[h] === k) { f.item = e[k];
                        break }
                this.isDisplayTypeSwatch() && ((k = b.getAsinFromDeviceAttributes(c)) ? (h = a.findDisplayListItemFromAttribute(this, c[h]), k = b.getDevice(k), f.text = h.longText, f.image = k.getImage()) : f.image = d.unavailableImage);
                return f
            },
            _generateUnavailabilityMessage: function(a, b, e) {
                return h.equals(a, b) ? "" : d.switchVariationNotification + "<br/><b>" + e.getDeviceName() + "</b>" },
            _generateInstallmentsMessage: function(a, b) {
                return a && !b ? d.configurator_installments_unavailability_message : "" },
            _generateNotificationMessage: function(a, d, e) {
                var c = "",
                    f = b.getAsinFromDeviceAttributes(d),
                    f = b.getDevice(f);
                e = b.getAsinFromDeviceAttributes(e);
                var h = b.getDevice(e);
                e = a ? a.deviceAttributes : null;
                a = a ? a.installmentsProgramId : null;
                h = h.getInstallmentsProgramId();
                e && (d = this._generateUnavailabilityMessage(e, d, f), c = this._generateInstallmentsMessage(h, a), c = d + (d ? " " : "") + c);
                return c
            }
        })
    });
    g.when("A", "jQuery", "CFG.CustomSelectionController", "CFG.CustomSelectionView", "CFG.CustomSelectionModel").register("CFG.CustomSelectionFactory", function(f, c, b, a, e) {
        return f.createClass({
            _VIEW_SELECTOR: "#cfg-custom-",
            _SECTION_ATTRIBUTE: "sectionAttribute",
            createController: function(a, e, c) {
                return new b(a, e, c) },
            createModel: function(a) {
                return new e(a) },
            createView: function(b) {
                var e =
                    c(this._VIEW_SELECTOR + b);
                return new a(e, b)
            },
            create: function(a, b) {
                var e = this.createModel(a),
                    c = this.createView(e.get(this._SECTION_ATTRIBUTE));
                return this.createController(c, e, b) }
        })
    });
    g.when("CFG.BaseController", "jQuery", "CFG.ReftagHelper").register("CFG.CustomSelectionController", function(f, c, b) {
        return f.extend({
            init: function(a, b, d) { this._super(a, b, d) },
            enable: function() {
                var a = this._super();
                a && (this.appState.registerDeviceAttributesChangedHandler(this.proxy(f.RENDER_VIEW, this[f.RENDER_VIEW])),
                    this.view.$scope.delegate(".cfg-button", "click", this.proxy("onCustomClicked", this.onCustomClicked)), this.appState.registerCustomOptionsChangedHandler(this.proxy(f.RENDER_VIEW, this[f.RENDER_VIEW])), this.appState.registerInstallmentsProgramIdChangedHandler(this.proxy(f.RENDER_VIEW)), this.renderView());
                return a
            },
            disable: function() {
                var a = this._super();
                a && (this.view.$scope.undelegate(".cfg-button", "click", this.proxy("onCustomClicked")), this.appState.unregisterCustomOptionsChangedHandler(this.proxy(f.RENDER_VIEW)),
                    this.appState.unregisterDeviceAttributesChangedHandler(this.proxy(f.RENDER_VIEW)), this.appState.unregisterInstallmentsProgramIdChangedHandler(this.proxy(f.RENDER_VIEW)));
                return a
            },
            onCustomClicked: function(a) {
                var e = this.model.get("sectionAttribute");
                a = c(a.currentTarget).find("input").data("attr").toString();
                this.appState.setCustomOption(this.model.get("sectionAttribute"), a);
                b.sendCustomOptionChanged(e, a) },
            prepareViewModel: function(a) {
                return { sectionAttribute: this.model.get("sectionAttribute"), attributeValues: this.model.getAttribueValues(a) } },
            renderView: function() {
                var a = this.model.get("sectionAttribute"),
                    a = this.appState.getCustomOptions()[a].toString(),
                    a = this.prepareViewModel(a);
                this.view.render(a) }
        })
    });
    g.when("CFG.Section", "CFG.PriceHelper").register("CFG.CustomSelectionModel", function(f, c) {
        return f.extend({
            init: function(b) { this._super(b._properties);
                this.cacheOptions() },
            cacheOptions: function() {
                for (var b = this.getDisplayList(), a = [], e = 0; e < b.length; e++) a.push(b[e].attribute);
                this.set("options", a) },
            getAttribueValues: function(b) {
                for (var a = {}, e = this.get("options"), d = 0; d < e.length; d++) {
                    var c = e[d];
                    a[c] = { selected: c === b, price: "", disabled: !1 } }
                return a
            }
        })
    });
    g.when("jQuery", "CFG.BaseView", "CFG.CFGButton").register("CFG.CustomSelectionView", function(f, c, b) {
        return c.extend({ init: function(a, b) { this._super(a, b) }, _renderDeviceSelections: function(a) {
                for (var e in a)
                    if (a.hasOwnProperty(e)) {
                        var d = a[e],
                            c = b.getButtonFromAttributes(this.sectionAttribute, e);
                        c && (c.setStates(!d.disabled, !d.unavailable, d.selected), c.hint(d.price)) } }, render: function(a) { this._renderDeviceSelections(a.attributeValues) } }) });
    g.when("CFG.BaseController", "CFG.DeviceHelper", "CFG.Strings", "jQuery", "A", "CFG.ReftagHelper", "CFG.UpsellHelper").register("CFG.BuyBoxController", function(f, c, b, a, e, d, h) {
        return f.extend({
            init: function(a, b, d, c) { this._super(a, b, d);
                this.upsellState = c;
                var f = this;
                e.on("a:dropdown:quantitySelect:select", function(a) { f.onQuantityChanged(a) }) },
            enable: function() {
                var a = this._super();
                a && (this.appState.registerDeviceAttributesChangedHandler(this.proxy(f.RENDER_VIEW, this[f.RENDER_VIEW])), this.appState.registerCustomOptionsChangedHandler(this.proxy(f.RENDER_VIEW)),
                    this.appState.registerInstallmentsProgramIdChangedHandler(this.proxy(f.RENDER_VIEW)), this.view.$scope.delegate(this.view.getRemoveUpsellBtnSelector(), "click", this.proxy("onUpsellRemoveClicked", this.onUpsellRemoveClicked)), this.view.$scope.delegate(this.view.getInstallmentsCheckboxSelector(), "change", this.proxy("onInstallmentChecked", this.onInstallmentChecked)), this.upsellState.registerUpsellAsinChanged(this.proxy(f.RENDER_VIEW)), this.renderView());
                return a
            },
            disable: function() {
                var a = this._super();
                a && (this.upsellState.unregisterUpsellAsinChanged(this.proxy(f.RENDER_VIEW)), this.appState.unregisterDeviceAttributesChangedHandler(this.proxy(f.RENDER_VIEW)), this.appState.unregisterCustomOptionsChangedHandler(this.proxy(f.RENDER_VIEW)), this.appState.unregisterInstallmentsProgramIdChangedHandler(this.proxy(f.RENDER_VIEW)), this.view.$scope.undelegate(this.view.getRemoveUpsellBtnSelector(), "click", this.proxy("onUpsellRemoveClicked", this)), this.view.$scope.undelegate(this.view.getInstallmentsCheckboxSelector(),
                    "change", this.proxy("onInstallmentChecked", this)));
                return a
            },
            prepareViewModel: function() {
                var a = c.getAsinFromDeviceAttributes(this.appState.getDeviceAttributes()),
                    b = c.getDevice(a),
                    d = this.appState.getCustomOptions(),
                    e = this.model.prepareDeviceDetails(a, d),
                    d = this.model.prepareCustomFields(d),
                    f = b.getMaxOrderLimit(),
                    h = !!this.appState.getInstallmentsProgramId(),
                    h = this.model.prepareInstallments(a, h),
                    g = !b.isAvailable(),
                    l = c.getAvailabilityColor(a),
                    q = this.model.prepareUpsells(this.upsellState.getUpsellAsins()),
                    w = this.model.processQuantity(this.appState.getSelectedQuantity(), f, h),
                    A = w === this.appState.getSelectedQuantity();
                this._setUpsellQuantity(w, this.upsellState, A);
                this.appState.setSelectedQuantity(w);
                A = this.model.preparePrices(w, a, this.upsellState.getUpsellAsins(), this.appState.getInstallmentsProgramId());
                return {
                    deviceAsin: a,
                    deviceAsinData: b,
                    upsells: q,
                    deviceDetails: e,
                    deviceName: b.getDeviceName(),
                    customFields: d,
                    availabilityText: b.getAvailabilityText(),
                    availabilityColor: l,
                    isDeviceAvailable: b.isAvailable(),
                    addToCartBtnDisabled: g,
                    isPreorder: b.isPreorder(),
                    installments: h,
                    prices: A,
                    selectedQuantity: w,
                    maxQuantity: f
                }
            },
            onInstallmentChecked: function(a) {
                if (a = a.currentTarget.checked) {
                    var b = c.getAsinFromDeviceAttributes(this.appState.getDeviceAttributes());
                    c.isDeviceAsin(b) && (b = c.getDevice(b).getInstallmentsProgramId(), this.appState.setInstallmentsProgramId(b)) } else this.appState.setInstallmentsProgramId(null);
                return a },
            onUpsellRemoveClicked: function(b) {
                b = a(b.currentTarget).data("cfg-upsell-remove");
                var e = h.getUpsell(b);
                this.upsellState.setUpsellAsin(b, e.getOfferListingId(), 0);
                d.sendAccessoryRemovedFromBuybox(b)
            },
            _setUpsellQuantity: function(a, b, d) { b.getUpsellAsins().forEach(function(e) { b.setUpsellAsin(e.asin, e.offerId, a, d) }) },
            renderView: function() {
                var a = this.prepareViewModel();
                this.view.render(a);
                return a }
        })
    });
    g.when("A", "jQuery", "CFG.BuyBoxController", "CFG.BuyBoxView", "CFG.BuyBoxModel").register("CFG.BuyBoxFactory", function(f, c, b, a, e) {
        return f.createClass({
            _VIEW_SELECTOR: "#cfg-buy-box",
            createController: function(a,
                e, c, f) {
                return new b(a, e, c, f) },
            createModel: function() {
                return new e },
            createView: function(b) {
                return new a(c(this._VIEW_SELECTOR), b) },
            create: function(a, b, e) {
                var c = this.createModel();
                b = this.createView(b);
                return this.createController(b, c, a, e) }
        })
    });
    g.when("CFG.BaseModel", "CFG.PriceHelper", "CFG.DeviceHelper", "CFG.DeviceProperties", "CFG.SectionHelper", "CFG.UpsellHelper", "CFG.Strings").register("CFG.BuyBoxModel", function(f, c, b, a, e, d, h) {
        var k = h["ods-quantity-restriction-url"],
            m = h["ods-quantity-restriction-url-text"],
            g = h["ods-quantity-restriction-bulk-option"];
        return f.extend({
            init: function(a) { this._super(a) },
            preparePrices: function(a, d, e, f) {
                var k = null,
                    m = null,
                    g = null,
                    p = null,
                    l = this.calculateUpsellsPrice(e, !1);
                e = this.calculateUpsellsPrice(e, !0);
                var q = null,
                    u = null,
                    q = null,
                    z = 1,
                    D = null,
                    C = null;
                b.isDeviceAsin(d) && (d = b.getDevice(d), k = b.getCheapestDevice(), z = d.getInstallmentsDivisor(f), d.getInstallmentsMaxQuantity(), k = c.format(k.getPrice()), m = d.getPrice(), C = a * m, g = (C + e) / a, p = C + e, z && (q = C / z, u = c.format(q), D = c.format(q + e), q = h.installmentsTotalSentence.replace("%devicePrice%",
                    u).replace("%divisor%", z), 0 < e && (q += " + " + c.format(e))), m = c.format(m), g = c.format(g), p = c.format(p));
                return { cheapestDevicePrice: k, subTotalPrice: g, totalPrice: p, subTotalUpsellsPrice: c.format(l), upsellsPrice: c.format(e), devicePrice: m, installmentsMonthlyPrice: u, installmentsMonthlyString: u + h.installmentsPriceSuffix, installmentsTotalSentence: f ? q : null, installmentsFirstPayment: D, installmentsDivisor: z }
            },
            prepareDeviceDetails: function(a, b) {
                var d = this.getDeviceDetails(a),
                    e = this.getCustomOptionsDetail(b);
                return d.concat(e) },
            getDeviceDetails: function(a) {
                var d = [];
                a = b.getDevice(a);
                var e = c.format(a.getPrice());
                a = { type: "device", name: a.getDeviceName(), price: e };
                d.push(a);
                return d },
            getCustomOptionsDetail: function(a) {
                var b = [];
                e.getSections().filter(function(a) {
                    return a.isSectionTypeCustom() }).forEach(function(d) {
                    var c = d.getSectionAttribute();
                    d = e.findDisplayListItemFromAttribute(d, String(a[c]));
                    b.push({ type: c, name: d.shortText }) });
                return b },
            prepareUpsells: function(a) {
                for (var b = { price: 0, quantity: 0, list: [] }, e = 0; e < a.length; e++) {
                    var f =
                        a[e],
                        h = f.asin,
                        f = f.quantity,
                        k = d.getUpsell(h),
                        m = k.getBuyingPrice(),
                        g = k.getTitle(),
                        p = {};
                    b.price += m * f;
                    b.quantity += f;
                    p.left = g;
                    p.asin = h;
                    p.right = c.format(m);
                    p.offerListingId = k.getOfferListingId();
                    b.list.push(p)
                }
                return b
            },
            prepareCustomFields: function(a) {
                var b = [],
                    d;
                for (d in a) a.hasOwnProperty(d) && b.push({ name: d, value: a[d] });
                return b },
            calculateUpsellsPrice: function(a, b) {
                for (var e = 0, c = 0; c < a.length; c++) var f = a[c],
                    h = d.getUpsell(f.asin).getBuyingPrice(),
                    e = e + h * (b ? f.quantity : 1);
                return e },
            prepareInstallments: function(a,
                d) {
                var e = null,
                    f = 1,
                    k = null,
                    m = k = null,
                    g = !1,
                    p = 1;
                if (b.isDeviceAsin(a)) {
                    var l = b.getDevice(a),
                        e = l.getInstallmentsProgramId(),
                        p = l.getInstallmentsMaxQuantity(e);
                    e && d && (g = !0);
                    e && (f = l.getInstallmentsDivisor(e)) && (k = l.getPrice() / f, k = c.format(k), m = h.installmentsOptionsPrefix.replace("%divisor%", f)) }
                return { installmentsProgramId: e, divisor: f, installmentsMonthlyPriceFormatted: k, installmentsOptionText: m, installmentsSelected: g, installmentsMaxQty: p } },
            processQuantity: function(a, b, d) {
                return Math.min(a, d.installmentsSelected ?
                    d.installmentsMaxQty : b)
            },
            prepareBulkQuantityText: function(a) {
                var b = "<a href=" + k + ">" + m + "</a>";
                return g.replace("MAX_QUANTITY_PLUS_ONE", a + 1).replace("<URL>", b) }
        })
    });
    g.when("jQuery", "CFG.BaseView", "CFG.Strings", "a-dropdown", "a-button", "CFG.AUIConfig", "CFG.DOMHelper", "CFG.AtcHelper", "CFG.FastTrackManager").register("CFG.BuyBoxView", function(f, c, b, a, e, d, h, k, m) {
        function g(a, b, d) {
            b = '<td class="%CLASS%">%TEXT%</td>'.replace("%CLASS%", "cfg-bb-detail-name").replace("%TEXT%", b);
            d && (b += '<td class="%CLASS%">%TEXT%</td>'.replace("%CLASS%",
                "cfg-bb-detail-price").replace("%TEXT%", d));
            return '<tr class="%CLASS%">%TD%</tr>'.replace("%CLASS%", a).replace("%TD%", b)
        }

        function n(a, b) {
            var d = a.getOptions().size();
            if (d < b)
                for (d += 1; d <= b; d++) a.appendOption({ text: d, value: d });
            else if (d > b)
                for (--d; d >= b; d--) a.removeOption(d);
            return a }

        function l(a, b) {
            var d = a.getOptions().size() - 1;
            a.removeOption(d);
            n(a, b);
            a.appendOption({ text: b + 1 + "+", value: b + 1 });
            return a }
        return c.extend({
            init: function(a, b) {
                this._super(a);
                this.$forms = b && 0 < b.length ? b : f("#addToCart");
                this.$atcBtn =
                    this.$scope.find("#cfg-bb-atc-btn");
                this.$atcBtnInput = this.$atcBtn.find("input");
                this.$totalPrice = this.$scope.find("#cfg-bb-total-price");
                this.$totalPriceContainer = this.$scope.find("#cfg-bb-total-price-container");
                this.$detailBody = this.$scope.find("#cfg-bb-device-detail tbody");
                this.$additionalItemsPanel = this.$scope.find("#cfg-bb-additional-items-panel");
                this.$additionalItemsPanelBody = this.$additionalItemsPanel.find(".cfg-bb-detail tbody");
                this.$availability = this.$scope.find("#cfg-bb-availability");
                this.$totalInstallmentsContainer = this.$scope.find("#cfg-bb-total-installments");
                this.$totalInstallmentsText = this.$scope.find("#cfg-bb-total-installments-text");
                this.$installmentsPanelSelector = this.$scope.find("#cfg-bb-device-detail-installments");
                this.$installmentsCheckbox = this.$scope.find("#cfg-bb-device-detail-installments .cfg-bb-installments-checkbox");
                this.$installmentsCheckboxLabel = this.$scope.find("#cfg-bb-device-detail-installments span");
                this.$subTotalPrice = this.$scope.find("#cfg-bb-sub-total-price");
                m.populateFastTrack(this.$scope)
            },
            render: function(a) { this.renderPrices(a.prices);
                this.renderDeviceDetails(a.deviceDetails);
                this.renderUpsells(a.upsells);
                this.renderAvailability(a.availabilityColor, a.availabilityText);
                this.renderInstallmentsOption(a.installments);
                m.renderFastTrack(this.$scope, a.deviceAsin);
                k.renderAddToCartBtn("#cfg-bb-atc-btn", a.addToCartBtnDisabled, a.isPreorder) },
            renderAvailability: function(a, b) { this.$availability.removeClass(function(a, b) {
                    return (b.match(/(^|\s)a-color-\S+/g) || []).join(" ") }).addClass(a).text(b) },
            renderPrices: function(a) { this.$totalPriceContainer.toggle(null !== a.totalPrice);
                this.$totalPrice.text(a.totalPrice);
                this.$subTotalPrice.text(a.subTotalPrice);
                this.$totalInstallmentsContainer.toggle("string" === typeof a.installmentsTotalSentence);
                this.$totalInstallmentsText.text(a.installmentsTotalSentence) },
            renderDeviceDetails: function(a) {
                var b = "";
                a.forEach(function(a) { a = g("cfg-bb-detail-" + a.type, a.name, a.price);
                    b += a });
                this.$detailBody.html(b) },
            renderUpsells: function(a) {
                for (var d = "", e = 0; e < a.list.length; e++) var c =
                    a.list[e],
                    f = c.left + " " + '<a href="javascript:void(0);" class="cfg-accessory-block-summary-remove" data-cfg-upsell-remove="%ASIN%">%TEXT%</a>'.replace("%ASIN%", c.asin).replace("%TEXT%", b.remove_ods),
                    d = d + g("cfg-bb-detail-additional-item", f, c.right);
                this.$additionalItemsPanelBody.html(d);
                this.$additionalItemsPanel.toggle(0 < a.quantity)
            },
            renderInstallmentsOption: function(a) {
                if (a && a.installmentsProgramId) {
                    this.$installmentsCheckbox.addClass("a-control-row a-touch-checkbox");
                    this.$installmentsCheckbox.find("input").attr("checked",
                        a.installmentsSelected);
                    f("#cfg-bb-installments-price").text(a.installmentsMonthlyPriceFormatted);
                    var b = this.$installmentsCheckboxLabel.html().replace("%divisor%", a.divisor);
                    this.$installmentsCheckboxLabel.html(b);
                    this.$installmentsPanelSelector.show()
                } else this.$installmentsPanelSelector.hide();
                this.$scope.find("#cfg-bb-installments-limit-message-qty").html(a.installmentsMaxQty)
            },
            _updateQuantityDropdown: function(b, d, e, c) {
                var f = a.getSelect("quantitySelect");
                b = b.installmentsSelected ? Math.min(b.installmentsMaxQty,
                    d) : d;
                1 === b ? f.update({ status: "disabled" }) : f.update({ status: "normal" });
                (c ? l : n)(f, b);
                e = String(Math.min(e, b));
                f.setValue(e);
                return f
            },
            getAtcBtnInput: function() {
                return this.$atcBtnInput },
            getRemoveUpsellBtnSelector: function() {
                return h.getClassSelector("cfg-accessory-block-summary-remove") },
            getForm: function() {
                return this.$forms.first() },
            getAllForms: function() {
                return this.$forms },
            swapFirstForm: function() {
                var a = this.$forms[0];
                this.$forms[0] = this.$forms[1];
                this.$forms[1] = a },
            getInstallmentsCheckboxSelector: function() {
                return h.getClassSelector("cfg-bb-installments-checkbox input") },
            buildFormInputs: function(a, b) {
                return '<input type="hidden" name="' + a + '" value="' + b + '" />' }
        })
    });
    g.when("jQuery", "CFG.BaseView", "CFG.Strings", "CFG.CFGButton").register("CFG.UpsellBlockBaseView", function(f, c, b, a) {
        var e = c.extend({
            init: function(b, e) {
                this._super(b, e);
                this.$summary = this.$scope.find(".cfg-upsellblock-summary");
                this.$title = this.$scope.find(".cfg-upsellblock-box-title");
                this.$addToCartBtn = this.$scope.find(".cfg-upsellblock-add-btn");
                this.$addToCartBtnText = this.$scope.find(".cfg-upsellblock-add-btn .a-button-text");
                this.$variation = this.$scope.find(".cfg-upsellblock-variation");
                this.$variationTitle = this.$scope.find(".cfg-upsellblock-variation-title");
                this.$variationValue = this.$scope.find(".cfg-upsellblock-variation-value");
                this.$buyingPrice = this.$scope.find(".cfg-upsellblock-buying-price");
                this.$listingPrice = this.$scope.find(".cfg-upsellblock-listing-price");
                this.$variationsSelection = this.$scope.find(".cfg-upsellblock-variation-selection");
                this.addToCartBtn = a.getButtonFromAttributes(this.sectionAttribute, "addToCart");
                this.$titleHyperlink = this.$title.children().children()
            },
            renderSummary: function(a) {
                for (var c = "", f = 0; f < a.length; f++) var m = a[f],
                    g = ' <a class="' + e.REMOVE_BTN_CLASS + '" data-asin="' + m.asin + '">' + b.remove_ods + "</a>",
                    n = m.variation ? "<strong>" + m.variation + "</strong>: " : "",
                    n = n + (m.quantity + " " + b.added_ods),
                    c = c + ('<li class="cfg-upsellblock-summary-item">' + n + g + "</li>");
                this.$summary.html(c) },
            renderTitle: function(a) { this.$title.html(a) },
            renderPrice: function(a, b) {
                this.$buyingPrice.text(a);
                this.$listingPrice.toggle("string" ===
                    typeof b && 0 < b.length).text(b)
            },
            renderVariation: function(a, b) {
                var e = "string" === typeof a && 0 < a.length;
                this.$variation.toggle(e);
                e && (this.$variationTitle.text(a + ": "), this.$variationValue.text(b)) },
            renderProductImage: function(a) { this.$scope.find(".cfg-upsellblock-img img").attr("src", a) },
            renderAddToCartButton: function(a, b) { this.addToCartBtn.toggleEnabled(a);
                this.$addToCartBtnText.text(b) },
            renderSelection: function() {},
            _showUpsellSection: function() {
                var a = f(".cfg-section-upsellblock");
                a.find(".cfg-upsellblock-table").show();
                a.find(".cfg-section-info").hide()
            },
            renderHyperlink: function(a) {},
            render: function(a) { this._showUpsellSection();
                this.renderSummary(a.summaries);
                this.renderAddToCartButton(a.addToCartBtnEnabled, a.addToCartBtnText);
                this.renderVariation(a.variationTitle, a.variationValue);
                this.renderPrice(a.buyingPrice, a.listingPrice);
                this.renderProductImage(a.productImage);
                this.renderSelection(a.highlightAsin, a.asinsData);
                this.renderHyperlink(a.highlightAsin);
                this.renderTitle(a.title) }
        });
        e.REMOVE_BTN_CLASS = "cfg-upsellblock-summary-remove";
        return e
    });
    g.when("jQuery", "CFG.BaseView", "CFG.UpsellBlockBaseView", "CFG.CFGButton").register("CFG.UpsellBlockSwatchViewSelector", function(f, c, b, a) {
        return { selectSwatchView: function(b) {
                return b.extend({ init: function(a, b) { this._super(a, b) }, renderSelection: function(b, e) { this.$variationsSelection.toggle(e && 1 < e.length);
                        var c = this.sectionAttribute;
                        f.each(e, function(b, d) { a.getButtonFromAttributes(c, d.asin).toggleSelected(d.selected) }) } }) }, COLOR_PICKER_BTN_SELECTOR: ".cfg-upsellblock-color-picker .a-button" } });
    g.when("jQuery", "CFG.BaseView", "CFG.UpsellBlockBaseView", "CFG.CFGButton", "a-dropdown").register("CFG.UpsellBlockDropdownViewSelector", function(f, c, b, a, e) {
        return {
            selectDropdownView: function(a) {
                return a.extend({ init: function(a, b) { this._super(a, b);
                        this.$dropdown = this.$scope.find("#cfg-upsellblock-dropdown-" + this.sectionAttribute);
                        this.dropdown = e.getSelect(this.$dropdown.first()) }, renderSelection: function(a, b) { this.dropdown.setValue(a);
                        this.$variationsSelection.toggle(b && 1 < b.length) } }) },
            DROPDOWN_PREFIX_SELECTOR: "#cfg-upsellblock-dropdown-"
        }
    });
    g.when("jQuery", "CFG.BaseController", "CFG.UpsellBlockBaseView", "CFG.UpsellHelper", "CFG.ReftagHelper").register("CFG.UpsellBlockBaseController", function(f, c, b, a, e) {
        return c.extend({
            init: function(a, b, e, c) { this.upsellState = c;
                this._super(a, b, e) },
            enable: function() {
                var a = this._super();
                a && (this.upsellState.registerHighlightUpsellAsinsAddedHandler(this.proxy("_onHighlightUpsellAsinsAdded", this._onHighlightUpsellAsinsAdded)), this.appState.registerDeviceAttributesChangedHandler(this.proxy(c.RENDER_VIEW,
                    this[c.RENDER_VIEW])), this.upsellState.registerUpsellAsinChanged(this.proxy("_onAsinChanged", this._onAsinChanged)), this.view.$addToCartBtn.bind("click", this.proxy("_onAddClicked", this._onAddClicked)), this.view.$scope.delegate("." + b.REMOVE_BTN_CLASS, "click", this.proxy("_onSummaryRemoveClicked", this._onSummaryRemoveClicked)), this.renderView());
                return a
            },
            disable: function() {
                var a = this._super();
                a && (this.upsellState.unregisterHighlightUpsellAsinsAddedHandler(this.proxy("_onHighlightUpsellAsinsAdded")),
                    this.appState.unregisterDeviceAttributesChangedHandler(this.proxy(c.RENDER_VIEW)), this.upsellState.unregisterUpsellAsinChanged(this.proxy("_onAsinChanged", this._onAsinChanged)), this.view.$addToCartBtn.unbind("click", this.proxy("_onAddClicked")), this.view.$scope.undelegate("." + b.REMOVE_BTN_CLASS, "click", this.proxy("_onSummaryRemoveClicked")));
                return a
            },
            _onHighlightUpsellAsinsAdded: function(a) {
                for (var b = this.model.get("asins"), e = 0; e < a.length; e++) {
                    var c = a[e];
                    if (-1 !== b.indexOf(c)) {
                        this.model.set("highlightAsin",
                            c);
                        this.renderView();
                        break
                    }
                }
            },
            _onAsinChanged: function(a) {-1 < this.model.get("asins").indexOf(a) && this.renderView() },
            _onSummaryRemoveClicked: function(b) { b = f(b.currentTarget).attr("data-asin");
                var c = a.getUpsell(b);
                this.upsellState.setUpsellAsin(b, c.getOfferListingId(), 0);
                e.sendAccessoryRemovedFromBlock(b) },
            highlightAsin: function(a) { this.upsellState.replaceHighlightUpsellAsins(this.model.get("asins"), a) }
        })
    });
    g.when("A", "jQuery", "CFG.UpsellBlockBaseController", "CFG.UpsellBlockModel", "CFG.UpsellBlockMobileModel").register("CFG.UpsellBlockFactory",
        function(f, c, b, a) {
            return f.createClass({ _SECTION_ATTRIBUTE: "sectionAttribute", _DISPLAY_TYPE: "displayType", _SWATCH: "SWATCH", _DROPDOWN: "DROPDOWN", _VIEW_SELECTOR: "#cfg-upsellblock-", createController: function(a, b, c, f, m) {}, createModel: function(b) {
                    return new a(b) }, createView: function(a, b) {}, create: function(a, b, c) { a = this.createModel(a);
                    var f = a.get(this._DISPLAY_TYPE),
                        m = this.createView(a.get(this._SECTION_ATTRIBUTE), f);
                    return this.createController(f, m, a, b, c) } }) });
    g.when("jQuery", "CFG.BaseModel",
        "CFG.UpsellHelper", "CFG.PriceHelper", "CFG.Strings", "CFG.DeviceHelper").register("CFG.UpsellBlockModel", function(f, c, b, a, e, d) {
        return c.extend({
            init: function(a) { this._super(a._properties);
                this.cacheAsins() },
            cacheAsins: function() {
                for (var a = this.get("displayList"), b = [], d = 0; d < a.length; d++) b.push(a[d].attribute);
                this.set("asins", b);
                0 < b.length && this.set("highlightAsin", b[0]) },
            prepare: function(d, c) {
                for (var f = this.get("asins"), g = {
                        asinsData: [],
                        summaries: [],
                        addToCartBtnEnabled: !0,
                        listingPrice: "",
                        variationTitle: "",
                        variationValue: "",
                        addToCartBtnText: e.add_to_order
                    }, n = this.get("highlightAsin"), l = 0; l < f.length; l++) {
                    var r = f[l],
                        t = b.getUpsell(r),
                        q = { selected: !1, title: t.getTitle(), asin: r };
                    if (r === n) {
                        q.selected = !0;
                        g.title = q.title;
                        g.highlightAsin = r;
                        q.productImage = g.productImage = t.getProductImage();
                        var r = t.getBuyingPrice(),
                            y = t.getListingPrice();
                        g.buyingPrice = a.format(r);
                        y && y !== r && (g.listingPrice = a.format(t.getListingPrice()));
                        r = e["variation_" + t.getVariationType()];
                        t.getVariation() && r && (g.variationTitle = r, g.variationValue =
                            t.getVariation())
                    }
                    g.asinsData.push(q)
                }
                for (l = 0; l < d.length; l++) q = d[l], r = q.asin, -1 < f.indexOf(r) && (n = b.getUpsell(r).getVariation(), g.summaries.push({ asin: r, quantity: q.quantity, variation: n }));
                return g
            }
        })
    });
    g.when("CFG.BaseModel").register("CFG.UpsellStateModel", function(f) { f = f.extend({ init: function(c) { this._super(c);
                this.set("highlightUpsellAsins", []);
                this.set("accessoriesCache", []) } });
        f.HIGHLIGHT_UPSELL_ASINS = "highlightUpsellAsins";
        f.ACCESSORIES_CACHE = "accessoriesCache";
        return f });
    g.when("CFG.UpsellStateModel", "A").register("CFG.UpsellStateFactory", function(f, c) {
        return c.createClass({
            getUpsellState: function(b) {
                return {
                    registerHighlightUpsellAsinsChangedHandler: function(a) { b.on(f.HIGHLIGHT_UPSELL_ASINS + ".changed", a) },
                    unregisterHighlightUpsellAsinsChangedHandler: function(a) { b.off(f.HIGHLIGHT_UPSELL_ASINS + ".changed", a) },
                    registerHighlightUpsellAsinsAddedHandler: function(a) { b.on(f.HIGHLIGHT_UPSELL_ASINS + ".added", a) },
                    unregisterHighlightUpsellAsinsAddedHandler: function(a) {
                        b.off(f.HIGHLIGHT_UPSELL_ASINS +
                            ".added", a)
                    },
                    registerHighlightUpsellAsinsRemovedHandler: function(a) { b.on(f.HIGHLIGHT_UPSELL_ASINS + ".removed", a) },
                    unregisterHighlightUpsellAsinsRemovedHandler: function(a) { b.off(f.HIGHLIGHT_UPSELL_ASINS + ".removed", a) },
                    replaceHighlightUpsellAsins: function(a, e) { b.replace(f.HIGHLIGHT_UPSELL_ASINS, a, e) },
                    getHighlightUpsellAsins: function() {
                        return b.get(f.HIGHLIGHT_UPSELL_ASINS) },
                    cacheUpsellAsins: function(a) { b.set(f.ACCESSORIES_CACHE, a) },
                    getCachedUpsellAsins: function(a) {
                        return b.get(f.ACCESSORIES_CACHE) },
                    emptyUpsellCache: function() {
                        return b.set(f.ACCESSORIES_CACHE, []) }
                }
            }
        })
    });
    g.when("jQuery", "CFG.UpsellBlockSwatchViewSelector").register("CFG.UpsellBlockSwatchControllerSelector", function(f, c) {
        return {
            selectSwatchController: function(b) {
                return b.extend({
                    init: function(a, b, d, c) { this._super(a, b, d, c) },
                    enable: function() {
                        var a = this._super();
                        a && this.view.$scope.delegate(c.COLOR_PICKER_BTN_SELECTOR, "click", this.proxy("_onVariationClicked", this._onVariationClicked));
                        return a },
                    disable: function() {
                        var a =
                            this._super();
                        a && this.view.$scope.undelegate(c.COLOR_PICKER_BTN_SELECTOR, "click", this.proxy("_onVariationClicked"));
                        return a
                    },
                    _onVariationClicked: function(a) { a = f(a.currentTarget).find("input").attr("data-asin");
                        this.highlightAsin(a) }
                })
            }
        }
    });
    g.when("jQuery").register("CFG.UpsellBlockDropdownControllerSelector", function(f) {
        return {
            selectDropdownController: function(c) {
                return c.extend({
                    init: function(b, a, e, d) { this._super(b, a, e, d) },
                    enable: function() {
                        var b = this._super();
                        b && this.view.$dropdown.bind("change",
                            this.proxy("_onVariationChanged", this._onVariationChanged));
                        return b
                    },
                    disable: function() {
                        var b = this._super();
                        b && this.view.$dropdown.unbind("change", this.proxy("_onVariationChanged", this._onVariationChanged));
                        return b },
                    _onVariationChanged: function(b) { b = this.view.dropdown.val();
                        this.highlightAsin(b) }
                })
            }
        }
    });
    g.when("CFG.UpsellHelper", "CFG.Strings").register("CFG.UpsellBlockHelper", function(f, c) {
        function b(a, b, c) {
            for (b = 0; b < c.length; b++)
                if (c[b].asin === a) return !0;
            return !1 }

        function a(a, b) {
            for (var c,
                    f = 0; f < b.length; f++)
                if (c = b[f].asin, -1 < a.indexOf(c)) return c;
            return null
        }
        return { isAsinFromUpsellAsinsData: b, isAsinAdded: function(a, d, c) {
                for (var k = 0; k < d.length; k++) {
                    var m = d[k];
                    if (m === a) return a = f.getUpsell(m), !b(m, a.getOfferListingId(), c) }
                return !1 }, isVariationAdded: function(b, d) {
                return null !== a(b, d) }, removeUpsellAsins: function(a, b) {
                for (var c = 0; c < a.length; c++) {
                    var k = f.getUpsell(a[c]);
                    b.setUpsellAsin(k.getAsin(), k.getOfferListingId(), 0) } }, getVariationAsinAdded: a }
    });
    g.when("A", "jQuery", "CFG.UpsellFeaturedController",
        "CFG.UpsellFeaturedView", "CFG.UpsellFeaturedModel").register("CFG.UpsellFeaturedFactory", function(f, c, b, a, e) {
        return f.createClass({
            _SECTION_ATTRIBUTE: "sectionAttribute",
            _VIEW_SELECTOR: "#cfg-upsellfeatured-",
            createController: function(a, e, c, f) {
                return new b(a, e, c, f) },
            createModel: function(a) {
                return new e(a) },
            createView: function(b) {
                var e = c(this._VIEW_SELECTOR + b);
                return new a(e, b) },
            create: function(a, b, e) {
                a = this.createModel(a);
                var c = this.createView(a.get(this._SECTION_ATTRIBUTE), a.get(this._DISPLAY_TYPE));
                return this.createController(c, a, b, e)
            }
        })
    });
    g.when("jQuery", "CFG.BaseModel", "CFG.DeviceHelper", "CFG.UpsellHelper", "CFG.PriceHelper", "CFG.Strings").register("CFG.UpsellFeaturedModel", function(f, c, b, a, e, d) {
        return c.extend({ init: function(a) { this._super(a._properties);
                this.cacheAsins() }, cacheAsins: function() {
                for (var a = this.get("displayList"), b = [], d = 0; d < a.length; d++) b.push(a[d].attribute);
                this.set("asins", b) } }) });
    g.when("jQuery", "CFG.BaseView", "CFG.CFGButton", "CFG.Strings").register("CFG.UpsellFeaturedView",
        function(f, c, b, a) {
            return c.extend({
                init: function(a, b) { this._super(a, b) },
                _showFeaturedSection: function() {
                    var a = f(".cfg-section-upsellfeatured");
                    a.find("p").show();
                    a.find(".cfg-button-list").show();
                    a.find(".cfg-section-info").hide() },
                renderSelections: function(a, d) { this._showFeaturedSection();
                    for (var c in a)
                        if (a.hasOwnProperty(c)) {
                            var f = a[c],
                                m = b.getButtonFromAttributes(this.sectionAttribute, c);
                            m && (m.setStates(!f.disabled, !f.unavailable, f.selected), m.hint("" === f.price ? "&nbsp;" : f.price)) } },
                render: function(a) {
                    this.renderSelections(a.attributeValues,
                        a.cachedAccessories)
                }
            })
        });
    g.when("jQuery", "CFG.BaseController", "CFG.UpsellHelper", "CFG.ReftagHelper", "CFG.UpsellFeaturedViewModelHelper", "CFG.DeviceHelper").register("CFG.UpsellFeaturedController", function(f, c, b, a, e, d) {
        return c.extend({
            init: function(a, b, d, e) { this.upsellState = e;
                this._super(a, b, d) },
            enable: function() {
                var a = this._super();
                a && (this.view.$scope.delegate(".cfg-button", "click", this.proxy("onButtonClicked", this.onButtonClicked)), this.appState.registerDeviceAttributesChangedHandler(this.proxy(c.RENDER_VIEW,
                    this[c.RENDER_VIEW])), this.upsellState.registerUpsellAsinChanged(this.proxy("onUpsellAsinChanged", this.onUpsellAsinChanged)), this.renderView());
                return a
            },
            disable: function() {
                var a = this._super();
                a && (this.view.$scope.undelegate(".cfg-button", "click", this.proxy("onButtonClicked")), this.appState.unregisterDeviceAttributesChangedHandler(this.proxy(c.RENDER_VIEW)), this.upsellState.unregisterUpsellAsinChanged(this.proxy("onUpsellAsinChanged")));
                return a },
            prepareViewModel: function() {
                var a = this.model.get("asins"),
                    b = this.upsellState.getUpsellAsins(),
                    a = e.getSelectedAsin(a, b),
                    b = this.model.get("displayList"),
                    a = e.getAttributeValues(b, a),
                    b = this.upsellState.getCachedUpsellAsins();
                return { attributeValues: a, cachedAccessories: b }
            },
            renderView: function() {
                var a = this.prepareViewModel();
                this.view.render(a) },
            onUpsellAsinChanged: function(a) { this.model.get("asins").indexOf(a) && this.renderView() },
            onButtonClicked: function(b) {
                var d = f(b.currentTarget);
                b = this.model.get("sectionAttribute");
                for (var d = d.find("input").data("attr"), e =
                        this.appState.getSelectedQuantity() ? this.appState.getSelectedQuantity() : 1, c = this.model.get("asins"), g = 0; g < c.length; g++) {
                    var l = c[g];
                    l && this._updateUpsellSate(l, 0) }
                this._updateUpsellSate(d, e);
                a.sendUpsellFeaturedSelected(b, d);
                return d
            },
            _updateUpsellSate: function(a, d) {
                var e = b.getUpsell(a);
                e && this.upsellState.setUpsellAsin(a, e.getOfferListingId(), d) }
        })
    });
    g.when("jQuery", "CFG.UpsellHelper", "CFG.PriceHelper").register("CFG.UpsellFeaturedViewModelHelper", function(f, c, b) {
        return {
            getSelectedAsin: function(a,
                b) {
                for (var d = 0; d < b.length; d++) {
                    var c = b[d].asin;
                    if (-1 < a.indexOf(c)) return c }
                return "" },
            getAttributeValues: function(a, e) {
                for (var d = {}, f = 0; f < a.length; f++) {
                    var k = a[f].attribute,
                        m = c.getUpsell(k),
                        g = { price: b.format(m ? m.getBuyingPrice() : 0), disabled: !1, unavailable: !1, selected: !1 };
                    if (!e && !m || e === k) g.selected = !0;
                    d[k] = g }
                return d }
        }
    });
    g.when("jQuery", "CFG.UpsellBlockBaseView").register("CFG.UpsellBlockMobileView", function(f, c) {
        return c.extend({ init: function(b, a) { this._super(b, a) }, renderTitle: function(b) { this.$title.html(b) } }) });
    g.when("jQuery", "CFG.DevicesData", "DeliveryCountdownComponent").register("CFG.FastTrackManager", function(f, c) {
        return {
            populateFastTrack: function(b) {
                for (var a in c)
                    if (c.hasOwnProperty(a)) {
                        var e = c[a].fastTrackMessage || "";
                        if (e) {
                            var d = b,
                                h = f("<div></div>", { id: "fast-track-for-" + a });
                            h.html(e.replace(/(&quot;)/g, '"').replace(/(&amp;)/g, "&").replace(/(&lt;)/g, "<").replace(/(&gt;)/g, ">").replace(/(<\/script>)/g, "\x3c/script>"));
                            d.find("#cfg-bb-fast-track-message").append(h);
                            h.hide() } } },
            renderFastTrack: function(b,
                a) { b.find("#cfg-bb-fast-track-message").children().hide();
                b.find("#fast-track-for-" + a).show() }
        }
    });
    g.when("CFG.AppController", "CFG.InitialStateHelper", "CFG.ReftagHelper", "CFG.DeviceHelper", "ODSBuyboxManager", "CFG.DeviceSelectionMobileFactory", "CFG.CustomSelectionMobileFactory", "CFG.UpsellBlockMobileFactory", "CFG.UpsellFeaturedFactory", "CFG.BuyBoxMobileFactory", "CFG.AppStateFactory", "CFG.UpsellStateMobileFactory", "CFG.Section", "jQuery", "A").register("CFG.MobileAppController", function(f,
        c, b, a, e, d, h, k, m, g, n, l, r, t, q) {
        function y() { e.getUpsellAsins().forEach(function(a) { e.setUpsellAsin(a.asin, a.offerId, 0);
                e.setUpsellAsin(a.asin, "", a.quantity) }) }

        function w() { e.getUpsellAsins().forEach(function(a) { e.setUpsellAsin(a.asin, "", 0) }) }
        f = f.extend({
            init: function(a) { e.initialize();
                y();
                var b = c.getInitialState(a.first());
                this._super.call(this, b, a);
                this._appState.setSelectedQuantity(b.quantity);
                this._initBuybox(a);
                this.enable() },
            _initBuybox: function(a) {
                this._controllers.push((new g).create(this._appState,
                    a, this._upsellState))
            },
            _initStateModels: function(a) { this._super(a);
                this._upsellState = (new l).getUpsellState(a) },
            _resolveFactoryInterface: function(a) {
                switch (a) {
                    case r.SectionType.PROPERTY:
                        return new d;
                    case r.SectionType.CUSTOM:
                        return new h;
                    case r.SectionType.UPSELL_BLOCK:
                        return new k;
                    case r.SectionType.UPSELL_FEATURED:
                        return new m;
                    case r.SectionType.INFORMATIONAL:
                        break;
                    default:
                        throw Error("Section type " + a + " not supported!"); } },
            update: function(d) {
                d = d.first();
                if ("mobile-installments" === d.attr("id")) {
                    var f =
                        d["installments-programId"];
                    f && f.value && this.appState.setInstallmentsProgramId(f.value)
                }
                y();
                this.enable();
                d = c.getInitialState(d);
                f = e.getPageAsin().asin;
                this._appState.setSelectedQuantity(d.quantity);
                d.deviceAttributes = a.isDeviceAsin(f) ? a.getDeviceAttributes(f) : this._appState.getDeviceAttributes();
                this._appState.update(d);
                b.openConfigurator(d.installmentsProgramId)
            },
            enable: function() {
                if (this._super()) q.on("a:popover:beforeHide:confauxgurator-view", this.proxy("onHistoryBack", this.onHistoryBack)) },
            disable: function() {
                this._super() &&
                    q.off("a:popover:beforeHide:confauxgurator-view", this.proxy("onHistoryBack"))
            },
            onHistoryBack: function() { w();
                b.sendHistoryBack() }
        });
        f.CFG_AUI_POPOVER_NAME = "confauxgurator-view";
        return f
    });
    g.when("CFG.UpsellStateFactory", "CFG.UpsellStateModel", "CFG.UpsellStateMobileModel", "ODSBuyboxManager").register("CFG.UpsellStateMobileFactory", function(f, c, b, a) {
        return f.extend({
            getUpsellState: function(e) {
                var d = new b(e);
                e = this._super(d);
                e.registerUpsellAsinChanged = function(b) { a.registerUpsellAsinChanged(b) };
                e.unregisterUpsellAsinChanged = function(b) { a.unregisterUpsellAsinChanged(b) };
                e.setUpsellAsin = function(a, b, e) { d.setUpsellAsin(a, "", e) };
                e.getUpsellAsins = function() {
                    return d.getUpsellAsins() };
                return e
            }
        })
    });
    g.when("CFG.UpsellStateModel", "ODSBuyboxManager").register("CFG.UpsellStateMobileModel", function(f, c) {
        return f.extend({ init: function(b) { this._super(b) }, setUpsellAsin: function(b, a, e) { c.setUpsellAsin(b, a, e) }, getUpsellAsins: function() {
                return c.getUpsellAsins() } }) });
    g.when("jQuery",
        "CFG.SectionHelper", "CFG.Section", "ODSBuyboxManager").register("CFG.InitialStateHelper", function(f, c, b, a) {
        function e(a) {
            var e = {},
                k = c.getSectionsFromType(b.SectionType.CUSTOM);
            f.each(k, function(b, c) {
                var f = c.getSectionAttribute(),
                    k = a.find('input[name="' + f + '"]');
                e[f] = k.val() || c.getDisplayList()[0].attribute });
            return e }
        return {
            getInitialState: function(b) {
                var c = {};
                c.asin = a.getPageAsin().asin;
                c.quantity = a.getPageAsin().quantity;
                c.installmentsProgramId = b.find("#installments-programId").val();
                c.customOptions =
                    e(b);
                return c
            },
            getCustomOptionsMap: e
        }
    });
    g.when("CFG.BaseController", "CFG.LayoutHelper", "function-utils", "jQuery").register("CFG.CallToActionController", function(f, c, b, a) {
        return f.extend({
            init: function(a, b) { this._super(a, b);
                this.renderView() },
            enable: function() {
                var e = this._super();
                e && (this.show(), c.setTopPadding(this.view.getHeight()), this.view.$scope.bind("click", this.proxy("onViewClicked", this.onViewClicked)), a(l).bind("scroll", this.proxy("onWindowScrolled", b.throttle(this.onWindowScrolled,
                    200))), this.model.on("changed", this.proxy(f.RENDER_VIEW, this[f.RENDER_VIEW])), this.view.getAtcBtnInput().bind("click", this.proxy("onAtcClicked", this.onAtcClicked)));
                return e
            },
            disable: function() {
                var b = this._super();
                b && (this.hide(), c.setTopPadding(0), this.view.$scope.unbind("click", this.proxy("onViewClicked")), a(l).unbind("scroll", this.proxy("onWindowScrolled")), this.model.off("changed", this.proxy(f.RENDER_VIEW)), this.view.getAtcBtnInput().unbind("click", this.proxy("onAtcClicked")));
                return b },
            hide: function() { this.view.hide() },
            show: function() { this.view.show() },
            onViewClicked: function(b) { a("html, body").stop().animate({ scrollTop: a(document).height() }, 1E3) },
            onAtcClicked: function(a) { a.stopPropagation();
                this.view.getForm().first().submit() },
            renderView: function() { this.view.render(this.prepareViewModel());
                c.setSafeTopPadding(this.isEnabled() ? this.view.getHeight() : 0);
                this.model.get("addToCartBtnDisabled") && this.view.getAtcBtn().click(function(a) { a.stopPropagation() }) },
            prepareViewModel: function() {
                return {
                    isInstallments: this.model.get("isInstallments"),
                    prices: this.model.get("prices"),
                    availabilityText: this.model.get("availabilityText"),
                    addToCartBtnDisabled: this.model.get("addToCartBtnDisabled"),
                    deviceAsin: this.model.get("deviceAsin"),
                    additionalItems: this.model.getAdditionalItemsText(this.model.get("deviceAsin") ? this.model.get("upsellsCount") : 0),
                    upsellsCount: this.model.get("upsellsCount"),
                    deviceName: this.model.get("deviceName"),
                    isPreorder: this.model.get("isPreorder"),
                    isDeviceAvailable: this.model.get("isDeviceAvailable"),
                    quantity: this.model.get("quantity")
                }
            },
            onWindowScrolled: function() { c.setIdealTopPadding(this.view.getHeight()) },
            update: function(a) { this.enable();
                this.model.set(a) }
        })
    });
    g.when("CFG.CallToActionController", "CFG.CallToActionView", "CFG.CallToActionModel").register("CFG.CallToActionFactory", function(f, c, b) {
        return { create: function(a, e, d) { e = e.find("#cfg-call-to-action");
                d = new c(e, d);
                a = new b(a);
                return new f(d, a) } } });
    g.when("CFG.BaseModel", "CFG.Strings").register("CFG.CallToActionModel", function(f, c) {
        return f.extend({
            getAdditionalItemsText: function(b) {
                var a =
                    "";
                if (0 === b) return a;
                1 === b ? a = c.ctaAdditionalItem : 1 < b && (a = c.ctaAdditionalItems);
                return a.replace("%COUNT%", b)
            }
        })
    });
    g.when("CFG.BaseView", "CFG.DeviceHelper", "CFG.Strings", "CFG.AtcHelper").register("CFG.CallToActionView", function(f, c, b, a) {
        function e(a, e, c) {
            var f = '<span class="a-color-price a-text-bold">%TEXT%</span>'.replace("%TEXT%", a);
            a = '<span class="a-color-price a-text-bold">%TEXT%</span>'.replace("%TEXT%", e);
            c = b.installmentsTotalSentence.replace("%devicePrice%", f).replace("%divisor%",
                c);
            e && (c += " + " + a);
            return c
        }
        return f.extend({
            init: function(a, b) {
                this._super(a);
                this.$summary = this.$scope.find("#cfg-cta-summary");
                this.$priceContainer = this.$scope.find("#cfg-cta-price");
                this.$price = this.$scope.find("#cfg-cta-device-price");
                this.$deviceName = this.$scope.find("#cfg-cta-device-title");
                this.$additionalItems = this.$scope.find("#cfg-cta-additional-items");
                this.$quantity = this.$scope.find("#cfg-cta-quantity");
                this.$availabilityText = this.$scope.find("#cfg-cta-availability");
                this.$atcBtn = this.$scope.find("#cfg-cta-atc-btn");
                this.$atcBtnInput = this.$atcBtn.find("input");
                this.$form = b
            },
            show: function() { this.$scope.removeClass("cta-transition") },
            hide: function() { this.$scope.addClass("cta-transition") },
            render: function(b) {
                this.$deviceName.text(b.deviceName);
                this.$additionalItems.text(b.additionalItems);
                this.$additionalItems.toggle(0 < b.additionalItems.length);
                this.$quantity.text("(x%QTY%)".replace("%QTY%", b.quantity));
                this.$quantity.toggle(1 < b.quantity);
                b.isInstallments ? this.$priceContainer.html(e(b.prices.installmentsMonthlyPrice,
                    0 < b.upsellsCount ? b.prices.upsellsPrice : null, b.prices.installmentsDivisor)) : this.$priceContainer.html('<span class="a-color-price a-text-bold">%TEXT%</span>'.replace("%TEXT%", b.prices.totalPrice));
                this.$availabilityText.removeClass();
                this.$availabilityText.show();
                this.$availabilityText.addClass(c.getAvailabilityColor(b.deviceAsin));
                this.$availabilityText.text(b.availabilityText);
                this.$atcBtn.addClass("show");
                a.renderAddToCartBtn("#cfg-cta-atc-btn", b.addToCartBtnDisabled, b.isPreorder)
            },
            getHeight: function() {
                return this.$scope.height() +
                    30
            },
            getAtcBtnInput: function() {
                return this.$atcBtnInput },
            getAtcBtn: function() {
                return this.$atcBtn },
            getForm: function() {
                return this.$form }
        })
    });
    g.when("CFG.BuyBoxController", "CFG.CallToActionFactory", "CFG.DeviceHelper", "function-utils", "ODSBuyboxManager", "CFG.BaseController", "CFG.Strings", "jQuery").register("CFG.BuyBoxMobileController", function(f, c, b, a, e, d, h, k) {
        return f.extend({
            init: function(a, b, d, e) { this._super(a, b, d, e);
                this.initCallToAction();
                this.renderView();
                this.onResize() },
            enable: function() {
                var b =
                    this._super();
                b && (this.view.getAtcBtnInput().bind("click", this.proxy("onAtcBtnClicked", this.onAtcBtnClicked)), k(l).bind("scroll", this.proxy("onScroll", a.throttle(this.onScroll, 200))), k(l).bind("resize", this.proxy("onResize", this.onResize)), this._callToAction.enable());
                return b
            },
            disable: function() {
                var a = this._super();
                a && (this.view.getAtcBtnInput().unbind("click", this.proxy("onAtcBtnClicked")), k(l).unbind("scroll", this.proxy("onScroll")), k(l).unbind("resize", this.proxy("onResize")), this._callToAction.disable());
                return a
            },
            initCallToAction: function() {
                var a = this.getCallToActionViewData(this.prepareViewModel());
                this._callToAction = c.create(a, this.view.$scope, this.view.getAllForms()) },
            onQuantityChanged: function(a) { a = a.value;
                e.setPageAsin(e.getPageAsin().asin, "", a);
                this.appState.setSelectedQuantity(a);
                this._setUpsellQuantity(a, this.upsellState, !1);
                this.renderView() },
            renderView: function() {
                var a = this._super(),
                    b = this.getCallToActionViewData(a);
                this._callToAction.update(b);
                return a },
            getCallToActionViewData: function(a) {
                return {
                    prices: a.prices,
                    availabilityText: a.availabilityText,
                    addToCartBtnDisabled: a.addToCartBtnDisabled,
                    deviceAsin: a.deviceAsin,
                    deviceName: a.deviceName,
                    upsellsCount: a.upsells.list.length,
                    isDeviceAvailable: a.isDeviceAvailable,
                    isInstallments: a.installments.installmentsSelected,
                    isPreorder: a.isPreorder,
                    divisor: a.installmentsDivisor,
                    quantity: a.selectedQuantity
                }
            },
            onAtcBtnClicked: function(a) { a.preventDefault();
                this.view.getForm().first().submit() },
            onScroll: function() {
                if (this._callToAction.isEnabled()) {
                    var a = k(l).scrollTop(),
                        b =
                        k(l).height(),
                        d = this.view.$scope.offset().top;
                    a + b - 200 > d ? this._callToAction.hide() : this._callToAction.show()
                }
            },
            onResize: function() {
                var a = k(l).height(),
                    b = this.view.$scope.offset().top;
                a - 200 > b ? this._callToAction.disable() : this._callToAction.enable() }
        })
    });
    g.when("jQuery", "CFG.BuyBoxView", "CFG.DOMHelper").register("CFG.BuyBoxMobileView", function(f, c, b) {
        return c.extend({
            init: function(a, b) { this._super(a, b) },
            render: function(a) {
                this._super(a);
                this.updateHiddenFields(a.customFields);
                this.updateQuantityFields(a.selectedQuantity);
                this._updateQuantityDropdown(a.installments, a.maxQuantity, a.selectedQuantity, !1)
            },
            updateQuantityFields: function(a) {
                var b = '> input[type="hidden"][name="%NAME%"]'.replace("%NAME%", "quantity");
                this.$forms.find(b).val(a) },
            updateHiddenFields: function(a) {
                var e, d, c;
                for (d = 0; d < a.length; d++)
                    if (c = a[d]) e = '> input[type="hidden"][name="%NAME%"]'.replace("%NAME%", c.name), e = this.$forms.find(e), 0 === e.length ? b.createHiddenFormField(c, this.$forms) : e.val(c.value) },
            renderInstallmentsOption: function(a) {
                this._super(a);
                2 === this.getAllForms().length ? this._needToSwapForms(a) && this.swapFirstForm() : this._updateInstallmentsForm(a)
            },
            _needToSwapForms: function(a) { a = a.installmentsSelected;
                var b = "mobile-installments" === this.getForm().attr("id");
                return a !== b },
            _updateInstallmentsForm: function(a) { a.installmentsSelected ? this._addInstallmentsInputs(a.installmentsProgramId) : this._removeInstallmentsInputs() },
            _addInstallmentsInputs: function(a) { f(this.$forms[0]).append(this.buildFormInputs("installments-programId", a)) },
            _removeInstallmentsInputs: function() { f(this.$forms[0]).find('> input[type="hidden"][name="installments-programId"]').remove() }
        })
    });
    g.when("CFG.BuyBoxMobileController", "CFG.BuyBoxFactory", "CFG.BuyBoxMobileView", "jQuery").register("CFG.BuyBoxMobileFactory", function(f, c, b, a) {
        return c.extend({ createController: function(a, b, c, k) {
                return new f(a, b, c, k) }, createView: function(e) {
                return new b(a(this._VIEW_SELECTOR), e) } }) });
    g.when("CFG.CustomSelectionFactory", "CFG.CustomSelectionMobileController").register("CFG.CustomSelectionMobileFactory", function(f, c) {
        return f.extend({
            createController: function(b, a, e) {
                return new c(b,
                    a, e)
            }
        })
    });
    g.when("CFG.CustomSelectionController", "jQuery", "CFG.ReftagHelper").register("CFG.CustomSelectionMobileController", function(f, c, b) {
        return f.extend({
            init: function(a, b, d) { this._super(a, b, d);
                this.$giftCheckbox = c('input[name="gift-wrap"]') },
            enable: function() {
                if (this._super()) {
                    var a = c('input[name="isToBeGiftWrapped"]')[0].value;
                    this.appState.getCustomOptions("isToBeGiftWrapped") !== a && this.appState.setCustomOption("isToBeGiftWrapped", a) } },
            onCustomClicked: function(a) {
                this._super(a);
                "isToBeGiftWrapped" === this.model.get("sectionAttribute") && (a = c(a.currentTarget).find("input").data("attr"), this.$giftCheckbox.attr("checked", a))
            }
        })
    });
    g.when("jQuery", "CFG.BaseController", "CFG.BaseView", "CFG.DeviceHelper", "CFG.ReftagHelper", "CFG.Strings", "ODSBuyboxManager", "CFG.DeviceSelectionController").register("CFG.DeviceSelectionMobileController", function(f, c, b, a, e, d, h, k) {
        return k.extend({
            init: function(a, b, d) { this._super(a, b, d) },
            onButtonClicked: function(b) {
                b = this._super(b);
                h.setPageAsin(b.twistItemAsin ?
                    b.twistItemAsin : a.NA_ASIN, b.twistOid)
            }
        })
    });
    g.when("jQuery", "CFG.DeviceSelectionMobileController", "CFG.DeviceSelectionFactory").register("CFG.DeviceSelectionMobileFactory", function(f, c, b) {
        return b.extend({ createController: function(a, b, d) {
                return new c(a, b, d) } }) });
    g.when("CFG.UpsellBlockModel", "CFG.UpsellHelper", "CFG.StringsHelper", "CFG.UpsellBlockHelper").register("CFG.UpsellBlockMobileModel", function(f, c, b, a) {
        return f.extend({
            init: function(a) { this._super(a) },
            prepare: function(e,
                d, c) { c = this._super(e, c);
                var f = this.get("asins"),
                    m = this.get("highlightAsin");
                c.addToCartBtnEnabled = a.isAsinAdded(m, f, e);
                c.addToCartBtnEnabled && d && a.isVariationAdded(f, e) && (c.addToCartBtnText = b.getReplaceButtonText(c.variationTitle));
                return c }
        })
    });
    g.when("jQuery", "CFG.UpsellBlockBaseController", "CFG.UpsellBlockHelper", "ODSBuyboxManager", "CFG.UpsellHelper", "CFG.ReftagHelper").register("CFG.UpsellBlockBaseMobileController", function(f, c, b, a, e, d) {
        return c.extend({
            init: function(a, b, d, e) {
                this._isMabbAvailable =
                    0 < f(".mabb-option").length;
                this._super(a, b, d, e)
            },
            enable: function() {
                var d = this._super();
                if (d && this._isMabbAvailable) {
                    var e = a.getUpsellAsins(),
                        c = this.model.get("asins");
                    if (e = b.getVariationAsinAdded(c, e)) this.highlightAsin(e), this.renderView() }
                return d },
            _onAddClicked: function() {
                var a = this.model.get("highlightAsin"),
                    c = e.getUpsell(a),
                    f = this.view.addToCartBtn.isEnabled();
                if (f && this._isMabbAvailable) {
                    var g = this.model.get("asins");
                    b.removeUpsellAsins(g, this.upsellState) }
                f && (this.upsellState.setUpsellAsin(c.getAsin(),
                    c.getOfferListingId(), 1), d.sendAccessoryAdded(a))
            },
            renderView: function() {
                var b = a.getUpsellAsins();
                this.view.render(this.model.prepare(b, this._isMabbAvailable, this.appState.getDeviceAttributes())) }
        })
    });
    g.when("jQuery", "CFG.UpsellBlockBaseMobileController", "CFG.UpsellBlockDropdownControllerSelector", "CFG.UpsellBlockSwatchControllerSelector", "CFG.UpsellBlockMobileModel", "CFG.UpsellBlockFactory", "CFG.UpsellBlockMobileView", "CFG.UpsellBlockSwatchViewSelector", "CFG.UpsellBlockDropdownViewSelector").register("CFG.UpsellBlockMobileFactory",
        function(f, c, b, a, e, d, h, k, m) {
            return d.extend({ createController: function(d, e, f, h, k) {
                    var m = c;
                    d === this._SWATCH ? m = a.selectSwatchController(c) : d === this._DROPDOWN && (m = b.selectDropdownController(c));
                    return new m(e, f, h, k) }, createModel: function(a) {
                    return new e(a) }, createView: function(a, b) {
                    var d = f(this._VIEW_SELECTOR + a),
                        e = h;
                    b === this._SWATCH ? e = k.selectSwatchView(e) : b === this._DROPDOWN && (e = m.selectDropdownView(e));
                    return new e(d, a) } }) });
    g.when("CFG.BuyBoxController", "function-utils", "jQuery", "CFG.DeviceHelper",
        "CFG.Strings", "CFG.ReftagHelper", "CFG.ShowBuyboxPopover", "A").register("CFG.BuyBoxDesktopController", function(f, c, b, a, e, d, h, k) {
        return f.extend({
            init: function(a, d, e, f) { this._super(a, d, e, f);
                this.renderView();
                this.onBuyBoxResize();
                this.doPrepare = !0;
                b(l).bind("scroll", this.proxy("onScroll", c.throttle(this.onScroll, 40)));
                b(l).bind("resize", this.proxy("onBuyBoxResize", c.throttle(this.onBuyBoxResize, 10)));
                var h = this;
                k.on("a:expander:configuratorAdditionalItemsExpander:toggle", function() { h.onBuyBoxResize() }) },
            enable: function() {
                var a = this._super();
                a && this.view.$scope.delegate("#cfg-bb-additional-items-expander-header", "click", this.proxy("onExpanderClicked", this.onExpanderClicked));
                return a },
            disable: function() {
                var a = this._super();
                a && this.view.$scope.undelegate("#cfg-bb-additional-items-expander-header", "click", this.proxy("onExpanderClicked", this));
                return a },
            onQuantityChanged: function(b) {
                var d = a.getAsinFromDeviceAttributes(this.appState.getDeviceAttributes());
                b = Number(b.value);
                d = a.getDevice(d).getMaxOrderLimit();
                h && b > d ? (this.appState.setSelectedQuantity(1), this._setUpsellQuantity(1, this.upsellState, !1), this._showPopover(d)) : (this.appState.setSelectedQuantity(b), this._setUpsellQuantity(b, this.upsellState, !1));
                this.renderView()
            },
            _showPopover: function(a) {
                var d = b("#quantitySelect")[0].item(a);
                this.view.popoverModal = this.view.preparePopoverModel(d, this.model.prepareBulkQuantityText(a), e["ods-quantity-restriction-title"]);
                this.view.popoverModal.show() },
            onScroll: function() {
                this.doPrepare && (this.prepareScroll(),
                    this.doPrepare = !1);
                var a = b(l),
                    d = a.scrollTop(),
                    a = a.scrollLeft();
                d > this.bottomTrig ? this.updateStickyScrollBottom(this.leftHeight - this.bbHeight) : d >= this.leftTop - 5 ? this.updateStickyScrollMiddle(this.rightPos - a, d) : this.updateStickyScrollTop()
            },
            onBuyBoxResize: function() { this.doPrepare = !0;
                this.onScroll() },
            onUpsellRemoveClicked: function(a) { this._super(a);
                this.onBuyBoxResize() },
            onExpanderClicked: function() { b(".cfg-bb-upsells-price").toggle() },
            prepareScroll: function() {
                this.bbHeight = this.view.$scope.height();
                this.leftTop = b("#cfg-left-col").offset().top;
                this.leftHeight = b("#cfg-left-col").height();
                this.rightPos = b("#cfg-right-col").offset().left;
                this.leftBottom = this.leftTop + this.leftHeight;
                this.leftPadding = b("#cfg-left-col").css("padding-top").replace("px", "");
                this.bottomTrig = this.leftBottom - this.bbHeight - this.leftPadding
            },
            updateStickyScrollTop: function() { this.view.$scope.removeClass("sticky");
                this.view.$scope.removeClass("bb-bottom") },
            updateStickyScrollMiddle: function(a, b) {
                this.view.$scope.addClass("sticky");
                this.view.$scope.removeClass("bb-bottom");
                this.view.$scope.css("left", a);
                this.view.$scope.css("top", 0)
            },
            updateStickyScrollBottom: function(a) { this.view.$scope.addClass("bb-bottom");
                this.view.$scope.removeClass("sticky");
                this.view.$scope.css("left", 0);
                this.view.$scope.css("top", a) },
            renderView: function() {
                var a = this._super();
                this.onBuyBoxResize();
                return a }
        })
    });
    g.when("CFG.BuyBoxDesktopController", "CFG.BuyBoxFactory", "CFG.BuyBoxDesktopView", "jQuery").register("CFG.BuyBoxDesktopFactory", function(f,
        c, b, a) {
        return c.extend({ createController: function(a, b, c, k) {
                return new f(a, b, c, k) }, createView: function(e) {
                return new b(a(this._VIEW_SELECTOR), e) } }) });
    g.when("jQuery", "CFG.UpsellBlockBaseDesktopController", "CFG.UpsellBlockSwatchControllerSelector", "CFG.UpsellBlockDropdownControllerSelector", "CFG.UpsellBlockDesktopModel", "CFG.UpsellBlockFactory", "CFG.UpsellBlockBaseDesktopView", "CFG.UpsellBlockSwatchViewSelector", "CFG.UpsellBlockDropdownViewSelector").register("CFG.UpsellBlockDesktopFactory",
        function(f, c, b, a, e, d, h, k, m) {
            return d.extend({ createController: function(d, e, f, h, k) {
                    var m = c;
                    d === this._SWATCH ? m = b.selectSwatchController(c) : d === this._DROPDOWN && (m = a.selectDropdownController(c));
                    return new m(e, f, h, k) }, createModel: function(a) {
                    return new e(a) }, createView: function(a, b) {
                    var d = f(this._VIEW_SELECTOR + a),
                        e = h;
                    b === this._SWATCH ? e = k.selectSwatchView(e) : b === this._DROPDOWN && (e = m.selectDropdownView(e));
                    return new e(d, a) } }) });
    g.when("CFG.UpsellBlockBaseController", "CFG.UpsellHelper", "CFG.ReftagHelper",
        "CFG.UpsellBlockHelper").register("CFG.UpsellBlockBaseDesktopController", function(f, c, b, a) {
        return f.extend({
            init: function(a, b, c, f) { this.upsellState = f;
                this._super(a, b, c, f) },
            enable: function() {
                var a = this._super();
                if (a) {
                    for (var b = this.upsellState.getUpsellAsins(), c = [], f = 0; f < b.length; f++) c[f] = b[f].asin;
                    this._onHighlightUpsellAsinsAdded(c) }
                return a },
            renderView: function() {
                var a = this.upsellState.getUpsellAsins();
                this.view.render(this.model.prepare(a, this.appState.getDeviceAttributes())) },
            _onAddClicked: function() {
                var e =
                    this.model.get("highlightAsin"),
                    d = c.getUpsell(e),
                    f = this.view.addToCartBtn.isEnabled(),
                    k = this.appState.getSelectedQuantity() || 1;
                f && (f = this.model.get("asins"), a.removeUpsellAsins(f, this.upsellState), this.upsellState.setUpsellAsin(d.getAsin(), d.getOfferListingId(), k), b.sendAccessoryAdded(e))
            }
        })
    });
    g.when("CFG.UpsellBlockModel", "CFG.UpsellHelper", "CFG.StringsHelper", "CFG.UpsellBlockHelper").register("CFG.UpsellBlockDesktopModel", function(f, c, b, a) {
        return f.extend({
            init: function(a) { this._super(a) },
            prepare: function(e, d) {
                var c = this._super(e, d),
                    f = this.get("asins"),
                    m = this.get("highlightAsin");
                c.addToCartBtnEnabled = a.isAsinAdded(m, f, e);
                c.addToCartBtnEnabled && a.isVariationAdded(f, e) && (c.addToCartBtnText = b.getReplaceButtonText(c.variationTitle));
                return c }
        })
    });
    g.when("jQuery", "CFG.UpsellBlockBaseView").register("CFG.UpsellBlockBaseDesktopView", function(f, c) {
        return c.extend({
            init: function(b, a) { this._super(b, a) },
            renderTitle: function(b) { this.$titleHyperlink.html(b) },
            renderHyperlink: function(b) {
                this.$titleHyperlink.attr("href",
                    "/gp/product/" + b + "/ref=kfg_acblk_lm")
            }
        })
    });
    g.when("CFG.AppController", "CFG.ReftagHelper", "CFG.DeviceHelper", "CFG.DeviceSelectionFactory", "CFG.CustomSelectionFactory", "CFG.UpsellBlockDesktopFactory", "CFG.UpsellFeaturedFactory", "CFG.BuyBoxDesktopFactory", "CFG.AppStateFactory", "CFG.UpsellStateDesktopFactory", "CFG.Section", "jQuery", "A").register("CFG.DesktopAppController", function(f, c, b, a, e, d, h, k, m, g, n, l, r) {
        return f.extend({
            init: function(a, b) {
                this._super.call(this, b, a);
                this._appState.setSelectedQuantity(b.quantity);
                this._initBuybox(a);
                this.enable()
            },
            _initBuybox: function(a) { this._controllers.push((new k).create(this._appState, a, this._upsellState)) },
            _resolveFactoryInterface: function(b) {
                switch (b) {
                    case n.SectionType.PROPERTY:
                        return new a;
                    case n.SectionType.CUSTOM:
                        return new e;
                    case n.SectionType.UPSELL_BLOCK:
                        return new d;
                    case n.SectionType.UPSELL_FEATURED:
                        return new h;
                    case n.SectionType.INFORMATIONAL:
                        break;
                    default:
                        throw Error("Section type " + b + " not supported!"); } },
            _initStateModels: function(a) {
                this._super(a);
                this._upsellState =
                    (new g).getUpsellState(a)
            },
            enable: function() { this._super() },
            disable: function() { this._super() }
        })
    });
    g.when("CFG.UpsellsData", "CFG.UpsellStateModel", "CFG.UpsellHelper", "A", "jQuery").register("CFG.UpsellStateDesktopModel", function(f, c, b, a, e) {
        function d(a, b, d) {
            var e = {};
            e.asin = a;
            e.offerId = b;
            e.quantity = d;
            return e }

        function h(a) {
            var c = [];
            e.each(a.dpAccAsinData, function(a, e) {
                if (e.selected) {
                    var f = e.asin,
                        h = e.quantity,
                        k = b.getUpsell(f).getOfferListingId(),
                        f = d(f, k, h);
                    c.push(f) } });
            a.upsellAsins = c }
        f =
            c.extend({
                init: function(a) { h(a);
                    this._super(a) },
                setUpsellAsin: function(a, b, e, c) {
                    if ("string" !== typeof a || 0 >= a.length) throw new TypeError("The asin argument is required");
                    var f = this.get("upsellAsins"),
                        h = this._indexOfAsin(a, b, f);
                    b = b || "";
                    e = "number" === typeof e ? Math.max(0, e) : 1;
                    if (0 <= h) b = f[h], 0 >= e ? f.splice(h, 1) : b.quantity = e;
                    else if (0 < e) e = d(a, b, e), f.push(e);
                    else return !1;
                    this._properties.upsellAsins = f;
                    c || this.emit("upsellAsins.changed", a);
                    return !0 },
                _indexOfAsin: function(a, b, d) {
                    b = b || "";
                    for (var e = 0; e < d.length; e++)
                        if (d[e].asin ===
                            a && d[e].offerId === b) return e;
                    return -1
                },
                getUpsellAsins: function() {
                    return this.get("upsellAsins") }
            });
        f.UPSELL_ASINS_CHANGED = "upsellAsins.changed";
        f.UPSELL_ASINS_DATA = "upsellAsins";
        return f
    });
    g.when("CFG.UpsellStateFactory", "CFG.UpsellStateModel", "CFG.UpsellStateDesktopModel").register("CFG.UpsellStateDesktopFactory", function(f, c, b) {
        return f.extend({
            getUpsellState: function(a) {
                var e = new b(a);
                a = this._super(e);
                a.registerUpsellAsinChanged = function(a) { e.on(b.UPSELL_ASINS_CHANGED, a) };
                a.unregisterUpsellAsinChanged =
                    function(a) { e.off(b.UPSELL_ASINS_CHANGED, a) };
                a.setUpsellAsin = function(a, b, c, f) { e.setUpsellAsin(a, b, c, f) };
                a.getUpsellAsins = function() {
                    return e.getUpsellAsins() };
                return a
            }
        })
    });
    g.when("jQuery", "CFG.BuyBoxView", "CFG.ShowBuyboxPopover", "a-modal", "A", "CFG.ReftagHelper").register("CFG.BuyBoxDesktopView", function(f, c, b, a, e, d) {
        return c.extend({
            init: function(a, b) {
                this._super(a, b);
                this.$accessoriesHiddenInputs = this.$forms.find("#cfg-accessories-hidden-fields");
                this.$deviceHiddenInputs = this.$forms.find("#cfg-devices-hidden-fields");
                this.$deviceAsinInput = this.$deviceHiddenInputs.find('> input[type="hidden"][name="ASIN"]');
                this.$deviceOfferListingInput = this.$deviceHiddenInputs.find('> input[type="hidden"][name="offerListingID"]');
                this.$deviceQuantity = this.$deviceHiddenInputs.find('> input[type="hidden"][name="quantity"]');
                this.$gifting = this.$deviceHiddenInputs.find('> input[type="hidden"][name="isToBeGiftWrapped"]');
                this.$upsellsPrice = this.$scope.find(".cfg-bb-upsells-price")
            },
            preparePopoverModel: function(b, d, e) {
                return a.create(b, { inlineContent: d, width: 502, header: e })
            },
            render: function(a) { this._super(a);
                var d = "true" === a.customFields[0].value,
                    e = a.selectedQuantity;
                this._updateUpsellInputs(a.upsells.list, d, e);
                this._updateDeviceAsin(a.deviceAsinData, d, e);
                this._updateInstallments(a.installments);
                this._updateQuantityDropdown(a.installments, a.maxQuantity, e, b) },
            renderPrices: function(a) { this._super(a);
                this.$upsellsPrice.text(a.subTotalUpsellsPrice) },
            _updateDeviceAsin: function(a, b, d) {
                var e = a.getAsin();
                a = a.getOfferListingId();
                this.$deviceAsinInput.val(e);
                this.$deviceOfferListingInput.val(a);
                this.$deviceQuantity.val(d);
                this.$gifting.val(b)
            },
            _updateInstallments: function(a) { this._updateInstallmentsInputs(a);
                this._updateFormReftag(a.installmentsSelected) },
            _updateInstallmentsInputs: function(a) {
                var b = "",
                    d = this.$deviceHiddenInputs.find('> input[type="hidden"][name="installments-programId"]'),
                    e = this.$deviceHiddenInputs.find('> input[type="hidden"][name="isInstallmentsSelected"]'),
                    c = this.$deviceHiddenInputs.find('> input[type="hidden"][name="installmentsProgram"]');
                a.installmentsSelected ? 0 === d.length && 0 === e.length ? (b += this.buildFormInputs("installments-programId", a.installmentsProgramId), b += this.buildFormInputs("isInstallmentsSelected", a.installmentsSelected ? 1 : 0), b += this.buildFormInputs("installmentsProgram", a.installmentsProgramId), this.$deviceHiddenInputs.append(b)) : (d.val(a.installmentsProgramId), e.val(a.installmentsSelected ? 1 : 0)) : (d.remove(), e.remove(), c.remove())
            },
            _updateUpsellInputs: function(a, b, d) {
                this.$accessoriesHiddenInputs.empty();
                for (var e = "", c =
                        0; c < a.length; c++) var f = a[c].offerListingId,
                    g = c + 1,
                    e = e + (this.buildFormInputs("asin." + g, a[c].asin) + this.buildFormInputs("offeringID." + g, f) + this.buildFormInputs("quantity." + g, d)),
                    e = e + (b ? this.buildFormInputs("isToBeGiftWrapped." + g, !0) : this.buildFormInputs("isToBeGiftWrapped." + g, !1));
                this.$accessoriesHiddenInputs.append(e)
            },
            _updateFormReftag: function(a) { a = d.buildAtcReftag(a);
                var b = this.$forms.attr("action"),
                    e = b.indexOf("ref="),
                    b = 0 <= e ? b.substring(0, e + 4) : b + "/ref=";
                this.$forms.attr("action", b + a) }
        })
    })
});
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        q = l._namespace || l.attributeErrors,
        f = q ? q("DetailPagePromotionalBundleAssets") : l;
    f.guardFatal ? f.guardFatal(g)(f, window) : f.execute(function() { g(f, window) }) })(function(g, l, q) { g.when("A", "ready").execute("kbpMobileExpander", function(f) {
        var c = f.$;
        c(".pb-bundle-section-expander").click(function(b) { c(".pb-bundle-mobile-box").removeClass("aok-hidden");
            c(".pb-bundle-expander-box").addClass("aok-hidden") }) }) });
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        q = l._namespace || l.attributeErrors,
        f = q ? q("DetailPageComparisonChartAssets") : l;
    f.guardFatal ? f.guardFatal(g)(f, window) : f.execute(function() { g(f, window) }) })(function(g, l, q) {});
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        q = l._namespace || l.attributeErrors,
        f = q ? q("DetailPageAccessoryUpsellAssets") : l;
    f.guardFatal ? f.guardFatal(g)(f, window) : f.execute(function() { g(f, window) }) })(function(g, l, q) {
    g.when("desktop-accessory-upsell-model", "desktop-accessory-upsell-view", "desktop-accessory-upsell-controller").register("desktop-accessory-upsell-factory", function(f, c, b) {
        return { get: function(a, e) {
                var d = new c(a),
                    h = new f(e);
                return new b(a, d, h) } } });
    g.when("A").register("desktop-accessory-upsell-model",
        function(f) {
            return f.createClass({
                init: function(c) { this._asinsData = c;
                    this._buildScheduledAsinCache(this._asinsData) },
                getAsinsData: function() {
                    return this._asinsData },
                getInterstitialAsinsData: function() {
                    return this._interstitialAsinsData },
                getScheduledAsinFromVariationAsin: function(c) {
                    return this._scheduledAsins[c] },
                getVariationAsinsFromScheduledAsin: function(c) {
                    return this._scheduledVariationsAsins[c] },
                _buildScheduledAsinCache: function(c) {
                    this._scheduledAsins = {};
                    this._scheduledVariationsAsins = {};
                    this._interstitialAsinsData = {};
                    for (var b in c)
                        if (c.hasOwnProperty(b)) { this._scheduledVariationsAsins[b] = [];
                            for (var a in c[b]) c[b].hasOwnProperty(a) && (this._scheduledVariationsAsins[b].push(a), this._scheduledAsins[a] = b, c[b][a].isInterstitial && (this._interstitialAsinsData[b] = c[b])) }
                }
            })
        });
    g.when("a-modal", "A").register("desktop-accessory-upsell-view", function(f, c) {
        return c.createClass({
            init: function(b) { this.$el = b },
            _getOptionElement: function(b) {
                return this.$el.find("#abb-option-" + b) },
            _updateOptionRow: function(b) {
                var a =
                    this._getOptionElement(b.optionAsin);
                a.find(".abb-selected-variation").html(b.variationText);
                a.find(".abb-option-list-price").html(b.listPriceString);
                a.find(".abb-option-buying-price").html(b.buyingPriceString)
            },
            _toggleProduct: function(b) {
                var a = this._getOptionElement(b.optionAsin).find(".abb-option-checkbox input[type='checkbox']");
                b.isProductSelected ? a.attr("checked", !0) : a.removeAttr("checked") },
            _hidePopover: function(b) { b = this.$el.find("#abb-popover-trigger-" + b.optionAsin);
                (b = f.get(b)) && b.hide() },
            render: function(b) { this._toggleProduct(b);
                b.isProductSelected && (this._updateOptionRow(b), this._hidePopover(b)) },
            deselectAllProducts: function() { this.$el.find(".abb-option-checkbox input[type='checkbox']").removeProp("checked") }
        })
    });
    g.when("desktop-accessory-upsell-product-factory", "desktop-accessory-upsell-interstitial-factory", "desktop-accessory-upsell-ref-helper", "accessory-upsell-dom-helper", "accessory-upsell-buybox-helper", "A").register("desktop-accessory-upsell-controller", function(f,
        c, b, a, e, d) {
        var h = d.$;
        return d.createClass({
            init: function(b, m, g) {
                this.$el = b;
                this._view = m;
                this._model = g;
                this._subControllers = {};
                this._interstitialController;
                e.reset();
                a.processMarkupForDabb();
                e.parsePageAsin();
                b = 0;
                m = this._model.getAsinsData();
                e.registerAccessoryUpsellData(m);
                for (var n in m) m.hasOwnProperty(n) && (g = f.get(n, m[n], b), g.setOnOrderUpdate(h.proxy(this._handleOrderUpdate, this)), this._subControllers[n] = g, b++);
                n = this._model.getInterstitialAsinsData();
                d.objectIsEmpty(n) || (this._interstitialController =
                    c.get(n));
                this._bindEvents();
                this._updateDefaultCheckedAccessories()
            },
            _bindEvents: function() {
                var b = this;
                g.when("ready").execute("accessory-upsell-controller-bindEvents", function() { b._loadSubControllerInitialImages.apply(b);
                    b._interstitialController && b._interstitialController.loadInitialImages();
                    a.getPageQuantityDropdown().change(function() {
                        var a = parseInt(h(this).val(), 10);
                        e.updateSelectedAsinsQuantity(a) }) });
                this._bindedFn = {
                    handleCheckboxChange: h.proxy(this._handleCheckboxChange, this),
                    onBuyboxUpsellAsinsChanged: h.proxy(this._onBuyboxUpsellAsinsChanged,
                        this)
                };
                this._enableEvents(!0)
            },
            _enableEvents: function(a) { a = a ? "" : "un";
                e[a + "registerUpsellAsinRemoved"](this._bindedFn.onBuyboxUpsellAsinsChanged);
                e[a + "registerUpsellAsinAdded"](this._bindedFn.onBuyboxUpsellAsinsChanged);
                this.$el[a + "delegate"](".abb-option-checkbox input[type='checkbox']", "change", this._bindedFn.handleCheckboxChange) },
            _addAsin: function(a, b, d) {
                var c = this._model.getScheduledAsinFromVariationAsin(a);
                this._model.getVariationAsinsFromScheduledAsin(c);
                e.addUpsellAsin(a, b, d) },
            _onBuyboxUpsellAsinsChanged: function(a,
                b, d) { b = this._model.getScheduledAsinFromVariationAsin(a);
                var e = this._subControllers[b];
                d = 0 < d;
                e && (e.setAddedToOrderState(d), d && e.selectAsin(a), this._internalRender(b, e.getCurrentProduct(), d)) },
            _handleCheckboxChange: function(d, c, f) {
                c = c || h(d.currentTarget);
                d = c.parents(".abb-option").data("asin");
                var g = c.is(":checked");
                c = this._subControllers[d];
                var l = c.getIndex(),
                    r = c.getCurrentProduct();
                c.setAddedToOrderState(g);
                g ? (g = parseInt(a.getPageQuantityDropdown().val(), 10), this._addAsin(r.asin, r.offerListingID,
                    g), b.sendCheckboxSelected(l, r.asin)) : (e.removeUpsellAsin(r.asin, r.offerListingID), b.sendCheckboxDeselected(l, r.asin));
                f || !r.checkForInteraction || r.hasBeenInteractedWith || c.setHasBeenInteractedWith(d)
            },
            _handleOrderUpdate: function(a, b) {
                var d = parseInt(h('#addToCart select[name="quantity"]').val(), 10);
                this._addAsin(b.asin, b.offerListingID, d) },
            _internalRender: function(a, b, d) { a = this._generateOptionViewModel(a, b, d);
                this._view.render(a) },
            _generateOptionViewModel: function(a, b, d) {
                var e = !1,
                    c = "",
                    f = "",
                    h = "";
                b &&
                    (c = (e = b.showPriceStrikethrough) ? b.listPrice : "", f = b.buyingPrice, h = b.swatchValue);
                return { optionAsin: a, isProductSelected: d, isOnSale: e, listPriceString: c, buyingPriceString: f, variationText: h }
            },
            _loadSubControllerInitialImages: function() {
                for (var a in this._subControllers) this._subControllers.hasOwnProperty(a) && this._subControllers[a].loadInitialImages() },
            _updateDefaultCheckedAccessories: function() {
                var a = this;
                a.$el.find(".abb-option-checkbox input[type='checkbox']:checked").each(function() {
                    a._handleCheckboxChange(null,
                        h(this), !0)
                })
            }
        })
    });
    g.when("desktop-accessory-upsell-product-model", "desktop-accessory-upsell-product-controller", "desktop-accessory-upsell-product-view", "A").register("desktop-accessory-upsell-product-factory", function(f, c, b, a) {
        return { get: function(e, d, h) {
                var k = a.$("#abb-product-view-" + e),
                    m = new b(k);
                d = new f(d, e, h);
                return new c(k, e, m, d) } } });
    g.when("A").register("desktop-accessory-upsell-product-model", function(f) {
        return f.createClass({
            init: function(c, b, a) {
                this._products = c;
                this._index = a;
                this._isViewClosedByOrderUpdate = this._isAddedToOrder = this._preloadingComplete = !1;
                this._cachedAsin = null;
                this._isVisual = this._calculateIsVisual(b);
                this.setSelectedProduct(b)
            },
            _calculateIsVisual: function(c) {
                return (c = this._products[c]) ? c.visualDimension : !1 },
            cacheSelectedProduct: function() {
                var c = this.getSelectedProduct(); "undefined" !== typeof c && (this._cachedAsin = c.asin) },
            setSelectedProductFromCache: function() { this.setSelectedProduct(this._cachedAsin) },
            clearSelectedProductCache: function() {
                this._cachedAsin =
                    null
            },
            setSelectedProduct: function(c) {
                if (c)
                    for (var b in this._products) this._products.hasOwnProperty(b) && (this._products[b].isSelected = b === c) },
            getSelectedProduct: function() {
                for (var c in this._products)
                    if (this._products.hasOwnProperty(c)) {
                        var b = this._products[c];
                        if (b.isSelected) return f.copy(b) } },
            getProduct: function(c) {
                var b = null,
                    a;
                for (a in this._products)
                    if (this._products.hasOwnProperty(a) && a === c) { b = this._products[a];
                        break }
                return b },
            isSelectedProduct: function(c) {
                return (c = this._products[c]) && c.isSelected },
            isVisual: function() {
                return this._isVisual },
            setAddedToOrderState: function(c) { this._isAddedToOrder = c },
            isAddedToOrderState: function() {
                return this._isAddedToOrder },
            getAllLowResImages: function() {
                var c = [],
                    b;
                for (b in this._products) this._products.hasOwnProperty(b) && c.push(this._products[b].lowResImage.URL_);
                return c },
            isPreloadingComplete: function() {
                return this._preloadingComplete },
            completePreloading: function() { this._preloadingComplete = !0 },
            getIndex: function() {
                return this._index },
            isViewClosedByOrderUpdate: function() {
                return this._isViewClosedByOrderUpdate },
            setViewClosedByOrderUpdate: function(c) { this._isViewClosedByOrderUpdate = c },
            setHasBeenInteractedWith: function(c) { this._products.hasOwnProperty(c) && (this._products[c].hasBeenInteractedWith = !0) }
        })
    });
    g.when("A").register("desktop-accessory-upsell-product-view", function(f) {
        var c = f.$;
        return f.createClass({
            init: function(b) { this.$baseElement = b;
                this.$variations = this.$baseElement.find(".abb-variation") },
            updateTargetElement: function(b, a) {
                this.$el = b;
                this.$el.find(".abb-product-view").toggleClass("abb-product-is-selected",
                    a)
            },
            _updateSelectedVariation: function(b) { this.$variations.removeClass("a-button-selected");
                this.$variations.filter(".abb-variation-" + b).addClass("a-button-selected") },
            render: function(b) {
                var a = this._buildFeatureBullets(b.featureBullets);
                this._updateElements(this.$el, b, a.clone());
                this._updateSelectedVariation(b.asin) },
            updateBase: function(b) {
                var a = this._buildFeatureBullets(b.featureBullets);
                this._updateElements(this.$baseElement, b, a.clone());
                this.$baseElement.find(".abb-variation-" + b.asin).trigger("click") },
            _updateElements: function(b, a, e) { b.find(".abb-product-title").text(a.title);
                b.find(".abb-product-merchant").text(a.merchant);
                b.find(".abb-product-list-price").html(a.isOnSale ? a.listPriceString : "");
                b.find(".abb-product-buying-price").html(a.buyingPriceString);
                b.find(".abb-variation-selected-dimension").text(a.swatchValue);
                b.find(".abb-product-feature-bullets").html(e) },
            _buildFeatureBullets: function(b) {
                for (var a = c("<ul>"), e = 0; e < b.length; e++) c("<li>").text(b[e]).appendTo(a);
                return a },
            updateProductImage: function(b) {
                setTimeout(function() {
                    this.$el.find(".abb-product-image").attr("src",
                        b);
                    this.$baseElement.find(".abb-product-image").attr("src", b)
                }.bind(this), 100)
            }
        })
    });
    g.when("desktop-accessory-upsell-ref-helper", "ods-image-utilities", "A").register("desktop-accessory-upsell-product-controller", function(f, c, b) {
        var a = b.$;
        return b.createClass({
            init: function(e, d, c, f) {
                this.$baseElement = e;
                this._scheduledAsin = d;
                this._view = c;
                this._model = f;
                this.$el;
                this.popoverInstance;
                this._selectedProduct = this._model.getSelectedProduct();
                b.on("a:button-group:abb-product-variations-" + this._scheduledAsin +
                    ":toggle", a.proxy(this._handleVariationSelection, this));
                b.on("a:popover:beforeShow:abb-product-view-" + this._scheduledAsin, a.proxy(this._preparePopover, this));
                b.on("a:popover:show:abb-product-view-" + this._scheduledAsin, a.proxy(this._bindEvents, this));
                b.on("a:popover:afterHide:abb-product-view-" + this._scheduledAsin, a.proxy(this._detachPopover, this))
            },
            _preparePopover: function(b) {
                this.$el = b.popover.$popover;
                this.popoverInstance = b.popover;
                this._model.cacheSelectedProduct();
                this._model.setViewClosedByOrderUpdate(!1);
                this._model.setHasBeenInteractedWith(this._scheduledAsin);
                this._view.updateTargetElement(this.$el, this._model.isAddedToOrderState());
                if (!this._model.isPreloadingComplete()) {
                    var d = this;
                    b = c.preloadImages(this._model.getAllLowResImages());
                    a.when.apply(a, b).done(function() { d._model.completePreloading() }) }
                this.renderView();
                f.sendPopoverDisplayed(this._model.getIndex(), this._model.getSelectedProduct().asin)
            },
            _bindEvents: function() {
                this.$el.delegate(".abb-product-ato", "click", a.proxy(this._handleAddToOrderClick,
                    this));
                this.$el.delegate(".abb-variation input[name].a-button-input", "mouseover", a.proxy(this._handleVariationMouseover, this));
                this.$el.delegate(".abb-variation input[name].a-button-input", "mouseout", a.proxy(this._handleVariationMouseout, this))
            },
            _detachPopover: function() {
                this.$el && (this.$el.undelegate(".abb-product-ato", "click", a.proxy(this._handleAddToOrderClick, this)), this.$el.undelegate(".abb-variation input[name].a-button-input", "mouseover", a.proxy(this._handleVariationMouseover, this)), this.$el.undelegate(".abb-variation input[name].a-button-input",
                    "mouseout", a.proxy(this._handleVariationMouseout, this)));
                this.popoverInstance = this.$el = q;
                this._model.isViewClosedByOrderUpdate() || (this._model.setSelectedProductFromCache(), f.sendPopoverCancelled(this._model.getIndex(), this._model.getSelectedProduct().asin));
                this._model.clearSelectedProductCache()
            },
            _handleVariationSelection: function(a) {
                var b;
                a.selectedButton && (b = a.selectedButton.buttonName);
                b && (this.selectAsin(b), this._selectedProduct = this._model.getSelectedProduct(), this.renderView(), f.sendPopoverTwisted(this._model.getIndex(),
                    b))
            },
            _handleVariationMouseover: function(b) {
                var d;
                (b = a(b.target)) && b.length && (d = b.attr("name"));
                d && d !== this._selectedProduct.asin && (this._model.getProduct(d), this.selectAsin(d), this.renderView()) },
            _handleVariationMouseout: function(a) { this.selectAsin(this._selectedProduct.asin);
                this.renderView() },
            _handleAddToOrderClick: function() {
                var a = this._model.getSelectedProduct(),
                    b = this._model.isAddedToOrderState();
                this._orderUpdateCallback && this._orderUpdateCallback(this._scheduledAsin, a);
                this._model.setAddedToOrderState(!0);
                this._model.setViewClosedByOrderUpdate(!0);
                this._view.updateBase(this._generateViewModel(a));
                b ? f.sendUpdateClicked(this._model.getIndex(), a.asin) : f.sendAddToOrderClicked(this._model.getIndex(), a.asin);
                this.$el.addClass("abb-product-is-selected");
                this.popoverInstance.hide()
            },
            _handleLowResImageLoaded: function(a, b) {
                var c = this._model.getSelectedProduct();
                a && a.isResolved() || c.lowResImage.URL_ !== b || this._view.updateProductImage(b) },
            _handleHiResImageLoaded: function(a) {
                this._model.getSelectedProduct().hiResImage.URL_ ===
                    a && this._view.updateProductImage(a)
            },
            _handleImageLoadFailure: function(a) {
                throw Error("The image " + a + " failed to load for accessory ASIN " + this._scheduledAsin); },
            _generateViewModel: function(a) {
                return { asin: a.asin, title: a.title, merchant: a.merchantName, swatchValue: a.swatchValue, featureBullets: a.featureBullets, listPriceString: a.listPrice, buyingPriceString: a.buyingPrice, isOnSale: a.showPriceStrikethrough } },
            _loadProductImage: function(b) {
                b = c.preloadImage(b.lowResImage.URL_, b.hiResImage.URL_);
                b.image.done(a.proxy(this._handleLowResImageLoaded,
                    this, b.hiResImage)).fail(a.proxy(this._handleImageLoadFailure, this, b.hiResImage));
                b.hiResImage && b.hiResImage.done(a.proxy(this._handleHiResImageLoaded, this)).fail(a.proxy(this._handleImageLoadFailure, this))
            },
            loadInitialImages: function() { b.loadDescendantImagesManually(this.$baseElement) },
            setOnOrderUpdate: function(a) { this._orderUpdateCallback = a },
            getCurrentProduct: function() {
                return this._model.getSelectedProduct() },
            setAddedToOrderState: function(a) { this._model.setAddedToOrderState(a) },
            selectAsin: function(a) {
                var b =
                    this._model.getSelectedProduct();
                b && b.asin !== a && this._model.setSelectedProduct(a)
            },
            renderView: function() {
                var a = this._model.getSelectedProduct();
                this._model.isVisual() && this._loadProductImage(a);
                this._view.render(this._generateViewModel(a)) },
            getIndex: function() {
                return this._model.getIndex() },
            setHasBeenInteractedWith: function(a) { this._model.setHasBeenInteractedWith(a) }
        })
    });
    g.when("desktop-accessory-upsell-interstitial-model", "desktop-accessory-upsell-interstitial-view", "desktop-accessory-upsell-interstitial-controller",
        "A").register("desktop-accessory-upsell-interstitial-factory", function(f, c, b, a) {
        return { get: function(e) {
                var d = a.$("#abb-interstitial"),
                    h = new c(d);
                e = new f(e);
                return new b(d, h, e) } } });
    g.when("A").register("desktop-accessory-upsell-interstitial-model", function(f) {
        return f.createClass({
            init: function(c) { this._interstitialAsinsData = c;
                this._scheduledAsins = {};
                this._scheduledVariationsAsins = {};
                this._interstitialProducts = {};
                this._buildScheduledAsinCache(c) },
            getInterstitialAsinsData: function() {
                return this._interstitialAsinsData },
            getInterstitialProducts: function() {
                return this._interstitialProducts },
            getScheduledAsinFromVariationAsin: function(c) {
                return this._scheduledAsins[c] },
            getVariationAsinsFromScheduledAsin: function(c) {
                return this._scheduledVariationsAsins[c] },
            _buildScheduledAsinCache: function(c) {
                this._scheduledAsins = {};
                this._scheduledVariationsAsins = {};
                this._interstitialProducts = {};
                for (var b in c)
                    if (c.hasOwnProperty(b)) {
                        this._scheduledVariationsAsins[b] = [];
                        this._interstitialProducts[b] = c[b][b];
                        for (var a in c[b]) c[b].hasOwnProperty(a) &&
                            (this._scheduledVariationsAsins[b].push(a), this._scheduledAsins[a] = b)
                    }
            }
        })
    });
    g.when("a-modal", "A").register("desktop-accessory-upsell-interstitial-view", function(f, c) {
        return c.createClass({
            init: function(b) { this.$baseElement = b;
                this.$productSections = this.$baseElement.find(".abb-intl-product-view,.abb-intl-product-terms") },
            render: function(b) { this.$productSections.hide();
                b = b.asinsToShow;
                for (var a = 0; a < b.length; a++) this._getProductSection(b[a]).show() },
            getCheckedProductCheckboxes: function() {
                return this.$baseElement.find(".abb-intl-product-ato input[type='checkbox']:checked") },
            getAllVisibleProductCheckboxes: function() {
                return this.$baseElement.find(".abb-intl-product-ato input[type='checkbox']:visible") },
            _getProductSection: function(b) {
                return this.$baseElement.find("#abb-intl-product-view-" + b + "," + ("#abb-intl-product-terms-" + b)) }
        })
    });
    g.when("desktop-accessory-upsell-ref-helper", "ods-image-utilities", "accessory-upsell-dom-helper", "accessory-upsell-buybox-helper", "a-modal", "A").register("desktop-accessory-upsell-interstitial-controller", function(f, c, b, a, e, d) {
        var h =
            d.$;
        return d.createClass({
            init: function(a, b, c) { this.$baseElement = a;
                this._view = b;
                this._model = c;
                this.popoverInstance = e.get("abb-interstitial");
                this.$el;
                this.$clickedSubmitButton;
                var f = this.wasInterstitialOfferAccepted = !1;
                this.asinsToShow = d.map(this._model.getInterstitialProducts(), function(a, b) { a.checkForInteraction && (f = !0);
                    return b });
                this.hasCheckForInteractionAsin = f;
                this._bindEvents() },
            _bindEvents: function() {
                var a = this;
                g.when("ready").execute("accessory-upsell-interstitial-controller-bindEvents",
                    function() { b.getSubmitButtons().forEach(function(b) {
                            (b.selector.includes("input#add-to-cart-button") || b.selector.includes("input#one-click-button") && a.hasCheckForInteractionAsin || b.selector.includes("input#buy-now-button") && a.hasCheckForInteractionAsin) && b.bind("click", h.proxy(a._handleAtcSubmit, a)) }) })
            },
            _handleAtcSubmit: function(a) {
                this.$clickedSubmitButton = h(a.target);
                0 < this._getInterstitialAsinsToShow().length && (a.preventDefault(), this.$clickedSubmitButton.unbind("click", h.proxy(this._handleAtcSubmit,
                    this)), this._showIntlPopover.apply(this))
            },
            _getInterstitialAsinsToShow: function() {
                for (var b = [], d = a.getUpsellAsins(), d = this.getParentAsins(d), e = 0; e < this.asinsToShow.length; e++) {
                    var c = this.asinsToShow[e],
                        f = this._model.getScheduledAsinFromVariationAsin(c),
                        h = this._model.getInterstitialAsinsData()[f][c];
                    h.checkForInteraction ? h.hasBeenInteractedWith || (b.push(c), this.autoCheckInterstitial = !0) : -1 === d.indexOf(f) && b.push(c) }
                return this.asinsToShow = b },
            _showIntlPopover: function() {
                d.on("a:popover:beforeShow:abb-interstitial",
                    h.proxy(this._popoverBeforeShow, this));
                d.on("a:popover:show:abb-interstitial", h.proxy(this._popoverOnShow, this));
                d.on("a:popover:hide:abb-interstitial", h.proxy(this._popoverOnHide, this));
                this.popoverInstance.show()
            },
            _popoverBeforeShow: function(a) { this.renderView() },
            _popoverOnShow: function(a) {
                this.$el = a.popover.$popover;
                this.$el.delegate(".abb-intl-ato", "click", h.proxy(this._handleIntlAddToOrderClick, this));
                this.$el.delegate(".abb-intl-decline", "click", h.proxy(this._handleIntlDeclineClick, this));
                1 ==
                    this._getInterstitialAsinsToShow().length && this.autoCheckInterstitial && this.$el.find(".abb-intl-product-ato input[type='checkbox']").prop("checked", !0)
            },
            _popoverOnHide: function(a) { this.wasInterstitialOfferAccepted || f.sendInterstitialOfferDeclined(-1, "");
                this.$clickedSubmitButton.click() },
            _handleIntlAddToOrderClick: function(d) {
                d = this._view.getAllVisibleProductCheckboxes();
                var e = this._view.getCheckedProductCheckboxes(),
                    c = parseInt(b.getPageQuantityDropdown().val(), 10);
                this.wasInterstitialOfferAccepted =
                    0 < e.length;
                d.each(function(b, d) {
                    var e = h(this).closest(".abb-intl-product-ato").data("asin"),
                        k = a.getProductData(e);
                    if (!k) return !0;
                    h(this).is(":checked") ? (a.addUpsellAsin(e, k.offerListingID, c), f.sendInterstitialItemAdded(-1, e)) : a.removeUpsellAsin(e, k.offerListingID) });
                this.popoverInstance.hide()
            },
            _handleIntlDeclineClick: function(a) { this.wasInterstitialOfferAccepted = !1;
                this.popoverInstance.hide() },
            _generateViewModel: function() {
                return { asinsToShow: this.asinsToShow } },
            loadInitialImages: function() { d.loadDescendantImagesManually(this.$baseElement) },
            renderView: function() { this._view.render(this._generateViewModel()) },
            getParentAsins: function(a) {
                for (var b = [], d = 0; d < a.length; d++) {
                    var e = this._model.getScheduledAsinFromVariationAsin(a[d].asin);
                    b.push(e) }
                return b }
        })
    });
    g.when("odsRefTagUtils", "accessory-upsell-buybox-helper", "A").register("desktop-accessory-upsell-ref-helper", function(f, c, b) {
        function a(a, b, g) {
            var n = c.getPageAsin().asin;
            n && n.length && (a = ("ods_dabb_" + n + "_slot{{index}}_{{asin}}_{{action}}").replace(e, a).replace(d, b).replace(h,
                g), f.send(a))
        }
        var e = /{{\s?index\s?}}/ig,
            d = /{{\s?asin\s?}}/ig,
            h = /{{\s?action\s?}}/ig;
        return {
            sendCheckboxSelected: function(b, d) { a(b, d, "checkoxSelected") },
            sendCheckboxDeselected: function(b, d) { a(b, d, "checkoxDeselected") },
            sendSecondaryViewDisplayed: function(b, d) { a(b, d, "secondaryViewDisplayed") },
            sendSecondaryViewTwisted: function(b, d) { a(b, d, "secondaryViewTwisted") },
            sendSecondaryViewCancelled: function(b, d) { a(b, d, "secondaryViewCancelled") },
            sendPopoverDisplayed: function(b, d) { a(b, d, "popoverDisplayed") },
            sendPopoverTwisted: function(b,
                d) { a(b, d, "popoverTwisted") },
            sendPopoverCancelled: function(b, d) { a(b, d, "popoverCancelled") },
            sendAddToOrderClicked: function(b, d) { a(b, d, "addToOrderClicked") },
            sendInterstitialItemAdded: function(b, d) { a(b, d, "interstitialItemAdded") },
            sendInterstitialOfferDeclined: function(b, d) { a(b, d, "interstitialOfferDeclined") },
            sendUpdateClicked: function(b, d) { a(b, d, "updateClicked") }
        }
    });
    g.when("A").register("accessory-upsell-dom-helper", function(f) {
        var c = f.$;
        return new function() {
            function b(a, b) {
                return c("<input>").attr({
                    type: "hidden",
                    name: a,
                    value: b
                })
            }

            function a() { d.hiddenFieldsContainer.empty() }
            var e = !1,
                d = {};
            return {
                processMarkupForDabb: function() {
                    var a = c("#accessory-upsell");
                    a.find(".abb-option-checkbox input[type='checkbox']").removeAttr("name").removeAttr("value");
                    a.find('input[name^="asin."]').remove();
                    a.find('input[name^="offeringID."]').remove();
                    a.find('input[name^="quantity."]').remove() },
                parsePageAsinData: function() {
                    if (!e) {
                        d.buyboxForm = c("form#addToCart");
                        d.submitButton = d.buyboxForm.find('input#add-to-cart-button[name="submit.add-to-cart"]');
                        d.installmentsSubmitButton = d.buyboxForm.find('input#installments-button[name="submit.installments"]');
                        d.oneClickSubmitButton = d.buyboxForm.find('input#one-click-button[name="submit.one-click-order.x"]');
                        d.buyNowSubmitButton = d.buyboxForm.find('input#buy-now-button[name="submit.buy-now"]');
                        d.pageAsinInput = d.buyboxForm.find('input[type="hidden"][name="ASIN"]');
                        d.pageOfferIdInput = d.buyboxForm.find('input[type="hidden"][name="offerListingID"]');
                        d.pageQuantityDropdown = d.buyboxForm.find('select[name="quantity"]');
                        var a = d.buyboxForm,
                            b = a.find(".buyboxHelperHiddenFieldsContainer");
                        0 === b.length && (b = c("<div>").addClass("buyboxHelperHiddenFieldsContainer"), a.append(b));
                        d.hiddenFieldsContainer = b;
                        e = !0
                    }
                    var a = d.pageAsinInput.val(),
                        b = d.pageOfferIdInput.val(),
                        f = d.pageQuantityDropdown.val() && d.pageQuantityDropdown.val().trim() ? parseInt(d.pageQuantityDropdown.val().trim(), 10) : 1;
                    return { asin: a, offerId: b, quantity: f }
                },
                getSubmitButtons: function() {
                    return [d.submitButton, d.oneClickSubmitButton, d.buyNowSubmitButton] },
                getPageQuantityDropdown: function() {
                    return d.pageQuantityDropdown },
                renderUpsellAsinsHiddenInputs: function(e) { a();
                    for (var c = document.createDocumentFragment(), f = 0; f < e.length; f++) {
                        var g = e[f],
                            n = f + 1;
                        c.appendChild(b("asin." + n, g.asin)[0]);
                        c.appendChild(b("offeringID." + n, g.offerId)[0]);
                        c.appendChild(b("quantity." + n, g.quantity)[0]) }
                    d.hiddenFieldsContainer.append(c) },
                removeUpsellAsinsHiddenInputs: a,
                updateUpsellAsinsQuantityInputs: function(a) { d.hiddenFieldsContainer.find('input[type="hidden"][name^="quantity."]').each(function(b, d) { c(d).val(a) }) },
                reset: function() {}
            }
        }
    });
    g.when("A", "ODSEventDispatcher", "accessory-upsell-dom-helper").register("accessory-upsell-buybox-helper", function(f, c, b) {
        var a = f.$;
        return new function() {
            function e(a) {
                return n[l[a]] }

            function d(a, b, d) {
                if ("string" !== typeof a || 0 === a.length) throw new TypeError('The "asin" argument must be defined.');
                d = "number" === typeof d ? Math.max(1, d) : 1;
                var e = !r || f.objectIsEmpty(r);
                r = { asin: a, offerId: b, quantity: d || 1 };
                x.dispatch(e ? "PageAsinAdded" : "PageAsinChanged", a, b, d) }

            function h(a, b, d) {
                var e;
                a: {
                    if (!r || r.asin !== a)
                        for (e =
                            0; e < t.length; e++)
                            if (t[e].asin === a && (!b || t[e].offerId === b)) break a;e = -1
                }
                if (0 <= e) {
                    var c = t[e],
                        f = c.quantity;
                    if (f === d) return !1;
                    0 === d ? (t.splice(e, 1), x.dispatch("UpsellAsinRemoved", a, b, d, f)) : (c.quantity = d, x.dispatch("UpsellAsinChanged", a, b, d, f)) } else -1 === e && 0 < d && (t.push({ asin: a, offerId: b, quantity: d }), x.dispatch("UpsellAsinAdded", a, b, d))
            }

            function k() {
                return f.copy(r) }

            function m() {
                return f.copy(t) }
            var g, n = {},
                l = {},
                r = {},
                t = [],
                x = new c;
            (function() {
                a.each(["PageAsinAdded", "PageAsinChanged", "UpsellAsinAdded", "UpsellAsinChanged",
                    "UpsellAsinRemoved"
                ], a.proxy(function(b, d) { this["register" + d] = a.proxy(x, "registerCallback", d);
                    this["unregister" + d] = a.proxy(x, "unregisterCallback", d) }, this))
            }).apply(this);
            this.registerAccessoryUpsellData = function(a) { g = a;
                for (var b in g)
                    if (g.hasOwnProperty(b)) { a = g[b];
                        n[b] = [];
                        for (var d in a) a.hasOwnProperty(d) && (n[b].push(d), l[d] = b) } };
            this.getParentAsin = function(a) {
                return l[a] };
            this.getChildAsins = e;
            this.getProductData = function(a) {
                var b = l[a];
                return b ? g[b][a] : q };
            this.parsePageAsin = function() {
                var a = b.parsePageAsinData();
                d(a.asin, a.offerId, a.quantity)
            };
            this.setPageAsin = d;
            this.addUpsellAsin = function(a, d, c) {
                if ("string" !== typeof a || 0 === a.length) throw new TypeError('The "asin" argument must be defined.');
                if (r && r.asin === a) throw Error("Can not modify page asin.");
                c = "number" === typeof c ? Math.max(1, c) : 1;
                for (var f = e(a), k = 0; k < f.length; k++) {
                    var m = f[k];
                    m !== a && h(m, "", 0) }
                h(a, d || "", c);
                b.renderUpsellAsinsHiddenInputs(t) };
            this.removeUpsellAsin = function(a, d) { h(a, d || "", 0);
                b.renderUpsellAsinsHiddenInputs(t) };
            this.getPageAsin = k;
            this.getUpsellAsins =
                m;
            this.getAsins = function() {
                var a = k(),
                    b = m();
                return [a].concat(b) };
            this.updateSelectedAsinsQuantity = function(a) {
                if (isNaN(a) || 1 > a) throw Error("New quantity for upsell asins must be greater than 0.");
                r.quantity = a;
                for (var d = 0; d < t.length; d++) t[d].quantity = a;
                b.updateUpsellAsinsQuantityInputs(a) };
            this.reset = function() { b.reset() }
        }
    });
    g.when("A", "odsRefTagUtils").register("upsell-ref", function(f, c) {
        var b = f.$;
        return f.createClass({
            init: function(a) {
                a.delegate("input[type=checkbox]", "change", function() {
                    var a =
                        b(this),
                        d = a.is(":checked") ? "checkboxSelected" : "checkboxDeselected",
                        a = a.parents(".a-checkbox").data("ref") + "_" + d;
                    c.send(a)
                })
            }
        })
    });
    g.when("A").register("ld-upsell", function(f) {
        var c = f.$;
        return f.createClass({
            init: function(b) { b.find("input[type=checkbox]").is(":checked") && this.addToCart(b) },
            addToCart: function(b) {
                var a = { clientName: "AmazonDevices", verificationSessionID: c("#session-id").val() },
                    e = 0;
                b.find("input[type=checkbox]").each(function(b) {
                    if (this.checked) {
                        var d = this.id,
                            f = d + "_offerId";
                        a["ASIN." + b] = c("#" + (d + "_asin")).val();
                        a["offerListingID." + b] = c("#" + f).val();
                        a["quantity." + b] = 1;
                        e += 1;
                        c("#selected-itemCount").val(e)
                    }
                });
                var d = c.ajax({ url: "/gp/add-to-cart/json/ref=ldabb", type: "POST", data: a });
                d.done(function(a) { a = c("#ld-success-msg");
                    a.find("#ld-count").html(e);
                    1 < e ? a.find("#ld-accessories").removeClass("aok-hidden") : a.find("#ld-accessory").removeClass("aok-hidden");
                    a.removeClass("aok-hidden");
                    c(b).find("fieldset").hide() });
                d.fail(function(a, b) { c("#ld-error-msg").show() })
            }
        })
    })
});
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        q = l._namespace || l.attributeErrors,
        f = q ? q("AmazonDevicesDetailPageCommonAssets") : l;
    f.guardFatal ? f.guardFatal(g)(f, window) : f.execute(function() { g(f, window) }) })(function(g, l, q) {
    g.when("A", "jQuery", "ready").register("dash-retail-selection", function(f) {
        function c(a) { f.objectIsEmpty(a) || a.children().each(function(a) { e(this).show() }) }

        function b(a) { k = {};
            g = 0;
            a.children().each(function(a) { a = e(this).data("product-name");
                g++;
                k[a] = e(this) });
            m = !0 }

        function a(a, d) {
            if (f.objectIsEmpty(d)) return 0;
            m || b(d);
            var e = g,
                c = a.split(" ");
            f.each(k, function(a, b) { a.show();
                for (var d = 0; d < c.length; d++)
                    if (0 > b.toLowerCase().indexOf(c[d].toLowerCase())) { a.hide();
                        e--;
                        break } });
            return e
        }
        var e = f.$,
            d = e("#drs-atf-section"),
            h = e("#drs-btf-section"),
            k = {},
            m = !1,
            g = 0;
        if (!f.objectIsEmpty(d) && !f.objectIsEmpty(h)) {
            var n = function(a) { a && a.preventDefault && a.preventDefault();
                    c(B);
                    z.show();
                    A.val("");
                    F.hide();
                    D.hide();
                    5 >= g && (u.hide(), z.hide()) },
                v = function() { n();
                    B.addClass("drs-btf-products-collapsed");
                    u.show();
                    z.hide() },
                r = function() {
                    f.objectIsEmpty(w) ||
                        e("html, body").stop().animate({ scrollTop: w.offset().top - 50 }, 500, v)
                },
                t = function() { B.removeClass("drs-btf-products-collapsed");
                    u.hide();
                    z.show() },
                q = function() { f.objectIsEmpty(w) || e("html, body").stop().animate({ scrollTop: w.offset().top - 50 }, 500) },
                y = function(b) {
                    var d = A.val().trim();
                    if (0 === d.length) return n(b), !1;
                    F.show();
                    t();
                    d = a(d, B);
                    0 < d ? (D.hide(), 5 >= d && (u.hide(), z.hide())) : (D.show(), u.hide(), z.hide());
                    if (13 === b.which) return A.blur(), !1 },
                d = d.find("#drs-row"),
                w = h.find("#drs-btf-header"),
                A = h.find("#drs-search-bar"),
                F = h.find("#drs-search-clear"),
                B = h.find("#drs-btf-products"),
                u = h.find("#drs-product-box-expander-show"),
                z = h.find("#drs-product-box-expander-hide"),
                D = h.find("#drs-no-matching-result");
            e(".drs-btf-product-box");
            d.unbind("click", q).bind("click", q);
            F.unbind("click", n).bind("click", n);
            u.unbind("click", t).bind("click", t);
            z.unbind("click", r).bind("click", r);
            A.unbind("keyup", f.debounce(y, 500)).bind("keyup", f.debounce(y, 500));
            b(B);
            5 >= g && u.hide()
        }
        f.on("a:popover:show:dash-retail-selection-secondary-view", function(d) {
            function h(a) {
                a.preventDefault();
                c(n);
                g.val("");
                r.hide();
                p.css("visibility", "hidden")
            }

            function k(b) { b = e(this).val().trim();
                if (f.objectIsEmpty(n)) return !1;
                if (0 === b.length) return h(), !1;
                p.css("visibility", "visible");
                0 === a(b, n) ? r.show() : r.hide() }
            var m = d.popover.$popover,
                g = m.find("#drs-search-bar-mobile"),
                n = m.find("#drs-btf-products-mobile"),
                p = m.find("#drs-search-clear-mobile"),
                r = m.find("#drs-no-matching-result-mobile");
            r.hide();
            p.unbind("click", h).bind("click", h);
            g.unbind("keyup", f.debounce(k, 500)).bind("keyup", f.debounce(k, 500));
            b(n);
            f.on.orientationchange(function() { m.css("width", (screen && screen.width ? screen.width : l.innerWidth) + "px") })
        })
    });
    g.when("A", "Airy").register("ContentGridController", function(f, c) {
        return f.createClass({
            init: function(b, a) { this._model = b;
                this._view = a;
                this._model.setAiryInstance(this._initAiryPlayer());
                this._bindEvents() },
            _bindEvents: function() { this._model.isAutoplay() && (this._bindAutoplayPause(), this._bindAutoplayStart(), this._bindAutoplayFullscreen()) },
            _initAiryPlayer: function() {
                var b = this._model.getVideoURL() +
                    ".";
                return c.embed({ parentId: this._model.getVideoID(), disabledViewIds: [this._model.getViewIDsToHide()], slateImages: { preloadSlate: this._view.getPreloadSlate(), postMediaSlate: this._view.getPostMediaSlate() }, mediaSourceInfo: [b + "mp4"], swfUrl: this._model.getSWFURL() })
            },
            _bindAutoplayPause: function() {
                var b = this;
                this._model.getAiryInstance().bind("pause", function(a) { b._view.isVideoInViewport() && b._model.setCustomerClickedVideo(!0) }) },
            _bindAutoplayStart: function() {
                var b = this._model.getAiryInstance(),
                    a = f.$;
                b.audioOff();
                this._playPauseVideoInViewport();
                f.on.scroll(a.proxy(this._playPauseVideoInViewport, this))
            },
            _bindAutoplayFullscreen: function() {
                var b = this;
                this._model.getAiryInstance().bind("fullscreen", function(a) { b._model.setCustomerClickedVideo(!0) }) },
            _playPauseVideoInViewport: function() {
                var b = this._model.getAiryInstance();
                this._model.getCustomerClickedVideo() || (this._view.isVideoInViewport() ? b.isPlaying() || b.play() : b.isPlaying() && b.pause()) },
            destroy: function() { this._view = this._model = null }
        })
    });
    g.when("A", "ContentGridController", "ContentGridModel", "ContentGridView", "ready").register("ContentGridFactory", function(f, c, b, a) {
        var e = [];
        return { get: function(d) { d = new c(new b(d), new a(d));
                e.push(d);
                return d }, destroyAll: function() { e.forEach(function(a) { a.destroy() });
                e = [] } } });
    g.when("A").register("ContentGridModel", function(f) {
        return f.createClass({
            init: function(c) {
                this._videoURL = c.URL;
                this._videoID = c.ID;
                this._autoplay = "string" === typeof c.autoplay ? "true" === c.autoplay : c.autoplay;
                this._postMediaSlate =
                    c.postMediaSlate;
                this._preloadSlate = c.preloadSlate;
                this._viewIDsToHide = c.viewIDsToHide;
                this._customerClickedVideo = !1
            },
            getAiryInstance: function() {
                return this._airyInstance },
            getSWFURL: function() {
                return "https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/2.0.1436.0/flash/AiryFlashlsRenderer._TTW_.swf" },
            getVideoURL: function() {
                return this._videoURL },
            getVideoID: function() {
                return this._videoID },
            getPostMediaSlate: function() {
                return this._postMediaSlate },
            getPreloadSlate: function() {
                return this._preloadSlate },
            getViewIDsToHide: function() {
                return this._viewIDsToHide },
            getCustomerClickedVideo: function() {
                return this._customerClickedVideo },
            isAutoplay: function() {
                return this._autoplay },
            setAiryInstance: function(c) { this._airyInstance = c },
            setCustomerClickedVideo: function(c) { this._customerClickedVideo = c }
        })
    });
    g.when("A").register("ContentGridView", function(f, c) {
        var b = f.$;
        return f.createClass({
            init: function(a) {
                this._preloadSlate = document.getElementById(a.preloadSlateID);
                this._postMediaSlate = document.getElementById(a.postMediaSlateID);
                this._parentContainer = document.getElementById(a.ID)
            },
            getParentContainer: function() {
                return this._parentContainer },
            getPreloadSlate: function() {
                return this._preloadSlate },
            getPostMediaSlate: function() {
                return this._postMediaSlate },
            isVideoInViewport: function() {
                var a = this.getParentContainer().getBoundingClientRect();
                return 0 <= a.top && 0 <= a.left && a.bottom <= b(l).height() && a.right <= b(l).width() }
        })
    })
});
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        q = l._namespace || l.attributeErrors,
        f = q ? q("AmazonDevicesConfauxguratorAssets") : l;
    f.guardFatal ? f.guardFatal(g)(f, window) : f.execute(function() { g(f, window) }) })(function(g, l, q) {
    g.when("A", "a-secondary-view", "CFG.confauxguratorLoader", "ready").register("CFG.confauxguratorLauncher", function(f, c, b) {
        function a(a) { h.sort(function(b, e) {
                return d(e).is(a) ? 1 : -1 });
            return a }

        function e(b) { b = d(b.target);
            a(b);
            if (p.isActive()) return !0;
            p.show();
            k = b;
            return !1 }
        var d = f.$,
            h = d('#buybox_feature_div form#addToCart input[type="submit"],#buybox_feature_div form#mobile-installments input[type="submit"]').parents("form");
        f = d('<div style="display: none">').append("body");
        var k, m, p;
        p = c.create(f, { inlineContent: '<span class="a-spinner a-spinner-medium cfg-loader"></span>', name: "confauxgurator-view" });
        g.when("CFG.confauxguratorDOM").execute(function(a) { a.success ? (p.update({ inlineContent: a.data, hideHeader: !0 }), h.bind("submit", e)) : p.isActive() && k && k.submit() });
        g.when("A").execute(function(a) {
            a.on("a:popover:show:confauxgurator-view",
                function(a) { g.when("CFG.MobileAppController").execute(function(a) { m ? m.update(h) : m = new a(h) }) })
        });
        g.when("A").execute(function(a) { a.on("a:popover:hide:confauxgurator-view", function(a) { m && m.disable() }) });
        return { init: function(a) { b.load(a) } }
    });
    g.when("jQuery", "ready").register("CFG.confauxguratorLoader", function(f) {
        function c(b, a) { g.register("CFG.confauxguratorDOM", function() {
                return { success: b, data: a } }) }
        return {
            load: function(b) {
                "function" === typeof l.uet && l.uet("bb", "confauxguratorGetData", { wb: 1 });
                f.get(b).success(function(a) { "function" === typeof l.uet && (l.uet("cf", "confauxguratorGetData", { wb: 1 }), l.uex("ld", "confauxguratorGetData", { wb: 1 }));
                    c(!0, a) }).error(function(a) { l.ue.count("numConfauxguratorAjaxFailureCount", (l.ue.count("numConfauxguratorAjaxFailureCount") || 0) + 1);
                    c(!1) })
            }
        }
    })
});
(function(g) {
    var l = window.AmazonUIPageJS || window.P,
        q = l._namespace || l.attributeErrors,
        f = q ? q("AmazonDevicesDetailPageMobileAssets") : l;
    f.guardFatal ? f.guardFatal(g)(f, window) : f.execute(function() { g(f, window) }) })(function(g, l, q) {
    g.when("accessory-upsell-product-factory", "accessory-upsell-interstitial-factory", "accessory-upsell-ref-helper", "ODSBuyboxManager", "accessory-upsell-bbm-helper", "A").register("accessory-upsell-controller", function(f, c, b, a, e, d) {
        var h = d.$;
        return d.createClass({
            init: function(a, b,
                g) { this.$el = a;
                this._view = b;
                this._model = g;
                this._subControllers = {};
                this._interstitialController;
                a = 0;
                b = this._model.getScheduledAsinsData();
                for (var n in b) b.hasOwnProperty(n) && (g = f.get(n, b[n], a), g.setOnOrderUpdate(h.proxy(this._handleOrderUpdate, this)), this._subControllers[n] = g, a++);
                n = this._model.getInterstitialAsinsData();
                d.objectIsEmpty(n) || (this._interstitialController = c.get(n));
                this._bindEvents();
                this._updateDefaultCheckedAccessories();
                e.registerAsinsMetadata(this._model.getChildAsinsData()) },
            _bindEvents: function() {
                var a =
                    this;
                g.when("ready").execute(function() { a._loadSubControllerInitialImages.apply(a);
                    a._interstitialController && a._interstitialController.loadInitialImages() });
                this._boundFunctions = { handleCheckboxChange: h.proxy(this._handleCheckboxChange, this), onBuyboxUpsellAsinsChanged: h.proxy(this._onBuyboxUpsellAsinsChanged, this) };
                this._enableEvents(!0)
            },
            _enableEvents: function(b) {
                b = b ? "" : "un";
                a[b + "registerUpsellAsinRemoved"](this._boundFunctions.onBuyboxUpsellAsinsChanged);
                a[b + "registerUpsellAsinAdded"](this._boundFunctions.onBuyboxUpsellAsinsChanged);
                this.$el[b + "delegate"](".mabb-option-checkbox input", "change", this._boundFunctions.handleCheckboxChange)
            },
            _setAsin: function(a, b) {
                var d = this._model.getScheduledAsinFromVariationAsin(a),
                    d = this._model.getVariationAsinsDataFromScheduledAsin(d),
                    c = this._model.getChildAsinsData()[a];
                e.setUpsellAsin(a, c.offerListingID, d, b) },
            _onBuyboxUpsellAsinsChanged: function(a, b, d) {
                b = this._model.getScheduledAsinFromVariationAsin(a);
                var e = this._subControllers[b];
                d = 0 < d;
                e && (e.setAddedToOrderState(d), d && e.selectAsin(a), this._internalRender(b,
                    e.getCurrentProduct(), d))
            },
            _handleCheckboxChange: function(a, d, e) { d = d || h(a.currentTarget);
                a = d.parents(".mabb-option").data("asin");
                d = d.is(":checked");
                var c = this._subControllers[a],
                    f = c.getIndex(),
                    g = c.getCurrentProduct();
                c.setAddedToOrderState(d);
                d ? (this._setAsin(g.asin, 1), b.sendCheckboxSelected(f, g.asin)) : (this._setAsin(g.asin, 0), b.sendCheckboxDeselected(f, g.asin));
                e || !g.checkForInteraction || g.hasBeenInteractedWith || c.setHasBeenInteractedWith(a) },
            _handleOrderUpdate: function(a, b) {
                this._setAsin(b.asin,
                    1)
            },
            _internalRender: function(a, b, d) { a = this._generateOptionViewModel(a, b, d);
                this._view.render(a) },
            _generateOptionViewModel: function(a, b, d) {
                var e = !1,
                    c = "",
                    f = "",
                    h = "";
                b && (c = (e = b.showPriceStrikethrough) ? b.listPrice : "", f = b.buyingPrice, h = "(" + b.swatchValue + ")");
                return { optionAsin: a, isProductSelected: d, isOnSale: e, listPriceString: c, buyingPriceString: f, variationText: h } },
            _loadSubControllerInitialImages: function() {
                for (var a in this._subControllers) this._subControllers.hasOwnProperty(a) && this._subControllers[a].loadInitialImages() },
            _updateDefaultCheckedAccessories: function() {
                var a = this;
                a.$el.find(".mabb-option-checkbox input:checked").each(function() { a._handleCheckboxChange(null, h(this), !0) }) },
            destroy: function() { this._enableEvents(!1);
                for (var a in this._subControllers) this._subControllers.hasOwnProperty(a) && this._subControllers[a].destroy();
                this._boundFunctions = this._subControllers = null }
        })
    });
    g.when("accessory-upsell-controller", "accessory-upsell-model", "accessory-upsell-view").register("accessory-upsell-factory",
        function(f, c, b) {
            return { get: function(a, e) {
                    var d = new b(a),
                        h = new c(e);
                    return new f(a, d, h) } } });
    g.when("A").register("accessory-upsell-model", function(f) {
        return f.createClass({
            init: function(c) { this._scheduledAsinsData = c;
                this._buildCache(this._scheduledAsinsData) },
            getScheduledAsinsData: function() {
                return this._scheduledAsinsData },
            getChildAsinsData: function() {
                return this._childAsinsData },
            getInterstitialAsinsData: function() {
                return this._interstitialAsinsData },
            getScheduledAsinFromVariationAsin: function(c) {
                return this._scheduledAsins[c] },
            getVariationAsinsDataFromScheduledAsin: function(c) {
                return this._scheduledVariationsAsinsData[c] },
            _buildCache: function(c) {
                this._scheduledAsins = {};
                this._childAsinsData = {};
                this._scheduledVariationsAsinsData = {};
                this._interstitialAsinsData = {};
                for (var b in c)
                    if (c.hasOwnProperty(b)) {
                        this._scheduledVariationsAsinsData[b] = [];
                        for (var a in c[b]) c[b].hasOwnProperty(a) && (this._childAsinsData[a] = c[b][a], this._scheduledVariationsAsinsData[b].push(this._childAsinsData[a]), this._scheduledAsins[a] = b, c[b][a].isInterstitial &&
                            (this._interstitialAsinsData[b] = c[b]))
                    }
            }
        })
    });
    g.when("a-secondary-view", "A").register("accessory-upsell-view", function(f, c) {
        var b = c.$,
            a, e = !1;
        return c.createClass({
            init: function(a) { this.$el = a },
            _getOptionElement: function(a) {
                return this.$el.find("#mabb-option-" + a) },
            _updateOptionRow: function(a) {
                var b = this._getOptionElement(a.optionAsin);
                b.find(".mabb-selected-variation").html(a.variationText);
                b.find(".mabb-option-list-price").html(a.listPriceString);
                b.find(".mabb-option-buying-price").html(a.buyingPriceString) },
            _isAuiSky: function() { e || (a = 0 < b("link[href*='AmazonUISkinSky']").length, e = !0);
                return a },
            _getAuiClassName: function() {
                return this._isAuiSky() ? "checked-pseudoclass-aui-sky-fallback" : "checked-pseudoclass-aui-beacon-fallback" },
            _addAuiClass: function(a) {
                var b = this._getAuiClassName();
                a.addClass(b) },
            _removeAuiClass: function(a) {
                var b = this._getAuiClassName();
                a.removeClass(b) },
            _toggleProduct: function(a) {
                var b = this._getOptionElement(a.optionAsin),
                    e = b.find(".mabb-option-checkbox input"),
                    b = b.find(".mabb-option-checkbox");
                a.isProductSelected ? (e.prop("checked", !0), this._addAuiClass(b)) : (e.removeProp("checked"), this._removeAuiClass(b))
            },
            _hideSecondaryView: function(a) { a = this.$el.find("#mabb-product-view-trigger-" + a.optionAsin);
                (a = f.get(a)) && a.hide() },
            render: function(a) { this._toggleProduct(a);
                a.isProductSelected && (this._updateOptionRow(a), this._hideSecondaryView(a)) },
            deselectAllProducts: function() { this.$el.find(".mabb-option-checkbox input").removeProp("checked") }
        })
    });
    g.when("odsRefTagUtils", "BuyboxManager",
        "A").register("accessory-upsell-ref-helper", function(f, c, b) {
        function a(a, b, g) {
            var n = c.getPageAsin().asin;
            n && n.length && (a = ("ods_mabb_" + n + "_slot{{index}}_{{asin}}_{{action}}").replace(e, a).replace(d, b).replace(h, g), f.send(a)) }
        var e = /{{\s?index\s?}}/ig,
            d = /{{\s?asin\s?}}/ig,
            h = /{{\s?action\s?}}/ig;
        return {
            sendCheckboxSelected: function(b, d) { a(b, d, "checkboxSelected") },
            sendCheckboxDeselected: function(b, d) { a(b, d, "checkboxDeselected") },
            sendSecondaryViewDisplayed: function(b, d) { a(b, d, "secondaryViewDisplayed") },
            sendSecondaryViewTwisted: function(b, d) { a(b, d, "secondaryViewTwisted") },
            sendSecondaryViewCancelled: function(b, d) { a(b, d, "secondaryViewCancelled") },
            sendAddToOrderClicked: function(b, d) { a(b, d, "addToOrderClicked") },
            sendInterstitialItemAdded: function(b, d) { a(b, d, "interstitialItemAdded") },
            sendInterstitialOfferDeclined: function(b, d) { a(b, d, "interstitialOfferDeclined") },
            sendUpdateClicked: function(b, d) { a(b, d, "updateClicked") }
        }
    });
    g.when("ODSBuyboxManager", "ODSBuyboxAsinMetadata", "jQuery").register("accessory-upsell-bbm-helper",
        function(f, c, b) {
            return { registerAsinsMetadata: function(a) {
                    for (var b in a)
                        if (a.hasOwnProperty(b)) {
                            var d = a[b],
                                d = new c(b, d.offerListingID, d.buyingPriceDecimal.amount_, d.listPriceDecimal ? d.listPriceDecimal.amount_ : null, d.title);
                            f.addMetadata(d) } }, setUpsellAsin: function(a, e, d, c) { b.each(d, function(a, b) { f.setUpsellAsin(b.asin, b.offerListingID, 0) });
                    c && f.setUpsellAsin(a, e, 1) } } });
    g.when("accessory-upsell-ref-helper", "ods-image-utilities", "ODSBuyboxManager", "A").register("accessory-upsell-product-controller",
        function(f, c, b, a) {
            var e = a.$;
            return a.createClass({
                init: function(a, b, c, f) { this.$baseElement = a;
                    this._scheduledAsin = b;
                    this._view = c;
                    this._model = f;
                    this._boundFunctions = { handleVariationSelection: e.proxy(this._handleVariationSelection, this), handleAddToOrderClick: e.proxy(this._handleAddToOrderClick, this), preparePopover: e.proxy(this._preparePopover, this), detachPopover: e.proxy(this._detachPopover, this) };
                    this._enableEvents(!0) },
                _enableEvents: function(b) {
                    b = b ? a.on : a.off;
                    b("a:button-group:product-variations-" +
                        this._scheduledAsin + ":toggle", this._boundFunctions.handleVariationSelection);
                    b("a:popover:show:mabb-product-view-" + this._scheduledAsin, this._boundFunctions.preparePopover);
                    b("a:popover:hide:mabb-product-view-" + this._scheduledAsin, this._boundFunctions.detachPopover)
                },
                _preparePopover: function(a) {
                    this.$el = a.popover.$popover;
                    this._model.cacheSelectedProduct();
                    this._model.setViewClosedByOrderUpdate(!1);
                    this._model.setHasBeenInteractedWith(this._scheduledAsin);
                    this._view.updateTargetElement(this.$el, this._model.isAddedToOrderState());
                    if (!this._model.isPreloadingComplete()) {
                        var b = this;
                        a = c.preloadImages(this._model.getAllLowResImages());
                        e.when.apply(e, a).done(function() { b._model.completePreloading() }) }
                    this.renderView();
                    f.sendSecondaryViewDisplayed(this._model.getIndex(), this._model.getSelectedProduct().asin);
                    this._bindEvents()
                },
                _bindEvents: function() { this.$el.delegate(".mabb-product-ato", "click", this._boundFunctions.handleAddToOrderClick) },
                _detachPopover: function() {
                    this.$el && this.$el.undelegate(".mabb-product-ato", "click", e.proxy(this._boundFunctions.handleAddToOrderClick));
                    this.$el = q;
                    this._model.isViewClosedByOrderUpdate() || (this._model.setSelectedProductFromCache(), f.sendSecondaryViewCancelled(this._model.getIndex(), this._model.getSelectedProduct().asin));
                    this._model.clearSelectedProductCache()
                },
                _handleVariationSelection: function(a) {
                    var b;
                    a.selectedButton && (b = a.selectedButton.buttonName);
                    b && (this.selectAsin(b), this.renderView(), f.sendSecondaryViewTwisted(this._model.getIndex(), b)) },
                _handleAddToOrderClick: function() {
                    var a = this._model.getSelectedProduct(),
                        b = this._model.isAddedToOrderState();
                    this._model.setAddedToOrderState(!0);
                    this._model.setViewClosedByOrderUpdate(!0);
                    this._view.updateBase(this._generateViewModel(a));
                    this._model.cacheSelectedProduct();
                    b ? f.sendUpdateClicked(this._model.getIndex(), a.asin) : f.sendAddToOrderClicked(this._model.getIndex(), a.asin);
                    this._orderUpdateCallback && this._orderUpdateCallback(this._scheduledAsin, a)
                },
                _handleLowResImageLoaded: function(a, b) {
                    var e = this._model.getSelectedProduct();
                    a && a.isResolved() || e.lowResImage.URL_ !== b || this._view.updateProductImage(b) },
                _handleHiResImageLoaded: function(a) { this._model.getSelectedProduct().hiResImage.URL_ === a && this._view.updateProductImage(a) },
                _handleImageLoadFailure: function(a) {
                    throw Error("The image " + a + " failed to load for accessory ASIN " + this._scheduledAsin); },
                _generateViewModel: function(a) {
                    return { asin: a.asin, title: a.title, merchant: a.merchant, featureBullets: a.featureBullets, listPriceString: a.listPrice, buyingPriceString: a.buyingPrice, isOnSale: a.showPriceStrikethrough } },
                _loadProductImage: function(a) {
                    a = c.preloadImage(a.lowResImage.URL_,
                        a.hiResImage.URL_);
                    a.image.done(e.proxy(this._handleLowResImageLoaded, this, a.hiResImage)).fail(e.proxy(this._handleImageLoadFailure, this, a.hiResImage));
                    a.hiResImage && a.hiResImage.done(e.proxy(this._handleHiResImageLoaded, this)).fail(e.proxy(this._handleImageLoadFailure, this))
                },
                loadInitialImages: function() { a.loadDescendantImagesManually(this.$baseElement) },
                setOnOrderUpdate: function(a) { this._orderUpdateCallback = a },
                getCurrentProduct: function() {
                    return this._model.getSelectedProduct() },
                setAddedToOrderState: function(a) { this._model.setAddedToOrderState(a) },
                selectAsin: function(a) {
                    var b = this._model.getSelectedProduct();
                    b && b.asin !== a && this._model.setSelectedProduct(a) },
                renderView: function() {
                    var a = this._model.getSelectedProduct();
                    this._model.isVisual() && this._loadProductImage(a);
                    this._view.render(this._generateViewModel(a)) },
                getIndex: function() {
                    return this._model.getIndex() },
                setHasBeenInteractedWith: function(a) { this._model.setHasBeenInteractedWith(a) },
                destroy: function() {
                    this.$el && this.$el.undelegate(".mabb-product-ato", "click", this._boundFunctions.handleAddToOrderClick);
                    this._enableEvents(!1);
                    this._model = this._view = this.$baseElement = this._boundFunctions = null
                }
            })
        });
    g.when("accessory-upsell-product-model", "accessory-upsell-product-controller", "accessory-upsell-product-view", "A").register("accessory-upsell-product-factory", function(f, c, b, a) {
        return { get: function(e, d, h) {
                var k = a.$("#mabb-product-view-" + e),
                    m = new b(k);
                d = new f(d, e, h);
                return new c(k, e, m, d) } } });
    g.when("A").register("accessory-upsell-product-view", function(f) {
        var c = f.$;
        return f.createClass({
            init: function(b) {
                this.$baseElement =
                    b;
                this.$variations = this.$baseElement.find(".mabb-variation")
            },
            updateTargetElement: function(b, a) { this.$el = b;
                this.$el.toggleClass("mabb-product-is-selected", a) },
            _updateSelectedVariation: function(b) { this.$variations.removeClass("a-button-selected");
                this.$variations.filter(".mabb-variation-" + b).addClass("a-button-selected") },
            render: function(b) {
                var a = this._buildFeatureBullets(b.featureBullets);
                this._updateElements(this.$el, b, a.clone());
                this._updateSelectedVariation(b.asin) },
            updateBase: function(b) {
                var a =
                    this._buildFeatureBullets(b.featureBullets);
                this._updateElements(this.$baseElement, b, a.clone());
                this.$baseElement.find(".mabb-variation-" + b.asin).trigger("click")
            },
            _updateElements: function(b, a, e) { b.find(".mabb-product-title").text(a.title);
                b.find(".mabb-product-merchant").text(a.merchant);
                b.find(".mabb-product-list-price").html(a.isOnSale ? a.listPriceString : "");
                b.find(".mabb-product-buying-price").html(a.buyingPriceString);
                b.find(".mabb-product-feature-bullets").html(e) },
            _buildFeatureBullets: function(b) {
                for (var a =
                        c("<ul>"), e = 0; e < b.length; e++) c("<li>").text(b[e]).appendTo(a);
                return a
            },
            updateProductImage: function(b) { setTimeout(function() { this.$el.find(".mabb-product-image").attr("src", b);
                    this.$baseElement.find(".mabb-product-image").attr("src", b) }.bind(this), 100) }
        })
    });
    g.when("A").register("accessory-upsell-product-model", function(f) {
        return f.createClass({
            init: function(c, b, a) {
                this._products = c;
                this._index = a;
                this._isViewClosedByOrderUpdate = this._isAddedToOrder = this._preloadingComplete = !1;
                this._cachedAsin =
                    null;
                this._isVisual = this._calculateIsVisual(b);
                this.setSelectedProduct(b)
            },
            _calculateIsVisual: function(c) {
                return (c = this._products[c]) ? c.visualDimension : !1 },
            cacheSelectedProduct: function() {
                var c = this.getSelectedProduct(); "undefined" !== typeof c && (this._cachedAsin = c.asin) },
            setSelectedProductFromCache: function() { this.setSelectedProduct(this._cachedAsin) },
            clearSelectedProductCache: function() { this._cachedAsin = null },
            setSelectedProduct: function(c) {
                if (c)
                    for (var b in this._products) this._products.hasOwnProperty(b) &&
                        (this._products[b].isSelected = b === c)
            },
            getSelectedProduct: function() {
                for (var c in this._products)
                    if (this._products.hasOwnProperty(c)) {
                        var b = this._products[c];
                        if (b.isSelected) return f.copy(b) } },
            isSelectedProduct: function(c) {
                return (c = this._products[c]) && c.isSelected },
            isVisual: function() {
                return this._isVisual },
            setAddedToOrderState: function(c) { this._isAddedToOrder = c },
            isAddedToOrderState: function() {
                return this._isAddedToOrder },
            getAllLowResImages: function() {
                var c = [],
                    b;
                for (b in this._products) this._products.hasOwnProperty(b) &&
                    c.push(this._products[b].lowResImage.URL_);
                return c
            },
            isPreloadingComplete: function() {
                return this._preloadingComplete },
            completePreloading: function() { this._preloadingComplete = !0 },
            getIndex: function() {
                return this._index },
            isViewClosedByOrderUpdate: function() {
                return this._isViewClosedByOrderUpdate },
            setViewClosedByOrderUpdate: function(c) { this._isViewClosedByOrderUpdate = c },
            setHasBeenInteractedWith: function(c) { this._products.hasOwnProperty(c) && (this._products[c].hasBeenInteractedWith = !0) }
        })
    });
    g.when("desktop-accessory-upsell-ref-helper", "ods-image-utilities", "ODSBuyboxManager", "a-secondary-view", "a-checkbox", "A").register("accessory-upsell-interstitial-controller", function(f, c, b, a, e, d) {
        var h = d.$;
        return d.createClass({
            init: function(b, e, c) {
                this.$baseElement = b;
                this._view = e;
                this._model = c;
                this.popoverInstance = a.get("abb-interstitial");
                this.$el;
                this.$clickedSubmitButton;
                var f = this.wasInterstitialOfferAccepted = !1;
                this.asinsToShow = d.map(this._model.getInterstitialProducts(), function(a, b) {
                    a.checkForInteraction &&
                        (f = !0);
                    return b
                });
                this.hasCheckForInteractionAsin = f;
                this._bindEvents()
            },
            _bindEvents: function() {
                var a = this;
                g.when("ready").execute("accessory-upsell-interstitial-controller-bindEvents", function() {
                    var b = a._view.$buyNowButton;
                    a._view.$atcFormSubmit.bind("click", h.proxy(a._handleAtcSubmit, a));
                    b && b.length && b.bind("click", h.proxy(a._handleAtcSubmit, a)) }) },
            _handleAtcSubmit: function(a) {
                this.$clickedSubmitButton = h(a.target);
                0 < this._getInterstitialAsinsToShow().length && this.popoverInstance && (a.preventDefault(),
                    this.$clickedSubmitButton.unbind("click", h.proxy(this._handleAtcSubmit, this)), this._showIntlPopover.apply(this))
            },
            _getInterstitialAsinsToShow: function() {
                for (var a = [], d = b.getUpsellAsins(), d = this.getParentAsins(d), e = 0; e < this.asinsToShow.length && !(1 <= a.length); e++) {
                    var c = this.asinsToShow[e],
                        f = this._model.getScheduledAsinFromVariationAsin(c),
                        h = this._model.getInterstitialAsinsData()[f][c];
                    h.checkForInteraction ? h.hasBeenInteractedWith || (a.push(c), this.autoCheckInterstitial = !0) : -1 === d.indexOf(f) && a.push(c) }
                return this.asinsToShow =
                    a
            },
            _showIntlPopover: function() { d.on("a:popover:beforeShow:abb-interstitial", h.proxy(this._popoverBeforeShow, this));
                d.on("a:popover:show:abb-interstitial", h.proxy(this._popoverOnShow, this));
                this.popoverInstance.show() },
            _popoverBeforeShow: function(a) { this.renderView() },
            _popoverOnShow: function(a) {
                this.$el = a.popover.$popover;
                this.$el.delegate(".abb-intl-ato", "click", h.proxy(this._handleIntlAddToOrderClick, this));
                this.$el.delegate(".abb-intl-decline", "click", h.proxy(this._handleIntlDeclineClick, this));
                d.declarative.remove(this.$el.find('.a-popover-header-secondary .a-declarative[data-action="a-popover-close"]'), "a-popover-close");
                this._hideSecondaryViewHeaders();
                1 === this._getInterstitialAsinsToShow().length && this.autoCheckInterstitial && (a = this.$el.find(".abb-intl-product-ato:visible"), e(a).check(!0))
            },
            _submitAddToCartForm: function() { this.wasInterstitialOfferAccepted || f.sendInterstitialOfferDeclined(-1, "");
                this.$clickedSubmitButton.click() },
            _handleIntlAddToOrderClick: function(a) {
                var d = this;
                a = this._view.getAllVisibleProductCheckboxes();
                var e = this._view.getCheckedProductCheckboxes(),
                    c = this._view.getQuantityDropdownValue();
                this.wasInterstitialOfferAccepted = 0 < e.length;
                a.each(function(a, e) {
                    var k = h(this).closest(".abb-intl-product-ato").data("asin"),
                        g = d._model.getInterstitialProducts()[k];
                    if (!g) return !0;
                    h(this).is(":checked") ? (b.setUpsellAsin(k, g.offerListingID, c), f.sendInterstitialItemAdded(-1, k)) : b.setUpsellAsin(k, g.offerListingID, 0) });
                this._submitAddToCartForm()
            },
            _handleIntlDeclineClick: function(a) {
                this.wasInterstitialOfferAccepted = !1;
                this._submitAddToCartForm()
            },
            _generateViewModel: function() {
                return { asinsToShow: this.asinsToShow } },
            _hideSecondaryViewHeaders: function() { this.$el.find(".a-popover-header-secondary").hide();
                this.$el.find(".a-popover-header-spacing").hide() },
            loadInitialImages: function() { d.loadDescendantImagesManually(this.$baseElement) },
            renderView: function() { this._view.render(this._generateViewModel()) },
            getParentAsins: function(a) {
                for (var b = [], d = 0; d < a.length; d++) {
                    var e = this._model.getScheduledAsinFromVariationAsin(a[d].asin);
                    b.push(e)
                }
                return b
            }
        })
    });
    g.when("accessory-upsell-interstitial-model", "accessory-upsell-interstitial-view", "accessory-upsell-interstitial-controller", "A").register("accessory-upsell-interstitial-factory", function(f, c, b, a) {
        return { get: function(e) {
                var d = a.$("#abb-interstitial"),
                    h = new c(d);
                e = new f(e);
                return new b(d, h, e) } } });
    g.when("a-modal", "a-dropdown", "A").register("accessory-upsell-interstitial-view", function(f, c, b) {
        var a = b.$;
        return b.createClass({
            init: function(b) {
                this.$baseElement =
                    b;
                this.$productSections = this.$baseElement.find(".abb-intl-product-view,.abb-intl-product-terms");
                this.$atcForm = a("#addToCart");
                this.$atcFormSubmit = this.$atcForm.find('input#add-to-cart-button[name="submit.add-to-cart"]');
                this.$buyNowButton = this.$atcForm.find('input#buy-now-button[type="submit"]');
                this.$quantityDropdown = a("#mobileQuantitySelection");
                this.$quantityDropdown.length && (this.quantityDropdownInstance = c.getSelect(this.$quantityDropdown))
            },
            render: function(a) {
                this.$productSections.hide();
                a =
                    a.asinsToShow;
                for (var b = 0; b < a.length; b++) this._getProductSection(a[b]).show()
            },
            getQuantityDropdownValue: function() {
                var a = 1;
                this.quantityDropdownInstance && (a = parseInt(this.quantityDropdownInstance.val(), 10) || 1);
                return a },
            getCheckedProductCheckboxes: function() {
                return this.$baseElement.find(".abb-intl-product-ato input[type='checkbox']:checked") },
            getAllVisibleProductCheckboxes: function() {
                return this.$baseElement.find(".abb-intl-product-ato input[type='checkbox']:visible") },
            _getProductSection: function(a) {
                return this.$baseElement.find("#abb-intl-product-view-" +
                    a + "," + ("#abb-intl-product-terms-" + a))
            }
        })
    });
    g.when("A").register("accessory-upsell-interstitial-model", function(f) {
        return f.createClass({
            init: function(c) { this._interstitialAsinsData = c;
                this._scheduledAsins = {};
                this._scheduledVariationsAsins = {};
                this._interstitialProducts = {};
                this._buildScheduledAsinCache(c) },
            getInterstitialAsinsData: function() {
                return this._interstitialAsinsData },
            getInterstitialProducts: function() {
                return this._interstitialProducts },
            getScheduledAsinFromVariationAsin: function(c) {
                return this._scheduledAsins[c] },
            getVariationAsinsFromScheduledAsin: function(c) {
                return this._scheduledVariationsAsins[c] },
            _buildScheduledAsinCache: function(c) { this._scheduledAsins = {};
                this._scheduledVariationsAsins = {};
                this._interstitialProducts = {};
                for (var b in c)
                    if (c.hasOwnProperty(b)) { this._scheduledVariationsAsins[b] = [];
                        this._interstitialProducts[b] = c[b][b];
                        for (var a in c[b]) c[b].hasOwnProperty(a) && (this._scheduledVariationsAsins[b].push(a), this._scheduledAsins[a] = b) } }
        })
    });
    g.when("A", "csmCounter").register("mobile-family-stripe-view",
        function(f, c) {
            function b(a) { this.$el = a;
                this.$familyStripe = this.$el.find(".mfs-families");
                this.$deviceStripeContainer = this.$el.find(".mfs-device-stripes-container") }
            b.prototype = {
                showDeviceStripe: function(a) {
                    var b = this.$deviceStripeContainer.find("[data-family='" + a + "']");
                    this.hideDeviceFamilyStripeCollection();
                    b.addClass("is-active");
                    this.$deviceStripeContainer.addClass("is-active");
                    a = "mobile-family-stripe-tap-count-" + a.replace(/\s/g, "");
                    c.increment(a) },
                hideDeviceStripes: function() {
                    this.$deviceStripeContainer.removeClass("is-active");
                    this.hideDeviceFamilyStripeCollection()
                },
                hideDeviceFamilyStripeCollection: function() { this.$deviceStripeContainer.find(".mfs-device-family-stripe.is-active").removeClass("is-active") },
                toggleActiveFamily: function(a) { this.$familyStripe.find("[data-family='" + a + "']").toggleClass("is-active") },
                resetActiveFamily: function() { this.$familyStripe.find(".mfs-family.is-active").removeClass("is-active") },
                reset: function() { this.hideDeviceStripes();
                    this.resetActiveFamily() },
                loadImages: function() {
                    var a = this.$el;
                    a.hasClass("images-loaded") ||
                        (f.loadDescendantImagesManually(a), a.addClass("images-loaded"))
                }
            };
            return b
        });
    g.when("A", "mobile-family-stripe-view").register("mobile-family-stripe-controller", function(f, c) {
        function b() { g ? (this.$el.delegate(".mfs-family", "touchend", h.proxy(a, this)), h("body").bind("touchend", h.proxy(e, this)).bind("touchstart", function() { k = !1 }).bind("touchmove", function() { k = !0 })) : (this.$el.delegate(".mfs-family", "click", h.proxy(a, this)), h("body").bind("click", h.proxy(e, this))) }

        function a(a) {
            a.preventDefault();
            a.stopPropagation();
            if (!g || !k) { a = h(a.currentTarget);
                var b = a.data("family");
                a.hasClass("is-active") ? this.view.hideDeviceStripes() : this.view.showDeviceStripe(b);
                m !== b && this.view.resetActiveFamily();
                this.view.toggleActiveFamily(b);
                m = b }
        }

        function e(a) { k || this.$el.is(a.target) || this.$el.has(a.target).length || this.view.reset() }

        function d(a) { this.$el = "string" === typeof a ? h("#" + a) : a;
            this.view = new c(this.$el);
            g = !l.navigator.msPointerEnabled && f.capabilities.touch;
            b.apply(this);
            this.view.loadImages() }
        var h = f.$,
            k = !1,
            m, g;
        d.prototype = {};
        return d
    });
    g.when("mobile-family-stripe-controller").register("mobile-family-stripe-controller-factory", function(f) {
        return { get: function(c) {
                return new f(c) } } });
    g.when("mobile-family-stripe-controller-factory").register("mobile-family-stripe", function(f) {
        return f });
    g.when("A", "mobile-family-stripe", "ready").execute(function(f, c) {
        for (var b = f.$, b = b(".mobile-family-stripe"), a = 0, e = b.length; a < e; a++) c.get(b.eq(a)) });
    g.when("ods-element-factory",
        "A", "ready").register("gifting-option", function(f, c) {
        var b = c.$,
            a = c.createClass({
                init: function(a) { a.find("input[type=checkbox]").is(":checked") && this.addGifting(!0);
                    a.delegate("input[type=checkbox]", "change", this._handleChange) },
                _handleChange: function(e) { e = b(e.currentTarget).is(":checked");
                    a.prototype.addGifting(e) },
                addGifting: function(a) {
                    b("#addToCart, #mobile-installments, #oneClickBuy").each(function(d) {
                        d = b(this);
                        var c;
                        c = "oneClickBuy" === d.attr("id") ? "isGift" : "isToBeGiftWrapped";
                        var k = d.find("input[name*=" +
                            c + "]");
                        k.length ? k.val(a) : d.append(f.getHiddenInput(c, a))
                    })
                }
            });
        return a
    })
});
/* ******** */
(function(e) {
    var d = window.AmazonUIPageJS || window.P,
        g = d._namespace || d.attributeErrors,
        b = g ? g("BadgingMessagingAssets") : d;
    b.guardFatal ? b.guardFatal(e)(b, window) : b.execute(function() { e(b, window) }) })(function(e, d, g) {
    e.when("A").register("PromiseBasedBadgeCutoff", function(b) {
        function e(a, f, b, d) {
            f = Math.floor(b - f);
            if (0 >= f || !d()) return null;
            var c = { hours: Math.floor(f / 3600), minutes: Math.floor(f % 3600 / 60), seconds: f % 60 };
            d = "";
            d = 1 < c.hours ? 1 < c.minutes ? a.hoursMinutes : 1 === c.minutes ? a.hoursMinute : a.hours : 1 === c.hours ?
                1 < c.minutes ? a.hourMinutes : 1 === c.minutes ? a.hourMinute : a.hour : 1 < c.minutes ? a.minutes : 0 < c.minutes ? a.minute : 1 < c.seconds ? a.seconds : a.second;
            return d.replace(/{{hours}}|{{minutes}}|{{seconds}}/gi, function(a) {
                return c[a.substring(2, a.length - 2)] })
        }

        function d(a, b, e) { null === a ? b() : e(a) }
        return {
            _calculateNewMessage: e,
            _messageUpdater: d,
            run: function(a, f, g, k) {
                var c = 0,
                    l = function() {
                        return 0 !== b.$(g).length },
                    m = function(a) { b.$(k).html("");
                        clearTimeout(c) },
                    n = function(a) { b.$(g).html(a) },
                    h = function() {
                        var b = Math.floor((new Date).getTime() /
                                1E3),
                            b = e(a, b, f, l);
                        d(b, m, n)
                    },
                    c = setInterval(h, 1E3);
                h()
            }
        }
    })
});
/* ******** */
(function(f) {
    var h = window.AmazonUIPageJS || window.P,
        k = h._namespace || h.attributeErrors,
        d = k ? k("MyFitDetailPageAssets") : h;
    d.guardFatal ? d.guardFatal(f)(d, window) : d.execute(function() { f(d, window) }) })(function(f, h, k) {
    f.when("A", "a-button", "a-popover", "a-carousel-framework", "cf", "jQuery").execute(function(d, f, e, h, n, c) {
        var a = {
            retrySubmitting: function(b, d, e, f) { e > f || c.ajax({ url: b, type: "POST", data: d, timeout: 4E3 * e, error: function() { a.retrySubmitting(b, d, e + 1, f) } }) },
            submitRecommendationGivenFeedback: function() {
                a.retrySubmitting(a.baseURL +
                    "/ref=myfit_reco", { action: "reco", asin: a.pAsin }, 1, 3)
            },
            submitLinkClickedFeedBack: function() { a.retrySubmitting(a.baseURL + "/ref=myfit_lh", { action: "linkHit", asin: a.pAsin }, 1, 3) },
            popoverDisplayLinkHandler: function(b) { a.submitLinkClickedFeedBack();
                a.$popoverDisplayLink.unbind("mouseover touchstart", a.popoverDisplayLinkHandler) },
            getSelectedSizeFromState: function(a) {
                return a[0] },
            showFitFinder: function(b) {
                a.$recFinderLink.hide();
                a.$recFinder.show();
                a.areCarouselsInitialized ? (a.gotoPageInCarousel(a.$menCarousel,
                    a.$menCarouselSelectedPage), a.gotoPageInCarousel(a.$womenCarousel, a.$womenCarouselSelectedPage)) : (a.setupCarousels(), a.areCarouselsInitialized = !0)
            },
            setupCarousels: function() { a.initCarousel();
                a.passSizeValueFromCarouselMen();
                a.passSizeValueFromCarouselWomen();
                a.passWidthValueFromCarouselMen();
                a.passWidthValueFromCarouselWomen() },
            initCarousel: function() {
                h.createAll();
                h.initializeAll();
                a.$menCarousel = h.getCarousel(c("#myFitSizeCarouselMen"));
                a.$womenCarousel = h.getCarousel(c("#myFitSizeCarouselWomen"));
                a.showPopularSizesInCarousel("myFitSizeCarouselMen", 3);
                a.showPopularSizesInCarousel("myFitSizeCarouselWomen", 3)
            },
            showPopularSizesInCarousel: function(b, c) { h.onInit(b, function(b) { a.gotoPageInCarousel(b, c) }) },
            gotoPageInCarousel: function(a, c) { a !== k && c !== k && a.gotoPage(c, { animationDuration: 0, silent: !0 }) },
            carouselButtonSelectionStyling: function(a, d) {
                c("#" + a + " #myFitCarouselAUIButton.a-button-selected").removeClass("a-button-selected");
                c("#" + a + " #myFitCarouselAUIButton.a-button-focus").removeClass("a-button-focus");
                c(d).addClass("a-button-selected")
            },
            passSizeValueFromCarouselMen: function() { a.$carouselSizeButtonMen.bind("click", function() { a.carouselButtonSelectionStyling("myFitSizeCarouselMen", this);
                    var b = c("#myFitSizeCarouselMen #myFitCarouselAUIButton.a-button-selected button#myFitCarouselButton").val();
                    b !== a.menRegularSize && ("undefined" !== typeof a.$menCarousel && null !== a.$menCarousel && (a.$menCarouselSelectedPage = a.$menCarousel.getAttr("pageNumber")), a.menRegularSize = b, a.submitUserRegularSize(b)) }) },
            passSizeValueFromCarouselWomen: function() {
                a.$carouselSizeButtonWomen.bind("click",
                    function() { a.carouselButtonSelectionStyling("myFitSizeCarouselWomen", this);
                        var b = c("#myFitSizeCarouselWomen #myFitCarouselAUIButton.a-button-selected button#myFitCarouselButton").val();
                        b !== a.womenRegularSize && ("undefined" !== typeof a.$womenCarousel && null !== a.$womenCarousel && (a.$womenCarouselSelectedPage = a.$womenCarousel.getAttr("pageNumber")), a.womenRegularSize = b, a.submitUserRegularSize(b)) })
            },
            passWidthValueFromCarouselMen: function() {
                a.$carouselWidthButtonMen.bind("click", function() {
                    a.carouselButtonSelectionStyling("myFitWidthCarouselMen",
                        this);
                    var b = c("#myFitWidthCarouselMen #myFitCarouselAUIButton.a-button-selected button#myFitCarouselButton").val();
                    b !== a.menWidth && (a.menWidth = b, a.submitUserWidth(b))
                })
            },
            passWidthValueFromCarouselWomen: function() { a.$carouselWidthButtonWomen.bind("click", function() { a.carouselButtonSelectionStyling("myFitWidthCarouselWomen", this);
                    var b = c("#myFitWidthCarouselWomen #myFitCarouselAUIButton.a-button-selected button#myFitCarouselButton").val();
                    b !== a.womenWidth && (a.womenWidth = b, a.submitUserWidth(b)) }) },
            submitUserRegularSize: function(b) {
                a.regularSize =
                    b;
                a.submitUserSize()
            },
            submitUserWidth: function(b) { a.width = b;
                a.submitUserSize() },
            updateRecommendation: function(b) {
                var d = null,
                    d = "true" === b.showRecommendation ? b.popoverTitle : b.errorMessage;
                a.$recommendedSizeLinkText.text(b.recommendedSizeLinkText);
                a.$titleLinkTextWithFitZone.text(b.titleLinkTextWithFitZone);
                a.$recommendedSize.html(c(c("<textarea/>").html(b.titleRecommendation).text()));
                a.$popoverTitle.html(d).append(c(c("<textarea/>").html(b.recommendation).text()));
                a.$popoverBasisMessage.text(b.popoverBasisMessage);
                a.$popoverExplanationMessage.text(b.popupMessageWithCustomerRegularSize);
                a.$recFinderLink.text(b.fitFinderLink);
                a.$recFinderAskRegularSize.removeClass("a-text-bold");
                a.$recommendationData.attr("algo", b.algo);
                a.$recommendationData.attr("rasin", b.recommendedAsin);
                a.$recommendationData.attr("size", b.size);
                a.$recommendationData.attr("rtype", b.recommendationMarker);
                a.$recommendationData.attr("category", b.category);
                a.$recommendationData.attr("directionality", b.directionality);
                a.populateRecommendationData();
                a.setupBaseUrl();
                a.submitRecommendationGivenFeedback();
                a.$popoverHeader.show();
                a.myFitPopoverExplanationMessageSection.show()
            },
            submitUserSize: function(b) {
                b = a.parentURL;
                var e = a.regularSize,
                    f = a.width;
                "-1" !== e && (e = { asin: a.pAsin, regularSize: e, width: f }, c.ajax({
                    url: b + "/fit-finder/ref=myfit_reg_size",
                    type: "POST",
                    data: e,
                    dataType: "json",
                    timeout: 5E3,
                    beforeSend: function() { a.$recFinderLoadMessage.show();
                        a.$recFinderClientErrorMessage.hide();
                        a.$recFinderServerErrorMessage.hide() },
                    success: function(b) { a.updateRecommendation(b) },
                    error: function(b, c, d) { c = /^([5][0-9][0-9])$/;
                        0 === b.status ? a.$recFinderClientErrorMessage.show() : c.test(b.status) && a.$recFinderServerErrorMessage.show() },
                    complete: function() { a.$recFinderLoadMessage.hide() }
                }), d.on("a:popover:afterHide:myfitPopover", function() { a.repaintFitFinder() }))
            },
            repaintFitFinder: function() { a.$recFinder.hide();
                a.$recFinderLink.show();
                a.$recFinderClientErrorMessage.hide();
                a.$recFinderServerErrorMessage.hide() },
            submitUserVoteFeedback: function(b) {
                var c = a.baseURL;
                a.$recommendationSurvey.hide();
                var d = { action: "feedback", asin: a.pAsin, vote: b };
                b === a.yesVote ? c += "/ref=myfit_fb_yes" : b === a.noVote && (c += "/ref=myfit_fb_no");
                a.vote = b;
                a.retrySubmitting(c, d, 1, 3);
                a.$recommendationSurveyComment.show()
            },
            submitUserComment: function() {
                var b = a.baseURL,
                    c = a.$recommendationSurveyCommentBox.val();
                a.$recommendationSurveyComment.hide();
                c = { action: "comment", asin: a.pAsin, vote: a.vote, comment: c };
                a.vote === a.yesVote ? b += "/ref=myfit_fb_c_yes" : a.vote === a.noVote && (b += "/ref=myfit_fb_c_no");
                a.retrySubmitting(b, c, 1, 3);
                a.$recommendationSurveyThankYou.show();
                d.on("a:popover:afterHide:myfitPopover", function() { a.$recommendationSurveyThankYou.hide() })
            },
            populateRecommendationData: function() { a.pAsin = a.$recommendationData.attr("asin");
                a.directionality = a.$recommendationData.attr("directionality");
                a.category = a.$recommendationData.attr("category");
                a.rtype = a.$recommendationData.attr("rtype");
                a.size = a.$recommendationData.attr("size");
                a.rasin = a.$recommendationData.attr("rasin");
                a.algo = a.$recommendationData.attr("algo") },
            setupBaseUrl: function() {
                a.baseURL = a.parentURL;
                a.baseURL += "/rAsin/" + a.rasin + "/size/" + a.size + "/algo/" + a.algo + "/dirn/" + a.directionality + "/category/" + a.category + "/rtype/" + a.rtype
            },
            initialize: function() {
                a.$recommendationData = c("#myFitRecommendationData");
                a.populateRecommendationData();
                "undefined" !== typeof a.algo && (a.parentURL = "/gp/myfit/aj/log", a.yesVote = "Yes", a.noVote = "No", a.regularSize = "-1", a.width = "NOTSPECIFIED", a.womenRegularSize = "-1", a.womenWidth = "NOTSPECIFIED", a.menRegularSize = "-1", a.menWidth = "NOTSPECIFIED", a.areCarouselsInitialized = !1, a.$recommendedSizeLinkText =
                    c("#myfitRecommendedSizeLinkText"), a.$recommendedSize = c("#myFitRecommendedSize"), a.$titleLinkTextWithFitZone = c("#myFitTitleLinkTextWithFitZone"), a.$popoverDisplayLink = c("#myfitLink"), a.$popover = c("#myfitPopover"), a.$popoverHeader = c("#myFitPopoverHeader"), a.$popoverTitle = c("#myfitPopoverTitle"), a.$popoverBasisMessage = c("#myfitPopoverBasisMessage"), a.$popoverExplanationMessage = c("#myFitPopoverExplanationMessage"), a.myFitPopoverExplanationMessageSection = c("#myFitPopoverExplanationMessageSection"), a.$recFinder =
                    c("#myFitRecFinder"), a.$recFinderLink = c("#myFitRecFinderLink"), a.$recFinderAskRegularSize = c("#myFitRecFinderAskRegularSize"), a.$recFinderLoadMessage = c("#myFitRecFinderLoadMessage"), a.$recFinderClientErrorMessage = c("#myFitRecFinderClientErrorMessage"), a.$recFinderServerErrorMessage = c("#myFitRecFinderServerErrorMessage"), a.$recommendationSurvey = c("#myFitRecommendationSurvey"), a.$recommendationSurveyCommentBox = c("#myFitRecommendationSurveyCommentBox"), a.$recommendationSurveyThankYou = c("#myFitRecommendationSurveyThankYou"),
                    a.$recommendationSurveyComment = c("#myFitRecommendationSurveyComment"), a.$carouselSizeButtonMen = c("#myFitSizeCarouselMen #myFitCarouselAUIButton"), a.$carouselSizeButtonWomen = c("#myFitSizeCarouselWomen #myFitCarouselAUIButton"), a.$carouselWidthButtonMen = c("#myFitWidthCarouselMen #myFitCarouselAUIButton"), a.$carouselWidthButtonWomen = c("#myFitWidthCarouselWomen #myFitCarouselAUIButton"), a.$popoverDisplayLink.bind("mouseover touchstart", a.popoverDisplayLinkHandler), a.$recFinderLink.bind("click touchstart",
                        function(b) { a.showFitFinder();
                            b.preventDefault() }), d.on("a:tabs:myFitUnisexGenderSelector:myFitMen:select", function(b) { a.width = a.menWidth;
                        a.regularSize = a.menRegularSize;
                        a.gotoPageInCarousel(a.$menCarousel, a.$menCarouselSelectedPage) }), d.on("a:tabs:myFitUnisexGenderSelector:myFitWomen:select", function(b) { a.width = a.womenWidth;
                        a.regularSize = a.womenRegularSize;
                        a.gotoPageInCarousel(a.$womenCarousel, a.$womenCarouselSelectedPage) }), d.on("a:button-group:myFitWidthToggleGroupMen:toggle", function(b) {
                        b = b.selectedButton.buttonName;
                        b !== a.menWidth && (a.menWidth = b, a.submitUserWidth(a.menWidth))
                    }), d.on("a:button-group:myFitWidthToggleGroupWomen:toggle", function(b) { b = b.selectedButton.buttonName;
                        b !== a.womenWidth && (a.womenWidth = b, a.submitUserWidth(a.womenWidth)) }), c("#myFitRecommendationVoteNo").bind("click", function() { a.submitUserVoteFeedback(a.noVote) }), c("#myFitRecommendationVoteYes").bind("click", function() { a.submitUserVoteFeedback(a.yesVote) }), c("#myFitRecommendationSurveyCommentSubmit").bind("click", function() { a.submitUserComment() }),
                    a.setupCarousels(), a.setupBaseUrl(), a.submitRecommendationGivenFeedback())
            }
        };
        a.initialize()
    })
});
/* ******** */
(function(c) {
    var d = window.AmazonUIPageJS || window.P,
        e = d._namespace || d.attributeErrors,
        a = e ? e("DetailPageCerberusAssets") : d;
    a.guardFatal ? a.guardFatal(c)(a, window) : a.execute(function() { c(a, window) }) })(function(c, d, e) {
    c.when("A", "jQuery", "ready", "cf").execute(function(a, b) {
        var c = b("#cerberus-metrics").attr("value");
        a.objectIsEmpty(c) || b.ajax({ url: c, type: "POST" });
        b(".cerberus-asin").bind("click", function() {
            var a = b(this).attr("data-params");
            b.ajax({ url: a, type: "POST" }) });
        b("#cerberusVoteYes").bind("click",
            function() { d(b("#cerberusVoteSection").attr("data-yes")) });
        b("#cerberusVoteNo").bind("click", function() { d(b("#cerberusVoteSection").attr("data-no")) });
        var d = function(a) { b.ajax({ url: a, type: "POST" });
            b("#cerberusVoteSection").hide();
            b("#cerberusVoteThankYou").show() }
    });
    c.when("jQuery", "p13n-sc-line-truncator", "ready", "cf").execute(function(a, b) { a(".cerberus-no-wrap").removeClass("cerberus-no-wrap");
        b.truncateLines(a("#cerberus")) })
});
/* ******** */
(function(p) {
    var t = window.AmazonUIPageJS || window.P,
        v = t._namespace || t.attributeErrors,
        d = v ? v("ReplacementPartsAssets") : t;
    d.guardFatal ? d.guardFatal(p)(d, window) : d.execute(function() { p(d, window) }) })(function(p, t, v) {
    p.when("A", "jQuery", "HSXSushiLogger").register("HSXMetricsLogger", function(d, b, n) {
        var h = "hsx",
            m = n.createLogger(),
            a = function(a, b, c) {
                var f = t.ue,
                    e = d.state("hsx-rpp-finder");
                if (!d.objectIsEmpty(f)) {
                    var w = f.furl;
                    w === v && (w = "fls-na.amazon.com");
                    var k = d.state("detail-page-device-type"),
                        u = "mobile";
                    k && k.deviceType && (u = k.deviceType);
                    var q = "/1/action-impressions/1/OP/" + h + "/action/",
                        n = a + ":" + b,
                        k = t.ue_mid,
                        B = t.ue_sid,
                        f = f.rid,
                        z = "?marketplaceId=" + k + "&deviceType=" + u + "&requestId=" + f + "&session=" + B;
                    c || (c = {});
                    if (c) {
                        e && (e.finderName && (c.finderName = e.finderName), e.pageType && (c.pageType = e.pageType), e.browseNode && (c.browseNode = e.browseNode), e.ptd && (c.ptd = e.ptd), e.category && (c.category = e.category), e.weblabName && (c.weblabName = e.weblabName), e.weblabTreatment && (c.weblabTreatment = e.weblabTreatment), e.asin && !c.asin &&
                            (c.asin = e.asin), e.modelBrand && !c.modelBrand && (c.modelBrand = e.modelBrand), e.modelSeries && !c.modelSeries && (c.modelSeries = e.modelSeries), e.modelNumber && !c.modelNumber && (c.modelNumber = e.modelNumber));
                        for (var A in c) c.hasOwnProperty(A) && (z += "&" + A + "=" + encodeURIComponent(c[A]))
                    }(e = "https://" + w + q + n + z) && d.$.get(e);
                    c.marketplaceId = k;
                    c.requestId = f;
                    c.session = B;
                    c.deviceType = u;
                    c.featureName = a;
                    c.action = b;
                    m.recordMetrics(c)
                }
            };
        return { createLogger: function(b) { b && (h = b);
                return { emitMetrics: a } } }
    });
    p.now("HSXSushiLogger").execute(function(d) {
        "undefined" ===
        typeof d && p.when("A").register("HSXSushiLogger", function(b) {
            var d, h = function(h) {
                if (!b.objectIsEmpty(h) && h.marketplaceId) {
                    var a = {};
                    switch (h.marketplaceId) {
                        case "A1F83G8C2ARO7P":
                        case "A13V1IB3VIYZZH":
                        case "APJ6JRA9NG5V4":
                        case "A1RKKUPIHCS9HS":
                        case "A1PA6795UKMFR9":
                        case "A21TJRUUN4KGV":
                            a.endpoint = "unagi-eu.amazon.com";
                            a.sourceGroup = "com.amazon.hsx.eel.eu";
                            break;
                        case "A1VC38T7YXB528":
                            a.endpoint = "unagi-fe.amazon.com";
                            a.sourceGroup = "com.amazon.hsx.eel.fe";
                            break;
                        case "AAHKV2X7AFYLW":
                            a.endpoint = "unagi-cn.amazon.com";
                            a.sourceGroup = "com.amazon.hsx.eel.cn";
                            break;
                        default:
                            a.endpoint = "unagi-na.amazon.com", a.sourceGroup = "com.amazon.hsx.eel.na"
                    }
                    b.$.post("https://" + a.endpoint + "/1/events/" + (d ? d : a.sourceGroup), JSON.stringify({ events: [{ data: h }] }), null, "application/json")
                }
            };
            return { createLogger: function(b) { b && (d = b);
                    return { recordMetrics: h } } }
        })
    });
    p.now("ReplacementPartsStripeModelHelpModule").execute(function(d) {
        "undefined" === typeof d && p.when("A", "a-popover", "a-dropdown", "jQuery", "ready").register("ReplacementPartsStripeModelHelpModule",
            function(b, d, h, m) {
                var a = { config: { imageCdn: "https://images-na.ssl-images-amazon.com/images/G/01/replacement-parts/", modelHelpContentUrl: "/gp/replacement-parts/ajax/modelnumber-help-content.html" } };
                a.helpMeFindModelNumber = a.helpMeFindModelNumber || {};
                a.helpMeFindModelNumber.data = {
                    major_appliance: {
                        modelHelpVersion: "v1",
                        displayText: "Major Appliance",
                        subCategoryDisplayName: "Sub Category",
                        subcategory: {
                            refrigerator: { displayText: "Refrigerator", filter: { side_by_side: { displayText: "Side by Side" }, freezer_on_top: { displayText: "Freezer on Top" } } },
                            washer_dryer_combo: { displayText: "Washer/Dryer Combo", filter: { top_load: { displayText: "Top Load" }, front_load: { displayText: "Front Load" } } },
                            washing_machine: { displayText: "Washing Machine", filter: { top_load: { displayText: "Top Load" }, front_load: { displayText: "Front Load" } } },
                            freezer_chest: { displayText: "Freezer Chest" },
                            freezer_upright: { displayText: "Freezer Upright" },
                            dishwasher: { displayText: "Dishwasher" },
                            dryer_old_style_old_style: { displayText: "Dryer(Old Style)" },
                            dryer_new_style: { displayText: "Dryer(New Style)" },
                            ice_machine: { displayText: "Ice Machine" },
                            microwave_counter: { displayText: "Microwave(Counter Top)" },
                            oven_micro_combo: { displayText: "Oven/Micro. Combo" },
                            range_vent_hood: { displayText: "Range Vent Hood" },
                            range_stove_oven: { displayText: "Range/Stove/Oven" },
                            trash_compactor: { displayText: "Trash Compactor" },
                            water_filter: { displayText: "Water Filter" },
                            hot_water_dispenser: { displayText: "Hot Water Dispenser" },
                            garbage_disposer: { displayText: "Garbage Disposer" },
                            water_heater: { displayText: "Water Heater" }
                        }
                    },
                    outdoor_power: {
                        modelHelpVersion: "v1",
                        displayText: "Outdoor Power",
                        subCategoryDisplayName: "Sub Category",
                        subcategory: {
                            chainsaw: { displayText: "Chainsaw" },
                            edger: { displayText: "Edger" },
                            hedge_trimmer: { displayText: "Hedge Trimmer" },
                            lawn_mower: { displayText: "Lawn Mower", filter: { push: { displayText: "Push" }, tractor: { displayText: "Tractor" }, zero_turn: { displayText: "Zero Turn" } } },
                            leaf_blower: { displayText: "Leaf Blower" },
                            pole_pruner: { displayText: "Pole Pruner" },
                            pressure_washer: { displayText: "Pressure Washer" },
                            small_engine: { displayText: "Small Engine" },
                            snow_blower: { displayText: "Snow Blower" },
                            string_trimmer: { displayText: "String Trimmer" },
                            tiller: { displayText: "Tiller", filter: { large: { displayText: "Large" }, small: { displayText: "Small" } } }
                        }
                    },
                    PowerTools: {
                        modelHelpVersion: "v2",
                        hasUpperPanelContent: !0,
                        displayText: "Power Tools",
                        subCategoryDisplayName: "Brand",
                        subcategory: {
                            BlackandDecker: { displayText: "Black and Decker" },
                            Bosch: { displayText: "Bosh" },
                            Bostich: { displayText: "Bostich" },
                            Dewalt: { displayText: "Dewalt" },
                            RoyalDirtDevil: { displayText: "Dirt Devil / Royal" },
                            Echo: { displayText: "Echo" },
                            Eureka: { displayText: "Eureka" },
                            Hitachi: { displayText: "Hitachi" },
                            Hoover: { displayText: "Hoover" },
                            Karcher: { displayText: "Karcher" },
                            Makita: { displayText: "Makita" },
                            Metabo: { displayText: "Metabo" },
                            Milwaukee: { displayText: "Milwaukee" },
                            PorterCable: { displayText: "Porter Cable" },
                            Rigid: { displayText: "Rigid" },
                            RotoZip: { displayText: "RotoZip" },
                            Ryobi: { displayText: "Ryobi" },
                            Skil: { displayText: "Skil" },
                            Worx: { displayText: "Worx" }
                        }
                    },
                    hvac: {
                        modelHelpVersion: "v1",
                        displayText: "HVAC",
                        subCategoryDisplayName: "Sub Category",
                        subcategory: {
                            furnace: { displayText: "Furnace" },
                            air_conditioner: { displayText: "Air Conditioner" },
                            central_air: { displayText: "Central Air" },
                            dehumidifier: { displayText: "Dehumidifier" },
                            humidifier: { displayText: "Humidifier" }
                        }
                    },
                    vacuum: { modelHelpVersion: "v1", displayText: "Vacuums", subCategoryDisplayName: "Sub Category", subcategory: { vacuum_cleaner: { displayText: "Vacuum Cleaner", filter: { upright: { displayText: "Upright" }, central: { displayText: "Central" }, canister: { displayText: "Canister" } } } } },
                    Grills: {
                        modelHelpVersion: "v2",
                        hasUpperPanelContent: !1,
                        displayText: "Grills",
                        subCategoryDisplayName: "Brand",
                        subcategory: { CharBroil: { displayText: "Char-Broil" }, Kenmore: { displayText: "Kenmore" }, Weber: { displayText: "Weber" }, Charmglow: { displayText: "Charmglow" }, Solaire: { displayText: "Solaire" }, Other: { displayText: "Other" } }
                    },
                    Sports: {
                        modelHelpVersion: "v2",
                        hasLeftPanelContent: !0,
                        displayText: "Sports",
                        subCategoryDisplayName: "Sub Category",
                        subcategory: {
                            Treadmills: { displayText: "Treadmills" },
                            EllipticalEquipment: { displayText: "Elliptical Equipment" },
                            StationaryBike: { displayText: "Stationary Bike" },
                            StepMachine: { displayText: "Step Machine" },
                            Trampoline: { displayText: "Trampoline" }
                        }
                    },
                    Plumbing: { modelHelpVersion: "v2", hasLeftPanelContent: !0, displayText: "Plumbing", subCategoryDisplayName: "Sub Category", subcategory: { Toilets: { displayText: "Toilets" } } }
                };
                a.clearSelect = function(a) {
                    for (var b = h.getSelect(a).getOptions().size(), c = [], f = 0; f < b; f++) c[f] = f;
                    h.getSelect(a).removeOption(c) };
                a.helpMeFindModelNumber.initialize = function() { a.helpMeFindModelNumber.populateCategory() };
                a.helpMeFindModelNumber.populateCategory =
                    function() {
                        var b = 0,
                            g;
                        for (g in a.helpMeFindModelNumber.data) a.helpMeFindModelNumber.data.hasOwnProperty(g) && (h.getSelect("hsx-rpp-modelNumberMarkerCategory").addOption({ text: a.helpMeFindModelNumber.data[g].displayText, value: g }, b), b++);
                        h.getSelect("hsx-rpp-modelNumberMarkerCategory").removeOption(b);
                        0 < h.getSelect("hsx-rpp-modelNumberMarkerCategory").getOptions().size() && (b = h.getSelect("hsx-rpp-modelNumberMarkerCategory").getOption(0), h.getSelect("hsx-rpp-modelNumberMarkerCategory").setValue(b.info()[0].value),
                            a.helpMeFindModelNumber.populateSubcategory(b.info()[0].value))
                    };
                a.helpMeFindModelNumber.populateSubcategory = function(b) {
                    a.clearSelect("hsx-rpp-modelNumberMarkerSubcategory");
                    var g = a.helpMeFindModelNumber.data[b],
                        c = 0,
                        f;
                    for (f in g.subcategory)
                        if (g.subcategory.hasOwnProperty(f)) {
                            var e = a.helpMeFindModelNumber.data[b].subcategory[f];
                            if (e.filter)
                                for (var d in e.filter) {
                                    if (e.filter.hasOwnProperty(d)) {
                                        var k = e.filter[d];
                                        h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").addOption({
                                            text: e.displayText + " " +
                                                k.displayText,
                                            value: b + "|" + f + "|" + d
                                        }, c);
                                        c++
                                    }
                                } else h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").addOption({ text: e.displayText, value: b + "|" + f }, c), c++
                        }
                    0 < h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").getOptions().size() && (b = h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").getOption(0), h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").setValue(b.info()[0].value), a.loadModelHelpContentForKey(b.info()[0].value))
                };
                a.bindEvents = function(d, g) {
                    var c = b.$("#hsx-rpp-modelnumberBadgeBig").attr("src");
                    c && (c = c.substring(0, c.lastIndexOf("/") + 1)) && (a.config.imageCdn = c);
                    b.on("a:dropdown:hsx-rpp-modelNumberMarkerCategory:select", function(b) { "-1" !== b.value && (d.emitMetrics(g, "ModelNumberHelpSwitchCategory", { categoryName: b.value }), a.helpMeFindModelNumber.populateSubcategory(b.value)) });
                    b.on("a:dropdown:hsx-rpp-modelNumberMarkerSubcategory:select", function(b) { "-1" !== b.value && a.loadModelHelpContentForKey(b.value) })
                };
                a.loadModelHelpContentForKey = function(b) {
                    b = b.split("|");
                    if (2 <= b.length) {
                        var g = a.helpMeFindModelNumber.data[b[0]];
                        g && ("v2" === g.modelHelpVersion ? a.v2.load(b[0], b[1]) : (a.switchModelHelpLayout("v1"), a.setModelNumberMarkerImage(b.join("_"))))
                    }
                };
                a.switchModelHelpLayout = function(a, b) {
                    "v2" === a ? (m("#hsx-rpp-modelNumberMarkerImageContainer").hide(), m("#hsx-rpp-modelNumberMarkerImage").hide(), m(".hsx-rpp-modelHelpLowerPanel").show(), b ? (m("#hsx-rpp-modelNumberMarkersContainer").hide(), m(".hsx-rpp-modelHelpUpperPanel").show()) : (m("#hsx-rpp-modelNumberMarkersContainer").show(), m(".hsx-rpp-modelHelpUpperPanel").hide())) : (m(".hsx-rpp-modelHelpUpperPanel").hide(),
                        m(".hsx-rpp-modelHelpLowerPanel").hide(), m("#hsx-rpp-modelNumberMarkersContainer").show(), m("#hsx-rpp-modelNumberMarkerImage").show())
                };
                a.v2 = {};
                a.v2.load = function(d, g) {
                    var c = a.helpMeFindModelNumber.data[d].hasUpperPanelContent;
                    b.ajax(a.config.modelHelpContentUrl + "?category=" + encodeURIComponent(d) + "&subCategory=" + encodeURIComponent(g) + "&hasLeftPanelContent=" + (c ? "1" : "0"), {
                        method: "get",
                        data: {},
                        success: function(b) {
                            m(".hsx-rpp-modelHelpUpperPanel").length || m('<div class="a-section hsx-rpp-modelHelpUpperPanel"></div>').insertBefore("#hsx-rpp-modelNumberMarkerImage");
                            m(".hsx-rpp-modelHelpLowerPanel").length || m('<div class="hsx-rpp-modelHelpLowerPanel"></div>').insertAfter("#hsx-rpp-modelNumberMarkerImage");
                            c && m(".hsx-rpp-modelHelpUpperPanel").html(b.leftPanelHTML);
                            m(".hsx-rpp-modelHelpLowerPanel").html(b.rightPanelHTML);
                            a.switchModelHelpLayout("v2", c)
                        }
                    })
                };
                a.setModelNumberMarkerImage = function(d) { b.$("#hsx-rpp-modelNumberMarkerImage").attr("src", a.config.imageCdn + d + ".jpg") };
                return a
            })
    });
    p.now("ReplacementPartsStripeUtility").execute(function(d) {
        "function" !==
        typeof String.prototype.trim && (String.prototype.trim = function() {
            return this.replace(/^\s+|\s+$/g, "") });
        "function" !== typeof String.prototype.endsWith && (String.prototype.endsWith = function(b) {
            return -1 !== this.indexOf(b, this.length - b.length) });
        "undefined" === typeof d && p.when("A", "a-dropdown", "a-popover", "ready").register("ReplacementPartsStripeUtility", function(b, d, h) {
            var m = { searchParameterConfig: { prefix: "bsm://", fieldDelimiter: "|", fieldValueDelimiter: "^", stripeOverrideDelimiter: "~", parameter: "rpp" } },
                a = { inkandtoner: 1, camera: 1 };
            m.htmlDecode = function(a) {
                var b = document.createElement("div");
                b.innerHTML = a;
                return 0 === b.childNodes.length ? "" : b.childNodes[0].nodeValue };
            m.getEncodedParameter = function(a, g, c, f, e, d) {
                var k = m.searchParameterConfig.fieldDelimiter,
                    h = m.searchParameterConfig.fieldValueDelimiter,
                    q = m.searchParameterConfig.prefix,
                    q = q + (a + h + g) + k;
                "undefined" !== typeof d && 0 < d.length && "BASE" !== d.toUpperCase() && (q += e + h + d);
                q += k;
                q += c + h + f;
                q += k;
                b.state("rpp") && b.state("rpp").overriddenStripeId && (q += m.searchParameterConfig.stripeOverrideDelimiter +
                    b.state("rpp").overriddenStripeId);
                return encodeURIComponent(q)
            };
            m.isCurrentScopeInV2 = function() {
                var d = b.state("hsx-rpp-finder");
                return d && d.scope && a[d.scope] ? !0 : !1 };
            m.config = {
                brandListUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=brandList",
                checkFitmentUrl: "/gp/replacement-parts/ajax/hsx-rpp-dp-ajax-handler.html?ie=UTF8",
                modelListUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=modelList",
                modelFuzzyMatchUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=modelSearch",
                modelQueryUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=modelInfo",
                modelSearchUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=modelSearch",
                modelSuggestUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=modelSuggest",
                combinedModelSuggestUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=combinedModelSuggest&ie=UTF8",
                modelnumberSeriesQueryUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=modelnumberSeriesInfo",
                partFuzzyMatchUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=partSearch",
                partQueryUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=partInfo",
                partSuggestUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=partSuggest",
                seriesListUrl: "/gp/replacement-parts/ajax/query-index.html?qtype=seriesList"
            };
            return m
        })
    });
    p.now("ReplacementPartsSearchFinder").execute(function(d) {
        "undefined" === typeof d && p.when("A", "a-secondary-view", "a-popover-data", "HSXMetricsLogger", "ReplacementPartsStripeUtility", "ReplacementPartsStripeModelHelpModule", "ready").register("ReplacementPartsSearchFinder", function(b, d, h, m, a, l) {
            function g(c, f) {
                var e = b.state("hsx-rpp-finder"),
                    g = q.config.defaultModelsLayout;
                a.isCurrentScopeInV2() && (g += "&scope=" + e.scope);
                k({ url: g, success: function(f) {
                        var e = b.state("hsx-rpp-finder");
                        d.get(e.popoverName).update(f);
                        a.isCurrentScopeInV2() || (l.helpMeFindModelNumber.populateCategory(), l.bindEvents(q.metricsLogger, q.config.metricsPrefix), u(".hsx-rpp-helpModelPlate").attr("src", "https://images-na.ssl-images-amazon.com/images/G/01/replacement-parts/modelnumber_plate_5._CB333535898_.png"));
                        u("#rpp_selected_brand_field").html(c) } })
            }

            function c(c) {
                var f =
                    d.get(b.state("hsx-rpp-finder").popoverName).getContent(),
                    e = b.state("hsx-rpp-finder"),
                    e = q.config.brandSuggestUrl + "&q=" + c + "&asin=" + e.asin;
                a.isCurrentScopeInV2() && (e += "&scope=" + b.state("hsx-rpp-finder").scope);
                q.metricsLogger.emitMetrics(q.config.metricsPrefix, "BrandEntered", { modelBrand: c });
                k({ url: e, useSpinner: !0, success: function(a) { 0 === a.brandCount ? (f.find("#hsx-rpp-brand-results").html(a.template), q.metricsLogger.emitMetrics(q.config.metricsPrefix, "BrandNotFound", { modelBrand: c })) : f.find("#hsx-rpp-brand-results").html(a.template) } })
            }

            function f(c) {
                d.get(b.state("hsx-rpp-finder").popoverName).getContent();
                var f = b.state("hsx-rpp-finder"),
                    e = q.config.combinedModelSuggestUrl + "&q=" + c,
                    e = e + ("&ef[brand]=" + f.selectedBrand);
                a.isCurrentScopeInV2() && (e += "&scope=" + b.state("hsx-rpp-finder").scope);
                q.metricsLogger.emitMetrics(q.config.metricsPrefix, "ModelNumberEntered", { modelBrand: f.selectedBrand, modelNumber: c });
                k({
                    url: e,
                    useSpinner: !0,
                    success: function(a) {
                        a.hits && 0 === a.hits.found ? (u("#hsx-rpp-model-results").html(a.template), q.metricsLogger.emitMetrics(q.config.metricsPrefix,
                            "ModelNumberNotFound", { modelBrand: f.selectedBrand, modelNumber: c })) : u("#hsx-rpp-model-results").html(a.template)
                    },
                    error: function(a) { u("#hsx-rpp-model-results").html(u("#hsx-rpp-error-message").html()) }
                })
            }

            function e(c, f, e, g, d, k) { c = a.getEncodedParameter(c, f, e, g, d, k);
                e = u("#hsx-rpp-search-form");
                w(e, a.searchParameterConfig.parameter, c);
                b.objectIsEmpty(f) && b.objectIsEmpty(g) && b.objectIsEmpty(k) && a.setFormField(e, "rd", "1");
                b.$(e).submit() }

            function w(a, c, f) {
                "" === f ? 0 < b.$(a).find("input[name=" + c + "]").length &&
                    b.$(a).find("input[name=" + c + "]").remove() : 0 < b.$(a).find("input[name=" + c + "]").length ? b.$(a).find("input[name=" + c + "]").val(f) : b.$('<input type="hidden" />').attr({ name: c, value: f }).addClass("asFormInput").appendTo(a)
            }

            function k(a) {
                B && B.abort();
                y.show();
                return B = b.ajax(a.url, {
                    method: "get",
                    success: function(c) {
                        if (a.success) a.success(c);
                        else {
                            var f = b.state("hsx-rpp-finder");
                            d.get(f.popoverName).update(c) }
                        y.hide() },
                    error: function(c) {
                        q.metricsLogger.emitMetrics(q.config.metricsPrefix, "SearchAjaxError");
                        a.error ?
                            a.error(c) : (c = b.state("hsx-rpp-finder"), d.get(c.popoverName).update(u("#hsx-rpp-error-message").html()));
                        y.hide()
                    }
                })
            }
            var u = b.$,
                q = {
                    config: {
                        brandSuggestUrl: "/gp/replacement-parts/ajax/smartbox-query.html?ie=UTF8&qType=brand&isMobileRequest=1&isMobileSearchRequest=1",
                        combinedModelSuggestUrl: "/gp/replacement-parts/ajax/smartbox-query.html?ie=UTF8&qType=combinedSuggestion&isMobileRequest=1&isMobileSearchRequest=1",
                        defaultBrandsLayout: "/gp/replacement-parts/ajax/mobile.html?ie=UTF8&qType=default-brands",
                        defaultModelsLayout: "/gp/replacement-parts/ajax/mobile.html?ie=UTF8&qType=default-models",
                        showAllPartsForModelReftag: "dp_rpp_stripe_showallparts_mobile",
                        metricsPrefix: "hsxRPPSearchStripe"
                    }
                };
            b.on("a:popover:beforeShow:hsx-rpp-search-finder", function(a) {
                (a = b.state("rpp")) && ("enter-model" === a.stripeState ? q.metricsLogger.emitMetrics(q.config.metricsPrefix, "CustomerEngaged") : q.metricsLogger.emitMetrics(q.config.metricsPrefix, "CheckAnotherModel")) });
            u(document).ready(function() {
                var c = b.state("hsx-rpp-finder");
                if (c && "search" === c.pageType && (q.metricsLogger = m.createLogger(), c = b.state("rpp")))
                    if ("enter-model" === c.stripeState) q.metricsLogger.emitMetrics(q.config.metricsPrefix, "Loaded", { stripeState: b.state("rpp").stripeState });
                    else {
                        var c = b.state("rpp").modelNumber,
                            f = b.state("rpp").modelBrand;
                        b.state("rpp", { modelNumber: a.htmlDecode(c), modelBrand: a.htmlDecode(f) });
                        q.metricsLogger.emitMetrics(q.config.metricsPrefix, "Loaded", {
                            stripeState: b.state("rpp").stripeState,
                            modelNumber: b.state("rpp").modelNumber,
                            modelBrand: b.state("rpp").modelBrand,
                            resultCount: b.state("rpp").resultCount,
                            browseNodes: b.state("rpp").browseNode
                        })
                    }
            });
            b.declarative("hsx-rpp-favorite-brand-selected", "click", function(a) {
                var c = b.state("hsx-rpp-finder");
                c && "search" !== c.pageType || (c = a.$target.closest(".a-touch-link"), a = c.data("brand"), c = c.text().trim(), b.state("hsx-rpp-finder", { selectedBrand: a, displayBrand: c }), g(c, a), q.metricsLogger.emitMetrics(q.config.metricsPrefix, "FavoriteBrandSelected", { modelBrand: a })) });
            b.declarative("hsx-rpp-show-all-brands", "click", function(a) {
                a =
                    b.state("hsx-rpp-finder");
                a && "search" !== a.pageType || (k({ url: q.config.defaultBrandsLayout }), q.metricsLogger.emitMetrics(q.config.metricsPrefix, "OtherBrandSelected"), q.metricsLogger.emitMetrics(q.config.metricsPrefix, "ShowAllBrands"))
            });
            b.declarative("hsx-rpp-brand-autocomplete", "keyup", function(a) {
                var f = b.state("hsx-rpp-finder");
                f && "search" !== f.pageType || (f = d.get(b.state("hsx-rpp-finder").popoverName).getContent(), a = a.$target.val(), a = a.trim(), "" !== a ? c(a) : f.find("#hsx-rpp-brand-results").html("")) });
            b.declarative("hsx-rpp-brand-selected", "click", function(a) {
                var c = b.state("hsx-rpp-finder");
                c && "search" !== c.pageType || (c = a.$target.closest(".a-touch-link"), a = c.data("brand"), c = c.text().trim(), b.state("hsx-rpp-finder", { selectedBrand: a, displayBrand: c }), g(c, a), q.metricsLogger.emitMetrics(q.config.metricsPrefix, "BrandSelected", { modelBrand: a })) });
            b.declarative("hsx-rpp-see-all-link", "click", function() {
                var a = b.state("hsx-rpp-finder");
                if (!a || "search" === a.pageType) {
                    a = b.$("#hsx-rpp-search-form");
                    a.attr("action",
                        "/s/ref=sx_rpp_stripe_showallparts");
                    w(a, "keywords", "");
                    w(a, "rh", "");
                    w(a, "node", b.state("rpp").rootBrowseNode);
                    var a = b.state("rpp").modelNumber,
                        c = b.state("rpp").modelSeries,
                        f = b.state("rpp").modelBrand,
                        g;
                    g = f.toUpperCase();
                    g = g.replace(/[^A-Z0-9]+/g, "");
                    q.metricsLogger.emitMetrics(q.config.metricsPrefix, "SeeAllPartsThatFit", { modelNumber: a, modelBrand: f, series: c });
                    e(f, g, a, a, c, c)
                }
            });
            b.declarative("hsx-rpp-model-autocomplete", "keyup", function(a) {
                var c = d.get(b.state("hsx-rpp-finder").popoverName).getContent();
                a = a.$target.val();
                a = a.trim();
                "" !== a ? f(a) : c.find("#hsx-rpp-model-results").html("")
            });
            b.declarative("hsx-rpp-model-selected", "click", function(a) {
                var c = b.state("hsx-rpp-finder");
                if (!c || "search" === c.pageType) {
                    var f = a.$target.closest(".a-touch-link");
                    f.data("brand");
                    a = f.data("model");
                    f = f.data("series");
                    q.metricsLogger.emitMetrics(q.config.metricsPrefix, "ModelNumberSelected", { modelBrand: c.selectedBrand, modelNumber: a, series: f });
                    e(c.displayBrand, c.selectedBrand, a, a, f, f) } });
            b.declarative("hsx-rpp-clear-model",
                "click",
                function(a) { q.metricsLogger = m.createLogger();
                    q.metricsLogger.emitMetrics(q.config.metricsPrefix, "ClearModel");
                    e("", "", "", "", "", "") });
            var y = u('<div id="hsx-rpp-loading"><div id="hsx-rpp-spinner"></div></div>');
            y.hide();
            b.state("hsx-rpp-finder") && "search" === b.state("hsx-rpp-finder").pageType && u("body").append(y);
            y.bind("touchmove touchstart touchend", function(a) { a.preventDefault() });
            u(t).bind("scroll", function(a) { y.offset({ top: t.scrollY, left: 0 }) });
            var B
        })
    });
    p.when("A", "a-secondary-view",
        "a-popover-data", "HSXMetricsLogger", "ReplacementPartsStripeUtility", "ReplacementPartsStripeModelHelpModule", "ready").register("ReplacementPartsFinder", function(d, b, n, h, m, a) {
        function l(c, f) {
            var e = d.state("hsx-rpp-finder");
            if (N) b.get(e.popoverName).update(N), b.get(e.popoverName).getContent().find("#rpp_selected_brand_field").html(c);
            else {
                var g = r.config.defaultModelsLayout;
                m.isCurrentScopeInV2() && (g += "&scope=" + e.scope);
                y({
                    url: g,
                    success: function(f) {
                        var e = d.state("hsx-rpp-finder");
                        b.get(e.popoverName).update(f);
                        f = b.get(e.popoverName).getContent();
                        m.isCurrentScopeInV2() || (a.helpMeFindModelNumber.populateCategory(), a.bindEvents(r.metricsLogger, r.config.metricsPrefix), A(".hsx-rpp-helpModelPlate").attr("src", "https://images-na.ssl-images-amazon.com/images/G/01/replacement-parts/modelnumber_plate_5._CB333535898_.png"));
                        f.find("#rpp_selected_brand_field").html(c);
                        N = f.html()
                    }
                })
            }
        }

        function g(a) {
            var c = b.get(d.state("hsx-rpp-finder").popoverName).getContent(),
                f = d.state("hsx-rpp-finder"),
                f = r.config.brandSuggestUrl +
                "&q=" + a + "&asin=" + f.asin;
            m.isCurrentScopeInV2() && (f += "&scope=" + d.state("hsx-rpp-finder").scope);
            r.metricsLogger.emitMetrics(r.config.metricsPrefix, "BrandEntered", { modelBrand: a });
            y({ url: f, useSpinner: !0, success: function(b) { 0 === b.brandCount ? (c.find("#hsx-rpp-brand-results").html(b.template), r.metricsLogger.emitMetrics(r.config.metricsPrefix, "BrandNotFound", { modelBrand: a })) : c.find("#hsx-rpp-brand-results").html(b.template) } })
        }

        function c(a) {
            var c = b.get(d.state("hsx-rpp-finder").popoverName).getContent(),
                f = d.state("hsx-rpp-finder"),
                g = r.config.combinedModelSuggestUrl + "&q=" + a,
                g = g + ("&ef[brand]=" + f.selectedBrand),
                g = g + ("&asin=" + f.asin);
            m.isCurrentScopeInV2() && (g += "&scope=" + d.state("hsx-rpp-finder").scope);
            r.metricsLogger.emitMetrics(r.config.metricsPrefix, "ModelNumberEntered", { modelBrand: f.selectedBrand, modelNumber: a });
            y({
                url: g,
                useSpinner: !0,
                success: function(b) {
                    if (0 === b.count) c.find("#hsx-rpp-model-results").html(b.template), r.metricsLogger.emitMetrics(r.config.metricsPrefix, "ModelNumberNotFound", {
                        modelBrand: f.selectedBrand,
                        modelNumber: a,
                        asin: f.asin
                    });
                    else if (b.payload && b.payload.fitment_decision) {
                        var g = b.brand;
                        f && f.displayBrand && (g = f.displayBrand);
                        var d = A(b.template);
                        d.find(".hsx-rpp-model-info").html(k(g, b.model, b.series));
                        A("#hsx-rpp-finder").html(d);
                        b.payload && "no" === b.payload.fitment_decision ? e(g, b.model, b.series, "no", "yes") : e(g, b.model, b.series, "yes", "yes");
                        z(f.popoverName) } else c.find("#hsx-rpp-model-results").html(b.template)
                },
                error: function(a) { c.find("#hsx-rpp-model-results").html(A("#hsx-rpp-error-message").html()) }
            })
        }

        function f(a, b, c, f) {
            var g = d.state("hsx-rpp-finder"),
                l = "yes";
            !0 === f && (l = "no");
            var h = r.config.checkFitmentUrl + "&asin=" + g.asin,
                h = h + ("&model=" + u(b)),
                h = h + ("&brand=" + q(a)),
                h = h + ("&series=" + u(c));
            y({
                url: h,
                useSpinner: !0 !== f,
                success: function(h) {
                    var w = A(h.template);
                    w.find(".hsx-rpp-model-info").html(k(a, b, c));
                    A("#hsx-rpp-finder").html(w);
                    h.payload && "no" === h.payload.fitment_decision ? e(a, b, c, "no", l) : e(a, b, c, "yes", l);
                    f ? (h = A("#hsx-rpp-finder"), h.removeClass("aok-hidden"), h.show(), r.metricsLogger.emitMetrics(r.config.metricsPrefix,
                        "Loaded", { stripeState: d.state("hsx-rpp-finder").stripeState })) : z(g.popoverName)
                }
            })
        }

        function e(a, b, c, f, e) {
            a = k(a, b, c);
            var g = u(b),
                l = u(c);
            d.state("hsx-rpp-finder", { selectedModel: g, displayModel: b, selectedSeries: l, displaySeries: c });
            b = d.state("hsx-rpp-finder");
            "yes" === f ? (w(a, f), d.state("hsx-rpp-finder", { stripeState: "result-found" }), "undefined" !== typeof e && "yes" === e && r.metricsLogger.emitMetrics(r.config.metricsPrefix, "FitmentRecordFound", { asin: b.asin, modelBrand: b.selectedBrand, modelNumber: g, series: l })) : (w(a,
                f), d.state("hsx-rpp-finder", { stripeState: "no-result" }), "undefined" !== typeof e && "yes" === e && r.metricsLogger.emitMetrics(r.config.metricsPrefix, "NoFitmentRecordFound", { asin: b.asin, modelBrand: b.selectedBrand, modelNumber: g, series: l }))
        }

        function w(a, b) {
            if ("yes" === b) { p.html(G.data("fitsmessage") + a + ".");
                var c = G;
                c.removeClass("aok-hidden");
                c.show() } else c = G, c.addClass("aok-hidden"), c.hide() }

        function k(a, b, c) {
            var f = "";
            m.isCurrentScopeInV2() ? (f = a + " ", c && "BASE" !== c && (f += c + " "), f += b) : (f = a + " " + b, c && "BASE" !== c &&
                (f += c));
            return f
        }

        function u(a) { a = a.toString().toUpperCase().trim();
            return a.replace(/\s+/g, " ") }

        function q(a) { a = a.toUpperCase();
            return a.replace(/[^A-Z0-9]+/g, "") }

        function y(a) {
            K && K.abort();
            a.useSpinner && v.show();
            K = d.ajax(a.url, {
                method: "get",
                success: function(c) {
                    if (a.success) a.success(c);
                    else {
                        var f = d.state("hsx-rpp-finder");
                        b.get(f.popoverName).update(c) }
                    a.useSpinner && v.hide() },
                error: function(c) {
                    r.metricsLogger.emitMetrics(r.config.metricsPrefix, "AjaxError");
                    a.error ? a.error(c) : a.useSpinner && (c = d.state("hsx-rpp-finder"),
                        b.get(c.popoverName).update(A("#hsx-rpp-error-message").html()));
                    a.useSpinner && v.hide()
                }
            })
        }

        function B() {
            for (var a = {}, b = t.location.search.substring(1).split("&"), c = 0; c < b.length; c++) {
                var f = b[c].split("=");
                if ("undefined" === typeof a[f[0]]) a[f[0]] = decodeURIComponent(f[1]);
                else if ("string" === typeof a[f[0]]) {
                    var e = [a[f[0]], decodeURIComponent(f[1])];
                    a[f[0]] = e } else a[f[0]].push(decodeURIComponent(f[1])) }
            b = {};
            a = a.rpp;
            if (!a) return b; - 1 === a.indexOf(":") && (a = decodeURIComponent(a));
            a = a.split(m.searchParameterConfig.prefix);
            if (1 === a.length) return b;
            a = a[1].split("|");
            3 < a.length && (c = a[0].split("^"), b.brand = c[0], b.normalizedBrand = c[1], c = a[1].split("^"), b.series = c[0], b.normalizedSeries = c[1], a = a[2].split("^"), b.model = a[0], b.normalizedModel = a[1]);
            return b
        }

        function z(a) { a = b.get(a);
            a.unlock();
            a.hide() }
        var A = d.$,
            G = A(".replacementPartsFitmentBullet"),
            p = A(".replacementPartsFitmentBulletInner"),
            N, r = {
                config: {
                    defaultBrandsLayout: "/gp/replacement-parts/ajax/mobile.html?ie=UTF8&qType=default-brands",
                    defaultModelsLayout: "/gp/replacement-parts/ajax/mobile.html?ie=UTF8&qType=default-models",
                    favoriteBrandsUrl: "/gp/replacement-parts/ajax/brand-list.html?ie=UTF8&deviceType=mobile",
                    brandSuggestUrl: "/gp/replacement-parts/ajax/smartbox-query.html?ie=UTF8&qType=brand&isMobileRequest=1",
                    combinedModelSuggestUrl: "/gp/replacement-parts/ajax/smartbox-query.html?ie=UTF8&qType=combinedSuggestion&isMobileRequest=1",
                    checkFitmentUrl: "/gp/replacement-parts/ajax/hsx-rpp-dp-ajax-handler.html?ie=UTF8&isMobileRequest=1",
                    modelnumberSeriesInfo: "/gp/replacement-parts/ajax/smartbox-query.html?ie=UTF8&qType=combinedSuggestion&isMobileRequest=1",
                    showAllPartsForModelReftag: "dp_rpp_stripe_showallparts_mobile",
                    metricsPrefix: "hsxRPPDetailPageStripe"
                }
            };
        d.on("a:popover:beforeShow:hsx-rpp-sec-view", function(a) { a = d.state("hsx-rpp-finder"); "enter-model" !== a.stripeState ? (a = d.state("hsx-rpp-finder"), y({ url: r.config.favoriteBrandsUrl + "&productType=" + a.scope + "&favorites=" + a.brands }), r.metricsLogger.emitMetrics(r.config.metricsPrefix, "CheckAnotherModel")) : r.metricsLogger.emitMetrics(r.config.metricsPrefix, "CustomerEngaged") });
        d.declarative("hsx-rpp-favorite-brand-selected",
            "click",
            function(a) {
                var b = d.state("hsx-rpp-finder");
                b && "search" === b.pageType || (b = a.$target.closest(".a-touch-link"), a = b.data("brand"), b = b.text().trim(), d.state("hsx-rpp-finder", { selectedBrand: a, displayBrand: b }), l(b, a), r.metricsLogger.emitMetrics(r.config.metricsPrefix, "FavoriteBrandSelected", { modelBrand: a })) });
        d.declarative("hsx-rpp-show-all-brands", "click", function(a) {
            a = d.state("hsx-rpp-finder");
            a && "search" === a.pageType || (y({ url: r.config.defaultBrandsLayout }), r.metricsLogger.emitMetrics(r.config.metricsPrefix,
                "OtherBrandSelected"), r.metricsLogger.emitMetrics(r.config.metricsPrefix, "ShowAllBrands"))
        });
        d.declarative("hsx-rpp-brand-autocomplete", "keyup", function(a) {
            var c = d.state("hsx-rpp-finder");
            c && "search" === c.pageType || (c = b.get(d.state("hsx-rpp-finder").popoverName).getContent(), a = a.$target.val(), a = a.trim(), "" !== a ? g(a) : c.find("#hsx-rpp-brand-results").html("")) });
        d.declarative("hsx-rpp-brand-selected", "click", function(a) {
            var b = d.state("hsx-rpp-finder");
            b && "search" === b.pageType || (b = a.$target.closest(".a-touch-link"),
                a = b.data("brand"), b = b.text().trim(), d.state("hsx-rpp-finder", { selectedBrand: a, displayBrand: b }), l(b, a), r.metricsLogger.emitMetrics(r.config.metricsPrefix, "BrandSelected", { modelBrand: a }))
        });
        d.declarative("hsx-rpp-see-all-link", "click", function() {
            var a = d.state("hsx-rpp-finder");
            if (!a || "search" !== a.pageType) {
                var b = "/s/ref=" + r.config.showAllPartsForModelReftag + "?node=" + a.browseNode,
                    b = b + ("&rpp=" + m.getEncodedParameter(a.displayBrand, a.selectedBrand, a.displayModel, a.selectedModel, a.displaySeries, a.selectedSeries));
                r.metricsLogger.emitMetrics(r.config.metricsPrefix, "SeeAllPartsThatFit", { modelNumber: a.selectedModel, modelBrand: a.selectedBrand, series: a.selectedSeries });
                t.location.assign(b)
            }
        });
        d.declarative("hsx-rpp-model-autocomplete", "keyup", function(a) {
            var f = b.get(d.state("hsx-rpp-finder").popoverName).getContent();
            a = a.$target.val();
            a = a.trim(); "" !== a ? c(a) : f.find("#hsx-rpp-model-results").html("") });
        d.declarative("hsx-rpp-model-selected", "click", function(a) {
            var b = d.state("hsx-rpp-finder");
            if ("search" !== b.pageType) {
                a =
                    a.$target.closest(".a-touch-link");
                var c = a.data("model"),
                    f = a.data("brand"),
                    g = a.data("series"),
                    l = f;
                b && b.displayBrand && (l = b.displayBrand);
                a = u(c);
                var f = q(f),
                    h = "BASE";
                g ? h = u(g) : g = "BASE";
                r.metricsLogger.emitMetrics(r.config.metricsPrefix, "CheckFitment", { asin: b.asin, modelBrand: f, modelNumber: c, series: g });
                y({
                    url: r.config.checkFitmentUrl + "&asin=" + b.asin + "&model=" + a + "&brand=" + f + "&series=" + h,
                    useSpinner: !0,
                    success: function(a) {
                        var f = A(a.template);
                        f.find(".hsx-rpp-model-info").html(k(l, c, g));
                        A("#hsx-rpp-finder").html(f);
                        a.payload && "no" === a.payload.fitment_decision ? e(l, c, g, "no", "yes") : e(l, c, g, "yes", "yes");
                        z(b.popoverName)
                    }
                })
            }
        });
        A(document).ready(function() {
            var a = d.state("hsx-rpp-finder");
            a && "search" !== a.pageType && (r.metricsLogger = h.createLogger(), a = B(), !A.isEmptyObject(a) && a.brand && a.model ? (d.state("hsx-rpp-finder", { selectedBrand: a.normalizedBrand, displayBrand: a.brand }), f(a.brand, a.model, a.series, !0)) : (d.state("hsx-rpp-finder", { stripeState: "enter-model" }), r.metricsLogger.emitMetrics(r.config.metricsPrefix, "Loaded", { stripeState: "enter-model" })))
        });
        var v = A('<div id="hsx-rpp-loading"><div id="hsx-rpp-spinner"></div></div>');
        v.hide();
        d.state("hsx-rpp-finder") && "search" !== d.state("hsx-rpp-finder").pageType && A("body").append(v);
        v.bind("touchmove touchstart touchend", function(a) { a.preventDefault() });
        A(t).bind("scroll", function(a) { v.offset({ top: t.scrollY, left: 0 }) });
        var K
    })
});
/* ******** */
(function(h) {
    var m = window.AmazonUIPageJS || window.P,
        q = m._namespace || m.attributeErrors,
        a = q ? q("HSXDetailPageFeaturesAssets") : m;
    a.guardFatal ? a.guardFatal(h)(a, window) : a.execute(function() { h(a, window) }) })(function(h, m, q) {
    h.when("jQuery", "A").execute(function(a, g) {
        g.on("a:popover:ajaxContentLoaded:g2s2SizeChartView", function(b) {
            function c(b) {
                return k + a.param({ asin: p, sizeChartDept: b, deviceType: n }) }

            function f() {
                var b = a("#sizechart_department_dropdown_native_select").children(":selected").attr("data-deptName"),
                    b = c(b);
                g(b)
            }

            function g(b) { a.ajax({ url: b, cache: !0, beforeSend: function() {
                        if (d.data(b) !== q) {
                            var a = d.data(b);
                            d.html(a);
                            return !1 }
                        d.addClass(m);
                        return !0 }, complete: function() { d.removeClass(m) }, success: function(a) { d.data(b, a);
                        d.html(a) } }) }

            function h(a) { g(a.data.rwAjaxSizeChartUrl) }
            b = a("#spinnerContainer");
            var e = a("#sizeChartSpinnerUrl").attr("data-sizechart-spinner-url");
            b.css("background-image", "url(" + e + ")");
            b = b.attr("data-showTab");
            e = a("#sizeChartHeight").attr("data-height");
            a(".heightG2S2SizeChartPC").css("height",
                e + "px");
            if ("true" === b) {
                var d = a("#tabContent"),
                    k = "/gp/product/ajax-handlers/apparel-sizing-chart.html/ref=dp_sizechart?ie=UTF8&isUDP=1&",
                    m = "loadingSpinnerSizeChart",
                    p = d.attr("data-asin"),
                    n = d.attr("data-deviceType");
                b = a("#dataForJs").attr("data-numberOfDepts");
                if ("false" === a("#dataForJs").attr("data-show-department-dropdown"))
                    for (e = 0; e < b; e++) {
                        var l = a("#dept" + e).attr("data-deptName"),
                            x = a("#dept" + e).attr("data-isActive"),
                            l = c(l);
                        "true" === x && d.data(l, d.html());
                        a("#dept" + e).click({ rwAjaxSizeChartUrl: l },
                            h)
                    } else a("#sizechart_department_dropdown_native_select").change(f), l = a("#sizechart_department_dropdown_native_select").children(":selected").attr("data-deptName"), l = c(l), d.data(l, d.html())
            }
        })
    });
    h.when("jQuery", "A", "cf").execute(function(a, g) {
        function b() {
            var a = g.viewport().height,
                b = a - e.heightBuffer;
            m && (a /= 2, b = a - a * e.popupHeightBufferPercent / 100);
            return Math.min(Math.max(b, e.minHeight), e.maxHeight) }

        function c() {
            var c = f.attr("data-header"),
                q = "data-" + h,
                p = f.attr("href"),
                n = b(),
                p = {
                    name: "g2s2SizeChartView",
                    url: p + "&height=" + n
                };
            m ? (c = g.viewport().width * e.widthPercent / 100, c = Math.min(Math.max(c, e.minWidth), e.maxWidth), a.extend(p, { width: c.toString(), position: "triggerBottom" })) : a.extend(p, { width: "800", header: c });
            c = JSON.stringify(p);
            d.attr(q, c)
        }
        var f = a("#size-chart-url"),
            h = f.attr("data-sizeChartActionType"),
            m = "a-popover" === h,
            e = { widthPercent: 70, minWidth: 300, maxWidth: 800, minHeight: 300, maxHeight: 700, popupHeightBufferPercent: 5, heightBuffer: 300 },
            d = a("#size-chart-popover");
        g.on("resize", function() {
            var c = a("#fit-guide"),
                e = b();
            if (0 === c.length) {
                if (0 < d.length) {
                    var c = d.data(h),
                        f = "",
                        n = c.url.split("?"),
                        l = n[0],
                        n = n[1],
                        m = "";
                    if (n)
                        for (var n = n.split("&"), q = n.length, t = 0; t < q; t++) "height" !== n[t].split("=")[0] && (f += m + n[t], m = "&");
                    c.url = l + "?" + f + (m + "height=" + e);
                    d.data(h, c) } } else g.capabilities.ios || c.height(e)
        });
        0 < d.length && c()
    })
});
/* ******** */
(function(b) {
    var c = window.AmazonUIPageJS || window.P,
        f = c._namespace || c.attributeErrors,
        a = f ? f("DigitalDashDetailPageAssets") : c;
    a.guardFatal ? a.guardFatal(b)(a, window) : a.execute(function() { b(a, window) }) })(function(b, c, f) {
    b.register("DigitalDashUtils", function() {
        return { redirect: function(a) {
                if (!a) throw "Must pass a target URL.";
                c.location.href = a } } });
    b.when("A", "DigitalDashCreateForm").register("DigitalDashAddListeners", function(a, b) {
        a.declarative("digital-dash-create", "click", function(a) {
            a.$event.preventDefault();
            var d;
            a.$target.data("DigitalDashCreateForm") ? d = a.$target.data("DigitalDashCreateForm") : (d = new b({ el: a.data.el, href: a.data.href }), a.$target.data("DigitalDashCreateForm", d));
            d.submit(a.data.data);
            return !1
        });
        a.on("digital-dash:auto-create", function(a) {
            (new b({ el: a.el, href: a.href })).submit(a.data) })
    });
    b.when("A", "DigitalDashUtils", "a-alert").register("DigitalDashCreateForm", function(a, g, h) {
        function d(a) {
            e.extend(this, c, a);
            if (!this.el) throw "Must specify an el";
            if (!this.href) throw "Must specify an href to post to";
            this.$el = e(this.el);
            this.$el.find(this.errorAlertSelector).removeClass("aok-hidden").end();
            this.$errorAlert = h(this.$el.find(this.errorAlertSelector));
            this.baseErrorText = this.$errorAlert.text();
            this.$changeover = this.$el.find(this.changeoverSelector)
        }
        var e = a.$,
            c = { errorAlertSelector: "#digital-dash-create-error-message", ajaxFieldName: "isAjax", changeoverSelector: "#digital-dash-create-success-changeover" };
        d.prototype.submit = function(b) {
            this.$el.removeClass("success").removeClass("error");
            b[this.ajaxFieldName] = !0;
            a.ajax(this.href, { method: "POST", params: b, success: e.proxy(this.handleAjaxSuccess, this), error: e.proxy(this.handleAjaxError, this) })
        };
        d.prototype.handleAjaxSuccess = function(a) { a.success || 510 === a.error.errorCode ? (this.$changeover.show(), this.$el.addClass("success")) : (a.error.errorTitle && this.$errorAlert.heading(a.error.errorTitle), a.error.errorMessage ? this.$errorAlert.text(a.error.errorMessage) : this.$errorAlert.text(this.baseErrorText), this.$el.addClass("error")) };
        d.prototype.handleAjaxError = function(a) {
            if (401 ===
                a.http.status) try {
                return g.redirect(a.http.responseText) } catch (d) { b.log("Error parsing unauth response: " + d, "ERROR", "DigitalDashCreateForm") } else b.log("Create dash button call failed, could not recognize response from server.", "FATAL", "DigitalDashCreateForm");
            this.$el.addClass("error")
        };
        return d
    });
    b.when("A", "DigitalDashAddListeners", "load").execute("DigitalDashAutoAction", function(a) {
        var b = a.state("digital-dash-auto-action");
        if (b) a.trigger(b.actionName, b.data);
        else a.on("a:state:update:digital-dash-auto-action",
            function(c) { c = a.state("digital-dash-auto-action");
                a.trigger(b.actionName, c.data) })
    });
    b.when("A", "a-popover", "ready").execute("DigitalDashPopoverManager", function(a, b) {
        var c = a.$,
            d = a.throttle(function(a) { a.updatePosition() }, 500, { trailing: !1 });
        a.on("a:popover:ajaxContentLoaded:dd-create-learn-more", function(a) {
            var b = a.popover;
            c(b.getContent()).find("img").each(function() { c(this).bind("load", function() { d(b) }) }) }) })
});
/* ******** */
(function(c) {
    var b = window.AmazonUIPageJS || window.P,
        d = b._namespace || b.attributeErrors,
        a = d ? d("DeeplinkAppTransitionMobileAssets") : b;
    a.guardFatal ? a.guardFatal(c)(a, window) : a.execute(function() { c(a, window) }) })(function(c, b, d) {});
/* ******** */
(function(c) {
    var e = window.AmazonUIPageJS || window.P,
        f = e._namespace || e.attributeErrors,
        b = f ? f("ProductAdsDetailPageAssetsMobile") : e;
    b.guardFatal ? b.guardFatal(c)(b, window) : b.execute(function() { c(b, window) }) })(function(c, e, f) {
    c.when("jQuery", "A", "a-carousel-framework").register("sponsored-products", function(b, e, f) {
        function h(a) {
            this.id = b(a).attr("id");
            this.carousel = f.getCarouselByName(this.id + "_carousel");
            if (void 0 !== this.carousel && null !== this.carousel) {
                this.allAsins = this.carousel.getAttr("initialSeenAsins");
                this.container = b(a).find(".a-carousel-viewport");
                this.contents = this.container.find(".a-carousel");
                this.item = this.container.find(".a-carousel-card");
                if (this.container.attr("sponsored-products-carousel-initialized")) return !1;
                this.container.attr("sponsored-products-carousel-initialized", !0);
                this.totalAds = this.carousel.getAttr("set_size");
                this.itemWidth = this.originalItemWidth = parseInt(this.item.css("width"), 10) + parseInt(this.item.css("marginLeft"), 10);
                this.carouselWidth = parseInt(this.container.children(":first").css("width"),
                    10);
                this.carouselSize = this.originalCarouselSize = this.contents.children().length;
                this.ajaxUrl = this.carousel.getAttr("ajax").url;
                this.hasAdditionalProducts && this.addLoadingAnimation();
                var g = this;
                this.container.bind("scroll.sponsored-products", function() { g.handleScroll() })
            }
        }
        h.prototype = {
            hasAdditionalProducts: function() {
                return this.carouselSize < this.totalAds },
            handleScroll: function() {
                if (!this.isLoadingProducts && this.hasAdditionalProducts()) {
                    var a = 3 * this.itemWidth,
                        b = this.container.scrollLeft();
                    this.carouselWidth -
                        this.container.innerWidth() - b <= a && this.loadAdditionalProducts()
                }
            },
            loadAdditionalProducts: function() {
                this.isLoadingProducts = !0;
                void 0 === this.carouselIndex ? this.carouselIndex = 2 : this.carouselIndex++;
                var a = this.carousel.getAttr("ajax").params,
                    g = "[" + this.allAsins + "]";
                a.pg = this.carouselIndex;
                a.tot = this.totalAds;
                a.wName = this.carousel.getAttr("ajax").params.wName;
                a.num = Math.min(this.originalCarouselSize, this.totalAds - this.carouselSize);
                a.start = this.carouselIndex * a.num;
                a.cc = a.start;
                a.oData = g;
                var d = this;
                b.ajax({
                    url: this.ajaxUrl,
                    data: a,
                    success: function(a) { d.handleAjaxComplete(a) },
                    error: function() { d.handleAjaxComplete() }
                })
            },
            handleAjaxComplete: function(a) {
                if (void 0 !== a && null !== a && void 0 !== a.data && null !== a.data) {
                    a = a.data;
                    this.carouselWidth += a.length * this.originalItemWidth;
                    this.contents.width(this.carouselWidth);
                    this.carouselSize += a.length;
                    for (var g = (this.carouselIndex - 1) * this.originalCarouselSize, d = 0; d < a.length; d++) {
                        this.allAsins += ',"' + a[d].oid + '"';
                        var c = this.item[0].cloneNode();
                        c.innerHTML = a[d].content;
                        c.setAttribute("aria-posinset",
                            g + d + 1);
                        this.contents.children().eq(-2).after(c)
                    }
                    e.loadImageManually(b("#" + this.id + " .carousel-sp-img-manual-load"));
                    this.hasAdditionalProducts() || (this.removeLoadingAnimation(), this.container.unbind("scroll.sponsored-products"))
                }
                this.isLoadingProducts = !1
            },
            addLoadingAnimation: function() {
                this.contents.width(this.carouselWidth + this.itemWidth);
                this.loadingAnimation = this.item[0].cloneNode();
                var a = this.item.css("width"),
                    b = this.item.css("height");
                this.loadingAnimation.innerHTML = "\x3cspan class\x3d'a-spinner a-spinner-medium' style\x3d'width:" +
                    a + ";height:" + b + ";'\x3e\x3c/span\x3e";
                this.contents.append(this.loadingAnimation)
            },
            removeLoadingAnimation: function() { this.loadingAnimation && b(this.loadingAnimation).remove() }
        };
        c.when("afterReady").execute("sponsored-products:init", function() { b(".sponsored-products-detail-mobile").each(function(a, b) { new h(b) }) });
        return h
    })
});
/* ******** */
(function(k) {
    var h = window.AmazonUIPageJS || window.P,
        l = h._namespace || h.attributeErrors,
        e = l ? l("DetailPageAGSAssets") : h;
    e.guardFatal ? e.guardFatal(k)(e, window) : e.execute(function() { k(e, window) }) })(function(k, h, l) {
    k.when("A", "a-popover", "a-tooltip", "jQuery", "ready").register("ags-mt-lib", function(e, k, t, f) {
        var g = h.ue,
            l = h.uet,
            v = h.uex,
            m = { dataUrl: "/gp/global-store/mt/ajax/get-mt-data.html", popoverTriggerEvent: "mouseenter" },
            q = { shown: {}, scheduled: {} },
            w = !1,
            E = e.capabilities.localStorage,
            F = !!(JSON && JSON.parse &&
                JSON.stringify),
            x = !1,
            y = !1,
            p = {},
            z = !1,
            A = !1,
            G = function(a, c) {
                var b = "a:popover:hide:" + a;
                e.on(b, function(n) { t.remove(a);
                    B(c, !1);
                    e.off(b) });
                var d = "#" + c + "-badge";
                f(document).delegate(d, m.popoverTriggerEvent, function() {
                    var b = t.get(a);
                    b && b.hide();
                    f(document).undelegate(d, m.popoverTriggerEvent) }) },
            H = function(a, c) {
                var b = (new Date).getTime() - 864E5,
                    d = 0,
                    n = "#" + c;
                e.on("a:popover:beforeShow:" + c, function() { d = (new Date).getTime() });
                e.on("a:popover:beforeHide:" + c, function() { b = (new Date).getTime() });
                f(document).delegate(a,
                    "click",
                    function(a) {
                        var e = k.get(f(n)),
                            g = (new Date).getTime();
                        e && (b > d ? 500 < g - b && e.show() : a.target.id === c && 500 < g - b && e.hide());
                        a.preventDefault() })
            },
            B = function(a, c) {
                var b = f("#" + a);!b.length || c && t.get(b) || k.get(b) || k.create(b, { inlineContent: '<span class="a-spinner a-spinner-medium"></span>', name: a }) },
            I = function(a, c) {
                var b = !1,
                    d = m.metricSuffix || "";
                f("#" + a).length && g && g.count && g.count("AGSMT.SHOWBADGE." + c + d, 1);
                e.on("a:popover:show:" + a, function(a) {!b && g && g.count && (g.count("AGSMT.SHOWPOPOVER." + c + d, 1), b = !0) });
                e.on("a:popover:hide:" + a, function() {
                    if (!A && g && g.count) {
                        var b = k.get(f("#" + a));
                        r(b) && (g.count("AGSMT.CONTENTSHOWN" + d, 1), A = !0) } })
            },
            u = function(a, c) { this.asin = a;
                this.dataUrl = c };
        f.extend(u.prototype, {
            _cache: {},
            _callbackQueue: [],
            _fetched: !1,
            _fetching: !1,
            _retry: 2,
            _logFetchError: function() {
                if (!z) {
                    var a = m.metricSuffix || "";
                    g && g.count && (g.count("AGSMT.FETCHDATAERROR" + a, 1), z = !0) } },
            _ajaxMetricScope: function() {
                return ("agsmtdata" + (2 - this._retry) + (m.metricSuffix || "")).toLowerCase() },
            _logFetchLatencyStart: function() {
                g &&
                    "function" === typeof l && l("bb", this._ajaxMetricScope(), { wb: 1 })
            },
            _logFetchLatencyEnd: function() { g && "function" === typeof v && v("ld", this._ajaxMetricScope(), { wb: 1 }) },
            get: function(a, c) { this._fetched ? c(this._cache[a]) : (this._callbackQueue.push(function(b) { c(b[a]) }), this._fetching || this.fetch()) },
            fetch: function() {
                var a = this;
                a._fetching || 0 > a._retry || (a._logFetchLatencyStart(), a._fetching = !0, e.get(a.dataUrl, {
                    cache: !0,
                    accepts: "text/json",
                    params: f.extend({ asin: a.asin }, m.dataUrlQuery),
                    success: function(c) {
                        a._fetching = !1;
                        if (c && c.translatedFeatures)
                            for (a._logFetchLatencyEnd(), a._fetched = !0, f.extend(a._cache, c.translatedFeatures); a._callbackQueue.length;) a._callbackQueue.shift()(a._cache);
                        else a._logFetchError(), a._retry--
                    },
                    abort: function() { a._logFetchError();
                        a._fetching = !1;
                        a._retry-- },
                    error: function() { a._logFetchError();
                        a._fetching = !1;
                        a._retry-- }
                }))
            },
            fetched: function() {
                return this._fetched }
        });
        var r = function(a) {
                return a && (a = a.getContent()) ? 0 === a.find(".a-spinner").length : !1 },
            J = function(a, c) {
                var b = k.get(f("#" + a));
                if (b && !r(b)) {
                    var d = f("#" + a + "-badge").data("asin");
                    p[d] || (p[d] = new u(d, m.dataUrl));
                    p[d].get(c, function(a) { a && (r(b) || b && b.update({ inlineContent: a })) }) }
            },
            K = function(a, c) { e.on("a:popover:beforeShow:" + a, function() { J(a, c) }) },
            L = function() { f.map(m.elements, function(a, c) {
                    var b = f("#" + a.popoverName + "-badge").data("asin");
                    b && (p[b] || (p[b] = new u(b, m.dataUrl)), p[b].fetched() || p[b].fetch()) }) },
            C = function(a, c) {
                if (!q.shown[a] && c.length) {
                    var b = c.offset().top,
                        d = b + c.outerHeight(),
                        n = f(h).scrollTop();
                    if (n + f(h).height() >
                        d && n < b) return !0
                }
                return !1
            },
            D = function(a, c) { c && (c.show(), q.shown[a] = !0, setTimeout(function() { c.hide() }, 5E3)) },
            M = function(a, c) {
                var b = f("#" + c);
                if (b.length) {
                    var d = t.get(b);
                    d && (C(a, b) ? D(a, d) : q.scheduled[a] || (f(h).bind("scroll." + a, function() {
                        var b = f("#" + c),
                            d = t.get(b);
                        C(a, b) && (D(a, d), f(h).unbind("scroll." + a)) }), q.scheduled[a] = !0)) } },
            N = function(a, c) {
                var b = m.metricSuffix || "",
                    d = {},
                    n = 0;
                try { d = JSON.parse(localStorage.getItem("ags-ls-ns")) } catch (e) {
                    h.SyntaxError && e instanceof SyntaxError || g && g.count && g.count("AGSMT.LOCALSTORAGEERROR" +
                        b, 1), d = {}
                }
                d && "object" === typeof d ? d["ags-mt-tooltip-load-number"] && (n = parseInt(d["ags-mt-tooltip-load-number"], 10), n = 0 <= n ? n : 0) : d = {};
                if (6 > n && (w || (w = !0, f.map(a, function(a, b) { G(a.tooltipName, a.popoverName) })), f.map(a, function(a, b) {
                        if (!q.shown[a.tooltipName]) {
                            var d = a.tooltipName,
                                n = f("#" + a.popoverName);
                            n.length && (k.get(n) || t.get(n) || t.create(n, { name: d, inlineContent: c }));
                            M(a.tooltipName, a.popoverName) } }), !x)) {
                    x = !0;
                    n++;
                    d["ags-mt-tooltip-load-number"] = n;
                    try { localStorage.setItem("ags-ls-ns", JSON.stringify(d)) } catch (p) {
                        g &&
                            g.count && g.count("AGSMT.LOCALSTORAGEERROR" + b, 1)
                    }
                }
            };
        return {
            initPopover: function(a) {
                var c = e.state("agsMTState");
                if (c) {
                    var b = a.elements;
                    if (b && b.length && 0 < f(".agsMT-popover").length) {
                        y || (y = !0, f.extend(m, a), f.map(b, function(a, b) { a.externalTriggerSelector && H(a.externalTriggerSelector, a.popoverName);
                            I(a.popoverName, a.featureName.toUpperCase());
                            K(a.popoverName, a.featureName) }));
                        var d = E && F && "true" === c.showTooltip;
                        d && N(b, c.tooltipContent);
                        f.map(b, function(a, b) {
                            B(a.popoverName, d);
                            a.externalTriggerSelector &&
                                e.capabilities.touch && f(a.externalTriggerSelector).css("cursor", "pointer")
                        });
                        a.prefetch && L()
                    }
                }
            }
        }
    });
    k.when("A", "a-popover", "a-tooltip", "ags-mt-lib", "jQuery", "ready").execute(function(e, h, k, f, g) {
        var l = {
            elements: [{ featureName: "title", popoverName: "ags-mt-popover-title", tooltipName: "ags-mt-tooltip-title", externalTriggerSelector: "#title" }, { featureName: "productdescription", popoverName: "ags-mt-popover-productdescription", tooltipName: "ags-mt-tooltip-productdescription", externalTriggerSelector: "#aboutThisItem_feature_div .a-box-title" }],
            metricSuffix: ".MOBILE",
            dataUrlQuery: { dt: "mobile" },
            popoverTriggerEvent: "click",
            prefetch: !0
        };
        f.initPopover(l);
        e.on("a:pageUpdate", function() { f.initPopover(l) })
    })
});
/* ******** */
(function(c) {
    var d = window.AmazonUIPageJS || window.P,
        b = d._namespace || d.attributeErrors,
        a = b ? b("DetailPageWarrantyInformationAssets") : d;
    a.guardFatal ? a.guardFatal(c)(a, window) : a.execute(function() { c(a, window) }) })(function(c, d, b) {});
/* ******** */
(function(q) {
    var l = window.AmazonUIPageJS || window.P,
        h = l._namespace || l.attributeErrors,
        e = h ? h("BoostFeatureRankAssets") : l;
    e.guardFatal ? e.guardFatal(q)(e, window) : e.execute(function() { q(e, window) }) })(function(q, l, h) {});
/* ******** */
(function(c) {
    var b = window.AmazonUIPageJS || window.P,
        d = b._namespace || b.attributeErrors,
        a = d ? d("DetailPageMobileIconFarmAssets") : b;
    a.guardFatal ? a.guardFatal(c)(a, window) : a.execute(function() { c(a, window) }) })(function(c, b, d) {});
/* ******** */
(function(e) {
    var f = window.AmazonUIPageJS || window.P,
        g = f._namespace || f.attributeErrors,
        a = g ? g("DetailPageCReturnsAssets") : f;
    a.guardFatal ? a.guardFatal(e)(a, window) : a.execute(function() { e(a, window) }) })(function(e, f, g) {
    e.when("A").register("creturns-common-utils", function(a) {
        return {
            isNotEmpty: function(b) {
                return "undefined" !== a.$.type(b) && "null" !== a.$.type(b) && 0 < b.length },
            isShippingContentTooLong: function(b, d) {
                var a = !1;
                this.isNotEmpty(d) && this.isNotEmpty(b) && (a = 140 < b.offset().left - (d.offset().left + d.width()));
                return a
            },
            isShippingContentNotPresentInThisLine: function(b, a) {
                var c = !1;
                this.isNotEmpty(a) && this.isNotEmpty(b) && (c = 5 > b.offset().left - a.offset().left);
                return c },
            areInTheSameLine: function(b, a) {
                var c = !1;
                this.isNotEmpty(a) && this.isNotEmpty(b) && (c = a.offset().top + a.height() > b.offset().top);
                return c },
            incrementMetricsForKey: function(b) {
                return function() {
                    var a = f.ue;
                    a && a.count && a.count(b, (a.count(b) || 0) + 1) } },
            hideReturnPolicySeparator: function() {
                var b = a.$("#creturns-return-policy-separator");
                this.isNotEmpty(b) &&
                    b.hide()
            },
            enableReturnPolicyLineBreak: function() {
                var b = a.$("#creturns-return-policy-linebreak");
                this.isNotEmpty(b) && (b.removeClass("a-hidden"), b.addClass("a-block")) }
        }
    });
    "use strict";
    e.when("A", "creturns-common-utils", "atf", "ready").execute(function(a, b) {
        function d() {
            var c = a.$("#creturns-return-policy-content"),
                d = a.$("#priceblock_ourprice");
            b.isNotEmpty(c) && b.isNotEmpty(d) && (b.isShippingContentTooLong(c, d) || b.isShippingContentNotPresentInThisLine(c, d)) && (b.hideReturnPolicySeparator(), b.enableReturnPolicyLineBreak()) }
        var c = a.$("#creturns-return-policy-content");
        b.isNotEmpty(c) && (a.on("a:sheet:afterShow:creturnsPolicySheet", b.incrementMetricsForKey("cReturnsPolicy.mobile")), a.on("a:pageUpdate", d), d())
    })
});
/* ******** */
(function(c) {
    var b = window.AmazonUIPageJS || window.P,
        d = b._namespace || b.attributeErrors,
        a = d ? d("AmazonCertifiedDetailPageAssets") : b;
    a.guardFatal ? a.guardFatal(c)(a, window) : a.execute(function() { c(a, window) }) })(function(c, b, d) {});
/* ******** */
(function(c) {
    var d = window.AmazonUIPageJS || window.P,
        e = d._namespace || d.attributeErrors,
        b = e ? e("ProductBundleUIAssets") : d;
    b.guardFatal ? b.guardFatal(c)(b, window) : b.execute(function() { c(b, window) }) })(function(c, d, e) {});
/* ******** */
(function(c) {
    var g = window.AmazonUIPageJS || window.P,
        h = g._namespace || g.attributeErrors,
        a = h ? h("SmartShelfAssets") : g;
    a.guardFatal ? a.guardFatal(c)(a, window) : a.execute(function() { c(a, window) }) })(function(c, g, h) {
    c.when("A", "ready").register("smart-shelf-mobile", function(a) {
        function c(b) {
            var a = { clientName: "SmartShelf", ASIN: b.find("input[name='a']").val(), offeringListingID: b.find("input[name='oid']").val(), verificationSessionID: b.find("input[name='verificationSessionID']").val(), quantity: b.find("input[name='quantity']").val() };
            b.find("#mbb-checkbox-input") && b.find("#mbb-checkbox-input").prop("checked") && (a["ASIN.warranty"] = b.find("#mbb-checkbox-input").val(), a["offeringListingID.warranty"] = b.find("#mbb-offering-id").val(), a["quantity.warranty"] = b.find("#mbb-quantity").val());
            b.find("#freeSampleAsin-cart") && b.find("#freeSampleAsin-cart").val() && "" !== b.find("#freeSampleAsin-cart").val() && (a["ASIN.sample"] = b.find("#freeSampleAsin-cart").val(), a["offeringListingID.sample"] = b.find("#freeSampleOfferingListingID-cart").val(),
                a["quantity.sample"] = b.find("#freeSampleOfferQuantity-cart").val());
            return a
        }
        var d = !1,
            e = function() { d || (d = !0, a.$("#ccxsmartShelfMobileWrapper").hide(), a.$("#ccxsmartShelfMobileWrapper").removeClass("aok-hidden"), a.slideDown(a.$("#ccxsmartShelfMobileWrapper"), 1E3, "ease-out", function() { a.$("#add-to-cart-button").unbind("click", e) }), a.$("html, body").animate({ scrollTop: a.$("#ccxsmartShelfMobileWrapper").offset().top - 10 }, 1E3)) },
            f = function(b) {
                var k = a.$(this),
                    d = function() { k.unbind("submit", f);
                        k.submit() };
                a.post("/gp/add-to-cart/json", { params: c(k), success: function(a) { a && a.isOK ? (e(), g.$Nav.when("api.setCartCount").run(function(b) { b(a.cartQuantity) }), k.unbind("submit", f)) : d() }, error: d });
                b.preventDefault()
            };
        return { init: function(b) { "mobileApp" === b ? a.$("#add-to-cart-button").bind("click", e) : a.$("#add-to-cart-button").bind("click", function() { d || a.$("#addToCart").bind("submit", f) }) } }
    });
    c.when("A", "ready").register("smart-shelf-mobile-trigger", function(a) {
        var c = !1,
            d = 0,
            e, f = function() { d++;
                3 > d && b() },
            b = function() {
                c ||
                    a.$.ajax({ timeout: 5E3, url: "/gp/aw/smartshelf/utility/trigger/?device=" + e, success: function(a, b, d) {
                            if (a && a !== h && "" !== a.trim()) try {
                                var e = JSON.parse(a.trim());
                                c = "T1" === e.treatment || "C" === e.treatment } catch (g) { f() }
                            c || f() }, error: function(a, b, c) { f() } })
            };
        return { init: function(c) { e = c;
                a.$("#add-to-cart-button").click(b) } }
    })
});
/* ******** */
(function(h) {
    var e = window.AmazonUIPageJS || window.P,
        k = e._namespace || e.attributeErrors,
        b = k ? k("QTipsWebLibrary") : e;
    b.guardFatal ? b.guardFatal(h)(b, window) : b.execute(function() { h(b, window) }) })(function(h, e, k) {});
(function(h) {
    var e = window.AmazonUIPageJS || window.P,
        k = e._namespace || e.attributeErrors,
        b = k ? k("QTipsMobileWebAssets") : e;
    b.guardFatal ? b.guardFatal(h)(b, window) : b.execute(function() { h(b, window) }) })(function(h, e, k) {});
/* ******** */
